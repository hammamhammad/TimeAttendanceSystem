<!-- Loading State -->
@if (loading()) {
  <app-loading-spinner [message]="i18n.t('common.loading')"></app-loading-spinner>
}

<!-- Error State -->
@if (error() && !loading()) {
  <div class="alert alert-danger">
    <i class="bi bi-exclamation-triangle me-2"></i>
    {{ error() }}
    <button class="btn btn-sm btn-outline-danger ms-3" (click)="onBack()" type="button">
      {{ i18n.t('common.back') }}
    </button>
  </div>
}

<!-- Details View -->
@if (vacation() && !loading() && !error()) {
  <div class="vacation-details">
    <!-- Page Header -->
    <app-page-header [title]="i18n.t('portal.vacation_details')">
      <div header-actions>
        @if (canEdit()) {
          <button
            class="btn btn-primary btn-sm me-2"
            (click)="onEdit()"
            type="button">
            <i class="bi bi-pencil me-1"></i>
            {{ i18n.t('common.edit') }}
          </button>
        }
        @if (canDelete()) {
          <button
            class="btn btn-danger btn-sm me-2"
            (click)="onDelete()"
            type="button">
            <i class="bi bi-trash me-1"></i>
            {{ i18n.t('common.delete') }}
          </button>
        }
        <button
          class="btn btn-outline-secondary btn-sm"
          (click)="onBack()"
          type="button">
          <i class="bi bi-arrow-left me-1"></i>
          {{ i18n.t('common.back') }}
        </button>
      </div>
    </app-page-header>

    <!-- Status Badge -->
    <div class="status-section mb-4">
      <label class="status-label">{{ i18n.t('portal.status') }}</label>
      <app-status-badge
        [status]="statusBadge().label"
        [variant]="statusBadge().variant">
      </app-status-badge>
    </div>

    <!-- Request Details Card -->
    <app-detail-card [title]="i18n.t('portal.request_details')">
      <app-definition-list
        [items]="basicInfoItems()"
        [labelWidth]="'4'"
        [valueWidth]="'8'">
      </app-definition-list>
    </app-detail-card>

    <!-- Submission Information Card -->
    <app-detail-card
      [title]="i18n.t('portal.submission_information')"
      class="mt-3">
      <app-definition-list
        [items]="submissionInfoItems()"
        [labelWidth]="'4'"
        [valueWidth]="'8'">
      </app-definition-list>
    </app-detail-card>

    <!-- Status Information -->
    @if (vacation()!.isApproved && vacation()!.isCurrentlyActive) {
      <div class="alert alert-info mt-3">
        <i class="bi bi-sun me-2"></i>
        {{ i18n.t('portal.vacation_active_message') }}
      </div>
    } @else if (vacation()!.isApproved && vacation()!.isUpcoming) {
      <div class="alert alert-success mt-3">
        <i class="bi bi-check-circle me-2"></i>
        {{ i18n.t('portal.vacation_approved_message') }}
      </div>
    } @else if (vacation()!.isApproved && vacation()!.isCompleted) {
      <div class="alert alert-secondary mt-3">
        <i class="bi bi-check me-2"></i>
        {{ i18n.t('portal.vacation_completed_message') }}
      </div>
    } @else if (!vacation()!.isApproved) {
      <div class="alert alert-warning mt-3">
        <i class="bi bi-clock me-2"></i>
        {{ i18n.t('portal.vacation_pending_message') }}
      </div>
    }
  </div>
}
