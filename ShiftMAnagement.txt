Shift Management – Business Rules
1. Shift Definition

1.1 Each Shift must have a unique name within a branch.
1.2 A shift includes:

Name (string, required, unique per branch)

Description (optional)

Start Time (hh:mm, required if shift is time-based)

End Time (hh:mm, required if shift is time-based)

Total Hours (calculated, not manually entered, unless shift is “hours-only”)

1.3 Total Hours = difference between End Time and Start Time minus breaks (if defined), unless “hours-only” mode is enabled (see Rule 7).

2. Flexible Hours & Grace Period

2.1 A shift may allow Flexible Hours, meaning employees may check in/out within a defined band instead of strict start/end.
2.2 A shift may define a Grace Period (in minutes) for check-in:

If employee checks in within grace period → no lateness recorded.

Beyond grace period → lateness applies.
2.3 Flexible hours and grace period can be combined.

3. Night Shifts

3.1 If End Time is earlier than Start Time, the shift is automatically considered a Night Shift spanning midnight.
3.2 Reporting must calculate attendance across two calendar days.

4. Check-In/Out Rules

4.1 Shifts can define whether Check-In is required:

If required → absence flagged if no check-in.
4.2 Shifts can define whether Check-Out is automatic:

If automatic → system calculates end time = shift’s configured End Time.

Manual check-out overrides auto-check-out if present.
4.3 Flexible/grace rules apply to check-in only; check-out is either required or auto as defined.

5. Hours-Only Shifts

5.1 A shift can be defined as “Hours per Day” (no fixed start/end).

Example: 8 hours/day required, regardless of when employee checks in/out.
5.2 In this mode:

No fixed Start Time or End Time stored.

System calculates compliance by summing worked hours in the day.

Grace/flex rules do not apply (since no anchor time).

6. Multi-Period Shifts

6.1 A shift may contain up to two working periods per day (e.g., morning + evening).
6.2 For each period, store Start Time and End Time.
6.3 Total Hours = sum of both periods.
6.4 Attendance is valid only if employee checks in/out for both periods (unless check-out is auto).

7. Calculation Rules

7.1 Total Hours auto-calculated on save/update:

Single-period: End - Start

Two-period: (End1 - Start1) + (End2 - Start2)
7.2 For Night Shifts, calculation spans midnight.
7.3 For Hours-Only shifts, admin sets RequiredHours directly.

8. Validation Rules

A shift must define either (Start/End times) or (Hours per day).

If two periods are defined, both must be valid ranges (Start < End for each period; Night period allowed across midnight).

Grace Period/Flexible Hours only valid for time-based shifts (not hours-only).

Check-In Required and Auto Check-Out options cannot conflict (e.g., both disabled).

9. Compliance & Exceptions

If Flexible Hours is enabled, employee check-in can be anytime within window = Start Time – FlexBefore to Start Time + FlexAfter.

Grace period only exempts lateness; does not extend shift end time.

Auto Check-Out always defaults to system End Time, unless overridden by actual check-out.

10. Audit & History

Any changes to shift definition must be audited (who changed, when, old vs new values).

Attendance recalculation required if shift rules change retroactively.

✅ With these business rules, you can now:

Generate your DB schema (Shifts, ShiftPeriods, ShiftOptions),

Build API validations,

Implement frontend forms with brief field descriptions (e.g., “Grace Period (minutes) – Allowed lateness without penalty”).