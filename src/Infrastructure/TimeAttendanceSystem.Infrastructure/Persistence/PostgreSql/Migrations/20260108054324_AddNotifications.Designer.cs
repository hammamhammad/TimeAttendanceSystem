// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using TimeAttendanceSystem.Infrastructure.Persistence;

#nullable disable

namespace TimeAttendanceSystem.Infrastructure.Persistence.PostgreSql.Migrations
{
    [DbContext(typeof(TimeAttendanceDbContext))]
    [Migration("20260108054324_AddNotifications")]
    partial class AddNotifications
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.0")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.AttendanceRecord", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime?>("ActualCheckInTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ActualCheckOutTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ApprovedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("ApprovedByUserId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("AttendanceDate")
                        .HasColumnType("date");

                    b.Property<decimal>("BreakHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("EarlyLeaveMinutes")
                        .HasColumnType("integer");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<bool>("IsApproved")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsFinalized")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsManualOverride")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<int>("LateMinutes")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime?>("OverrideAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("OverrideByUserId")
                        .HasColumnType("bigint");

                    b.Property<string>("OverrideNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal>("OvertimeAmount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("decimal(10,2)")
                        .HasDefaultValue(0m);

                    b.Property<string>("OvertimeCalculationNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<long?>("OvertimeConfigurationId")
                        .HasColumnType("bigint");

                    b.Property<int>("OvertimeDayType")
                        .HasColumnType("integer");

                    b.Property<decimal>("OvertimeHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("OvertimeRate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("decimal(4,2)")
                        .HasDefaultValue(0m);

                    b.Property<decimal>("PostShiftOvertimeHours")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("decimal(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<decimal>("PreShiftOvertimeHours")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("decimal(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<long?>("RemoteWorkRequestId")
                        .HasColumnType("bigint");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<TimeOnly?>("ScheduledEndTime")
                        .HasColumnType("time");

                    b.Property<decimal>("ScheduledHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<TimeOnly?>("ScheduledStartTime")
                        .HasColumnType("time");

                    b.Property<long?>("ShiftAssignmentId")
                        .HasColumnType("bigint");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<int>("WorkLocation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<decimal>("WorkingHours")
                        .HasColumnType("decimal(5,2)");

                    b.HasKey("Id");

                    b.HasIndex("AttendanceDate")
                        .HasDatabaseName("IX_AttendanceRecords_AttendanceDate");

                    b.HasIndex("OvertimeConfigurationId")
                        .HasDatabaseName("IX_AttendanceRecords_OvertimeConfiguration");

                    b.HasIndex("OvertimeDayType")
                        .HasDatabaseName("IX_AttendanceRecords_OvertimeDayType");

                    b.HasIndex("RemoteWorkRequestId")
                        .HasDatabaseName("IX_AttendanceRecords_RemoteWorkRequest");

                    b.HasIndex("ShiftAssignmentId");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_AttendanceRecords_Status");

                    b.HasIndex("WorkLocation")
                        .HasDatabaseName("IX_AttendanceRecords_WorkLocation");

                    b.HasIndex("EmployeeId", "AttendanceDate")
                        .IsUnique()
                        .HasDatabaseName("IX_AttendanceRecords_Employee_Date");

                    b.HasIndex("IsApproved", "IsFinalized")
                        .HasDatabaseName("IX_AttendanceRecords_Approval_Status");

                    b.ToTable("AttendanceRecords", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.AttendanceTransaction", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("AttendanceDate")
                        .HasColumnType("date");

                    b.Property<long?>("AttendanceRecordId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("DeviceId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<long?>("EnteredByUserId")
                        .HasColumnType("bigint");

                    b.Property<string>("IpAddress")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsManual")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsVerified")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("Location")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<DateTime>("TransactionTimeLocal")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("TransactionTimeUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("TransactionType")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("VerifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("VerifiedByUserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("AttendanceDate")
                        .HasDatabaseName("IX_AttendanceTransactions_AttendanceDate");

                    b.HasIndex("AttendanceRecordId");

                    b.HasIndex("DeviceId")
                        .HasDatabaseName("IX_AttendanceTransactions_DeviceId");

                    b.HasIndex("EnteredByUserId");

                    b.HasIndex("IsManual")
                        .HasDatabaseName("IX_AttendanceTransactions_IsManual");

                    b.HasIndex("IsVerified")
                        .HasDatabaseName("IX_AttendanceTransactions_IsVerified");

                    b.HasIndex("TransactionType")
                        .HasDatabaseName("IX_AttendanceTransactions_TransactionType");

                    b.HasIndex("VerifiedByUserId");

                    b.HasIndex("EmployeeId", "AttendanceDate", "TransactionTimeUtc")
                        .HasDatabaseName("IX_AttendanceTransactions_Employee_Date_Time");

                    b.ToTable("AttendanceTransactions", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.WorkingDay", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("AttendanceRecordId")
                        .HasColumnType("bigint");

                    b.Property<int>("BreakPeriodCount")
                        .HasColumnType("integer");

                    b.Property<string>("CalculationNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<bool>("CoreHoursCompliant")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<decimal>("CoreHoursWorked")
                        .HasColumnType("decimal(5,2)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<decimal>("EarlyStartHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("EfficiencyPercentage")
                        .HasColumnType("decimal(5,2)");

                    b.Property<bool>("IsCalculationComplete")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<decimal>("LateEndHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("LongestBreakDuration")
                        .HasColumnType("decimal(5,2)");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<decimal>("PremiumOvertimeHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("ProductiveWorkingTime")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("RegularOvertimeHours")
                        .HasColumnType("decimal(5,2)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<decimal>("TotalBreakTime")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("TotalTimeOnPremises")
                        .HasColumnType("decimal(5,2)");

                    b.Property<decimal>("TrackingGaps")
                        .HasColumnType("decimal(5,2)");

                    b.Property<DateTime?>("WorkEndTime")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("WorkStartTime")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AttendanceRecordId")
                        .IsUnique()
                        .HasDatabaseName("IX_WorkingDays_AttendanceRecordId");

                    b.HasIndex("CoreHoursCompliant")
                        .HasDatabaseName("IX_WorkingDays_CoreHoursCompliant");

                    b.HasIndex("IsCalculationComplete")
                        .HasDatabaseName("IX_WorkingDays_IsCalculationComplete");

                    b.ToTable("WorkingDays", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Branches.Branch", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<string>("TimeZone")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("Code")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Branches", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Branches.Department", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("BranchId")
                        .HasColumnType("bigint");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CostCenter")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("DescriptionAr")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Email")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Location")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<long?>("ManagerEmployeeId")
                        .HasColumnType("bigint");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("NameAr")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<long?>("ParentDepartmentId")
                        .HasColumnType("bigint");

                    b.Property<string>("Phone")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<int>("SortOrder")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("ManagerEmployeeId")
                        .HasDatabaseName("IX_Departments_ManagerEmployeeId");

                    b.HasIndex("ParentDepartmentId")
                        .HasDatabaseName("IX_Departments_ParentDepartmentId");

                    b.HasIndex("BranchId", "Code")
                        .IsUnique()
                        .HasDatabaseName("IX_Departments_BranchId_Code");

                    b.HasIndex("BranchId", "IsActive", "SortOrder")
                        .HasDatabaseName("IX_Departments_BranchId_IsActive_SortOrder");

                    b.ToTable("Departments", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Common.AuditChange", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("AuditLogId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FieldName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("NewValue")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("OldValue")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.HasKey("Id");

                    b.HasIndex("AuditLogId");

                    b.HasIndex("FieldName");

                    b.ToTable("AuditChanges", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Common.AuditLog", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<int>("Action")
                        .HasColumnType("integer");

                    b.Property<long?>("ActorUserId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("EntityId")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("EntityName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("IpAddress")
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("PayloadJson")
                        .HasColumnType("text");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.HasKey("Id");

                    b.HasIndex("ActorUserId");

                    b.HasIndex("CreatedAtUtc");

                    b.HasIndex("EntityName");

                    b.ToTable("AuditLogs", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Employees.Employee", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("BranchId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("DateOfBirth")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("DepartmentId")
                        .HasColumnType("bigint");

                    b.Property<long?>("DepartmentId1")
                        .HasColumnType("bigint");

                    b.Property<string>("Email")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("EmployeeNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int>("EmploymentStatus")
                        .HasColumnType("integer");

                    b.Property<string>("FirstName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FirstNameAr")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int?>("Gender")
                        .HasColumnType("integer");

                    b.Property<DateTime>("HireDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("JobTitle")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("JobTitleAr")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("LastName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("LastNameAr")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<long?>("ManagerEmployeeId")
                        .HasColumnType("bigint");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("NationalId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Phone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("PhotoUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<int>("WorkLocationType")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("DepartmentId");

                    b.HasIndex("DepartmentId1");

                    b.HasIndex("ManagerEmployeeId");

                    b.HasIndex("BranchId", "EmployeeNumber")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Employees", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Employees.EmployeeUserLink", b =>
                {
                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("EmployeeId", "UserId");

                    b.HasIndex("EmployeeId")
                        .IsUnique();

                    b.HasIndex("UserId");

                    b.ToTable("EmployeeUserLinks", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Excuses.EmployeeExcuse", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("AffectsSalary")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<int>("ApprovalStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.Property<DateTime?>("ApprovedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("ApprovedById")
                        .HasColumnType("bigint");

                    b.Property<string>("AttachmentPath")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<decimal>("DurationHours")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasComputedColumnSql("EXTRACT(EPOCH FROM (\"EndTime\" - \"StartTime\")) / 3600.0", true);

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<TimeOnly>("EndTime")
                        .HasColumnType("time");

                    b.Property<DateTime>("ExcuseDate")
                        .HasColumnType("date");

                    b.Property<int>("ExcuseType")
                        .HasColumnType("integer");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime>("ModifiedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("ProcessingNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Reason")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("RejectionReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<TimeOnly>("StartTime")
                        .HasColumnType("time");

                    b.Property<long?>("SubmittedByUserId")
                        .HasColumnType("bigint");

                    b.Property<long?>("WorkflowInstanceId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("ApprovalStatus")
                        .HasDatabaseName("IX_EmployeeExcuses_ApprovalStatus");

                    b.HasIndex("ApprovedById")
                        .HasDatabaseName("IX_EmployeeExcuses_ApprovedById");

                    b.HasIndex("EmployeeId")
                        .HasDatabaseName("IX_EmployeeExcuses_EmployeeId");

                    b.HasIndex("ExcuseDate")
                        .HasDatabaseName("IX_EmployeeExcuses_ExcuseDate");

                    b.HasIndex("ExcuseType")
                        .HasDatabaseName("IX_EmployeeExcuses_ExcuseType");

                    b.HasIndex("WorkflowInstanceId");

                    b.HasIndex("EmployeeId", "ExcuseDate")
                        .HasDatabaseName("IX_EmployeeExcuses_EmployeeId_ExcuseDate");

                    b.HasIndex("ExcuseDate", "ApprovalStatus")
                        .HasDatabaseName("IX_EmployeeExcuses_ExcuseDate_ApprovalStatus");

                    b.HasIndex("EmployeeId", "ExcuseDate", "StartTime", "EndTime")
                        .IsUnique()
                        .HasDatabaseName("UQ_EmployeeExcuses_EmployeeId_ExcuseDate_TimeRange")
                        .HasFilter("\"IsDeleted\" = false AND \"ApprovalStatus\" IN (1, 2)");

                    b.ToTable("EmployeeExcuses", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Excuses.ExcusePolicy", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("AllowPartialHourExcuses")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("AllowSelfServiceRequests")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<decimal>("MaxHoursPerExcuse")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(2.0m);

                    b.Property<decimal>("MaxPersonalExcuseHoursPerDay")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(4.0m);

                    b.Property<decimal>("MaxPersonalExcuseHoursPerMonth")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(8.0m);

                    b.Property<int>("MaxPersonalExcusesPerMonth")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(5);

                    b.Property<int>("MaxRetroactiveDays")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(7);

                    b.Property<decimal>("MinimumExcuseDuration")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(0.5m);

                    b.Property<DateTime>("ModifiedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("RequiresApproval")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.HasKey("Id");

                    b.HasIndex("BranchId")
                        .HasDatabaseName("IX_ExcusePolicies_BranchId");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_ExcusePolicies_IsActive");

                    b.HasIndex("BranchId", "IsActive")
                        .HasDatabaseName("IX_ExcusePolicies_BranchId_IsActive");

                    b.ToTable("ExcusePolicies", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.FingerprintRequests.FingerprintRequest", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("AffectedFingers")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("CompletedDate")
                        .HasColumnType("timestamp");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("IssueDescription")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<DateTime?>("PreferredDate")
                        .HasColumnType("timestamp");

                    b.Property<TimeSpan?>("PreferredTime")
                        .HasColumnType("time");

                    b.Property<string>("RequestType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("ScheduledDate")
                        .HasColumnType("timestamp");

                    b.Property<TimeSpan?>("ScheduledTime")
                        .HasColumnType("time");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<long?>("TechnicianId")
                        .HasColumnType("bigint");

                    b.Property<string>("TechnicianNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.HasKey("Id");

                    b.HasIndex("EmployeeId")
                        .HasDatabaseName("IX_FingerprintRequests_EmployeeId");

                    b.HasIndex("ScheduledDate")
                        .HasDatabaseName("IX_FingerprintRequests_ScheduledDate");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_FingerprintRequests_Status");

                    b.HasIndex("TechnicianId");

                    b.HasIndex("EmployeeId", "Status")
                        .HasDatabaseName("IX_FingerprintRequests_EmployeeId_Status");

                    b.ToTable("FingerprintRequests", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveAccrualPolicy", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("AccrualFrequency")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasDefaultValue("Monthly");

                    b.Property<bool>("AllowsCarryOver")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<int?>("CarryOverExpiryMonths")
                        .HasColumnType("integer");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("CreatedBy")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("EffectiveEndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("EffectiveStartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("ExpiresAtYearEnd")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsMonthlyAccrual")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<decimal?>("MaxAccrualCap")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<decimal?>("MaxCarryOverDays")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<int>("MinimumServiceMonths")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<bool>("ProrateMidYearHires")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<long>("VacationTypeId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_LeaveAccrualPolicies_IsActive");

                    b.HasIndex("VacationTypeId")
                        .HasDatabaseName("IX_LeaveAccrualPolicies_VacationTypeId");

                    b.HasIndex("VacationTypeId", "IsActive")
                        .HasDatabaseName("IX_LeaveAccrualPolicies_VacationType_Active")
                        .HasFilter("\"IsActive\" = true");

                    b.ToTable("LeaveAccrualPolicies", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveBalance", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<decimal>("AccruedDays")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<decimal>("AdjustedDays")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<decimal>("EntitledDays")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<DateTime?>("LastAccrualDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("PendingDays")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<decimal>("UsedDays")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<long>("VacationTypeId")
                        .HasColumnType("bigint");

                    b.Property<int>("Year")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("EmployeeId")
                        .HasDatabaseName("IX_LeaveBalances_EmployeeId");

                    b.HasIndex("VacationTypeId");

                    b.HasIndex("Year")
                        .HasDatabaseName("IX_LeaveBalances_Year");

                    b.HasIndex("EmployeeId", "VacationTypeId", "Year")
                        .IsUnique()
                        .HasDatabaseName("IX_LeaveBalances_Employee_VacationType_Year");

                    b.ToTable("LeaveBalances", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveEntitlement", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<decimal>("AnnualDays")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<decimal>("CarryOverDays")
                        .ValueGeneratedOnAdd()
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasDefaultValue(0m);

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("CreatedBy")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<DateTime?>("EffectiveEndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("EffectiveStartDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<bool>("ExpiresAtYearEnd")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<decimal?>("MaxCarryOverDays")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("Notes")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<long>("VacationTypeId")
                        .HasColumnType("bigint");

                    b.Property<int>("Year")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("VacationTypeId");

                    b.HasIndex("Year")
                        .HasDatabaseName("IX_LeaveEntitlements_Year");

                    b.HasIndex("EmployeeId", "VacationTypeId", "Year")
                        .IsUnique()
                        .HasDatabaseName("IX_LeaveEntitlements_Employee_VacationType_Year");

                    b.ToTable("LeaveEntitlements", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveTransaction", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<decimal?>("BalanceAfterTransaction")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("CreatedBy")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<decimal>("Days")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<long>("LeaveBalanceId")
                        .HasColumnType("bigint");

                    b.Property<string>("Notes")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<long?>("ReferenceId")
                        .HasColumnType("bigint");

                    b.Property<string>("ReferenceType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("TransactionDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TransactionType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("LeaveBalanceId")
                        .HasDatabaseName("IX_LeaveTransactions_LeaveBalanceId");

                    b.HasIndex("TransactionDate")
                        .HasDatabaseName("IX_LeaveTransactions_TransactionDate");

                    b.HasIndex("TransactionType")
                        .HasDatabaseName("IX_LeaveTransactions_TransactionType");

                    b.HasIndex("ReferenceType", "ReferenceId")
                        .HasDatabaseName("IX_LeaveTransactions_Reference");

                    b.ToTable("LeaveTransactions", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Notifications.Notification", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ActionUrl")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("URL to navigate when notification is clicked");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<long?>("EntityId")
                        .HasColumnType("bigint")
                        .HasComment("ID of the related entity");

                    b.Property<string>("EntityType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Type of related entity (e.g., Vacation, Excuse)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<bool>("IsRead")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Whether notification has been read");

                    b.Property<string>("MessageAr")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Notification message in Arabic");

                    b.Property<string>("MessageEn")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Notification message in English");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<DateTime?>("ReadAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When notification was read");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<string>("TitleAr")
                        .IsRequired()
                        .HasMaxLength(200)
                        .IsUnicode(true)
                        .HasColumnType("character varying(200)")
                        .HasComment("Notification title in Arabic");

                    b.Property<string>("TitleEn")
                        .IsRequired()
                        .HasMaxLength(200)
                        .IsUnicode(true)
                        .HasColumnType("character varying(200)")
                        .HasComment("Notification title in English");

                    b.Property<int>("Type")
                        .HasColumnType("integer")
                        .HasComment("Type of notification");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint")
                        .HasComment("User who receives this notification");

                    b.HasKey("Id");

                    b.HasIndex("CreatedAtUtc")
                        .IsDescending()
                        .HasDatabaseName("IX_Notifications_CreatedAtUtc")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_Notifications_Type")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_Notifications_UserId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EntityType", "EntityId")
                        .HasDatabaseName("IX_Notifications_EntityType_EntityId")
                        .HasFilter("\"IsDeleted\" = false AND \"EntityType\" IS NOT NULL");

                    b.HasIndex("UserId", "IsRead")
                        .HasDatabaseName("IX_Notifications_UserId_IsRead")
                        .HasFilter("\"IsDeleted\" = false AND \"IsRead\" = false");

                    b.ToTable("Notifications", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkPolicy", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("AllowConsecutiveDays")
                        .HasColumnType("boolean");

                    b.Property<string>("BlackoutPeriods")
                        .HasColumnType("text");

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint");

                    b.Property<bool>("CountForOvertime")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("EnforceShiftTimes")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<int?>("MaxConsecutiveDays")
                        .HasColumnType("integer");

                    b.Property<int?>("MaxDaysPerMonth")
                        .HasColumnType("integer");

                    b.Property<int?>("MaxDaysPerWeek")
                        .HasColumnType("integer");

                    b.Property<int?>("MaxDaysPerYear")
                        .HasColumnType("integer");

                    b.Property<int?>("MinAdvanceNoticeDays")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<bool>("RequiresManagerApproval")
                        .HasColumnType("boolean");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.HasKey("Id");

                    b.HasIndex("BranchId");

                    b.ToTable("RemoteWorkPolicies");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkRequest", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("ApprovalComments")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ApprovedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long?>("ApprovedByUserId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<long>("CreatedByUserId")
                        .HasColumnType("bigint");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint");

                    b.Property<DateOnly>("EndDate")
                        .HasColumnType("date");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Reason")
                        .HasColumnType("text");

                    b.Property<string>("RejectionReason")
                        .HasColumnType("text");

                    b.Property<long>("RemoteWorkPolicyId")
                        .HasColumnType("bigint");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<DateOnly>("StartDate")
                        .HasColumnType("date");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<long?>("SubmittedByUserId")
                        .HasColumnType("bigint");

                    b.Property<long?>("WorkflowInstanceId")
                        .HasColumnType("bigint");

                    b.Property<int>("WorkingDaysCount")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("ApprovedByUserId");

                    b.HasIndex("CreatedByUserId");

                    b.HasIndex("EmployeeId");

                    b.HasIndex("RemoteWorkPolicyId");

                    b.HasIndex("WorkflowInstanceId");

                    b.ToTable("RemoteWorkRequests");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Settings.OffDay", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint")
                        .HasComment("Specific branch ID for branch-specific off days");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Description or notes about the off day configuration");

                    b.Property<DateTime>("EffectiveFromDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date from which this configuration becomes effective");

                    b.Property<DateTime?>("EffectiveToDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date until which this configuration is valid");

                    b.Property<DateTime?>("EndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("End date for custom period off days");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasComment("Whether this off day configuration is currently active");

                    b.Property<bool>("IsCompanyWide")
                        .HasColumnType("boolean")
                        .HasComment("Whether this applies to all branches");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsFriday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Friday is an off day");

                    b.Property<bool>("IsMonday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Monday is an off day");

                    b.Property<bool>("IsSaturday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Saturday is an off day");

                    b.Property<bool>("IsSunday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Sunday is an off day");

                    b.Property<bool>("IsThursday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Thursday is an off day");

                    b.Property<bool>("IsTuesday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Tuesday is an off day");

                    b.Property<bool>("IsWednesday")
                        .HasColumnType("boolean")
                        .HasComment("Whether Wednesday is an off day");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Name/description of the off day configuration");

                    b.Property<string>("NameAr")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Arabic name of the off day configuration");

                    b.Property<int>("OffDayType")
                        .HasColumnType("integer")
                        .HasComment("Type of off day configuration (weekly/custom period)");

                    b.Property<bool>("OverridesPublicHolidays")
                        .HasColumnType("boolean")
                        .HasComment("Whether this off day overrides public holidays");

                    b.Property<int>("Priority")
                        .HasColumnType("integer")
                        .HasComment("Priority when multiple configurations overlap");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("StartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Start date for custom period off days");

                    b.HasKey("Id");

                    b.HasIndex("BranchId")
                        .HasDatabaseName("IX_OffDays_BranchId");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_OffDays_IsActive");

                    b.HasIndex("IsCompanyWide")
                        .HasDatabaseName("IX_OffDays_IsCompanyWide");

                    b.HasIndex("OffDayType")
                        .HasDatabaseName("IX_OffDays_OffDayType");

                    b.HasIndex("Priority")
                        .HasDatabaseName("IX_OffDays_Priority");

                    b.HasIndex("EffectiveFromDate", "EffectiveToDate")
                        .HasDatabaseName("IX_OffDays_EffectiveDates");

                    b.HasIndex("StartDate", "EndDate")
                        .HasDatabaseName("IX_OffDays_DateRange");

                    b.ToTable("OffDays", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Settings.OvertimeConfiguration", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("ConsiderFlexibleTime")
                        .HasColumnType("boolean")
                        .HasComment("Whether to consider flexible time rules when calculating overtime");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("EffectiveFromDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date from which this configuration becomes effective");

                    b.Property<DateTime?>("EffectiveToDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date until which this configuration is valid (null = indefinite)");

                    b.Property<bool>("EnablePostShiftOvertime")
                        .HasColumnType("boolean");

                    b.Property<bool>("EnablePreShiftOvertime")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasComment("Whether this configuration is currently active");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<decimal>("MaxPostShiftOvertimeHours")
                        .HasColumnType("decimal(4,2)")
                        .HasComment("Maximum post-shift overtime hours allowed per day");

                    b.Property<decimal>("MaxPreShiftOvertimeHours")
                        .HasColumnType("decimal(4,2)")
                        .HasComment("Maximum pre-shift overtime hours allowed per day");

                    b.Property<int>("MinimumOvertimeMinutes")
                        .HasColumnType("integer")
                        .HasComment("Minimum minutes of overtime before it counts (e.g., 15)");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<decimal>("NormalDayRate")
                        .HasColumnType("decimal(5,2)")
                        .HasComment("Overtime rate multiplier for normal working days (e.g., 1.5 for 150%)");

                    b.Property<decimal>("OffDayRate")
                        .HasColumnType("decimal(5,2)")
                        .HasComment("Overtime rate multiplier for off days/weekends (e.g., 2.5 for 250%)");

                    b.Property<int>("OvertimeGracePeriodMinutes")
                        .HasColumnType("integer")
                        .HasComment("Grace period in minutes before overtime calculation begins");

                    b.Property<string>("PolicyNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Additional notes about overtime policies");

                    b.Property<decimal>("PublicHolidayRate")
                        .HasColumnType("decimal(5,2)")
                        .HasComment("Overtime rate multiplier for public holidays (e.g., 2.0 for 200%)");

                    b.Property<bool>("RequireApproval")
                        .HasColumnType("boolean")
                        .HasComment("Whether overtime requires manager approval");

                    b.Property<int>("RoundingIntervalMinutes")
                        .HasColumnType("integer")
                        .HasComment("Rounding interval for overtime hours (0 = no rounding)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<bool>("WeekendAsOffDay")
                        .HasColumnType("boolean")
                        .HasComment("Whether weekends are automatically considered off days");

                    b.HasKey("Id");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_OvertimeConfigurations_IsActive");

                    b.HasIndex("EffectiveFromDate", "EffectiveToDate")
                        .HasDatabaseName("IX_OvertimeConfigurations_EffectiveDates");

                    b.ToTable("OvertimeConfigurations", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Settings.PublicHoliday", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint")
                        .HasComment("Specific branch ID for regional holidays");

                    b.Property<string>("CountryCode")
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)")
                        .HasComment("Country code for international holiday support");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int?>("Day")
                        .HasColumnType("integer")
                        .HasComment("Day of month for recurring holidays (1-31)");

                    b.Property<int?>("DayOfWeek")
                        .HasColumnType("integer")
                        .HasComment("Day of week for floating holidays");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Description or notes about the holiday");

                    b.Property<int?>("EffectiveFromYear")
                        .HasColumnType("integer")
                        .HasComment("Year from which this holiday becomes effective");

                    b.Property<int?>("EffectiveToYear")
                        .HasColumnType("integer")
                        .HasComment("Year until which this holiday is valid");

                    b.Property<int>("HolidayType")
                        .HasColumnType("integer")
                        .HasComment("Type of holiday recurrence pattern");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasComment("Whether this holiday is currently active");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsNational")
                        .HasColumnType("boolean")
                        .HasComment("Whether this holiday applies to all branches");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<int?>("Month")
                        .HasColumnType("integer")
                        .HasComment("Month for recurring holidays (1-12)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Name of the public holiday");

                    b.Property<string>("NameAr")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Arabic name of the public holiday");

                    b.Property<int>("Priority")
                        .HasColumnType("integer")
                        .HasComment("Priority when multiple holidays fall on same date");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("SpecificDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Specific date for one-time holidays");

                    b.Property<int?>("WeekOccurrence")
                        .HasColumnType("integer")
                        .HasComment("Week occurrence for floating holidays (1-5, -1 for last)");

                    b.HasKey("Id");

                    b.HasIndex("BranchId")
                        .HasDatabaseName("IX_PublicHolidays_BranchId");

                    b.HasIndex("HolidayType")
                        .HasDatabaseName("IX_PublicHolidays_HolidayType");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_PublicHolidays_IsActive");

                    b.HasIndex("IsNational")
                        .HasDatabaseName("IX_PublicHolidays_IsNational");

                    b.HasIndex("SpecificDate")
                        .HasDatabaseName("IX_PublicHolidays_SpecificDate");

                    b.HasIndex("EffectiveFromYear", "EffectiveToYear")
                        .HasDatabaseName("IX_PublicHolidays_EffectiveYears");

                    b.HasIndex("Month", "Day")
                        .HasDatabaseName("IX_PublicHolidays_MonthDay");

                    b.ToTable("PublicHolidays", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Shifts.Shift", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("AllowFlexibleHours")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<TimeOnly?>("CoreEnd")
                        .HasColumnType("time without time zone");

                    b.Property<TimeOnly?>("CoreStart")
                        .HasColumnType("time without time zone");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int?>("FlexMinutesAfter")
                        .HasColumnType("integer");

                    b.Property<int?>("FlexMinutesBefore")
                        .HasColumnType("integer");

                    b.Property<int?>("GracePeriodMinutes")
                        .HasColumnType("integer");

                    b.Property<bool>("HasCoreHours")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsAutoCheckOut")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsCheckInRequired")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasColumnName("RequiresCheckInOut");

                    b.Property<bool>("IsDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsFriday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsMonday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsNightShift")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsSaturday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsSunday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsThursday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsTuesday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsWednesday")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<decimal?>("RequiredHours")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<decimal?>("RequiredWeeklyHours")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<int>("ShiftType")
                        .HasColumnType("integer");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("Name")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Shifts", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Shifts.ShiftAssignment", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long>("AssignedByUserId")
                        .HasColumnType("bigint")
                        .HasComment("ID of the user who created this assignment");

                    b.Property<int>("AssignmentType")
                        .HasColumnType("integer")
                        .HasComment("Type of assignment: Employee (1), Department (2), or Branch (3)");

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint")
                        .HasComment("Branch ID for branch-level assignments (null for employee/department assignments)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<long?>("DepartmentId")
                        .HasColumnType("bigint")
                        .HasComment("Department ID for department-level assignments (null for employee/branch assignments)");

                    b.Property<DateTime>("EffectiveFromDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("EffectiveFromDate")
                        .HasComment("Date when this assignment becomes active");

                    b.Property<DateTime?>("EffectiveToDate")
                        .HasColumnType("timestamp with time zone")
                        .HasColumnName("EffectiveToDate")
                        .HasComment("Optional end date for temporary assignments");

                    b.Property<long?>("EmployeeId")
                        .HasColumnType("bigint")
                        .HasComment("Employee ID for employee-level assignments (null for department/branch assignments)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Optional notes about the assignment");

                    b.Property<int>("Priority")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(10)
                        .HasComment("Assignment priority for conflict resolution (higher values take precedence)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<long>("ShiftId")
                        .HasColumnType("bigint")
                        .HasComment("Foreign key to the Shift entity being assigned");

                    b.Property<int>("Status")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1)
                        .HasComment("Assignment status: Pending (1), Active (2), Inactive (3), Expired (4), Cancelled (5)");

                    b.HasKey("Id");

                    b.HasIndex("BranchId");

                    b.HasIndex("DepartmentId");

                    b.HasIndex("EmployeeId");

                    b.HasIndex("ShiftId")
                        .HasDatabaseName("IX_ShiftAssignments_ShiftId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("AssignmentType", "BranchId", "EffectiveFromDate")
                        .HasDatabaseName("IX_ShiftAssignments_Branch_EffectiveFromDate")
                        .HasFilter("\"IsDeleted\" = false AND \"AssignmentType\" = 3 AND \"BranchId\" IS NOT NULL");

                    b.HasIndex("AssignmentType", "DepartmentId", "EffectiveFromDate")
                        .HasDatabaseName("IX_ShiftAssignments_Department_EffectiveFromDate")
                        .HasFilter("\"IsDeleted\" = false AND \"AssignmentType\" = 2 AND \"DepartmentId\" IS NOT NULL");

                    b.HasIndex("AssignmentType", "EmployeeId", "EffectiveFromDate")
                        .HasDatabaseName("IX_ShiftAssignments_Employee_EffectiveFromDate")
                        .HasFilter("\"IsDeleted\" = false AND \"AssignmentType\" = 1 AND \"EmployeeId\" IS NOT NULL");

                    b.HasIndex("Priority", "Status", "EffectiveFromDate")
                        .HasDatabaseName("IX_ShiftAssignments_Priority_Status_EffectiveFromDate")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("Status", "EffectiveFromDate", "EffectiveToDate")
                        .HasDatabaseName("IX_ShiftAssignments_Status_EffectiveFromDate_EffectiveToDate")
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("ShiftAssignments", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Shifts.ShiftPeriod", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<TimeOnly>("EndTime")
                        .HasColumnType("time without time zone");

                    b.Property<decimal>("Hours")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsNightPeriod")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int>("PeriodOrder")
                        .HasColumnType("integer");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<long>("ShiftId")
                        .HasColumnType("bigint");

                    b.Property<TimeOnly>("StartTime")
                        .HasColumnType("time without time zone");

                    b.HasKey("Id");

                    b.HasIndex("ShiftId", "PeriodOrder")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("ShiftPeriods", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.BlacklistedToken", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("ExpiresAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Reason")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<string>("TokenId")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("TokenType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("ExpiresAtUtc");

                    b.HasIndex("TokenId")
                        .IsUnique();

                    b.HasIndex("UserId");

                    b.ToTable("BlacklistedTokens", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.LoginAttempt", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("AttemptedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("FailureReason")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasMaxLength(45)
                        .HasColumnType("character varying(45)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSuccessful")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<long?>("UserId")
                        .HasColumnType("bigint");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("AttemptedAtUtc");

                    b.HasIndex("IpAddress");

                    b.HasIndex("UserId");

                    b.HasIndex("Username");

                    b.HasIndex("Username", "AttemptedAtUtc");

                    b.ToTable("LoginAttempts", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.PasswordHistory", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("ChangedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("PasswordSalt")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("ChangedAtUtc");

                    b.HasIndex("UserId");

                    b.ToTable("PasswordHistory", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.Permission", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Group")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Key")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.HasKey("Id");

                    b.HasIndex("Key")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Permissions", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.RefreshToken", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("DeviceInfo")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime>("ExpiresAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("RevokedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<string>("Token")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("Token")
                        .IsUnique();

                    b.HasIndex("UserId");

                    b.ToTable("RefreshTokens", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.Role", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsDeletable")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsEditable")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSystem")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.HasKey("Id");

                    b.HasIndex("Name")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Roles", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.RolePermission", b =>
                {
                    b.Property<long>("RoleId")
                        .HasColumnType("bigint");

                    b.Property<long>("PermissionId")
                        .HasColumnType("bigint");

                    b.HasKey("RoleId", "PermissionId");

                    b.HasIndex("PermissionId");

                    b.ToTable("RolePermissions", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.TwoFactorBackupCode", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsUsed")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("UsedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("TwoFactorBackupCodes");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.User", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("EmailConfirmationToken")
                        .HasColumnType("text");

                    b.Property<bool>("EmailConfirmed")
                        .HasColumnType("boolean");

                    b.Property<int>("FailedLoginAttempts")
                        .HasColumnType("integer");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastFailedLoginAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LockoutEndUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("MustChangePassword")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("PasswordChangedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("PasswordResetToken")
                        .HasColumnType("text");

                    b.Property<DateTime?>("PasswordResetTokenExpiresAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PasswordSalt")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("Phone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("PreferredLanguage")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)")
                        .HasDefaultValue("en");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 });

                    b.Property<bool>("TwoFactorEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("TwoFactorSecretKey")
                        .HasColumnType("text");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("Email")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("Username")
                        .IsUnique()
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Users", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.UserBranchScope", b =>
                {
                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.Property<long>("BranchId")
                        .HasColumnType("bigint");

                    b.HasKey("UserId", "BranchId");

                    b.HasIndex("BranchId");

                    b.ToTable("UserBranchScopes", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.UserRole", b =>
                {
                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.Property<long>("RoleId")
                        .HasColumnType("bigint");

                    b.HasKey("UserId", "RoleId");

                    b.HasIndex("RoleId");

                    b.ToTable("UserRoles", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.UserSession", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<string>("Browser")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("DeviceFingerprint")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("DeviceName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("ExpiresAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("IpAddress")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsCurrentSession")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime>("LastAccessedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Location")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Platform")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.Property<string>("SessionId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UserAgent")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<long>("UserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("UserSessions");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.VacationTypes.VacationType", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ModifiedBy")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .IsUnicode(true)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("NameAr")
                        .HasMaxLength(100)
                        .IsUnicode(true)
                        .HasColumnType("character varying(100)");

                    b.Property<byte[]>("RowVersion")
                        .IsRequired()
                        .HasColumnType("bytea");

                    b.HasKey("Id");

                    b.HasIndex("BranchId")
                        .HasDatabaseName("IX_VacationTypes_BranchId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_VacationTypes_IsActive")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("BranchId", "IsActive")
                        .HasDatabaseName("IX_VacationTypes_BranchId_IsActive")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("BranchId", "Name")
                        .IsUnique()
                        .HasDatabaseName("IX_VacationTypes_BranchId_Name_Unique")
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("VacationTypes", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Vacations.EmployeeVacation", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<long>("EmployeeId")
                        .HasColumnType("bigint")
                        .HasComment("Employee identifier for vacation assignment");

                    b.Property<DateTime>("EndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("End date of vacation period");

                    b.Property<bool>("IsApproved")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Whether vacation is approved and affects attendance");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Optional notes about the vacation");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<DateTime>("StartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Start date of vacation period");

                    b.Property<long?>("SubmittedByUserId")
                        .HasColumnType("bigint");

                    b.Property<int>("TotalDays")
                        .HasColumnType("integer")
                        .HasComment("Total number of vacation days");

                    b.Property<long>("VacationTypeId")
                        .HasColumnType("bigint")
                        .HasComment("Vacation type identifier for categorization");

                    b.Property<long?>("WorkflowInstanceId")
                        .HasColumnType("bigint")
                        .HasComment("Workflow instance ID for approval tracking");

                    b.HasKey("Id");

                    b.HasIndex("EmployeeId")
                        .HasDatabaseName("IX_EmployeeVacations_EmployeeId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("IsApproved")
                        .HasDatabaseName("IX_EmployeeVacations_IsApproved")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("VacationTypeId")
                        .HasDatabaseName("IX_EmployeeVacations_VacationTypeId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("WorkflowInstanceId");

                    b.HasIndex("EmployeeId", "EndDate")
                        .HasDatabaseName("IX_EmployeeVacations_Employee_EndDate")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EmployeeId", "StartDate")
                        .HasDatabaseName("IX_EmployeeVacations_Employee_StartDate")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("StartDate", "EndDate")
                        .HasDatabaseName("IX_EmployeeVacations_DateRange")
                        .HasFilter("\"IsDeleted\" = false AND \"IsApproved\" = true");

                    b.ToTable("EmployeeVacations", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.ApprovalDelegation", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<long>("DelegateUserId")
                        .HasColumnType("bigint")
                        .HasComment("User receiving delegated authority");

                    b.Property<long>("DelegatorUserId")
                        .HasColumnType("bigint")
                        .HasComment("User delegating their authority");

                    b.Property<DateTime>("EndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("End of delegation period");

                    b.Property<string>("EntityTypesJson")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Comma-separated entity types (null = all)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Whether delegation is currently active");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Reason for delegation");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<DateTime>("StartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Start of delegation period");

                    b.HasKey("Id");

                    b.HasIndex("DelegateUserId")
                        .HasDatabaseName("IX_ApprovalDelegations_DelegateUserId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("DelegatorUserId")
                        .HasDatabaseName("IX_ApprovalDelegations_DelegatorUserId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EndDate")
                        .HasDatabaseName("IX_ApprovalDelegations_EndDate")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("StartDate")
                        .HasDatabaseName("IX_ApprovalDelegations_StartDate")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("DelegatorUserId", "IsActive", "StartDate", "EndDate")
                        .HasDatabaseName("IX_ApprovalDelegations_Active_Dates")
                        .HasFilter("\"IsDeleted\" = false AND \"IsActive\" = true");

                    b.ToTable("ApprovalDelegations", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowDefinition", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<long?>("BranchId")
                        .HasColumnType("bigint")
                        .HasComment("Branch scope (null = organization-wide)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Description of the workflow purpose");

                    b.Property<string>("DescriptionAr")
                        .HasMaxLength(1000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Arabic description of the workflow");

                    b.Property<int>("EntityType")
                        .HasColumnType("integer")
                        .HasComment("Type of entity this workflow applies to");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Whether workflow is active for new requests");

                    b.Property<bool>("IsDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Whether this is the default workflow for entity type");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .IsUnicode(true)
                        .HasColumnType("character varying(200)")
                        .HasComment("Display name of the workflow definition");

                    b.Property<string>("NameAr")
                        .HasMaxLength(200)
                        .IsUnicode(true)
                        .HasColumnType("character varying(200)")
                        .HasComment("Arabic display name of the workflow definition");

                    b.Property<int>("Priority")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Priority for workflow selection");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<int>("Version")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1)
                        .HasComment("Version number incremented on modifications");

                    b.HasKey("Id");

                    b.HasIndex("BranchId")
                        .HasDatabaseName("IX_WorkflowDefinitions_BranchId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EntityType")
                        .HasDatabaseName("IX_WorkflowDefinitions_EntityType")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EntityType", "IsActive")
                        .HasDatabaseName("IX_WorkflowDefinitions_EntityType_Active")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EntityType", "BranchId", "IsDefault")
                        .HasDatabaseName("IX_WorkflowDefinitions_EntityType_Branch_Default")
                        .HasFilter("\"IsDeleted\" = false AND \"IsActive\" = true");

                    b.ToTable("WorkflowDefinitions", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When workflow was completed");

                    b.Property<long?>("CompletedByUserId")
                        .HasColumnType("bigint")
                        .HasComment("User who completed the workflow");

                    b.Property<string>("ContextJson")
                        .HasColumnType("jsonb")
                        .HasComment("Runtime context variables");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<long?>("CurrentStepId")
                        .HasColumnType("bigint")
                        .HasComment("Current step in workflow (null if completed)");

                    b.Property<long>("EntityId")
                        .HasColumnType("bigint")
                        .HasComment("ID of the entity being processed");

                    b.Property<int>("EntityType")
                        .HasColumnType("integer")
                        .HasComment("Type of entity being processed");

                    b.Property<string>("FinalComments")
                        .HasMaxLength(2000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Comments from final action");

                    b.Property<int?>("FinalOutcome")
                        .HasColumnType("integer")
                        .HasComment("Final outcome of workflow");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<DateTime>("RequestedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When workflow was initiated");

                    b.Property<long>("RequestedByUserId")
                        .HasColumnType("bigint")
                        .HasComment("User who initiated the workflow");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<int>("Status")
                        .HasColumnType("integer")
                        .HasComment("Current workflow status");

                    b.Property<long>("WorkflowDefinitionId")
                        .HasColumnType("bigint")
                        .HasComment("Workflow definition being executed");

                    b.HasKey("Id");

                    b.HasIndex("CompletedByUserId");

                    b.HasIndex("CurrentStepId");

                    b.HasIndex("RequestedAt")
                        .IsDescending()
                        .HasDatabaseName("IX_WorkflowInstances_RequestedAt")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("RequestedByUserId")
                        .HasDatabaseName("IX_WorkflowInstances_RequestedByUserId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_WorkflowInstances_Status")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("WorkflowDefinitionId")
                        .HasDatabaseName("IX_WorkflowInstances_WorkflowDefinitionId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("EntityType", "EntityId")
                        .HasDatabaseName("IX_WorkflowInstances_EntityType_EntityId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("Status", "CurrentStepId")
                        .HasDatabaseName("IX_WorkflowInstances_Status_CurrentStep")
                        .HasFilter("\"IsDeleted\" = false AND \"Status\" = 2");

                    b.ToTable("WorkflowInstances", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowStep", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<bool>("AllowDelegation")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Whether step allows delegation");

                    b.Property<string>("ApproverInstructions")
                        .HasMaxLength(2000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Instructions for approver");

                    b.Property<string>("ApproverInstructionsAr")
                        .HasMaxLength(2000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Arabic instructions for approver");

                    b.Property<long?>("ApproverRoleId")
                        .HasColumnType("bigint")
                        .HasComment("Role ID for role-based approval");

                    b.Property<int>("ApproverType")
                        .HasColumnType("integer")
                        .HasComment("How approver is determined");

                    b.Property<long?>("ApproverUserId")
                        .HasColumnType("bigint")
                        .HasComment("User ID for specific user approval");

                    b.Property<string>("ConditionJson")
                        .HasColumnType("jsonb")
                        .HasComment("JSON condition for conditional steps");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<long?>("EscalationStepId")
                        .HasColumnType("bigint")
                        .HasComment("Step to escalate to on timeout");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(200)
                        .IsUnicode(true)
                        .HasColumnType("character varying(200)")
                        .HasComment("Display name of the step");

                    b.Property<string>("NameAr")
                        .HasMaxLength(200)
                        .IsUnicode(true)
                        .HasColumnType("character varying(200)")
                        .HasComment("Arabic display name");

                    b.Property<bool>("NotifyOnAction")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Send notifications for actions");

                    b.Property<bool>("NotifyRequesterOnReach")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Notify requester when step is reached");

                    b.Property<long?>("OnApproveNextStepId")
                        .HasColumnType("bigint")
                        .HasComment("Next step on approval");

                    b.Property<long?>("OnRejectNextStepId")
                        .HasColumnType("bigint")
                        .HasComment("Next step on rejection");

                    b.Property<bool>("RequireCommentsOnApprove")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Require comments when approving");

                    b.Property<bool>("RequireCommentsOnReject")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Require comments when rejecting");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<int>("StepOrder")
                        .HasColumnType("integer")
                        .HasComment("Sequential order within workflow");

                    b.Property<int>("StepType")
                        .HasColumnType("integer")
                        .HasComment("Type of workflow step");

                    b.Property<int>("TimeoutAction")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Action to take when step times out (0=Expire, 1=Escalate, 2=AutoApprove, 3=AutoReject)");

                    b.Property<int?>("TimeoutHours")
                        .HasColumnType("integer")
                        .HasComment("Hours before escalation");

                    b.Property<long>("WorkflowDefinitionId")
                        .HasColumnType("bigint")
                        .HasComment("Parent workflow definition");

                    b.HasKey("Id");

                    b.HasIndex("ApproverRoleId")
                        .HasDatabaseName("IX_WorkflowSteps_ApproverRoleId")
                        .HasFilter("\"IsDeleted\" = false AND \"ApproverRoleId\" IS NOT NULL");

                    b.HasIndex("ApproverUserId")
                        .HasDatabaseName("IX_WorkflowSteps_ApproverUserId")
                        .HasFilter("\"IsDeleted\" = false AND \"ApproverUserId\" IS NOT NULL");

                    b.HasIndex("EscalationStepId");

                    b.HasIndex("WorkflowDefinitionId")
                        .HasDatabaseName("IX_WorkflowSteps_WorkflowDefinitionId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("WorkflowDefinitionId", "StepOrder")
                        .IsUnique()
                        .HasDatabaseName("IX_WorkflowSteps_Definition_Order")
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("WorkflowSteps", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowStepExecution", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<long>("Id"));

                    b.Property<int?>("Action")
                        .HasColumnType("integer")
                        .HasComment("Action taken on this step");

                    b.Property<DateTime?>("ActionTakenAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When action was taken");

                    b.Property<long?>("ActionTakenByUserId")
                        .HasColumnType("bigint")
                        .HasComment("User who took the action");

                    b.Property<DateTime>("AssignedAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When step was assigned");

                    b.Property<long>("AssignedToUserId")
                        .HasColumnType("bigint")
                        .HasComment("User assigned to approve");

                    b.Property<string>("Comments")
                        .HasMaxLength(2000)
                        .IsUnicode(true)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Comments provided with action");

                    b.Property<DateTime>("CreatedAtUtc")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who created the record");

                    b.Property<long?>("DelegatedFromExecutionId")
                        .HasColumnType("bigint")
                        .HasComment("Original execution delegated from");

                    b.Property<long?>("DelegatedToUserId")
                        .HasColumnType("bigint")
                        .HasComment("User delegated to");

                    b.Property<DateTime?>("DueAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Due date for action");

                    b.Property<bool>("IsDelegated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Whether created by delegation");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("ModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<string>("ModifiedBy")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("User who last modified the record");

                    b.Property<bool>("ReminderSent")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Whether reminder was sent");

                    b.Property<DateTime?>("ReminderSentAt")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When reminder was sent");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bytea")
                        .HasDefaultValue(new byte[] { 1 })
                        .HasComment("Concurrency control timestamp");

                    b.Property<long>("StepId")
                        .HasColumnType("bigint")
                        .HasComment("Workflow step being executed");

                    b.Property<long>("WorkflowInstanceId")
                        .HasColumnType("bigint")
                        .HasComment("Parent workflow instance");

                    b.HasKey("Id");

                    b.HasIndex("ActionTakenAt")
                        .IsDescending()
                        .HasDatabaseName("IX_WorkflowStepExecutions_ActionTakenAt")
                        .HasFilter("\"IsDeleted\" = false AND \"ActionTakenAt\" IS NOT NULL");

                    b.HasIndex("ActionTakenByUserId");

                    b.HasIndex("AssignedToUserId")
                        .HasDatabaseName("IX_WorkflowStepExecutions_AssignedToUserId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("DelegatedFromExecutionId");

                    b.HasIndex("DelegatedToUserId");

                    b.HasIndex("DueAt")
                        .HasDatabaseName("IX_WorkflowStepExecutions_DueAt")
                        .HasFilter("\"IsDeleted\" = false AND \"Action\" IS NULL AND \"DueAt\" IS NOT NULL");

                    b.HasIndex("StepId")
                        .HasDatabaseName("IX_WorkflowStepExecutions_StepId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("WorkflowInstanceId")
                        .HasDatabaseName("IX_WorkflowStepExecutions_WorkflowInstanceId")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("AssignedToUserId", "Action")
                        .HasDatabaseName("IX_WorkflowStepExecutions_AssignedTo_Action")
                        .HasFilter("\"IsDeleted\" = false AND \"Action\" IS NULL");

                    b.ToTable("WorkflowStepExecutions", (string)null);
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.AttendanceRecord", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkRequest", "RemoteWorkRequest")
                        .WithMany()
                        .HasForeignKey("RemoteWorkRequestId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TimeAttendanceSystem.Domain.Shifts.ShiftAssignment", "ShiftAssignment")
                        .WithMany()
                        .HasForeignKey("ShiftAssignmentId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Employee");

                    b.Navigation("RemoteWorkRequest");

                    b.Navigation("ShiftAssignment");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.AttendanceTransaction", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Attendance.AttendanceRecord", null)
                        .WithMany("Transactions")
                        .HasForeignKey("AttendanceRecordId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "EnteredByUser")
                        .WithMany()
                        .HasForeignKey("EnteredByUserId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "VerifiedByUser")
                        .WithMany()
                        .HasForeignKey("VerifiedByUserId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Employee");

                    b.Navigation("EnteredByUser");

                    b.Navigation("VerifiedByUser");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.WorkingDay", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Attendance.AttendanceRecord", "AttendanceRecord")
                        .WithOne()
                        .HasForeignKey("TimeAttendanceSystem.Domain.Attendance.WorkingDay", "AttendanceRecordId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("AttendanceRecord");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Branches.Department", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany("Departments")
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Department", "ParentDepartment")
                        .WithMany("SubDepartments")
                        .HasForeignKey("ParentDepartmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Branch");

                    b.Navigation("ParentDepartment");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Common.AuditChange", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Common.AuditLog", "AuditLog")
                        .WithMany("Changes")
                        .HasForeignKey("AuditLogId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("AuditLog");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Employees.Employee", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Department", "Department")
                        .WithMany()
                        .HasForeignKey("DepartmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Department", null)
                        .WithMany("Employees")
                        .HasForeignKey("DepartmentId1");

                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Manager")
                        .WithMany("DirectReports")
                        .HasForeignKey("ManagerEmployeeId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Branch");

                    b.Navigation("Department");

                    b.Navigation("Manager");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Employees.EmployeeUserLink", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithOne("EmployeeUserLink")
                        .HasForeignKey("TimeAttendanceSystem.Domain.Employees.EmployeeUserLink", "EmployeeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Employee");

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Excuses.EmployeeExcuse", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "ApprovedBy")
                        .WithMany()
                        .HasForeignKey("ApprovedById")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", "WorkflowInstance")
                        .WithMany()
                        .HasForeignKey("WorkflowInstanceId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("ApprovedBy");

                    b.Navigation("Employee");

                    b.Navigation("WorkflowInstance");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Excuses.ExcusePolicy", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Branch");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.FingerprintRequests.FingerprintRequest", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "Technician")
                        .WithMany()
                        .HasForeignKey("TechnicianId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Employee");

                    b.Navigation("Technician");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveAccrualPolicy", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.VacationTypes.VacationType", "VacationType")
                        .WithMany()
                        .HasForeignKey("VacationTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("VacationType");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveBalance", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.VacationTypes.VacationType", "VacationType")
                        .WithMany()
                        .HasForeignKey("VacationTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Employee");

                    b.Navigation("VacationType");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveEntitlement", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.VacationTypes.VacationType", "VacationType")
                        .WithMany()
                        .HasForeignKey("VacationTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Employee");

                    b.Navigation("VacationType");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveTransaction", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.LeaveManagement.LeaveBalance", "LeaveBalance")
                        .WithMany("Transactions")
                        .HasForeignKey("LeaveBalanceId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("LeaveBalance");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Notifications.Notification", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_Notifications_Users");

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkPolicy", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId");

                    b.Navigation("Branch");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkRequest", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "ApprovedByUser")
                        .WithMany()
                        .HasForeignKey("ApprovedByUserId");

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "CreatedByUser")
                        .WithMany()
                        .HasForeignKey("CreatedByUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkPolicy", "RemoteWorkPolicy")
                        .WithMany("RemoteWorkRequests")
                        .HasForeignKey("RemoteWorkPolicyId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", "WorkflowInstance")
                        .WithMany()
                        .HasForeignKey("WorkflowInstanceId");

                    b.Navigation("ApprovedByUser");

                    b.Navigation("CreatedByUser");

                    b.Navigation("Employee");

                    b.Navigation("RemoteWorkPolicy");

                    b.Navigation("WorkflowInstance");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Settings.OffDay", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", null)
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("FK_OffDays_Branches");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Settings.PublicHoliday", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", null)
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .HasConstraintName("FK_PublicHolidays_Branches");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Shifts.ShiftAssignment", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_ShiftAssignments_Branches");

                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Department", "Department")
                        .WithMany()
                        .HasForeignKey("DepartmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_ShiftAssignments_Departments");

                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_ShiftAssignments_Employees");

                    b.HasOne("TimeAttendanceSystem.Domain.Shifts.Shift", "Shift")
                        .WithMany()
                        .HasForeignKey("ShiftId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_ShiftAssignments_Shifts");

                    b.Navigation("Branch");

                    b.Navigation("Department");

                    b.Navigation("Employee");

                    b.Navigation("Shift");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Shifts.ShiftPeriod", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Shifts.Shift", "Shift")
                        .WithMany("ShiftPeriods")
                        .HasForeignKey("ShiftId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Shift");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.BlacklistedToken", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.LoginAttempt", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("LoginAttempts")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.PasswordHistory", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("PasswordHistory")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.RefreshToken", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("RefreshTokens")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.RolePermission", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.Permission", "Permission")
                        .WithMany("RolePermissions")
                        .HasForeignKey("PermissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Users.Role", "Role")
                        .WithMany("RolePermissions")
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Permission");

                    b.Navigation("Role");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.TwoFactorBackupCode", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("TwoFactorBackupCodes")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.UserBranchScope", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("UserBranchScopes")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Branch");

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.UserRole", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.Role", "Role")
                        .WithMany("UserRoles")
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("UserRoles")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Role");

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.UserSession", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "User")
                        .WithMany("UserSessions")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.VacationTypes.VacationType", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Branch");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Vacations.EmployeeVacation", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Employees.Employee", "Employee")
                        .WithMany()
                        .HasForeignKey("EmployeeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_EmployeeVacations_Employees");

                    b.HasOne("TimeAttendanceSystem.Domain.VacationTypes.VacationType", "VacationType")
                        .WithMany()
                        .HasForeignKey("VacationTypeId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_EmployeeVacations_VacationTypes");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", "WorkflowInstance")
                        .WithMany()
                        .HasForeignKey("WorkflowInstanceId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("FK_EmployeeVacations_WorkflowInstances");

                    b.Navigation("Employee");

                    b.Navigation("VacationType");

                    b.Navigation("WorkflowInstance");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.ApprovalDelegation", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "DelegateUser")
                        .WithMany()
                        .HasForeignKey("DelegateUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_ApprovalDelegations_DelegateUser");

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "DelegatorUser")
                        .WithMany()
                        .HasForeignKey("DelegatorUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_ApprovalDelegations_DelegatorUser");

                    b.Navigation("DelegateUser");

                    b.Navigation("DelegatorUser");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowDefinition", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Branches.Branch", "Branch")
                        .WithMany()
                        .HasForeignKey("BranchId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowDefinitions_Branches");

                    b.Navigation("Branch");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "CompletedByUser")
                        .WithMany()
                        .HasForeignKey("CompletedByUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowInstances_CompletedByUser");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowStep", "CurrentStep")
                        .WithMany()
                        .HasForeignKey("CurrentStepId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowInstances_CurrentStep");

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "RequestedByUser")
                        .WithMany()
                        .HasForeignKey("RequestedByUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_WorkflowInstances_RequestedByUser");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowDefinition", "WorkflowDefinition")
                        .WithMany("Instances")
                        .HasForeignKey("WorkflowDefinitionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_WorkflowInstances_WorkflowDefinitions");

                    b.Navigation("CompletedByUser");

                    b.Navigation("CurrentStep");

                    b.Navigation("RequestedByUser");

                    b.Navigation("WorkflowDefinition");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowStep", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.Role", "ApproverRole")
                        .WithMany()
                        .HasForeignKey("ApproverRoleId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowSteps_Roles");

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "ApproverUser")
                        .WithMany()
                        .HasForeignKey("ApproverUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowSteps_Users");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowStep", "EscalationStep")
                        .WithMany()
                        .HasForeignKey("EscalationStepId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowSteps_EscalationStep");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowDefinition", "WorkflowDefinition")
                        .WithMany("Steps")
                        .HasForeignKey("WorkflowDefinitionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_WorkflowSteps_WorkflowDefinitions");

                    b.Navigation("ApproverRole");

                    b.Navigation("ApproverUser");

                    b.Navigation("EscalationStep");

                    b.Navigation("WorkflowDefinition");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowStepExecution", b =>
                {
                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "ActionTakenByUser")
                        .WithMany()
                        .HasForeignKey("ActionTakenByUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowStepExecutions_ActionTakenByUser");

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "AssignedToUser")
                        .WithMany()
                        .HasForeignKey("AssignedToUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_WorkflowStepExecutions_AssignedToUser");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowStepExecution", "DelegatedFromExecution")
                        .WithMany()
                        .HasForeignKey("DelegatedFromExecutionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowStepExecutions_DelegatedFromExecution");

                    b.HasOne("TimeAttendanceSystem.Domain.Users.User", "DelegatedToUser")
                        .WithMany()
                        .HasForeignKey("DelegatedToUserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_WorkflowStepExecutions_DelegatedToUser");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowStep", "Step")
                        .WithMany("Executions")
                        .HasForeignKey("StepId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_WorkflowStepExecutions_WorkflowSteps");

                    b.HasOne("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", "WorkflowInstance")
                        .WithMany("StepExecutions")
                        .HasForeignKey("WorkflowInstanceId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_WorkflowStepExecutions_WorkflowInstances");

                    b.Navigation("ActionTakenByUser");

                    b.Navigation("AssignedToUser");

                    b.Navigation("DelegatedFromExecution");

                    b.Navigation("DelegatedToUser");

                    b.Navigation("Step");

                    b.Navigation("WorkflowInstance");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Attendance.AttendanceRecord", b =>
                {
                    b.Navigation("Transactions");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Branches.Branch", b =>
                {
                    b.Navigation("Departments");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Branches.Department", b =>
                {
                    b.Navigation("Employees");

                    b.Navigation("SubDepartments");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Common.AuditLog", b =>
                {
                    b.Navigation("Changes");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Employees.Employee", b =>
                {
                    b.Navigation("DirectReports");

                    b.Navigation("EmployeeUserLink");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.LeaveManagement.LeaveBalance", b =>
                {
                    b.Navigation("Transactions");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.RemoteWork.RemoteWorkPolicy", b =>
                {
                    b.Navigation("RemoteWorkRequests");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Shifts.Shift", b =>
                {
                    b.Navigation("ShiftPeriods");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.Permission", b =>
                {
                    b.Navigation("RolePermissions");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.Role", b =>
                {
                    b.Navigation("RolePermissions");

                    b.Navigation("UserRoles");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Users.User", b =>
                {
                    b.Navigation("LoginAttempts");

                    b.Navigation("PasswordHistory");

                    b.Navigation("RefreshTokens");

                    b.Navigation("TwoFactorBackupCodes");

                    b.Navigation("UserBranchScopes");

                    b.Navigation("UserRoles");

                    b.Navigation("UserSessions");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowDefinition", b =>
                {
                    b.Navigation("Instances");

                    b.Navigation("Steps");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowInstance", b =>
                {
                    b.Navigation("StepExecutions");
                });

            modelBuilder.Entity("TimeAttendanceSystem.Domain.Workflows.WorkflowStep", b =>
                {
                    b.Navigation("Executions");
                });
#pragma warning restore 612, 618
        }
    }
}
