<div class="branches-page">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ i18n.t('branches.title') }}</h2>
  </div>

  <!-- Filters Component -->
  <app-branch-filters
    [showAddButton]="permissionService.has(PERMISSIONS.BRANCH_CREATE)"
    [addButtonText]="i18n.t('branches.create_branch')"
    (searchChange)="onSearchChange($event)"
    (filtersChange)="onFiltersChange($event)"
    (addBranch)="onAddBranch()">
  </app-branch-filters>

  <!-- Branches Table Component -->
  <app-branch-table
    [branches]="branches()"
    [loading]="loading"
    [currentPage]="currentPage"
    [totalPages]="totalPages"
    [totalItems]="totalCount"
    [pageSize]="pageSize"
    (viewBranch)="onViewBranch($event)"
    (editBranch)="onEditBranch($event)"
    (deleteBranch)="onDeleteBranch($event)"
    (pageChange)="onPageChange($event)"
    (pageSizeChange)="onPageSizeChange($event)"
    (selectionChange)="onSelectionChange($event)"
    (sortChange)="onSortChange($event)">
  </app-branch-table>

  <!-- Branch Form Modal Component -->
  <app-branch-form-modal
    #branchFormModal
    [show]="showBranchForm()"
    [branch]="selectedBranch()"
    (close)="onCloseBranchForm()"
    (save)="onBranchSave($event)">
  </app-branch-form-modal>
</div>