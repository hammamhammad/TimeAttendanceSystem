<div class="container-fluid">
  <!-- Loading State -->
  @if (loading()) {
    <app-loading-spinner></app-loading-spinner>
  }

  <!-- Policy Details -->
  @if (!loading() && policy()) {
    <!-- Header -->
    <app-form-header
      mode="view"
      [title]="t('excuse_policies.policy_details')"
      [entityId]="policyId() ?? undefined"
      moduleName="excuse_policies"
      moduleRoute="settings/excuse-policies">
    </app-form-header>

    <div class="row">
      <!-- Basic Information -->
      <div class="col-md-6 mb-4">
        <div class="card">
          <div class="card-header bg-light">
            <h6 class="mb-0">
              <i class="fas fa-info-circle me-2"></i>
              {{ t('excuse_policies.basic_information') }}
            </h6>
          </div>
          <div class="card-body">
            <app-definition-list [items]="basicInfoItems()">
              <!-- Custom status badge content -->
              <ng-container *ngTemplateOutlet="statusBadgeTemplate"></ng-container>
            </app-definition-list>
          </div>
        </div>
      </div>

      <!-- Monthly Limits -->
      <div class="col-md-6 mb-4">
        <div class="card">
          <div class="card-header bg-light">
            <h6 class="mb-0">
              <i class="fas fa-calendar-alt me-2"></i>
              {{ t('excuse_policies.monthly_limits') }}
            </h6>
          </div>
          <div class="card-body">
            <app-definition-list [items]="monthlyLimitsItems()"></app-definition-list>
          </div>
        </div>
      </div>

      <!-- Time Limits -->
      <div class="col-md-6 mb-4">
        <div class="card">
          <div class="card-header bg-light">
            <h6 class="mb-0">
              <i class="fas fa-clock me-2"></i>
              {{ t('excuse_policies.time_limits') }}
            </h6>
          </div>
          <div class="card-body">
            <app-definition-list [items]="timeLimitsItems()"></app-definition-list>
          </div>
        </div>
      </div>

      <!-- Policy Options -->
      <div class="col-md-6 mb-4">
        <div class="card">
          <div class="card-header bg-light">
            <h6 class="mb-0">
              <i class="fas fa-cog me-2"></i>
              {{ t('excuse_policies.policy_options') }}
            </h6>
          </div>
          <div class="card-body">
            <app-definition-list [items]="policyOptionsItems()"></app-definition-list>
          </div>
        </div>
      </div>

      <!-- Audit Information -->
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header bg-light">
            <h6 class="mb-0">
              <i class="fas fa-history me-2"></i>
              {{ t('excuse_policies.audit_information') }}
            </h6>
          </div>
          <div class="card-body">
            <app-definition-list [items]="auditInfoItems()" [labelWidth]="'2'" [valueWidth]="'10'"></app-definition-list>
          </div>
        </div>
      </div>
    </div>
  }
</div>

<!-- Status Badge Template -->
<ng-template #statusBadgeTemplate>
  <app-status-badge
    [status]="statusBadge().label"
    [variant]="statusBadge().variant">
  </app-status-badge>
</ng-template>
