<div class="app-list-page">
  <!-- Page Header -->
  <app-page-header
    [title]="i18n.t('users.title')">
  </app-page-header>

  <!-- Filters Component -->
  <app-unified-filter
    moduleName="users"
    [refreshing]="loading()"
    (searchChange)="onSearchChange($event)"
    (filtersChange)="onFiltersChange($event)"
    (add)="onAddUser()"
    (refresh)="onRefreshData()">
  </app-unified-filter>

  <!-- Users Table Component -->
  <app-user-table
    [users]="users()"
    [loading]="loading"
    [currentPage]="currentPage"
    [totalPages]="totalPagesSignal"
    [totalItems]="totalItemsSignal"
    [pageSize]="pageSize"
    (viewUser)="onViewUser($event)"
    (editUser)="onEditUser($event)"
    (deleteUser)="onDeleteUser($event)"
    (manageRoles)="onManageRoles($event)"
    (pageChange)="onPageChange($event)"
    (pageSizeChange)="onPageSizeChange($event)"
    (selectionChange)="onSelectionChange($event)"
    (sortChange)="onSortChange($event)">
  </app-user-table>

  <!-- Role Management Modal Component -->
  <app-role-management
    [user]="selectedUser()"
    [show]="showRoleManagement()"
    (showChange)="onCloseRoleManagement()"
    (rolesUpdated)="onRolesUpdated($event)">
  </app-role-management>
</div>