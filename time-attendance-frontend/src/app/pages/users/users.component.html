<div class="users-page">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ i18n.t('users.title') }}</h2>
  </div>

  <!-- Filters Component -->
  <app-user-filters
    [showAddButton]="permissionService.has(PERMISSIONS.USER_CREATE)"
    [addButtonText]="i18n.t('users.create_user')"
    [availableRoles]="availableRoles"
    (searchChange)="onSearchChange($event)"
    (filtersChange)="onFiltersChange($event)"
    (addUser)="onAddUser()">
  </app-user-filters>

  <!-- Users Table Component -->
  <app-user-table
    [users]="users()"
    [loading]="loading"
    [currentPage]="currentPage"
    [totalPages]="totalPagesSignal"
    [totalItems]="totalItemsSignal"
    [pageSize]="pageSize"
    (viewUser)="onViewUser($event)"
    (editUser)="onEditUser($event)"
    (deleteUser)="onDeleteUser($event)"
    (manageRoles)="onManageRoles($event)"
    (pageChange)="onPageChange($event)"
    (pageSizeChange)="onPageSizeChange($event)"
    (selectionChange)="onSelectionChange($event)"
    (sortChange)="onSortChange($event)">
  </app-user-table>

  <!-- Role Management Modal Component -->
  <app-role-management
    [user]="selectedUser()"
    [show]="showRoleManagement()"
    (showChange)="onCloseRoleManagement()"
    (rolesUpdated)="onRolesUpdated($event)">
  </app-role-management>
</div>