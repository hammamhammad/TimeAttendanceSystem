<div class="app-list-page">
  <!-- Page Header -->
  <app-page-header
    [title]="i18n.t('vacation_types.title')">
  </app-page-header>

  <!-- Unified Filter Component -->
  <app-unified-filter
    moduleName="vacation-types"
    [refreshing]="loading()"
    (searchChange)="onSearchTermChange($event)"
    (filtersChange)="onFiltersChange($event)"
    (add)="onCreateVacationType()"
    (refresh)="onRefreshData()">
  </app-unified-filter>

  <!-- Error Message using ErrorAlertComponent -->
  @if (error(); as errorMessage) {
    <app-error-alert
      [message]="errorMessage"
      [showRetry]="true"
      [retryText]="i18n.t('common.retry')"
      (retry)="loadVacationTypes()">
    </app-error-alert>
  }

  <!-- Vacation Types Table using SectionCardComponent -->
  <app-section-card
    [title]="i18n.t('vacation_types.title')"
    [showHeader]="false"
    [bodyClass]="'p-0'">
    <app-data-table
      [data]="vacationTypes()"
      [columns]="tableColumns"
      [actions]="tableActions"
      [loading]="loading"
      [currentPage]="currentPage"
      [totalPages]="totalPages"
      [totalItems]="totalItems"
      [pageSize]="pageSize"
      [showPagination]="true"
      [emptyMessage]="i18n.t('vacation_types.no_vacation_types')"
      [emptyTitle]="i18n.t('vacation_types.no_vacation_types_message')"
      (actionClick)="onTableAction($event)"
      (pageChange)="onPageChange($event)"
      (pageSizeChange)="onPageSizeChange($event)"
    >
      <!-- Custom cell template for vacation type name -->
      <ng-template #cellTemplate let-item let-column="column">
        @if (column.key === 'name') {
          <div>
            <div class="fw-medium">{{ item.name }}</div>
            @if (item.nameAr) {
              <div class="text-muted small">{{ item.nameAr }}</div>
            }
          </div>
        } @else if (column.key === 'branchName') {
          {{ item.branchName || i18n.t('common.not_specified') }}
        } @else if (column.key === 'isActive') {
          <app-status-badge
            [status]="item.isActive ? 'active' : 'inactive'"
            [label]="getStatusText(item.isActive)">
          </app-status-badge>
        } @else if (column.key === 'createdAtUtc') {
          {{ item.createdAtUtc | date:'short' }}
        } @else {
          {{ item[column.key] }}
        }
      </ng-template>
    </app-data-table>
  </app-section-card>

  <!-- Vacation Type Modal -->
  <app-vacation-type-modal
    (modalClose)="loadVacationTypes()"
    (vacationTypeCreated)="onVacationTypeCreated()"
    (vacationTypeUpdated)="onVacationTypeUpdated()"
  ></app-vacation-type-modal>
</div>