import{a as Ve}from"./chunk-HPD5AHCS.js";import{a as Te}from"./chunk-FDL2CFXM.js";import{a as xe}from"./chunk-MCONEJ2T.js";import{a as L}from"./chunk-K7WTKFJQ.js";import{a as be}from"./chunk-NPDCAEA6.js";import{a as j}from"./chunk-UZ37NW3L.js";import"./chunk-QW24EDIR.js";import"./chunk-QXVLGI72.js";import"./chunk-HUSARQNL.js";import{a as ye}from"./chunk-H5EPUHY6.js";import{a as re}from"./chunk-MUNQGSPX.js";import{a as A,b as D}from"./chunk-Y62N6K5S.js";import{c as se,d as $,e as ce,f as le,i as de,m as pe,n as me,o as _e,p as ue,r as fe,v as ge,w as he,y as ve}from"./chunk-VRETN7JA.js";import"./chunk-GRQ6RO47.js";import{a as Ce}from"./chunk-UBCI4X5Q.js";import"./chunk-EYAJMHM7.js";import{a as Y}from"./chunk-HHXRLUSQ.js";import"./chunk-S3CAEY4A.js";import{b as q}from"./chunk-TJ2U7DWW.js";import{g as ae}from"./chunk-TWXUAMJ4.js";import{$a as W,Ab as I,Bb as c,Cb as m,Db as g,Ea as O,Ia as H,Ka as P,Pb as ie,R as y,Sb as R,Tb as z,Ub as ne,W as d,X as p,Xa as _,Ya as u,Yb as S,Zb as oe,ab as J,bb as f,cb as s,da as h,db as r,eb as M,fb as x,gb as C,hb as N,lb as b,nb as T,ob as F,pb as l,qb as K,rb as X,ta as o,tb as Z,ub as ee,uc as U,vb as te,wc as w,yb as B}from"./chunk-JSQL33QG.js";import{a as E,b as Q}from"./chunk-DGAILPFQ.js";var Oe=(n,t)=>t.id;function we(n,t){if(n&1&&(s(0,"div",2)(1,"div",6)(2,"div",7)(3,"label",8),c(4),r(),s(5,"p",9),c(6),r()(),s(7,"div",10)(8,"label",8),c(9),r(),s(10,"p",9),c(11),r()(),s(12,"div",10)(13,"label",8),c(14),r(),s(15,"p",11),c(16),r()(),s(17,"div",10)(18,"label",8),c(19),r(),s(20,"p",9),M(21,"app-status-badge",12),r()(),s(22,"div",10)(23,"label",8),c(24),r(),s(25,"p",9),c(26),R(27,"date"),r()()()()),n&2){let e=l();o(4),m(e.i18n.t("vacation_types.branch")),o(2),m(e.getBranchName()||e.i18n.t("vacation_types.all_branches")),o(3),m(e.i18n.t("vacation_types.name")),o(2),m(e.vacationType==null?null:e.vacationType.name),o(3),m(e.i18n.t("vacation_types.name_ar")),o(2),m((e.vacationType==null?null:e.vacationType.nameAr)||e.i18n.t("common.not_specified")),o(3),m(e.i18n.t("vacation_types.column_status")),o(2),f("status",e.vacationType!=null&&e.vacationType.isActive?"active":"inactive")("label",e.vacationType!=null&&e.vacationType.isActive?e.i18n.t("common.active"):e.i18n.t("common.inactive"))("showIcon",!0),o(3),m(e.i18n.t("vacation_types.created_at")),o(2),m(z(27,12,e.vacationType==null?null:e.vacationType.createdAtUtc,"medium"))}}function Ie(n,t){if(n&1&&(s(0,"option",17),c(1),r()),n&2){let e=t.$implicit;f("value",e.id),o(),m(e.name)}}function Ae(n,t){if(n&1&&(s(0,"div",18),c(1),r()),n&2){let e=l(2);o(),g(" ",e.getFieldError("branchId")," ")}}function De(n,t){if(n&1&&(s(0,"div",18),c(1),r()),n&2){let e=l(2);o(),g(" ",e.getFieldError("name")," ")}}function ke(n,t){if(n&1&&(s(0,"div",18),c(1),r()),n&2){let e=l(2);o(),g(" ",e.getFieldError("nameAr")," ")}}function Ne(n,t){if(n&1){let e=b();s(0,"form",13),T("ngSubmit",function(){d(e);let a=l();return p(a.onSubmit())}),s(1,"div",6)(2,"div",7)(3,"label",14),c(4),r(),s(5,"select",15)(6,"option",16),c(7),r(),W(8,Ie,2,2,"option",17,Oe),r(),_(10,Ae,2,1,"div",18),r(),s(11,"div",10)(12,"label",19),c(13),r(),M(14,"input",20),_(15,De,2,1,"div",18),r(),s(16,"div",10)(17,"label",14),c(18),r(),M(19,"input",21),_(20,ke,2,1,"div",18),r()()()}if(n&2){let e=l();f("formGroup",e.form),o(4),m(e.i18n.t("vacation_types.branch")),o(),B("is-invalid",e.hasFieldError("branchId")),o(2),m(e.i18n.t("vacation_types.all_branches")),o(),J(e.availableBranches()),o(2),u(e.hasFieldError("branchId")?10:-1),o(3),m(e.i18n.t("vacation_types.name")),o(),B("is-invalid",e.hasFieldError("name")),f("placeholder",e.i18n.t("vacation_types.name_placeholder")),o(),u(e.hasFieldError("name")?15:-1),o(3),m(e.i18n.t("vacation_types.name_ar")),o(),B("is-invalid",e.hasFieldError("nameAr")),f("placeholder",e.i18n.t("vacation_types.name_ar_placeholder")),o(),u(e.hasFieldError("nameAr")?20:-1)}}function Fe(n,t){if(n&1){let e=b();s(0,"button",22),T("click",function(){d(e);let a=l();return p(a.onCancel())}),c(1),r()}if(n&2){let e=l();o(),g(" ",e.i18n.t("common.close")," ")}}function Be(n,t){n&1&&M(0,"span",25)}function Re(n,t){if(n&1){let e=b();s(0,"button",23),T("click",function(){d(e);let a=l();return p(a.onCancel())}),c(1),r(),s(2,"button",24),T("click",function(){d(e);let a=l();return p(a.onSubmit())}),_(3,Be,1,0,"span",25),c(4),r()}if(n&2){let e=l();f("disabled",e.loading()),o(),g(" ",e.i18n.t("common.cancel")," "),o(),f("disabled",!e.isFormValid()||e.loading()),o(),u(e.loading()?3:-1),o(),g(" ",e.isEdit?e.i18n.t("common.update"):e.i18n.t("common.create")," ")}}var k=class n{fb=y(he);vacationTypesService=y(j);notificationService=y(Y);i18n=y(q);vacationType;isEdit=!1;isView=!1;isOpen=h(!1);modalClose=new P;vacationTypeCreated=new P;vacationTypeUpdated=new P;form;availableBranches=h([]);loading=h(!1);formValid=h(!1);formDirty=h(!1);isFormValid=S(()=>this.formValid());isDirty=S(()=>this.formDirty());ngOnInit(){this.initializeForm(),this.loadBranches()}ngOnDestroy(){}initializeForm(){this.form=this.fb.group({branchId:[null],name:["",[$.required,$.maxLength(100)]],nameAr:["",[$.maxLength(100)]]}),this.formValid.set(this.form.valid),this.formDirty.set(this.form.dirty),this.form.statusChanges.subscribe(()=>{this.formValid.set(this.form.valid)}),this.form.valueChanges.subscribe(()=>{this.formDirty.set(this.form.dirty)}),this.isEdit&&this.vacationType&&this.populateForm()}populateForm(){this.vacationType&&(this.form.patchValue({branchId:this.vacationType.branchId,name:this.vacationType.name,nameAr:this.vacationType.nameAr}),this.formValid.set(this.form.valid),this.formDirty.set(this.form.dirty))}loadBranches(){this.vacationTypesService.getBranches().subscribe({next:t=>{this.availableBranches.set(t)},error:t=>{console.error("Failed to load branches:",t)}})}onSubmit(){if(!this.form.valid){this.form.markAllAsTouched();return}let t=this.form.value,e={branchId:t.branchId||null,name:t.name.trim(),nameAr:t.nameAr?.trim()||void 0};this.loading.set(!0),this.isEdit&&this.vacationType?this.vacationTypesService.updateVacationType(this.vacationType.id,e).subscribe({next:()=>{this.loading.set(!1),this.notificationService.success(this.i18n.t("vacation_types.success.updated")),this.vacationTypeUpdated.emit(),this.closeModal()},error:i=>{this.loading.set(!1),console.error("Failed to update vacation type:",i),i.error?.error?this.notificationService.error(i.error.error):this.notificationService.error(this.i18n.t("vacation_types.errors.update_failed"))}}):this.vacationTypesService.createVacationType(e).subscribe({next:()=>{this.loading.set(!1),this.notificationService.success(this.i18n.t("vacation_types.success.created")),this.vacationTypeCreated.emit(),this.closeModal()},error:i=>{this.loading.set(!1),console.error("Failed to create vacation type:",i),i.error?.error?this.notificationService.error(i.error.error):this.notificationService.error(this.i18n.t("vacation_types.errors.create_failed"))}})}onCancel(){this.isOpen.set(!1),this.form.reset(),this.initializeForm(),this.formValid.set(this.form.valid),this.formDirty.set(this.form.dirty),this.modalClose.emit()}getFieldError(t){let e=this.form.get(t);if(!e||!e.errors||!e.touched)return null;let i=e.errors;return i.required?this.i18n.t("validation.field_required"):i.maxlength?this.i18n.t("validation.max_length"):this.i18n.t("validation.invalid_field")}hasFieldError(t){let e=this.form.get(t);return!!(e&&e.errors&&e.touched)}openModal(t,e="create"){this.vacationType=t,this.isEdit=e==="edit",this.isView=e==="view",this.isOpen.set(!0),this.isView||this.initializeForm()}closeModal(){this.isOpen.set(!1),this.isView||(this.form.reset(),this.initializeForm(),this.formValid.set(this.form.valid),this.formDirty.set(this.form.dirty)),this.modalClose.emit()}getBranchName(){return this.vacationType?.branchId&&this.availableBranches().find(e=>e.id===this.vacationType?.branchId)?.name||null}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=O({type:n,selectors:[["app-vacation-type-modal"]],inputs:{vacationType:"vacationType",isEdit:"isEdit",isView:"isView",isOpen:"isOpen"},outputs:{modalClose:"modalClose",vacationTypeCreated:"vacationTypeCreated",vacationTypeUpdated:"vacationTypeUpdated"},decls:7,vars:6,consts:[[3,"close","show","title","centered","loading"],[1,"modal-body"],[1,"vacation-type-details"],[1,"vacation-type-form",3,"formGroup"],["modal-footer","",1,"d-flex","gap-2","justify-content-end"],["type","button",1,"btn","btn-secondary"],[1,"row"],[1,"col-md-12","mb-3"],[1,"form-label","fw-bold"],[1,"form-control-plaintext"],[1,"col-md-6","mb-3"],["dir","rtl",1,"form-control-plaintext"],[3,"status","label","showIcon"],[1,"vacation-type-form",3,"ngSubmit","formGroup"],[1,"form-label"],["formControlName","branchId",1,"form-select"],["value",""],[3,"value"],[1,"invalid-feedback"],[1,"form-label","required"],["type","text","formControlName","name","maxlength","100",1,"form-control",3,"placeholder"],["type","text","formControlName","nameAr","maxlength","100","dir","rtl",1,"form-control",3,"placeholder"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,i){e&1&&(s(0,"app-modal-wrapper",0),T("close",function(){return i.onCancel()}),s(1,"div",1),_(2,we,28,15,"div",2)(3,Ne,21,16,"form",3),r(),s(4,"div",4),_(5,Fe,2,1,"button",5)(6,Re,5,5),r()()),e&2&&(f("show",i.isOpen())("title",i.isView?i.i18n.t("vacation_types.view_details"):i.isEdit?i.i18n.t("vacation_types.edit_vacation_type"):i.i18n.t("vacation_types.create_vacation_type"))("centered",!0)("loading",i.loading()),o(2),u(i.isView?2:3),o(3),u(i.isView?5:6))},dependencies:[w,ve,de,ue,fe,se,_e,ce,le,ge,pe,me,L,Te,U],styles:['.required[_ngcontent-%COMP%]:after{content:" *";color:red}']})};var ze=["*"];function Ue(n,t){if(n&1&&(x(0,"h5",4),c(1),C()),n&2){let e=l();o(),m(e.title)}}function $e(n,t){if(n&1&&(x(0,"div",11)(1,"small",12),c(2),C()()),n&2){let e=l(2);o(2),m(e.details)}}function Ye(n,t){if(n&1){let e=b();x(0,"div",6)(1,"button",10),F("click",function(){d(e);let a=l();return p(a.toggleDetails())}),N(2,"i"),c(3),C(),_(4,$e,3,1,"div",11),C()}if(n&2){let e=l();o(2),I(e.detailsExpanded?"fa-solid fa-chevron-up":"fa-solid fa-chevron-down"),o(),g(" ",e.detailsExpanded?"Hide details":"Show details"," "),o(),u(e.detailsExpanded?4:-1)}}function qe(n,t){if(n&1){let e=b();x(0,"div",7)(1,"button",13),F("click",function(){d(e);let a=l();return p(a.onRetry())}),N(2,"i",14),c(3),C()()}if(n&2){let e=l();o(),I("btn btn-sm btn-"+e.variant),o(2),g(" ",e.retryText," ")}}function Le(n,t){if(n&1){let e=b();x(0,"button",15),F("click",function(){d(e);let a=l();return p(a.onDismiss())}),C()}}var G=class n{message="An error occurred";title;icon="fa-solid fa-exclamation-triangle";dismissible=!0;showRetry=!1;retryText="Retry";details;showDetails=!1;variant="danger";dismiss=new P;retry=new P;detailsExpanded=!1;onDismiss(){this.dismiss.emit()}onRetry(){this.retry.emit()}toggleDetails(){this.detailsExpanded=!this.detailsExpanded}getAlertClasses(){let t=["alert"];return t.push(`alert-${this.variant}`),this.dismissible&&t.push("alert-dismissible"),t.join(" ")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=O({type:n,selectors:[["app-error-alert"]],inputs:{message:"message",title:"title",icon:"icon",dismissible:"dismissible",showRetry:"showRetry",retryText:"retryText",details:"details",showDetails:"showDetails",variant:"variant"},outputs:{dismiss:"dismiss",retry:"retry"},ngContentSelectors:ze,decls:13,vars:9,consts:[["role","alert"],[1,"d-flex","align-items-start"],[1,"alert-icon","me-3"],[1,"flex-grow-1"],[1,"alert-heading","mb-2"],[1,"alert-message"],[1,"alert-details","mt-2"],[1,"alert-actions","mt-3"],[1,"alert-custom-content","mt-2"],["type","button","aria-label","Close",1,"btn-close"],["type","button",1,"btn","btn-sm","btn-link","p-0","text-decoration-none",3,"click"],[1,"alert-details-content","mt-2","p-2","bg-light","rounded"],[1,"font-monospace"],["type","button",3,"click"],[1,"fa-solid","fa-refresh","me-1"],["type","button","aria-label","Close",1,"btn-close",3,"click"]],template:function(e,i){e&1&&(K(),x(0,"div",0)(1,"div",1)(2,"div",2),N(3,"i"),C(),x(4,"div",3),_(5,Ue,2,1,"h5",4),x(6,"div",5),c(7),C(),_(8,Ye,5,4,"div",6),_(9,qe,4,3,"div",7),x(10,"div",8),X(11),C()(),_(12,Le,1,0,"button",9),C()()),e&2&&(I(i.getAlertClasses()),o(3),I(i.icon+" fa-lg"),o(2),u(i.title?5:-1),o(2),g(" ",i.message," "),o(),u(i.details&&i.showDetails?8:-1),o(),u(i.showRetry?9:-1),o(3),u(i.dismissible?12:-1))},dependencies:[w],styles:[".alert[_ngcontent-%COMP%]{margin-bottom:1rem}.alert-icon[_ngcontent-%COMP%]{flex-shrink:0;line-height:1}.alert-heading[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:.5rem}.alert-message[_ngcontent-%COMP%]{line-height:1.5}.alert-details[_ngcontent-%COMP%]{margin-top:.75rem}.alert-details-content[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;word-break:break-word}.alert-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-close[_ngcontent-%COMP%]{align-self:flex-start}.alert[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:.25rem}.alert-danger[_ngcontent-%COMP%]{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert-warning[_ngcontent-%COMP%]{color:#664d03;background-color:#fff3cd;border-color:#ffecb5}"]})};var je=()=>[];function Ge(n,t){if(n&1){let e=b();s(0,"app-error-alert",8),T("retry",function(){d(e);let a=l();return p(a.loadVacationTypes())}),r()}if(n&2){let e=l();f("message",t)("showRetry",!0)("retryText",e.i18n.t("common.retry"))}}function Qe(n,t){if(n&1&&(s(0,"div",11),c(1),r()),n&2){let e=l(2).$implicit;o(),m(e.nameAr)}}function He(n,t){if(n&1&&(s(0,"div")(1,"div",10),c(2),r(),_(3,Qe,2,1,"div",11),r()),n&2){let e=l().$implicit;o(2),m(e.name),o(),u(e.nameAr?3:-1)}}function We(n,t){if(n&1&&c(0),n&2){let e=l(2).$implicit;g(" ",e.branchName||"Branch "+e.branchId," ")}}function Je(n,t){if(n&1&&c(0),n&2){let e=l(3);g(" ",e.i18n.t("common.company_wide")," ")}}function Ke(n,t){if(n&1&&_(0,We,1,1)(1,Je,1,1),n&2){let e=l().$implicit;u(e.branchId?0:1)}}function Xe(n,t){if(n&1&&M(0,"app-status-badge",9),n&2){let e=l().$implicit,i=l();f("status",e.isActive?"active":"inactive")("label",i.getStatusText(e.isActive))}}function Ze(n,t){if(n&1&&(c(0),R(1,"date")),n&2){let e=l().$implicit;g(" ",z(1,1,e.createdAtUtc,"short")," ")}}function et(n,t){if(n&1&&c(0),n&2){let e=l(),i=e.$implicit,a=e.column;g(" ",i[a.key]," ")}}function tt(n,t){if(n&1&&_(0,He,4,2,"div")(1,Ke,2,1)(2,Xe,1,2,"app-status-badge",9)(3,Ze,2,4)(4,et,1,1),n&2){let e=t.column;u(e.key==="name"?0:e.key==="branchName"?1:e.key==="isActive"?2:e.key==="createdAtUtc"?3:4)}}var Se=class n{vacationTypesService=y(j);notificationService=y(Y);confirmationService=y(ye);router=y(ae);i18n=y(q);permissionService=y(re);vacationTypeModal;loading=h(!1);currentPage=h(1);pageSize=h(10);searchTerm=h("");selectedBranchId=h(null);selectedStatus=h(null);availableBranches=h([]);vacationTypes=this.vacationTypesService.vacationTypes;pagedResult=this.vacationTypesService.pagedResult;error=this.vacationTypesService.error;tableColumns=[{key:"name",label:this.i18n.t("vacation_types.name"),sortable:!0,width:"30%"},{key:"branchName",label:this.i18n.t("vacation_types.branch"),sortable:!0,width:"25%"},{key:"isActive",label:this.i18n.t("vacation_types.column_status"),width:"15%"},{key:"createdAtUtc",label:this.i18n.t("vacation_types.created_at"),sortable:!0,width:"20%"}];tableActions=[{key:"view",label:this.i18n.t("common.view"),icon:"fa-eye",color:"primary"},{key:"edit",label:this.i18n.t("common.edit"),icon:"fa-edit",color:"secondary",condition:t=>this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_UPDATE)},{key:"toggle",label:this.i18n.t("common.activate"),icon:"fa-check",color:"success",condition:t=>this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_UPDATE)&&!t.isActive},{key:"toggle",label:this.i18n.t("common.deactivate"),icon:"fa-ban",color:"warning",condition:t=>this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_UPDATE)&&t.isActive},{key:"delete",label:this.i18n.t("common.delete"),icon:"fa-trash",color:"danger",condition:t=>this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_DELETE)}];PERMISSIONS={VACATION_TYPE_READ:`${D.VACATION_TYPE}.${A.READ}`,VACATION_TYPE_CREATE:`${D.VACATION_TYPE}.${A.CREATE}`,VACATION_TYPE_UPDATE:`${D.VACATION_TYPE}.${A.UPDATE}`,VACATION_TYPE_DELETE:`${D.VACATION_TYPE}.${A.DELETE}`};totalItems=S(()=>this.pagedResult()?.totalCount??0);totalPages=S(()=>{let t=this.pagedResult();return!t||t.pageSize===0?1:Math.ceil(t.totalCount/t.pageSize)});currentFilter=S(()=>({search:this.searchTerm()||void 0,branchId:this.selectedBranchId()??void 0,isActive:this.selectedStatus()??void 0}));Math=Math;constructor(){oe(()=>{let t=this.currentFilter(),e=this.currentPage(),i=this.pageSize();this.loadVacationTypes(E({page:e,pageSize:i},t))})}ngOnInit(){this.loadBranches(),this.loadVacationTypes()}loadVacationTypes(t){this.loading.set(!0);let e=E(E({page:this.currentPage(),pageSize:this.pageSize()},this.currentFilter()),t);this.vacationTypesService.getVacationTypes(e).subscribe({next:()=>{this.loading.set(!1)},error:i=>{this.loading.set(!1),this.notificationService.error(this.i18n.t("vacation_types.errors.load_failed")),console.error("Failed to load vacation types:",i)}})}loadBranches(){this.vacationTypesService.getBranches().subscribe({next:t=>{this.availableBranches.set(t)},error:t=>{console.error("Failed to load branches:",t),this.notificationService.error(this.i18n.t("branches.errors.load_failed"))}})}onSearchChange(t){this.searchTerm.set(t),this.currentPage.set(1)}onSearchTermChange(t){this.searchTerm.set(t),this.currentPage.set(1)}onFiltersChange(t){if(t.search!==void 0&&this.searchTerm.set(t.search||""),t.branchId!==void 0){let e=t.branchId?parseInt(t.branchId):null;this.selectedBranchId.set(e)}if(t.isActive!==void 0){let e=t.isActive==="true"?!0:t.isActive==="false"?!1:null;this.selectedStatus.set(e)}this.currentPage.set(1)}onBranchChange(t){this.selectedBranchId.set(t),this.currentPage.set(1)}onStatusChange(t){this.selectedStatus.set(t),this.currentPage.set(1)}onClearFilters(){this.searchTerm.set(""),this.selectedBranchId.set(null),this.selectedStatus.set(null),this.currentPage.set(1)}onRefreshData(){this.onClearFilters(),this.loadVacationTypes()}onPageChange(t){this.currentPage.set(t)}onPageSizeChange(t){this.pageSize.set(t),this.currentPage.set(1)}onCreateVacationType(){if(!this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_CREATE)){this.notificationService.error(this.i18n.t("common.errors.insufficient_permissions"));return}this.vacationTypeModal.openModal(void 0,"create")}onViewVacationType(t){let e=Q(E({},t),{canBeModified:!0,canBeDeleted:!0});this.vacationTypeModal.openModal(e,"view")}onEditVacationType(t){if(!this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_UPDATE)){this.notificationService.error(this.i18n.t("common.errors.insufficient_permissions"));return}let e=Q(E({},t),{canBeModified:!0,canBeDeleted:!0});this.vacationTypeModal.openModal(e,"edit")}onToggleStatus(t){if(!this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_UPDATE)){this.notificationService.error(this.i18n.t("common.errors.insufficient_permissions"));return}let e=t.isActive?"deactivate":"activate",i=this.i18n.t(`vacation_types.confirm_${e}`).replace("{{name}}",t.name);this.confirmationService.confirm({title:this.i18n.t(`vacation_types.${e}_vacation_type`),message:i,confirmText:this.i18n.t(`common.${e}`),cancelText:this.i18n.t("common.cancel")}).then(a=>{a.confirmed&&this.vacationTypesService.toggleVacationTypeStatus(t.id).subscribe({next:()=>{let v=t.isActive?this.i18n.t("vacation_types.success.deactivated"):this.i18n.t("vacation_types.success.activated");this.notificationService.success(v)},error:v=>{console.error("Failed to toggle vacation type status:",v),this.notificationService.error(this.i18n.t("vacation_types.errors.status_toggle_failed"))}})})}onDeleteVacationType(t){if(!this.permissionService.has(this.PERMISSIONS.VACATION_TYPE_DELETE)){this.notificationService.error(this.i18n.t("common.errors.insufficient_permissions"));return}this.confirmationService.confirm({title:this.i18n.t("vacation_types.delete_vacation_type"),message:this.i18n.t("vacation_types.confirm_delete"),confirmText:this.i18n.t("common.delete"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-danger"}).then(e=>{e.confirmed&&this.vacationTypesService.deleteVacationType(t.id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("vacation_types.success.deleted"))},error:i=>{console.error("Failed to delete vacation type:",i),this.notificationService.error(this.i18n.t("vacation_types.errors.delete_failed"))}})})}onTableAction(t){let{action:e,item:i}=t;switch(e){case"view":this.onViewVacationType(i);break;case"edit":this.onEditVacationType(i);break;case"toggle":this.onToggleStatus(i);break;case"delete":this.onDeleteVacationType(i);break}}getStatusBadgeClass(t){return t?"bg-success":"bg-secondary"}getStatusText(t){return t?this.i18n.t("common.active"):this.i18n.t("common.inactive")}onVacationTypeCreated(){this.loadVacationTypes()}onVacationTypeUpdated(){this.loadVacationTypes()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=O({type:n,selectors:[["app-vacation-types"]],viewQuery:function(e,i){if(e&1&&Z(k,5),e&2){let a;ee(a=te())&&(i.vacationTypeModal=a.first)}},decls:9,vars:18,consts:[["cellTemplate",""],[1,"app-list-page"],[3,"title"],["moduleName","vacation-types",3,"searchChange","filtersChange","add","refresh","refreshing"],[3,"message","showRetry","retryText"],[3,"title","showHeader","bodyClass"],[3,"actionClick","pageChange","pageSizeChange","data","columns","actions","currentPage","totalPages","totalItems","pageSize","loading","emptyTitle","emptyMessage","showPagination"],[3,"modalClose","vacationTypeCreated","vacationTypeUpdated"],[3,"retry","message","showRetry","retryText"],[3,"status","label"],[1,"fw-medium"],[1,"text-muted","small"]],template:function(e,i){if(e&1){let a=b();s(0,"div",1),M(1,"app-page-header",2),s(2,"app-unified-filter",3),T("searchChange",function(V){return d(a),p(i.onSearchTermChange(V))})("filtersChange",function(V){return d(a),p(i.onFiltersChange(V))})("add",function(){return d(a),p(i.onCreateVacationType())})("refresh",function(){return d(a),p(i.onRefreshData())}),r(),_(3,Ge,1,3,"app-error-alert",4),s(4,"app-section-card",5)(5,"app-data-table",6),T("actionClick",function(V){return d(a),p(i.onTableAction(V))})("pageChange",function(V){return d(a),p(i.onPageChange(V))})("pageSizeChange",function(V){return d(a),p(i.onPageSizeChange(V))}),H(6,tt,5,1,"ng-template",null,0,ne),r()(),s(8,"app-vacation-type-modal",7),T("modalClose",function(){return d(a),p(i.loadVacationTypes())})("vacationTypeCreated",function(){return d(a),p(i.onVacationTypeCreated())})("vacationTypeUpdated",function(){return d(a),p(i.onVacationTypeUpdated())}),r()()}if(e&2){let a;o(),f("title",i.i18n.t("vacation_types.title")),o(),f("refreshing",i.loading()),o(),u((a=i.error())?3:-1,a),o(),f("title",i.i18n.t("vacation_types.title"))("showHeader",!1)("bodyClass","p-0"),o(),f("data",i.vacationTypes()||ie(17,je))("columns",i.tableColumns)("actions",i.tableActions)("currentPage",i.currentPage)("totalPages",i.totalPages)("totalItems",i.totalItems)("pageSize",i.pageSize)("loading",i.loading)("emptyTitle",i.i18n.t("vacation_types.no_vacation_types"))("emptyMessage",i.i18n.t("vacation_types.no_vacation_types_message"))("showPagination",!0)}},dependencies:[w,k,be,Ce,xe,G,Ve,L,U],styles:[".vacation-types-page[_ngcontent-%COMP%]{padding:1.5rem}.vacation-types-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.vacation-types-page[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:8px;box-shadow:0 .125rem .25rem #00000013}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:6px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.input-group-text[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #ced4da;color:#6c757d}.btn[_ngcontent-%COMP%]{border-radius:6px;font-weight:500;transition:all .15s ease-in-out}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#6c757d;color:#6c757d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#6c757d;border-color:#6c757d;color:#fff}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600;color:#495057;padding:1rem .75rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem .75rem;vertical-align:middle;border-bottom:1px solid #f1f3f4}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.vacation-type-color[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:3px;border:1px solid rgba(0,0,0,.1);flex-shrink:0}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;padding:.375rem .5rem;border-radius:4px}.badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.badge-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.badge-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.badge-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.badge-light[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;border:1px solid #dee2e6}.dropdown-menu[_ngcontent-%COMP%]{border-radius:6px;box-shadow:0 .5rem 1rem #00000026;border:1px solid #e9ecef}.dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;transition:background-color .15s ease-in-out}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item.text-danger[_ngcontent-%COMP%]:hover{background-color:#f5c6cb;color:#721c24}.fa-check-circle[_ngcontent-%COMP%]{color:#28a745!important}.fa-times-circle[_ngcontent-%COMP%]{color:#6c757d!important}.fa-dollar-sign[_ngcontent-%COMP%]{color:#28a745!important}.fa-ban[_ngcontent-%COMP%]{color:#6c757d!important}.pagination[_ngcontent-%COMP%]{--bs-pagination-border-radius: 6px}.page-link[_ngcontent-%COMP%]{border-radius:6px;margin:0 2px;border:1px solid #dee2e6;color:#007bff}.page-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#dee2e6}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;background-color:#fff;border-color:#dee2e6}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.fa-calendar-times[_ngcontent-%COMP%]{opacity:.6}.alert[_ngcontent-%COMP%]{border-radius:6px;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24}.text-muted[_ngcontent-%COMP%]{font-size:.875rem}@media (max-width: 768px){.vacation-types-page[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.btn-group[_ngcontent-%COMP%]{position:static}.dropdown-menu[_ngcontent-%COMP%]{position:absolute!important;transform:none!important}}@media (max-width: 576px){.vacation-types-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem}.badge[_ngcontent-%COMP%]{font-size:.6875rem;padding:.25rem .375rem}.btn-sm[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}"]})};export{Se as VacationTypesComponent};
