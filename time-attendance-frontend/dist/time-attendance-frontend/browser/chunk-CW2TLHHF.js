import{a as re}from"./chunk-A3B6D6R2.js";import{a as le}from"./chunk-4QC5DFDN.js";import{a as ae}from"./chunk-S52YPO73.js";import{a as ne}from"./chunk-SRPEDAT4.js";import{a as me}from"./chunk-LHKEM3UB.js";import"./chunk-MUNQGSPX.js";import"./chunk-Y62N6K5S.js";import{c as U,d as x,e as z,f as B,i as L,m as H,n as J,o as K,p as Q,r as X,v as Y,w as Z,y as ee}from"./chunk-VRETN7JA.js";import{a as oe}from"./chunk-EYAJMHM7.js";import{a as te}from"./chunk-HHXRLUSQ.js";import{b as $}from"./chunk-S3CAEY4A.js";import{b as ie}from"./chunk-TJ2U7DWW.js";import{d as G,g as j}from"./chunk-TWXUAMJ4.js";import{$a as T,Bb as l,Cb as f,Db as _,Ea as N,Eb as M,R as c,W as q,X as E,Xa as u,Ya as v,Yb as O,ab as F,bb as d,cb as a,da as I,db as r,eb as C,lb as V,nb as A,pb as p,ta as t,wc as P,yb as h}from"./chunk-JSQL33QG.js";import{a as R,b as w}from"./chunk-DGAILPFQ.js";var de=(n,i)=>i.value;function ce(n,i){n&1&&C(0,"app-loading-spinner")}function pe(n,i){if(n&1&&(a(0,"div",9),l(1),r()),n&2){let o=p(2);t(),_(" ",o.i18n.t("remoteWork.request.validation.employee_required")," ")}}function ue(n,i){if(n&1&&(a(0,"div",9),l(1),r()),n&2){let o=p(2);t(),_(" ",o.i18n.t("remoteWork.request.validation.start_date_required")," ")}}function ve(n,i){if(n&1&&(a(0,"div",9),l(1),r()),n&2){let o=p(2);t(),_(" ",o.i18n.t("remoteWork.request.validation.end_date_required")," ")}}function fe(n,i){if(n&1&&(a(0,"option",17),l(1),r()),n&2){let o=i.$implicit;d("value",o.value),t(),f(o.label)}}function _e(n,i){if(n&1&&(a(0,"div",9),l(1),r()),n&2){let o=p(2);t(),_(" ",o.i18n.t("remoteWork.request.validation.status_required")," ")}}function ge(n,i){n&1&&C(0,"span",23)}function Ce(n,i){if(n&1){let o=V();a(0,"div",2)(1,"div",3)(2,"form",4),A("ngSubmit",function(){q(o);let m=p();return E(m.onSubmit())}),a(3,"app-form-section",5)(4,"div",6)(5,"label",7),l(6),r(),a(7,"app-searchable-select",8),A("selectionChange",function(m){q(o);let g=p();return E(g.onEmployeeSelectionChange(m))}),r(),u(8,pe,2,1,"div",9),r()(),a(9,"app-form-section",5)(10,"div",10)(11,"div",11)(12,"label",7),l(13),r(),C(14,"input",12),u(15,ue,2,1,"div",9),r(),a(16,"div",11)(17,"label",7),l(18),r(),C(19,"input",13),u(20,ve,2,1,"div",9),r()(),a(21,"div",6)(22,"label",14),l(23),r(),a(24,"textarea",15),l(25,"              "),r()(),a(26,"div",6)(27,"label",7),l(28),r(),a(29,"select",16),T(30,fe,2,2,"option",17,de),r(),u(32,_e,2,1,"div",9),r(),a(33,"div",6)(34,"label",14),l(35),r(),a(36,"textarea",18),l(37,"              "),r(),a(38,"div",19),l(39),r()()(),a(40,"div",20)(41,"button",21),A("click",function(){q(o);let m=p();return E(m.onCancel())}),l(42),r(),a(43,"button",22),u(44,ge,1,0,"span",23),l(45),r()()()()()}if(n&2){let o,s,m,g,b,y,k,S,W,D,e=p();t(2),d("formGroup",e.form),t(),d("title",e.i18n.t("remoteWork.request.employee_information")),t(3),f(e.i18n.t("remoteWork.request.employee")),t(),h("is-invalid",((o=e.form.get("employeeId"))==null?null:o.invalid)&&((o=e.form.get("employeeId"))==null?null:o.touched)),d("options",e.employeeOptions())("value",(s=e.form.get("employeeId"))==null?null:s.value)("placeholder",e.i18n.t("remoteWork.request.select_employee"))("searchable",!0)("clearable",!1),t(),v((m=e.form.get("employeeId"))!=null&&m.invalid&&((m=e.form.get("employeeId"))!=null&&m.touched)?8:-1),t(),d("title",e.i18n.t("remoteWork.request.remote_work_details")),t(4),f(e.i18n.t("remoteWork.request.startDate")),t(),h("is-invalid",((g=e.form.get("startDate"))==null?null:g.invalid)&&((g=e.form.get("startDate"))==null?null:g.touched)),t(),v((b=e.form.get("startDate"))!=null&&b.invalid&&((b=e.form.get("startDate"))!=null&&b.touched)?15:-1),t(3),f(e.i18n.t("remoteWork.request.endDate")),t(),h("is-invalid",((y=e.form.get("endDate"))==null?null:y.invalid)&&((y=e.form.get("endDate"))==null?null:y.touched)),t(),v((k=e.form.get("endDate"))!=null&&k.invalid&&((k=e.form.get("endDate"))!=null&&k.touched)?20:-1),t(3),f(e.i18n.t("remoteWork.request.reason")),t(),d("placeholder",e.i18n.t("remoteWork.request.reason_placeholder")),t(4),f(e.i18n.t("common.status")),t(),h("is-invalid",((S=e.form.get("status"))==null?null:S.invalid)&&((S=e.form.get("status"))==null?null:S.touched)),t(),F(e.statusOptions),t(2),v((W=e.form.get("status"))!=null&&W.invalid&&((W=e.form.get("status"))!=null&&W.touched)?32:-1),t(3),f(e.i18n.t("remoteWork.request.approval_comments")),t(),d("placeholder",e.i18n.t("remoteWork.request.approval_comments_placeholder")),t(3),M(" ",((D=e.form.get("approvalComments"))==null||D.value==null?null:D.value.length)||0,"/1000 ",e.i18n.t("common.characters")," "),t(2),d("disabled",e.submitting()),t(),_(" ",e.i18n.t("common.cancel")," "),t(),d("disabled",e.form.invalid||e.submitting()),t(),v(e.submitting()?44:-1),t(),_(" ",e.i18n.t("remoteWork.request.create")," ")}}var se=class n{fb=c(Z);router=c(j);route=c(G);remoteWorkService=c(re);employeesService=c(me);notification=c(te);authService=c($);i18n=c(ie);form;loading=I(!1);submitting=I(!1);employees=I([]);employeeOptions=O(()=>this.employees().map(i=>({value:i.id,label:`${i.name} (${i.employeeNumber})`})));statusOptions=[{value:0,label:this.i18n.t("remoteWork.status.pending")},{value:1,label:this.i18n.t("remoteWork.status.approved")},{value:2,label:this.i18n.t("remoteWork.status.rejected")},{value:3,label:this.i18n.t("remoteWork.status.cancelled")}];ngOnInit(){this.initializeForm(),this.loadEmployees()}initializeForm(){this.form=this.fb.group({employeeId:[null,x.required],startDate:["",x.required],endDate:["",x.required],reason:[""],status:[1,x.required],approvalComments:[""]})}loadEmployees(){this.loading.set(!0),this.employeesService.getEmployeesForSelection().subscribe({next:i=>{this.employees.set(i),this.loading.set(!1)},error:i=>{console.error("Error loading employees:",i),this.notification.error(this.i18n.t("remoteWork.request.errors.load_employees_failed")),this.loading.set(!1)}})}onEmployeeSelectionChange(i){let o=i?typeof i=="number"?i:parseInt(i):null;this.form.patchValue({employeeId:o}),this.form.get("employeeId")?.markAsTouched()}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched(),this.notification.warning(this.i18n.t("app.checkForm"));return}let i=this.authService.currentUser();if(!i?.id){this.notification.error(this.i18n.t("auth.session_expired"));return}this.submitting.set(!0);let o=this.form.value,s=w(R({},o),{createdByUserId:i.id});this.remoteWorkService.create(s).subscribe({next:()=>{this.notification.success(this.i18n.t("remoteWork.request.success.created")),this.router.navigate(["/remote-work"])},error:m=>{console.error("Error creating remote work request:",m),this.notification.error(this.i18n.t("remoteWork.request.errors.create_failed")),this.submitting.set(!1)}})}onCancel(){this.router.navigate(["/remote-work"])}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=N({type:n,selectors:[["app-assign-remote-work"]],decls:4,vars:3,consts:[[1,"container-fluid"],["mode","create","moduleName","remoteWork.request","moduleRoute","remote-work",3,"title"],[1,"card"],[1,"card-body"],[3,"ngSubmit","formGroup"],[3,"title"],[1,"mb-3"],[1,"form-label","required"],[3,"selectionChange","options","value","placeholder","searchable","clearable"],[1,"invalid-feedback"],[1,"row"],[1,"col-md-6","mb-3"],["type","date","formControlName","startDate",1,"form-control"],["type","date","formControlName","endDate",1,"form-control"],[1,"form-label"],["formControlName","reason","rows","3",1,"form-control",3,"placeholder"],["formControlName","status",1,"form-select"],[3,"value"],["formControlName","approvalComments","rows","3","maxlength","1000",1,"form-control",3,"placeholder"],[1,"form-text"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,s){o&1&&(a(0,"div",0),C(1,"app-form-header",1),u(2,ce,1,0,"app-loading-spinner"),u(3,Ce,46,35,"div",2),r()),o&2&&(t(),d("title",s.i18n.t("remoteWork.request.create")),t(),v(s.loading()?2:-1),t(),v(s.loading()?-1:3))},dependencies:[P,ee,L,Q,X,U,K,z,B,Y,H,J,le,ne,ae,oe],styles:['.assign-remote-work-page[_ngcontent-%COMP%]{padding:1.5rem}.form-label.required[_ngcontent-%COMP%]:after{content:" *";color:var(--bs-danger)}']})};export{se as AssignRemoteWorkComponent};
