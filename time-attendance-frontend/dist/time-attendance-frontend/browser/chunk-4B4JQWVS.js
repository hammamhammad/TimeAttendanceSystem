import{a as N}from"./chunk-H3Z5YLEO.js";import{a as O}from"./chunk-ZEKKLZM7.js";import{a as T}from"./chunk-K7WTKFJQ.js";import{a as E}from"./chunk-MRHL7QNZ.js";import{a as S}from"./chunk-H5EPUHY6.js";import{a as W}from"./chunk-UBCI4X5Q.js";import{a as M}from"./chunk-EYAJMHM7.js";import{a as I}from"./chunk-HHXRLUSQ.js";import{b as P}from"./chunk-3VZ5QHEY.js";import{d as w,g as R}from"./chunk-TWXUAMJ4.js";import{Bb as c,Cb as y,Db as d,Ea as q,R as f,W as g,X as b,Xa as p,Ya as u,Yb as v,bb as m,cb as o,da as h,db as a,eb as s,lb as C,nb as x,pb as r,ta as i,wc as D}from"./chunk-JSQL33QG.js";import{d as k}from"./chunk-DGAILPFQ.js";function V(n,t){if(n&1&&s(0,"app-loading-spinner",0),n&2){let e=r();m("message",e.i18n.t("common.loading"))}}function A(n,t){if(n&1){let e=C();o(0,"div",1),s(1,"i",3),c(2),o(3,"button",4),x("click",function(){g(e);let _=r();return b(_.onBack())}),c(4),a()()}if(n&2){let e=r();i(2),d(" ",e.error()," "),i(2),d(" ",e.i18n.t("common.back")," ")}}function U(n,t){if(n&1){let e=C();o(0,"button",19),x("click",function(){g(e);let _=r(2);return b(_.onEdit())}),s(1,"i",20),c(2),a()}if(n&2){let e=r(2);i(2),d(" ",e.i18n.t("common.edit")," ")}}function j(n,t){if(n&1){let e=C();o(0,"button",21),x("click",function(){g(e);let _=r(2);return b(_.onCancel())}),s(1,"i",22),c(2),a()}if(n&2){let e=r(2);i(2),d(" ",e.i18n.t("common.cancel")," ")}}function L(n,t){if(n&1&&(o(0,"app-detail-card",15),s(1,"app-definition-list",14),a()),n&2){let e=r(2);m("title",e.i18n.t("portal.approval_information")),i(),m("items",e.approvalInfoItems())("labelWidth","4")("valueWidth","8")}}function F(n,t){if(n&1&&(o(0,"div",16),s(1,"i",23),c(2),a()),n&2){let e=r(2);i(2),d(" ",e.i18n.t("portal.remote_work_approved_message")," ")}}function Y(n,t){if(n&1&&(o(0,"div",17),s(1,"i",24),c(2),a()),n&2){let e=r(2);i(2),d(" ",e.i18n.t("portal.remote_work_rejected_message")," ")}}function $(n,t){if(n&1&&(o(0,"div",18),s(1,"i",25),c(2),a()),n&2){let e=r(2);i(2),d(" ",e.i18n.t("portal.remote_work_pending_message")," ")}}function z(n,t){if(n&1){let e=C();o(0,"div",2)(1,"app-page-header",5)(2,"div",6),p(3,U,3,1,"button",7),p(4,j,3,1,"button",8),o(5,"button",9),x("click",function(){g(e);let _=r();return b(_.onBack())}),s(6,"i",10),c(7),a()()(),o(8,"div",11)(9,"label",12),c(10),a(),s(11,"app-status-badge",13),a(),o(12,"app-detail-card",5),s(13,"app-definition-list",14),a(),o(14,"app-detail-card",15),s(15,"app-definition-list",14),a(),p(16,L,2,4,"app-detail-card",15),p(17,F,3,1,"div",16)(18,Y,3,1,"div",17)(19,$,3,1,"div",18),a()}if(n&2){let e=r();i(),m("title",e.i18n.t("portal.remote_work_details")),i(2),u(e.canEdit()?3:-1),i(),u(e.canCancel()?4:-1),i(3),d(" ",e.i18n.t("common.back")," "),i(3),y(e.i18n.t("portal.status")),i(),m("status",e.statusBadge().label)("variant",e.statusBadge().variant),i(),m("title",e.i18n.t("portal.request_details")),i(),m("items",e.basicInfoItems())("labelWidth","4")("valueWidth","8"),i(),m("title",e.i18n.t("portal.submission_information")),i(),m("items",e.submissionInfoItems())("labelWidth","4")("valueWidth","8"),i(),u(e.approvalInfoItems().length>0?16:-1),i(),u(e.request().status===1?17:e.request().status===2?18:e.request().status===0?19:-1)}}var B=class n{i18n=f(P);router=f(R);route=f(w);remoteWorkService=f(O);notificationService=f(I);confirmationService=f(S);request=h(null);loading=h(!0);error=h(null);statusBadge=v(()=>{let t=this.request();if(!t)return{label:"",variant:"secondary"};switch(t.status){case 0:return{label:"Pending",variant:"warning"};case 1:return{label:"Approved",variant:"success"};case 2:return{label:"Rejected",variant:"danger"};case 3:return{label:"Cancelled",variant:"secondary"};default:return{label:String(t.status),variant:"secondary"}}});basicInfoItems=v(()=>{let t=this.request();return t?[{label:this.i18n.t("portal.start_date"),value:this.formatDate(t.startDate)},{label:this.i18n.t("portal.end_date"),value:this.formatDate(t.endDate)},{label:this.i18n.t("portal.working_days"),value:`${t.workingDaysCount} ${t.workingDaysCount===1?this.i18n.t("common.day"):this.i18n.t("common.days")}`},{label:this.i18n.t("portal.reason"),value:t.reason||this.i18n.t("common.not_provided")}]:[]});submissionInfoItems=v(()=>{let t=this.request();if(!t)return[];let e=[{label:this.i18n.t("portal.submitted_by"),value:t.createdByUserName||this.i18n.t("common.unknown")},{label:this.i18n.t("portal.submission_date"),value:this.formatDateTime(t.createdAtUtc)}];return t.modifiedAtUtc&&e.push({label:this.i18n.t("portal.last_modified"),value:this.formatDateTime(t.modifiedAtUtc)}),e});approvalInfoItems=v(()=>{let t=this.request();if(!t)return[];let e=[];return t.approvedByUserName&&e.push({label:this.i18n.t("portal.approved_by"),value:t.approvedByUserName}),t.approvedAt&&e.push({label:this.i18n.t("portal.approval_date"),value:this.formatDateTime(t.approvedAt)}),t.approvalComments&&e.push({label:this.i18n.t("portal.approval_comments"),value:t.approvalComments}),t.rejectionReason&&e.push({label:this.i18n.t("portal.rejection_reason"),value:t.rejectionReason}),e});canEdit=v(()=>{let t=this.request();return t&&t.status===0});canCancel=v(()=>{let t=this.request();return t&&t.status===0});ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.loadRequest(+t)}loadRequest(t){this.loading.set(!0),this.error.set(null),this.remoteWorkService.getById(t).subscribe({next:e=>{this.request.set(e),this.loading.set(!1)},error:e=>{console.error("Failed to load remote work request:",e),this.error.set(this.i18n.t("portal.failed_to_load_remote_work")),this.loading.set(!1)}})}onEdit(){let t=this.request();t&&this.router.navigate(["/portal/remote-work-requests",t.id,"edit"])}onCancel(){return k(this,null,function*(){let t=this.request();if(!t)return;(yield this.confirmationService.confirm({title:this.i18n.t("portal.cancel_remote_work"),message:this.i18n.t("portal.cancel_remote_work_confirm"),confirmText:this.i18n.t("common.yes_cancel"),cancelText:this.i18n.t("common.no"),confirmButtonClass:"btn-danger",icon:"fa-times",iconClass:"text-danger"})).confirmed&&this.remoteWorkService.cancel(t.id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("portal.remote_work_cancelled")),this.router.navigate(["/portal/remote-work-requests"])},error:l=>{console.error("Failed to cancel request:",l),this.notificationService.error(this.i18n.t("portal.failed_to_cancel_remote_work"))}})})}onBack(){this.router.navigate(["/portal/remote-work-requests"])}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}formatDateTime(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=q({type:n,selectors:[["app-portal-remote-work-request-details"]],decls:3,vars:3,consts:[[3,"message"],[1,"alert","alert-danger"],[1,"remote-work-details"],[1,"fa-solid","fa-exclamation-triangle","me-2"],["type","button",1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[3,"title"],["header-actions",""],["type","button",1,"btn","btn-primary","btn-sm","me-2"],["type","button",1,"btn","btn-danger","btn-sm","me-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"fa-solid","fa-arrow-left","me-1"],[1,"status-section","mb-4"],[1,"status-label"],[3,"status","variant"],[3,"items","labelWidth","valueWidth"],[1,"mt-3",3,"title"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-warning","mt-3"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fa-solid","fa-edit","me-1"],["type","button",1,"btn","btn-danger","btn-sm","me-2",3,"click"],[1,"fa-solid","fa-times","me-1"],[1,"fa-solid","fa-check-circle","me-2"],[1,"fa-solid","fa-times-circle","me-2"],[1,"fa-solid","fa-clock","me-2"]],template:function(e,l){e&1&&(p(0,V,1,1,"app-loading-spinner",0),p(1,A,5,2,"div",1),p(2,z,20,17,"div",2)),e&2&&(u(l.loading()?0:-1),i(),u(l.error()&&!l.loading()?1:-1),i(),u(l.request()&&!l.loading()&&!l.error()?2:-1))},dependencies:[D,W,M,T,E,N],styles:[".remote-work-details[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:1.5rem}.status-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background-color:var(--bs-light);border-radius:.5rem}.status-label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:0;color:var(--bs-secondary)}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:.5rem}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;flex-shrink:0}@media (max-width: 768px){.remote-work-details[_ngcontent-%COMP%]{padding:1rem}.status-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.remote-work-details[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #00000026;transition:all .2s ease}"]})};export{B as PortalRemoteWorkRequestDetailsComponent};
