import{a as d}from"./chunk-Y4G43P3P.js";import"./chunk-AYMGSBNU.js";import{a as m}from"./chunk-3BUDJKKE.js";import{b as f}from"./chunk-NJ656CWW.js";import{B as b,H as T,J as w,Pa as _,ba as R,e as v,fb as I,ib as E,j as y,jb as F,k as M,kb as P,nb as H,ob as u,p as S,pb as h,sb as x,t as o,tb as G,ub as D,y as A}from"./chunk-6T5SYK5O.js";import"./chunk-DGAILPFQ.js";var i=(t,a)=>{let e=o(m),s=o(d),r=o(h);if(!e.isAuthenticated())return r.navigate(["/login"]),!1;if(e.isTokenExpired())if(e.getRefreshToken())e.refreshToken().subscribe({error:()=>{r.navigate(["/login"])}});else return r.navigate(["/login"]),!1;let p=t.data?.permission;return p&&!s.has(p)?(r.navigate(["/unauthorized"]),!1):!0};var n=(t,a)=>{let e=o(m),s=o(d),r=o(h);if(!e.isAuthenticated())return r.navigate(["/login"]),!1;if(e.isAdmin()||e.isSystemAdmin())return!0;let p=t.data?.permission;return p&&s.has(p)?!0:(r.navigate(["/unauthorized"]),!1)};var c=(t,a)=>{let e=o(m),s=o(d),r=o(h);if(!e.isAuthenticated())return r.navigate(["/login"]),!1;if(e.isSystemAdmin()||e.isAdmin()||s.hasRole("Manager"))return!0;let p=["employee.read","employee.assign","shift.read","shift.assign","department.read","attendance.read","report.read"];if(s.hasAny(p))return!0;let l=t.data?.permission;return l&&s.has(l)?!0:(r.navigate(["/unauthorized"]),!1)};var k=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-6Q2AOAST.js").then(t=>t.LoginComponent),data:{title:"auth.login"}},{path:"",loadComponent:()=>import("./chunk-W5ZAFP6J.js").then(t=>t.LayoutComponent),canMatch:[i],children:[{path:"dashboard",loadComponent:()=>import("./chunk-RNXFES5K.js").then(t=>t.DashboardComponent),data:{title:"dashboard.title"}},{path:"users",loadComponent:()=>import("./chunk-VDQZRBCT.js").then(t=>t.UsersComponent),data:{title:"users.title",permission:"user.read"},canMatch:[n]},{path:"users/create",loadComponent:()=>import("./chunk-JVMUJLGA.js").then(t=>t.CreateUserPageComponent),data:{title:"users.create_user",permission:"user.create"},canMatch:[n]},{path:"users/:id/view",loadComponent:()=>import("./chunk-AFQLIOLB.js").then(t=>t.ViewUserComponent),data:{title:"users.view_details",permission:"user.read"},canMatch:[n]},{path:"users/:id/edit",loadComponent:()=>import("./chunk-LWYRVYV6.js").then(t=>t.EditUserPageComponent),data:{title:"users.edit_user",permission:"user.update"},canMatch:[n]},{path:"employees",loadComponent:()=>import("./chunk-GWYNJPHH.js").then(t=>t.EmployeesComponent),data:{title:"employees.title",permission:"employee.read"},canMatch:[c]},{path:"employees/create",loadComponent:()=>import("./chunk-PDUXQ7BC.js").then(t=>t.CreateEmployeeComponent),data:{title:"employees.create_employee",permission:"employee.create"},canMatch:[n]},{path:"employees/:id/view",loadComponent:()=>import("./chunk-V4HFFLZH.js").then(t=>t.ViewEmployeeComponent),data:{title:"employees.view_details",permission:"employee.read"},canMatch:[c]},{path:"employees/:id/edit",loadComponent:()=>import("./chunk-AQWMCL2Q.js").then(t=>t.EditEmployeeComponent),data:{title:"employees.edit_employee",permission:"employee.update"},canMatch:[n]},{path:"roles",loadComponent:()=>import("./chunk-MRQD7UGY.js").then(t=>t.RolesComponent),data:{title:"roles.title",permission:"role.read"},canMatch:[n]},{path:"roles/create",loadComponent:()=>import("./chunk-KAKOMABL.js").then(t=>t.CreateRoleComponent),data:{title:"roles.create_role",permission:"role.create"},canMatch:[n]},{path:"roles/:id/view",loadComponent:()=>import("./chunk-TNH7JAHK.js").then(t=>t.ViewRoleComponent),data:{title:"roles.view_details",permission:"role.read"},canMatch:[n]},{path:"roles/:id/edit",loadComponent:()=>import("./chunk-F5EBPGGG.js").then(t=>t.EditRoleComponent),data:{title:"roles.edit_role",permission:"role.update"},canMatch:[n]},{path:"branches",loadComponent:()=>import("./chunk-2NVCPEWK.js").then(t=>t.BranchesComponent),data:{title:"branches.title",permission:"branch.read"},canMatch:[i]},{path:"branches/:id/view",loadComponent:()=>import("./chunk-SP6YA3UH.js").then(t=>t.ViewBranchComponent),data:{title:"branches.view_details",permission:"branch.read"},canMatch:[i]},{path:"branches/:id/edit",loadComponent:()=>import("./chunk-TJJPG5IJ.js").then(t=>t.EditBranchComponent),data:{title:"branches.edit_branch",permission:"branch.update"},canMatch:[i]},{path:"departments",loadComponent:()=>import("./chunk-SWBCZKVR.js").then(t=>t.DepartmentsComponent),data:{title:"departments.title",permission:"department.read"},canMatch:[i]},{path:"departments/create",loadComponent:()=>import("./chunk-MFYEGKY5.js").then(t=>t.CreateDepartmentComponent),data:{title:"departments.create",permission:"department.create"},canMatch:[i]},{path:"departments/:id/view",loadComponent:()=>import("./chunk-DB7LVGGO.js").then(t=>t.ViewDepartmentComponent),data:{title:"departments.view_details",permission:"department.read"},canMatch:[i]},{path:"departments/:id/edit",loadComponent:()=>import("./chunk-FTCQB4P4.js").then(t=>t.EditDepartmentComponent),data:{title:"departments.edit",permission:"department.update"},canMatch:[i]},{path:"shifts",loadComponent:()=>import("./chunk-O3G3BIWU.js").then(t=>t.ShiftsComponent),data:{title:"shifts.title",permission:"shift.read"},canMatch:[c]},{path:"shifts/create",loadComponent:()=>import("./chunk-XPBY2C3D.js").then(t=>t.CreateShiftComponent),data:{title:"shifts.create_shift",permission:"shift.create"},canMatch:[n]},{path:"shifts/:id/edit",loadComponent:()=>import("./chunk-2DUNRRJA.js").then(t=>t.EditShiftComponent),data:{title:"shifts.edit_shift",permission:"shift.update"},canMatch:[n]},{path:"shifts/assign",loadComponent:()=>import("./chunk-EOKRTXAG.js").then(t=>t.AssignShiftsComponent),data:{title:"shifts.assignments.title",permission:"shift.assign"},canMatch:[c]},{path:"attendance",loadComponent:()=>import("./chunk-W3UAZF4N.js").then(t=>t.AttendanceComponent),data:{title:"attendance.dashboard_title",permission:"attendance.read"},canMatch:[i]},{path:"attendance/daily",loadComponent:()=>import("./chunk-CZ2ZHU5O.js").then(t=>t.DailyAttendanceComponent),data:{title:"attendance.daily_view",permission:"attendance.read"},canMatch:[i]},{path:"attendance/monthly-report",loadComponent:()=>import("./chunk-6MVMUYP7.js").then(t=>t.MonthlyReportComponent),data:{title:"attendance.monthly_report",permission:"attendance.read"},canMatch:[i]},{path:"attendance/daily-detail/:employeeId/:date",loadComponent:()=>import("./chunk-FONF47UT.js").then(t=>t.DailyAttendanceDetailComponent),data:{title:"attendance.daily_detail.title",permission:"attendance.read"},canMatch:[i]},{path:"attendance/employee-history",loadComponent:()=>import("./chunk-FQGBR7JK.js").then(t=>t.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_history.title",permission:"attendance.read"},canMatch:[i]},{path:"attendance/employee/:id",loadComponent:()=>import("./chunk-FQGBR7JK.js").then(t=>t.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_detail",permission:"attendance.read"},canMatch:[i]},{path:"attendance/edit/:id",loadComponent:()=>import("./chunk-AFYLHLDV.js").then(t=>t.EditAttendanceComponent),data:{title:"attendance.edit.title",permission:"attendance.update"},canMatch:[i]},{path:"settings",loadComponent:()=>import("./chunk-ALM3EQSZ.js").then(t=>t.SettingsComponent),data:{title:"settings.title"}},{path:"settings/overtime",loadComponent:()=>import("./chunk-RAXFXJWS.js").then(t=>t.OvertimeConfigurationsComponent),data:{title:"settings.overtime.title",permission:"settings.overtime.read"},canMatch:[n]},{path:"settings/overtime/create",loadComponent:()=>import("./chunk-4P6OWTQ3.js").then(t=>t.CreateOvertimeConfigurationComponent),data:{title:"settings.overtime.create",permission:"settings.overtime.create"},canMatch:[n]},{path:"settings/overtime/edit/:id",loadComponent:()=>import("./chunk-DA4KK4FX.js").then(t=>t.EditOvertimeConfigurationComponent),data:{title:"settings.overtime.edit",permission:"settings.overtime.update"},canMatch:[n]},{path:"settings/public-holidays",loadComponent:()=>import("./chunk-JFG54TLG.js").then(t=>t.PublicHolidaysComponent),data:{title:"settings.holidays.title",permission:"publicHoliday.read"},canMatch:[n]},{path:"settings/public-holidays/create",loadComponent:()=>import("./chunk-VZJ5AQG3.js").then(t=>t.CreatePublicHolidayComponent),data:{title:"settings.holidays.create",permission:"publicHoliday.create"},canMatch:[n]},{path:"vacation-types",loadComponent:()=>import("./chunk-YXAE5LAG.js").then(t=>t.VacationTypesComponent),data:{title:"vacation_types.title",permission:"vacationType.read"},canMatch:[c]},{path:"vacation-types/:id",loadComponent:()=>import("./chunk-XG3CPCXW.js").then(t=>t.ViewVacationTypeComponent),data:{title:"vacation_types.view_details",permission:"vacationType.read"},canMatch:[c]}]},{path:"unauthorized",loadComponent:()=>import("./chunk-AKNQHLOF.js").then(t=>t.UnauthorizedComponent),data:{title:"Unauthorized Access"}},{path:"**",loadComponent:()=>import("./chunk-DLZZ7X7B.js").then(t=>t.NotFoundComponent),data:{title:"Page Not Found"}}];var j=(t,a)=>{let e=o(m);if(t.url.includes("/auth/login")||t.url.includes("/auth/refresh"))return a(t);let s=e.getAccessToken(),r=t;return s&&(r=t.clone({headers:t.headers.set("Authorization",`Bearer ${s}`)})),a(r).pipe(y(p=>{if(p.status===401&&!t.url.includes("/auth/refresh")){if(e.getRefreshToken())return e.refreshToken().pipe(M(()=>{let l=e.getAccessToken(),U=t.clone({headers:t.headers.set("Authorization",`Bearer ${l}`)});return a(U)}),y(l=>(e.logout(),v(()=>l))));e.logout()}return v(()=>p)}))};var C=class t extends u{title=o(P);i18n=o(f);updateTitle(a){let e=this.buildTitle(a);if(e){let r=`${this.i18n.t(e)} | Time Attendance System`;this.title.setTitle(r)}else this.title.setTitle("Time Attendance System")}static \u0275fac=(()=>{let a;return function(s){return(a||(a=b(t)))(s||t)}})();static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var z={providers:[A(),_({eventCoalescing:!0}),x(k,D(),G()),E(F([j])),{provide:u,useClass:C}]};var g=class t{constructor(a){this.i18n=a}ngOnInit(){let a=localStorage.getItem("app_locale")||"en";this.i18n.setLocale(a)}static \u0275fac=function(e){return new(e||t)(T(f))};static \u0275cmp=w({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,s){e&1&&R(0,"router-outlet")},dependencies:[H],encapsulation:2})};I(g,z).catch(t=>console.error(t));
