import{a as _}from"./chunk-7NGNGWXS.js";import{a as O}from"./chunk-4LNI5FX6.js";import{a as T}from"./chunk-GWHM7BJD.js";import{a as C}from"./chunk-3IQ53VGU.js";import{a as E}from"./chunk-CYQTDKAB.js";import"./chunk-7QCK55IR.js";import{b as R}from"./chunk-AS5QRUY4.js";import{$ as c,E as i,H as o,J as p,_ as u,aa as a,ba as s,fb as v,ka as m,qb as S,wa as d,xa as f,ya as g,z as r}from"./chunk-LDUBOZPL.js";import"./chunk-DGAILPFQ.js";var b=class l{constructor(e,t,n,A,h){this.vacationRequestsService=e;this.notificationService=t;this.confirmationService=n;this.router=A;this.i18n=h}vacationRequests=r([]);loading=r(!1);VacationStatus=_;columns=[{key:"employeeName",label:"VACATION_REQUESTS.EMPLOYEE_NAME"},{key:"vacationTypeName",label:"VACATION_REQUESTS.VACATION_TYPE"},{key:"startDate",label:"VACATION_REQUESTS.START_DATE"},{key:"endDate",label:"VACATION_REQUESTS.END_DATE"},{key:"totalDays",label:"VACATION_REQUESTS.TOTAL_DAYS"},{key:"statusText",label:"VACATION_REQUESTS.STATUS"},{key:"actions",label:"COMMON.ACTIONS"}];ngOnInit(){this.loadVacationRequests()}loadVacationRequests(){this.loading.set(!0),this.vacationRequestsService.getVacationRequests().subscribe({next:e=>{this.vacationRequests.set(e.vacationRequests),this.loading.set(!1)},error:e=>{this.notificationService.error("VACATION_REQUESTS.LOAD_ERROR"),this.loading.set(!1)}})}navigateToCreate(){this.router.navigate(["/vacation-requests/create"])}navigateToView(e){this.router.navigate(["/vacation-requests/view",e.id])}navigateToEdit(e){this.router.navigate(["/vacation-requests/edit",e.id])}approveRequest(e){this.confirmationService.confirm({title:"VACATION_REQUESTS.CONFIRM_APPROVE",message:"VACATION_REQUESTS.CONFIRM_APPROVE_MESSAGE"}).then(t=>{t.confirmed&&this.vacationRequestsService.approveVacationRequest(e.id,{vacationRequestId:e.id,approvedByUserId:1,notes:""}).subscribe({next:()=>{this.notificationService.success("VACATION_REQUESTS.APPROVE_SUCCESS"),this.loadVacationRequests()},error:n=>{this.notificationService.error("VACATION_REQUESTS.APPROVE_ERROR")}})})}rejectRequest(e){this.confirmationService.confirm({title:"VACATION_REQUESTS.CONFIRM_REJECT",message:"VACATION_REQUESTS.CONFIRM_REJECT_MESSAGE"}).then(t=>{t.confirmed&&this.vacationRequestsService.rejectVacationRequest(e.id,"").subscribe({next:()=>{this.notificationService.success("VACATION_REQUESTS.REJECT_SUCCESS"),this.loadVacationRequests()},error:n=>{this.notificationService.error("VACATION_REQUESTS.REJECT_ERROR")}})})}deleteVacationRequest(e){this.confirmationService.confirm({title:"VACATION_REQUESTS.DELETE_TITLE",message:"VACATION_REQUESTS.DELETE_CONFIRMATION"}).then(t=>{t.confirmed&&this.vacationRequestsService.deleteVacationRequest(e.id).subscribe({next:()=>{this.notificationService.success("VACATION_REQUESTS.DELETE_SUCCESS"),this.loadVacationRequests()},error:n=>{this.notificationService.error("VACATION_REQUESTS.DELETE_ERROR")}})})}getStatusClass(e){switch(e){case 1:return"status-approved";case 2:return"status-rejected";case 3:return"status-cancelled";default:return"status-pending"}}static \u0275fac=function(t){return new(t||l)(o(O),o(E),o(C),o(S),o(R))};static \u0275cmp=p({type:l,selectors:[["app-vacation-requests"]],decls:8,vars:5,consts:[[1,"vacation-requests-container"],[1,"page-header"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[3,"data","columns","loading"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"h2"),d(3),a(),c(4,"button",2),m("click",function(){return n.navigateToCreate()}),s(5,"i",3),d(6),a()(),s(7,"app-data-table",4),a()),t&2&&(i(3),f(n.i18n.t("VACATION_REQUESTS.TITLE")),i(3),g(" ",n.i18n.t("VACATION_REQUESTS.CREATE_REQUEST")," "),i(),u("data",n.vacationRequests())("columns",n.columns)("loading",n.loading()))},dependencies:[v,T],styles:[".vacation-requests-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:500;color:#555}.form-control[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.status-approved[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.status-rejected[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.status-cancelled[_ngcontent-%COMP%]{color:#6c757d;font-weight:500}.status-pending[_ngcontent-%COMP%]{color:#ffc107;font-weight:500}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 4px 6px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:20px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;display:inline-flex;align-items:center;gap:8px;transition:background-color .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#545b62}"]})};export{b as VacationRequestsComponent};
