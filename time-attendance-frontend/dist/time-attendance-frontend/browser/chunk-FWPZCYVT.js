import{a as p}from"./chunk-7HHEMKQW.js";import{Bc as s,Cc as u,M as l,Q as d,c as o}from"./chunk-JSQL33QG.js";var b=class i{constructor(e){this.http=e}apiUrl=`${p.apiUrl}/api/v1/attendance`;getAttendanceReport(e){return this.http.post(`${this.apiUrl}/report`,e)}getEmployeeAttendanceRecord(e,t){return this.http.get(`${this.apiUrl}/employee/${e}/date/${t}`)}createTransaction(e){return this.http.post(`${this.apiUrl}/transactions`,e)}getTransaction(e){return this.http.get(`${this.apiUrl}/transactions/${e}`)}getAttendanceStatistics(e,t,n,a){let r=new s().set("startDate",e).set("endDate",t);return n&&(r=r.set("branchId",n.toString())),a&&(r=r.set("departmentId",a.toString())),this.http.get(`${this.apiUrl}/statistics`,{params:r})}getIncompleteRecords(e,t){let n=new s;return e&&(n=n.set("branchId",e.toString())),t&&(n=n.set("upToDate",t)),this.http.get(`${this.apiUrl}/incomplete`,{params:n})}generateAttendance(e,t){let n=new s;return t&&(n=n.set("branchId",t.toString())),this.http.post(`${this.apiUrl}/generate/${e}`,{},{params:n})}runDailyGeneration(){return this.http.post(`${this.apiUrl}/generate/daily`,{})}getDashboardData(e,t){let n=new s;return e&&(n=n.set("branchId",e.toString())),t&&(n=n.set("departmentId",t.toString())),this.http.get(`${this.apiUrl}/dashboard`,{params:n})}getAttendanceById(e){return this.http.get(`${this.apiUrl}/${e}`)}getEmployeeAttendanceHistory(e,t,n){let a={startDate:t,endDate:n,employeeId:e,includeTransactions:!0,includeWorkingDayAnalysis:!0,pageNumber:1,pageSize:1e3};return this.getAttendanceReport(a)}getEmployeeAttendanceHistoryComplete(e,t,n){let a=new s().set("startDate",t).set("endDate",n);return this.http.get(`${this.apiUrl}/employee/${e}/history`,{params:a})}getDailyAttendance(e,t,n,a){let r={startDate:e,endDate:e,branchId:t,departmentId:n,employeeId:a,includeTransactions:!1,includeWorkingDayAnalysis:!1,pageNumber:1,pageSize:1e3};return this.getAttendanceReport(r)}bulkCreateTransactions(e){return new o(t=>{let n=[],a=0;e.forEach(r=>{this.createTransaction(r).subscribe({next:c=>{n.push(c),a++,a===e.length&&(t.next(n),t.complete())},error:c=>t.error(c)})})})}getTransactionsByDate(e){return this.http.get(`${this.apiUrl}/transactions/date/${e}`)}deleteTransaction(e){return this.http.delete(`${this.apiUrl}/transactions/${e}`)}getEmployeeAttendanceRecords(e,t,n){return this.getEmployeeAttendanceHistory(e,t,n)}getEmployeeRecentTransactions(e,t=10){let n=new s().set("employeeId",e.toString()).set("limit",t.toString());return this.http.get(`${this.apiUrl}/transactions/recent`,{params:n})}getAttendanceRecordById(e){return this.http.get(`${this.apiUrl}/${e}`)}updateAttendanceRecord(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}bulkUpdateAttendanceRecords(e){return this.http.put(`${this.apiUrl}/bulk-update`,e)}calculateAttendanceForEmployeeDate(e,t){return this.http.post(`${this.apiUrl}/calculate/employee/${e}/date/${t}`,{})}calculateAttendanceForDate(e,t=!1,n){let a=new s;return t&&(a=a.set("forceRecalculate",t.toString())),n&&(a=a.set("branchId",n.toString())),this.http.post(`${this.apiUrl}/calculate/date/${e}`,{},{params:a})}bulkCalculateAttendance(e){return this.http.post(`${this.apiUrl}/calculate/bulk`,e)}recalculateAttendanceRecord(e){return this.http.post(`${this.apiUrl}/${e}/recalculate`,{})}forceGenerateAttendanceRecord(e,t){return this.calculateAttendanceForEmployeeDate(e,t)}changeAttendanceShift(e){let t={shiftId:e.shiftId,notes:e.notes};return this.http.post(`${this.apiUrl}/${e.attendanceId}/change-shift`,t)}getMonthlyReport(e){return this.http.post(`${this.apiUrl}/monthly-report`,e)}getLeaveExcuseDetails(e,t){let n=new s().set("date",t);return this.http.get(`${this.apiUrl}/employee/${e}/leave-excuse-details`,{params:n})}static \u0275fac=function(t){return new(t||i)(d(u))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{b as a};
