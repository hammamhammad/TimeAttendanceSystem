import{a as O}from"./chunk-6SPN6IP7.js";import{a as k}from"./chunk-IV5XH5NP.js";import{a as A}from"./chunk-6B6T6MZ3.js";import{c as T,e as w,h as F,z as N}from"./chunk-HF7V7ZC6.js";import"./chunk-A6EM5NV6.js";import{Bc as L,Eb as n,Fb as s,Gb as f,Ha as h,La as v,T as S,Wb as C,Yb as b,Zb as x,eb as d,fa as g,fb as e,gb as t,hb as m,qb as u,sb as E,uc as R,vc as D,wa as a,wc as I,yc as M}from"./chunk-IGEIB4M6.js";import{a as _,b as y}from"./chunk-YMDWBF3A.js";var P=(o,l,i)=>({"bg-success-subtle text-success":o,"bg-warning-subtle text-warning":l,"bg-danger-subtle text-danger":i});function j(o,l){o&1&&(e(0,"div",14)(1,"div",15)(2,"span",16),n(3,"Loading..."),t()(),e(4,"p",17),n(5,"Loading report data..."),t()())}function G(o,l){if(o&1&&(e(0,"tr")(1,"td")(2,"div",33)(3,"span",34),n(4),t(),e(5,"small",35),n(6),t()()(),e(7,"td")(8,"span",36),n(9),t()(),e(10,"td"),n(11),b(12,"date"),t(),e(13,"td"),n(14),b(15,"date"),t(),e(16,"td",37),n(17),t(),e(18,"td")(19,"span",38),n(20),t()(),e(21,"td",39),n(22),t()()),o&2){let i=l.$implicit;a(4),s(i.employeeName),a(2),s(i.departmentName),a(3),s(i.leaveType),a(2),s(x(12,10,i.startDate,"mediumDate")),a(3),s(x(15,13,i.endDate,"mediumDate")),a(3),s(i.totalDays),a(2),d("ngClass",C(16,P,i.status==="Approved",i.status==="Pending",i.status==="Rejected")),a(),f(" ",i.status," "),a(),d("title",i.reason||""),a(),f(" ",i.reason||"-"," ")}}function B(o,l){o&1&&(e(0,"tr")(1,"td",40),m(2,"i",41),n(3," No leave requests found for this period. "),t()())}function z(o,l){if(o&1&&(e(0,"div",18)(1,"div",19)(2,"div",20),m(3,"app-stat-card",21),t(),e(4,"div",20),m(5,"app-stat-card",22),t()(),e(6,"div",23)(7,"div",24)(8,"h5",25),n(9,"Leave Requests"),t()(),e(10,"div",26)(11,"table",27)(12,"thead",28)(13,"tr")(14,"th",29),n(15,"Employee"),t(),e(16,"th",29),n(17,"Leave Type"),t(),e(18,"th",29),n(19,"Start Date"),t(),e(20,"th",29),n(21,"End Date"),t(),e(22,"th",30),n(23,"Days"),t(),e(24,"th",29),n(25,"Status"),t(),e(26,"th",29),n(27,"Reason"),t()()(),e(28,"tbody"),v(29,G,23,20,"tr",31)(30,B,4,0,"tr",32),t()()()()()),o&2){let i,r,p=E();a(3),d("value",p.report().totalRequests)("borderAccent",!0),a(2),d("value",p.report().totalApprovedDays)("borderAccent",!0),a(24),d("ngForOf",(i=p.report())==null?null:i.items),a(),d("ngIf",((r=p.report())==null||r.items==null?null:r.items.length)===0)}}function H(o,l){o&1&&(e(0,"div",42)(1,"div",43),m(2,"i",44),t(),e(3,"h5"),n(4,"No Report Generated"),t(),e(5,"p"),n(6,'Select a date range and click "Generate Report" to view data.'),t()())}var q=class o{reportsService=S(O);filter=g({fromDate:new Date().toISOString().split("T")[0],toDate:new Date().toISOString().split("T")[0]});report=g(null);loading=g(!1);updateFilter(l,i){this.filter.update(r=>y(_({},r),{[l]:i}))}loadReport(){this.loading.set(!0),this.reportsService.getLeaveReport(this.filter()).subscribe({next:l=>{this.report.set(l),this.loading.set(!1)},error:l=>{console.error(l),this.loading.set(!1)}})}getStatusClass(l){switch(l){case"Approved":return"badge-success";case"Rejected":return"badge-error";case"Pending":return"badge-warning";default:return"badge-ghost"}}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=h({type:o,selectors:[["app-leave-report"]],decls:24,vars:7,consts:[[1,"container-fluid","px-4","py-4"],["title","Leave Report","subtitle","Analyze employee leave requests and balances"],[1,"card","border-0","shadow-sm","mb-4"],[1,"card-body"],[1,"row","g-3","align-items-end"],[1,"col-md-3"],[1,"form-label"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Optional",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","w-100",3,"click","disabled"],[1,"fas","fa-search","me-2"],["class","text-center py-5",4,"ngIf"],["class","animate__animated animate__fadeIn",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-2"],[1,"animate__animated","animate__fadeIn"],[1,"row","g-4","mb-4"],[1,"col-md-6","col-lg-3"],["label","Total Requests","icon","fas fa-file-alt","variant","primary",3,"value","borderAccent"],["label","Approved Days","icon","fas fa-calendar-check","variant","success",3,"value","borderAccent"],[1,"card","border-0","shadow-sm"],[1,"card-header","bg-transparent","py-3"],[1,"mb-0"],[1,"table-responsive"],[1,"table","table-hover","align-middle","mb-0"],[1,"bg-light"],[1,"border-0"],[1,"border-0","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","flex-column"],[1,"fw-medium"],[1,"text-muted"],[1,"badge","bg-light","text-dark","border"],[1,"text-center"],[1,"badge","rounded-pill",3,"ngClass"],[1,"text-truncate",2,"max-width","200px",3,"title"],["colspan","7",1,"text-center","py-5","text-muted"],[1,"fas","fa-inbox","fa-2x","mb-3","d-block"],[1,"text-center","py-5","text-muted"],[1,"mb-3"],[1,"fas","fa-clipboard-list","fa-3x","text-light-emphasis"]],template:function(i,r){i&1&&(e(0,"div",0),m(1,"app-page-header",1),e(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),n(7,"From Date"),t(),e(8,"input",7),u("ngModelChange",function(c){return r.updateFilter("fromDate",c)}),t()(),e(9,"div",5)(10,"label",6),n(11,"To Date"),t(),e(12,"input",7),u("ngModelChange",function(c){return r.updateFilter("toDate",c)}),t()(),e(13,"div",5)(14,"label",6),n(15,"Employee ID"),t(),e(16,"input",8),u("ngModelChange",function(c){return r.updateFilter("employeeId",c)}),t()(),e(17,"div",5)(18,"button",9),u("click",function(){return r.loadReport()}),m(19,"i",10),n(20," Generate Report "),t()()()()(),v(21,j,6,0,"div",11)(22,z,31,6,"div",12)(23,H,7,0,"div",13),t()),i&2&&(a(8),d("ngModel",r.filter().fromDate),a(4),d("ngModel",r.filter().toDate),a(4),d("ngModel",r.filter().employeeId),a(2),d("disabled",r.loading()),a(3),d("ngIf",r.loading()),a(),d("ngIf",r.report()&&!r.loading()),a(),d("ngIf",!r.report()&&!r.loading()))},dependencies:[L,R,D,I,N,T,w,F,A,k,M],encapsulation:2})};export{q as LeaveReportComponent};
