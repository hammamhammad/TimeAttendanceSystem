import{a as R}from"./chunk-23PGFYQZ.js";import{a as j}from"./chunk-GRQ6RO47.js";import{a as N}from"./chunk-UBCI4X5Q.js";import{a as V}from"./chunk-EYAJMHM7.js";import"./chunk-HHXRLUSQ.js";import{b as z}from"./chunk-UWVH5K3J.js";import{b as F}from"./chunk-RUY4WPQA.js";import{g as q,m as $}from"./chunk-TWXUAMJ4.js";import{$a as M,Ab as u,Bb as c,Cb as b,Db as v,Ea as S,Mb as D,Qb as I,R as f,W as h,X as x,Xa as p,Ya as g,Yb as C,Za as k,ab as O,bb as _,cb as a,db as o,eb as d,lb as P,nb as y,nc as T,pb as s,ta as i,wc as A,yb as w}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";var Y=n=>({count:n}),U=(n,t)=>t.id;function L(n,t){if(n&1&&d(0,"app-loading-spinner",4),n&2){let e=s();_("message",e.i18n.t("common.loading"))}}function Q(n,t){if(n&1){let e=P();a(0,"div",5),d(1,"i",7),c(2),a(3,"button",8),y("click",function(){h(e);let l=s();return x(l.refresh())}),c(4),o()()}if(n&2){let e=s();i(2),v(" ",e.error()," "),i(2),v(" ",e.i18n.t("common.retry")," ")}}function B(n,t){if(n&1&&(a(0,"div",32)(1,"span"),d(2,"i"),c(3),o()()),n&2){let e=s().$implicit,r=s(2);i(),u(r.getTrendIcon(e.trend)),i(),u("fa-solid "+r.getTrendIcon(e.trend).split(" ")[1]),i(),v(" ",r.formatTrend(e.trend)," ")}}function G(n,t){if(n&1&&(a(0,"p",35)(1,"small"),c(2),o()()),n&2){let e=s().$implicit;i(2),b(e.subtitle)}}function J(n,t){if(n&1){let e=P();a(0,"div",10)(1,"div",29),y("click",function(){let l=h(e).$implicit,m=s(2);return x(m.navigateToStats(l))}),a(2,"div",18)(3,"div",30)(4,"div",31),d(5,"i"),o(),p(6,B,4,5,"div",32),o(),a(7,"h3",33),c(8),o(),a(9,"p",34),c(10),o(),p(11,G,3,1,"p",35),o()()()}if(n&2){let e=t.$implicit;i(),w("clickable",e.route),i(3),_("ngClass","bg-"+e.iconColor.replace("text-","")+"-subtle"),i(),u("fa-solid "+e.icon+" "+e.iconColor),i(),g(e.trend!==void 0?6:-1),i(2),b(e.value),i(2),b(e.title),i(),g(e.subtitle?11:-1)}}function K(n,t){if(n&1&&(a(0,"div",11),d(1,"i",36),a(2,"div",37)(3,"strong"),c(4),o(),a(5,"p",38),c(6),o()()()),n&2){let e=s(2);i(4),b(e.i18n.t("portal.pending_requests")),i(2),v(" ",e.i18n.t("portal.you_have_pending_requests",I(2,Y,e.pendingRequestsCount()))," ")}}function W(n,t){if(n&1){let e=P();a(0,"button",39),y("click",function(){let l=h(e).$implicit,m=s(2);return x(m.navigateToAction(l))}),a(1,"div",40)(2,"div",41),d(3,"i"),o(),a(4,"div",37)(5,"div",42),c(6),o(),a(7,"small",43),c(8),o()(),d(9,"i",44),o()()}if(n&2){let e=t.$implicit;u(D("btn btn-outline-",e.color," text-start quick-action-btn")),_("disabled",!e.enabled),i(3),u("fa-solid "+e.icon),i(3),b(e.title),i(2),b(e.description)}}function X(n,t){if(n&1&&(a(0,"span",25),c(1),o()),n&2){let e=s(2);i(),b(e.recentActivity().length)}}function Z(n,t){n&1&&d(0,"div",48)}function ee(n,t){if(n&1&&(a(0,"div",45)(1,"div",46)(2,"div",47),d(3,"i"),o(),p(4,Z,1,0,"div",48),o(),a(5,"div",49)(6,"div",50)(7,"div",37)(8,"h6",51),c(9),o(),a(10,"p",52),c(11),o()(),a(12,"span",53),c(13),o()(),a(14,"small",43),d(15,"i",54),c(16),o()()()),n&2){let e=t.$implicit,r=t.$index,l=t.$count,m=s(3);i(2),_("ngClass",e.iconColor.replace("text-","bg-")+"-subtle"),i(),u(m.getActivityIconClass(e)),i(),g(r!==l-1?4:-1),i(5),b(e.title),i(2),b(e.description),i(),u(m.getActivityStatusClass(e)),i(),v(" ",e.status," "),i(3),v(" ",m.formatDate(e.date)," ")}}function te(n,t){if(n&1&&(a(0,"div",27),M(1,ee,17,10,"div",45,k),o()),n&2){let e=s(2);i(),O(e.recentActivity())}}function ne(n,t){if(n&1&&(a(0,"div",28),d(1,"app-empty-state",55),o()),n&2){let e=s(2);i(),_("title",e.i18n.t("portal.no_activity"))("message",e.i18n.t("portal.no_activity_message"))}}function ie(n,t){if(n&1&&(a(0,"div",6)(1,"div",9),M(2,J,12,9,"div",10,U),o(),p(4,K,7,4,"div",11),a(5,"div",12)(6,"div",13)(7,"div",14)(8,"div",15)(9,"h5",16),d(10,"i",17),c(11),o()(),a(12,"div",18)(13,"div",19),M(14,W,10,8,"button",20,U),o()()()(),a(16,"div",21)(17,"div",22)(18,"div",23)(19,"h5",16),d(20,"i",24),c(21),o(),p(22,X,2,1,"span",25),o(),a(23,"div",26),p(24,te,3,0,"div",27)(25,ne,2,2,"div",28),o()()()()()),n&2){let e=s();i(2),O(e.statsCards()),i(2),g(e.pendingRequestsCount()>0?4:-1),i(7),v(" ",e.i18n.t("portal.quick_actions")," "),i(3),O(e.quickActions()),i(7),v(" ",e.i18n.t("portal.recent_activity")," "),i(),g(e.hasActivity()?22:-1),i(2),g(e.hasActivity()?24:25)}}var H=class n{portalService=f(R);authService=f(z);router=f(q);i18n=f(F);dashboard=this.portalService.dashboard;loading=this.portalService.dashboardLoading;error=this.portalService.dashboardError;statsCards=this.portalService.statsCards;quickActions=this.portalService.quickActions;currentUser=C(()=>this.authService.currentUser());employeeName=C(()=>{let t=this.dashboard();return t?t.employeeName:this.currentUser()?.username||"User"});recentActivity=C(()=>{let t=this.dashboard();return t?t.recentActivity.slice(0,10):[]});hasActivity=C(()=>this.recentActivity().length>0);pendingRequestsCount=C(()=>{let t=this.dashboard();return t?t.pendingRequestsCount:0});refreshInterval;ngOnInit(){this.loadDashboard(),this.refreshInterval=setInterval(()=>{this.loadDashboard()},300*1e3)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval),this.portalService.clearDashboard()}loadDashboard(){this.portalService.loadEmployeeDashboard().subscribe({error:t=>{console.error("Failed to load dashboard:",t)}})}refresh(){this.loadDashboard()}navigateToAction(t){t.enabled&&this.router.navigate([t.route])}navigateToStats(t){t.route&&this.router.navigate([t.route])}getActivityIconClass(t){return`fa-solid ${t.icon} ${t.iconColor}`}getActivityStatusClass(t){return{success:"badge bg-success",warning:"badge bg-warning",danger:"badge bg-danger",info:"badge bg-info",secondary:"badge bg-secondary",primary:"badge bg-primary"}[t.statusVariant]||"badge bg-secondary"}formatDate(t){let e=new Date,r=new Date(e);r.setDate(r.getDate()-1);let l=new Date(t);l.setHours(0,0,0,0);let m=new Date(e);m.setHours(0,0,0,0);let E=new Date(r);return E.setHours(0,0,0,0),l.getTime()===m.getTime()?this.i18n.t("common.today"):l.getTime()===E.getTime()?this.i18n.t("common.yesterday"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}getTrendIcon(t){return t>0?"fa-arrow-up text-success":t<0?"fa-arrow-down text-danger":"fa-minus text-secondary"}formatTrend(t){return`${t>=0?"+":""}${t.toFixed(1)}%`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-employee-dashboard"]],decls:8,vars:8,consts:[[3,"title"],["header-actions",""],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-sync-alt"],[3,"message"],["role","alert",1,"alert","alert-danger"],[1,"employee-dashboard"],[1,"fa-solid","fa-exclamation-triangle","me-2"],["type","button",1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"row","g-3","mb-4"],[1,"col-12","col-sm-6","col-lg-3"],["role","alert",1,"alert","alert-info","d-flex","align-items-center","mb-4"],[1,"row","g-4"],[1,"col-12","col-lg-4"],[1,"card","quick-actions-card","h-100"],[1,"card-header","bg-white"],[1,"card-title","mb-0"],[1,"fa-solid","fa-bolt","me-2","text-warning"],[1,"card-body"],[1,"d-grid","gap-2"],["type","button",3,"class","disabled"],[1,"col-12","col-lg-8"],[1,"card","activity-card","h-100"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-history","me-2","text-primary"],[1,"badge","bg-primary","rounded-pill"],[1,"card-body","p-0"],[1,"activity-timeline"],[1,"p-4"],[1,"card","stats-card","h-100",3,"click"],[1,"d-flex","align-items-start","justify-content-between","mb-2"],[1,"stat-icon",3,"ngClass"],[1,"trend-badge"],[1,"stat-value","mb-1"],[1,"stat-title","mb-1"],[1,"stat-subtitle","mb-0","text-muted"],[1,"fa-solid","fa-info-circle","me-2","fs-4"],[1,"flex-grow-1"],[1,"mb-0"],["type","button",3,"click","disabled"],[1,"d-flex","align-items-center"],[1,"action-icon","me-3"],[1,"fw-semibold"],[1,"text-muted"],[1,"fa-solid","fa-chevron-right","ms-2"],[1,"activity-item"],[1,"activity-marker"],[1,"activity-icon-wrapper",3,"ngClass"],[1,"activity-line"],[1,"activity-content"],[1,"d-flex","justify-content-between","align-items-start","mb-1"],[1,"activity-title","mb-1"],[1,"activity-description","mb-1","text-muted"],[1,"ms-2"],[1,"fa-solid","fa-clock","me-1"],["icon","fa-history",3,"title","message"]],template:function(e,r){e&1&&(a(0,"app-page-header",0)(1,"div",1)(2,"button",2),y("click",function(){return r.refresh()}),d(3,"i",3),c(4),o()()(),p(5,L,1,1,"app-loading-spinner",4),p(6,Q,5,2,"div",5),p(7,ie,26,5,"div",6)),e&2&&(_("title",r.i18n.t("portal.welcome")+", "+r.employeeName()),i(2),_("disabled",r.loading()),i(),w("fa-spin",r.loading()),i(),v(" ",r.i18n.t("common.refresh")," "),i(),g(r.loading()&&!r.dashboard()?5:-1),i(),g(r.error()&&!r.dashboard()?6:-1),i(),g(r.dashboard()?7:-1))},dependencies:[A,T,$,N,V,j],styles:[".employee-dashboard[_ngcontent-%COMP%]{padding:0}.stats-card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013;transition:all .3s ease;cursor:default}.stats-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.stats-card.clickable[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026;transform:translateY(-2px)}.stat-icon[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:.5rem;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0;color:var(--bs-body-color)}.stat-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--bs-secondary);text-transform:uppercase;letter-spacing:.5px;margin:0}.stat-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--bs-secondary)}.trend-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:600}.trend-badge[_ngcontent-%COMP%]   .fa-arrow-up[_ngcontent-%COMP%]{color:var(--bs-success)!important}.trend-badge[_ngcontent-%COMP%]   .fa-arrow-down[_ngcontent-%COMP%]{color:var(--bs-danger)!important}.trend-badge[_ngcontent-%COMP%]   .fa-minus[_ngcontent-%COMP%]{color:var(--bs-secondary)!important}.quick-actions-card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.quick-actions-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--bs-border-color);padding:1rem 1.25rem}.quick-action-btn[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;transition:all .2s ease;text-align:left;border-width:2px}.quick-action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translate(4px);box-shadow:0 .25rem .5rem #0000001a}.quick-action-btn[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:.5rem;background:var(--bs-light);display:flex;align-items:center;justify-content:center;font-size:1.25rem}.quick-action-btn[_ngcontent-%COMP%]:hover:not(:disabled)   .action-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.activity-card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.activity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--bs-border-color);padding:1rem 1.25rem}.activity-timeline[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.activity-item[_ngcontent-%COMP%]{position:relative;display:flex;padding:1.25rem;border-bottom:1px solid var(--bs-border-color)}.activity-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.activity-item[_ngcontent-%COMP%]:hover{background-color:var(--bs-light)}.activity-marker[_ngcontent-%COMP%]{position:relative;flex-shrink:0;width:3rem;display:flex;flex-direction:column;align-items:center}.activity-icon-wrapper[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;z-index:1}.activity-line[_ngcontent-%COMP%]{position:absolute;top:2.5rem;bottom:-1.25rem;left:50%;width:2px;background:var(--bs-border-color);transform:translate(-50%)}.activity-content[_ngcontent-%COMP%]{flex:1;margin-left:1rem}.activity-title[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;margin:0;color:var(--bs-body-color)}.activity-description[_ngcontent-%COMP%]{font-size:.875rem;color:var(--bs-secondary);margin:0}@media (max-width: 576px){.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:1.25rem}.quick-action-btn[_ngcontent-%COMP%]{padding:.75rem}.quick-action-btn[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;font-size:1rem}.activity-marker[_ngcontent-%COMP%]{width:2.5rem}.activity-icon-wrapper[_ngcontent-%COMP%]{width:2rem;height:2rem;font-size:.875rem}.activity-content[_ngcontent-%COMP%]{margin-left:.75rem}}@media (max-width: 992px){.quick-actions-card[_ngcontent-%COMP%]{margin-bottom:1rem}}.bg-primary-subtle[_ngcontent-%COMP%]{background-color:#0d6efd1a!important}.bg-success-subtle[_ngcontent-%COMP%]{background-color:#1987541a!important}.bg-warning-subtle[_ngcontent-%COMP%]{background-color:#ffc1071a!important}.bg-info-subtle[_ngcontent-%COMP%]{background-color:#0dcaf01a!important}.bg-danger-subtle[_ngcontent-%COMP%]{background-color:#dc35451a!important}.bg-secondary-subtle[_ngcontent-%COMP%]{background-color:#6c757d1a!important}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.stats-card[_ngcontent-%COMP%], .quick-actions-card[_ngcontent-%COMP%], .activity-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-out}.activity-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}"]})};export{H as EmployeeDashboardComponent};
