import{a as $}from"./chunk-QS4HD2YC.js";import{a as F}from"./chunk-K7WTKFJQ.js";import{a as W}from"./chunk-MRHL7QNZ.js";import{a as L}from"./chunk-I2JMY6CH.js";import{a as B}from"./chunk-H5EPUHY6.js";import{a as A}from"./chunk-5MHFUEKN.js";import{a as E}from"./chunk-Y62N6K5S.js";import{a as U}from"./chunk-EYAJMHM7.js";import{a as N}from"./chunk-HHXRLUSQ.js";import"./chunk-O7LPL3AF.js";import{b as k}from"./chunk-3VZ5QHEY.js";import{d as P,g as O}from"./chunk-TWXUAMJ4.js";import{Bb as r,Cb as g,Db as v,Ea as I,Eb as T,R as f,W as C,X as x,Xa as m,Ya as p,Yb as V,bb as _,cb as o,da as b,db as a,eb as c,lb as y,nb as h,pb as d,ta as n,wc as M}from"./chunk-JSQL33QG.js";import{d as S}from"./chunk-DGAILPFQ.js";function R(i,t){if(i&1&&(o(0,"div",2),c(1,"app-loading-spinner",5),a()),i&2){let e=d();n(),_("message",e.i18n.t("employee_vacations.loading_details"))("variant","primary")("centered",!0)}}function z(i,t){if(i&1&&(o(0,"div",3),c(1,"i",6),r(2),a()),i&2){let e=d();n(2),v(" ",e.error()," ")}}function H(i,t){if(i&1&&(o(0,"div",39)(1,"strong"),r(2),a(),o(3,"div",41),r(4),a()()),i&2){let e,s=d(3);n(2),v("",s.i18n.t("fields.notes"),":"),n(2),v(" ",(e=s.vacation())==null?null:e.notes," ")}}function q(i,t){if(i&1&&(o(0,"div",40)(1,"strong"),r(2),a(),o(3,"span",42),r(4),a()()),i&2){let e=d(3);n(2),v("",e.i18n.t("fields.createdAt"),":"),n(2),g(e.formatDateTime(e.vacation().createdAtUtc))}}function G(i,t){if(i&1&&(o(0,"div",21)(1,"h6",37),c(2,"i",38),r(3),a(),m(4,H,5,2,"div",39),m(5,q,5,2,"div",40),a()),i&2){let e=d(2);n(3),v(" ",e.i18n.t("employee_vacations.additional_information")," "),n(),p(e.vacation().notes?4:-1),n(),p(e.vacation().createdAtUtc?5:-1)}}function J(i,t){if(i&1){let e=y();o(0,"button",48),h("click",function(){C(e);let u=d(3);return x(u.navigateToEdit())}),c(1,"i",49),r(2),a()}if(i&2){let e=d(3);_("disabled",e.processing()),n(2),v(" ",e.i18n.t("common.edit")," ")}}function K(i,t){i&1&&c(0,"span",51)}function Q(i,t){i&1&&c(0,"i",52)}function X(i,t){if(i&1){let e=y();o(0,"button",50),h("click",function(){C(e);let u=d(3);return x(u.approveVacation())}),m(1,K,1,0,"span",51)(2,Q,1,0,"i",52),r(3),a()}if(i&2){let e=d(3);_("disabled",e.processing()),n(),p(e.processing()?1:2),n(2),v(" ",e.i18n.t("employee_vacations.approve")," ")}}function Y(i,t){i&1&&c(0,"span",51)}function Z(i,t){i&1&&c(0,"i",54)}function ee(i,t){if(i&1){let e=y();o(0,"button",53),h("click",function(){C(e);let u=d(3);return x(u.deleteVacation())}),m(1,Y,1,0,"span",51)(2,Z,1,0,"i",54),r(3),a()}if(i&2){let e=d(3);_("disabled",e.processing()),n(),p(e.processing()?1:2),n(2),v(" ",e.i18n.t("common.delete")," ")}}function te(i,t){if(i&1&&(o(0,"div",27)(1,"div",9)(2,"h6",10),c(3,"i",43),r(4),a()(),o(5,"div",20)(6,"div",44),m(7,J,3,2,"button",45),m(8,X,4,3,"button",46),m(9,ee,4,3,"button",47),a()()()),i&2){let e=d(2);n(4),v(" ",e.i18n.t("common.actions")," "),n(3),p(e.canEdit()?7:-1),n(),p(e.canApprove()?8:-1),n(),p(e.canDelete()?9:-1)}}function ie(i,t){if(i&1&&(o(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"h5",10)(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14),c(9,"i",15),a()(),o(10,"div")(11,"div",16),r(12),a(),o(13,"small",17),r(14),a()()(),o(15,"div",18),c(16,"app-status-badge",19),a()()()(),o(17,"div",20)(18,"div",21)(19,"h6",22),c(20,"i",23),r(21),a(),o(22,"div",4)(23,"div",24),c(24,"app-definition-list",25),a(),o(25,"div",24),c(26,"app-definition-list",25),a()()(),m(27,G,6,3,"div",21),a()()(),o(28,"div",26),m(29,te,10,4,"div",27),o(30,"div",8)(31,"div",9)(32,"h6",10),c(33,"i",28),r(34),a()(),o(35,"div",20)(36,"div",29)(37,"div",30)(38,"div",31)(39,"div",32),r(40),a(),o(41,"div",33),r(42),a()()(),o(43,"div",30)(44,"div",31)(45,"div",34),c(46,"app-status-badge",19),a(),o(47,"div",33),r(48),a()()(),o(49,"div",35)(50,"div",31)(51,"div",36),r(52),a(),o(53,"div",33),r(54),a()()()()()()()()),i&2){let e,s,u,w,D,l=d();n(12),g((e=l.vacation())==null?null:e.employeeName),n(2),T("",l.i18n.t("employee_vacations.vacation_id"),": #",(s=l.vacation())==null?null:s.id),n(2),_("status",l.statusBadge().label)("variant",l.statusBadge().variant),n(5),v(" ",l.i18n.t("employee_vacations.basic_information")," "),n(3),_("items",l.basicInfoColumn1())("labelWidth","5")("valueWidth","7"),n(2),_("items",l.basicInfoColumn2())("labelWidth","5")("valueWidth","7"),n(),p(l.vacation().notes||l.vacation().createdAtUtc?27:-1),n(2),p(l.hasActiveActions()?29:-1),n(5),v(" ",l.i18n.t("employee_vacations.vacation_summary")," "),n(6),g((u=l.vacation())==null?null:u.totalDays),n(2),g(((w=l.vacation())==null?null:w.totalDays)===1?l.i18n.t("fields.dayUnit"):l.i18n.t("fields.daysUnit")),n(4),_("status",l.statusBadge().label)("variant",l.statusBadge().variant),n(2),g(l.i18n.t("fields.status")),n(4),g((D=l.vacation())==null?null:D.vacationTypeName),n(2),g(l.i18n.t("fields.vacationType"))}}var j=class i{i18n=f(k);router=f(O);route=f(P);employeeVacationsService=f(L);notificationService=f(N);confirmationService=f(B);permissionService=f(A);loading=b(!1);processing=b(!1);vacation=b(null);error=b(null);ngOnInit(){this.loadVacationDetails()}loadVacationDetails(){let t=this.route.snapshot.paramMap.get("id");if(!t){this.router.navigate(["/employee-vacations"]);return}this.loading.set(!0),this.error.set(null),this.employeeVacationsService.getVacationById(+t).subscribe({next:e=>{this.vacation.set(e),this.loading.set(!1)},error:e=>{console.error("Failed to load vacation details:",e),this.error.set(this.i18n.t("employee_vacations.errors.load_failed")),this.loading.set(!1)}})}approveVacation(){return S(this,null,function*(){if(!this.vacation())return;(yield this.confirmationService.confirm({title:this.i18n.t("employee_vacations.approve_vacation"),message:this.i18n.t("employee_vacations.confirm_approve"),confirmText:this.i18n.t("common.approve"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-success"})).confirmed&&(this.processing.set(!0),this.employeeVacationsService.toggleVacationStatus(this.vacation().id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("employee_vacations.success.approved")),this.loadVacationDetails(),this.processing.set(!1)},error:e=>{console.error("Failed to approve vacation:",e),this.notificationService.error(this.i18n.t("employee_vacations.errors.approve_failed")),this.processing.set(!1)}}))})}deleteVacation(){return S(this,null,function*(){if(!this.vacation())return;(yield this.confirmationService.confirm({title:this.i18n.t("employee_vacations.delete_vacation"),message:this.i18n.t("employee_vacations.confirm_delete"),confirmText:this.i18n.t("common.delete"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-danger",icon:"fa-trash",iconClass:"text-danger"})).confirmed&&(this.processing.set(!0),this.employeeVacationsService.deleteVacation(this.vacation().id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("employee_vacations.success.deleted")),this.router.navigate(["/employee-vacations"])},error:e=>{console.error("Failed to delete vacation:",e),this.notificationService.error(this.i18n.t("employee_vacations.errors.delete_failed")),this.processing.set(!1)}}))})}canEdit(){return this.permissionService.has(`vacation.${E.UPDATE}`)}canApprove(){let t=this.vacation();return t?t.isApproved===!1&&this.permissionService.has(`vacation.${E.APPROVE}`):!1}canDelete(){return this.permissionService.has(`vacation.${E.DELETE}`)}hasActiveActions(){return this.canEdit()||this.canApprove()||this.canDelete()}getFormMode(){return"view"}getVacationId(){return this.vacation()?.id}navigateToEdit(){this.vacation()&&this.router.navigate(["/employee-vacations",this.vacation().id,"edit"])}navigateBack(){this.router.navigate(["/employee-vacations"])}formatDate(t){return new Date(t).toLocaleDateString()}formatDateTime(t){return new Date(t).toLocaleString()}getStatusClass(t){return t?"badge bg-success":"badge bg-warning"}getStatusText(t){return t?this.i18n.t("vacationStatus.approved"):this.i18n.t("vacationStatus.pending")}basicInfoColumn1=V(()=>{let t=this.vacation();return t?[{label:this.i18n.t("fields.employee"),value:t.employeeName},{label:this.i18n.t("fields.vacationType"),value:t.vacationTypeName},{label:this.i18n.t("fields.totalDays"),value:`${t.totalDays} ${t.totalDays===1?this.i18n.t("fields.dayUnit"):this.i18n.t("fields.daysUnit")}`}]:[]});basicInfoColumn2=V(()=>{let t=this.vacation();return t?[{label:this.i18n.t("fields.startDate"),value:t.startDate,type:"date"},{label:this.i18n.t("fields.endDate"),value:t.endDate,type:"date"},{label:this.i18n.t("fields.status"),value:this.getStatusText(t.isApproved),type:"badge",badgeVariant:t.isApproved?"success":"warning"}]:[]});statusBadge=V(()=>{let t=this.vacation();return t?{label:this.getStatusText(t.isApproved),variant:t.isApproved?"success":"warning"}:{label:"",variant:"warning"}});static \u0275fac=function(e){return new(e||i)};static \u0275cmp=I({type:i,selectors:[["app-view-employee-vacation"]],decls:5,vars:7,consts:[[1,"container-fluid"],["moduleName","employee-vacations","moduleRoute","employee-vacations",3,"mode","title","entityId","loading"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],[1,"row"],[3,"message","variant","centered"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-3"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle"],[1,"fas","fa-calendar-alt"],[1,"fw-medium"],[1,"text-muted"],[1,"text-end"],[3,"status","variant"],[1,"card-body"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"fa-solid","fa-info-circle","me-2"],[1,"col-md-6"],[3,"items","labelWidth","valueWidth"],[1,"col-lg-4"],[1,"card","mb-4"],[1,"fas","fa-chart-bar","me-2"],[1,"row","text-center"],[1,"col-12","mb-3"],[1,"border","rounded","p-3"],[1,"h5","mb-1","text-primary"],[1,"text-muted","small"],[1,"h6","mb-1"],[1,"col-12"],[1,"h6","mb-1","text-info"],[1,"text-secondary","mb-3"],[1,"fa-solid","fa-list","me-2"],[1,"mb-3"],[1,"mb-2"],[1,"bg-light","p-3","rounded","mt-2"],[1,"ms-2"],[1,"fas","fa-cogs","me-2"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"disabled"],["type","button",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-outline-danger",3,"disabled"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],[1,"fas","fa-edit","me-2"],["type","button",1,"btn","btn-success",3,"click","disabled"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-check","me-2"],["type","button",1,"btn","btn-outline-danger",3,"click","disabled"],[1,"fas","fa-trash","me-2"]],template:function(e,s){e&1&&(o(0,"div",0),c(1,"app-form-header",1),m(2,R,2,3,"div",2),m(3,z,3,1,"div",3),m(4,ie,55,22,"div",4),a()),e&2&&(n(),_("mode",s.getFormMode())("title",s.i18n.t("employee_vacations.view_vacation"))("entityId",s.getVacationId())("loading",s.loading()),n(),p(s.loading()?2:-1),n(),p(s.error()?3:-1),n(),p(s.vacation()&&!s.loading()?4:-1))},dependencies:[M,$,U,F,W],styles:[".detail-card[_ngcontent-%COMP%]{border:1px solid var(--bs-border-color);border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.detail-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--bs-light);border-bottom:1px solid var(--bs-border-color);font-weight:600}.detail-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.actions-card[_ngcontent-%COMP%]{position:sticky;top:1rem}.btn-group-vertical[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.5rem}.btn-group-vertical[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-bottom:0}.status-badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.25rem .5rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid var(--bs-border-color)}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--bs-gray-700);min-width:120px}.info-value[_ngcontent-%COMP%]{text-align:right;color:var(--bs-gray-900)}.loading-container[_ngcontent-%COMP%]{min-height:200px;display:flex;align-items:center;justify-content:center;flex-direction:column}@media (max-width: 768px){.app-desktop-sidebar[_ngcontent-%COMP%]{flex-direction:column}.app-sidebar-content[_ngcontent-%COMP%]{margin-top:1rem}.actions-card[_ngcontent-%COMP%]{position:static}.d-grid.gap-2[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;gap:.5rem}}"]})};export{j as ViewEmployeeVacationComponent};
