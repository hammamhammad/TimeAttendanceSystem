import{A as F,a as R,z as L}from"./chunk-HF7V7ZC6.js";import{a as z}from"./chunk-77FC2LKR.js";import{$a as c,Ab as D,Bb as M,Eb as u,Fb as I,Gb as m,Ha as P,Hb as k,Na as f,Sb as N,T as x,Wa as E,Y as b,Z as _,Za as y,_a as d,cb as V,db as T,dc as h,fa as C,ha as S,ib as a,jb as l,kb as O,ob as w,pb as v,rb as g,sb as s,wa as i}from"./chunk-IGEIB4M6.js";function q(n,t){if(n&1&&(a(0,"div",3)(1,"div",8)(2,"span",9),u(3),l()()()),n&2){let e=s();i(3),m("",e.loadingMessage,"...")}}function B(n,t){if(n&1){let e=w();a(0,"button",10),g("click",function(r){b(e);let p=s();return _(p.onClear(r))}),O(1,"i",11),l()}if(n&2){let e=s();v("title",e.i18n.t("common.clear"))}}function $(n,t){if(n&1){let e=w();a(0,"button",12),g("click",function(){b(e);let r=s();return _(r.onToggleDropdown())}),a(1,"span",9),u(2),l()()}if(n&2){let e=s();v("disabled",e.disabled),E("aria-expanded",e.showDropdown()),i(2),I(e.i18n.t("common.select"))}}function j(n,t){if(n&1&&(a(0,"small",20),u(1),l()),n&2){let e=s().$implicit;i(),m(" ",e.subLabel," ")}}function Y(n,t){if(n&1){let e=w();a(0,"button",17),g("mousedown",function(r){let p=b(e).$implicit,H=s(3);return _(H.onSelectOption(p,r))}),a(1,"div",18)(2,"span",19),u(3),l(),d(4,j,2,1,"small",20),l()()}if(n&2){let e=t.$implicit;M("disabled",e.disabled),i(2),M("text-muted",e.disabled),i(),m(" ",e.label," "),i(),c(e.subLabel?4:-1)}}function G(n,t){if(n&1&&V(0,Y,5,6,"button",16,y().trackByValue,!0),n&2){let e=s(2);T(e.filteredOptions())}}function U(n,t){if(n&1){let e=w();a(0,"button",17),g("mousedown",function(r){b(e);let p=s(2);return _(p.onSelectCustomValue(r))}),a(1,"div",21),O(2,"i",22),a(3,"span",23),u(4),l()()()}if(n&2){let e=s(2);i(4),k(" ",e.customValueMessage,': "',e.searchTerm(),'" ')}}function J(n,t){if(n&1&&(a(0,"div",15),u(1),l()),n&2){let e=s(2);i(),m(" ",e.noResultsMessage," ")}}function K(n,t){if(n&1&&(a(0,"div",15),u(1),l()),n&2){let e=s(2);i(),m(" ",e.emptyMessage," ")}}function Q(n,t){if(n&1&&(a(0,"div",13),d(1,G,2,0),d(2,U,5,2,"button",14),d(3,J,2,1,"div",15),d(4,K,2,1,"div",15),l()),n&2){let e=s();D("max-height",e.maxDropdownHeight)("overflow-y","auto")("position","absolute")("z-index","1050"),i(),c(e.hasResults()?1:-1),i(),c(e.shouldShowCustomValueOption()?2:-1),i(),c(e.shouldShowNoResults()?3:-1),i(),c(e.shouldShowEmptyMessage()?4:-1)}}function W(n,t){if(n&1&&(a(0,"div",7)(1,"div",24)(2,"div",25)(3,"span",9),u(4),l()(),a(5,"span",20),u(6),l()()()),n&2){let e=s();i(4),m("",e.loadingMessage,"..."),i(2),m("",e.loadingMessage,"...")}}var A=class n{i18n=x(z);options=[];placeholder="";loading=!1;disabled=!1;clearable=!0;required=!1;searchable=!0;maxDropdownHeight="200px";noResultsMessage="";loadingMessage="";emptyMessage="";allowCustomValue=!1;customValueMessage="";value=null;isInvalid=!1;selectionChange=new f;searchChange=new f;focus=new f;blur=new f;searchTerm=C("");showDropdown=C(!1);selectedValue=C(null);selectedOption=C(null);filteredOptions=h(()=>{let t=this.searchTerm().toLowerCase().trim();return t?this.options.filter(e=>e.label.toLowerCase().includes(t)||e.subLabel&&e.subLabel.toLowerCase().includes(t)||String(e.value).toLowerCase().includes(t)):this.options});displayValue=h(()=>this.searchTerm()&&this.showDropdown()?this.searchTerm():this.selectedOption()?.label||"");hasResults=h(()=>this.filteredOptions().length>0);shouldShowNoResults=h(()=>this.showDropdown()&&!this.loading&&this.searchTerm().trim().length>0&&!this.hasResults()&&!this.allowCustomValue);shouldShowEmptyMessage=h(()=>this.showDropdown()&&!this.loading&&this.options.length===0&&this.searchTerm().trim().length===0);shouldShowCustomValueOption=h(()=>this.allowCustomValue&&this.searchTerm().trim().length>0&&!this.hasResults()&&!this.loading);onChange=t=>{};onTouched=()=>{};writeValue(t){this.selectedValue.set(t);let e=this.options.find(o=>o.value===t)||null;this.selectedOption.set(e)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}ngOnInit(){this.noResultsMessage||(this.noResultsMessage=this.i18n.t("common.noResultsFound")),this.loadingMessage||(this.loadingMessage=this.i18n.t("common.loading")),this.emptyMessage||(this.emptyMessage=this.i18n.t("common.no_data")),this.customValueMessage||(this.customValueMessage=this.i18n.t("common.create")),this.value!==null&&this.value!==void 0&&this.writeValue(this.value)}ngOnChanges(t){if(t.value&&!t.value.firstChange&&this.writeValue(t.value.currentValue),t.options&&!t.options.firstChange){let e=this.selectedValue();if(e!=null){let o=this.options.find(r=>r.value===e)||null;this.selectedOption.set(o)}}}ngOnDestroy(){}onInputFocus(){this.disabled||(this.showDropdown.set(!0),this.focus.emit(),this.selectedOption()&&this.searchTerm.set(""))}onInputBlur(){setTimeout(()=>{this.showDropdown.set(!1),this.onTouched(),this.blur.emit()},200)}onSearchInput(t){let o=t.target.value;this.searchTerm.set(o),this.showDropdown.set(!0),this.searchChange.emit(o)}onSelectOption(t,e){e&&(e.preventDefault(),e.stopPropagation()),!t.disabled&&(this.selectedValue.set(t.value),this.selectedOption.set(t),this.searchTerm.set(""),this.showDropdown.set(!1),this.onChange(t.value),this.selectionChange.emit(t.value))}onSelectCustomValue(t){if(t&&(t.preventDefault(),t.stopPropagation()),!this.allowCustomValue||!this.searchTerm().trim())return;let e=this.searchTerm().trim();this.selectedValue.set(e),this.selectedOption.set({value:e,label:e}),this.searchTerm.set(""),this.showDropdown.set(!1),this.onChange(e),this.selectionChange.emit(e)}onClear(t){t.preventDefault(),t.stopPropagation(),this.selectedValue.set(null),this.selectedOption.set(null),this.searchTerm.set(""),this.onChange(null),this.selectionChange.emit(null)}onToggleDropdown(){this.disabled||(this.showDropdown()?this.showDropdown.set(!1):this.onInputFocus())}trackByValue(t,e){return e.value}focusInput(){this.onInputFocus()}clear(){this.onClear(new Event("clear"))}search(t){this.searchTerm.set(t),this.showDropdown.set(!0)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-searchable-select"]],inputs:{options:"options",placeholder:"placeholder",loading:"loading",disabled:"disabled",clearable:"clearable",required:"required",searchable:"searchable",maxDropdownHeight:"maxDropdownHeight",noResultsMessage:"noResultsMessage",loadingMessage:"loadingMessage",emptyMessage:"emptyMessage",allowCustomValue:"allowCustomValue",customValueMessage:"customValueMessage",value:"value",isInvalid:"isInvalid"},outputs:{selectionChange:"selectionChange",searchChange:"searchChange",focus:"focus",blur:"blur"},features:[N([{provide:R,useExisting:n,multi:!0}]),S],decls:8,vars:11,consts:[[1,"searchable-select","position-relative"],[1,"input-group"],["type","text","autocomplete","off",1,"form-control",3,"input","focus","blur","click","value","placeholder","disabled","readonly"],[1,"input-group-text"],["type","button",1,"btn","btn-outline-secondary",3,"title"],["type","button",1,"btn","btn-outline-secondary","dropdown-toggle",3,"disabled"],[1,"dropdown-menu","show","w-100","mt-1","shadow",3,"max-height","overflow-y","position","z-index"],[1,"dropdown-menu","show","w-100","mt-1","shadow","text-center","py-3",2,"position","absolute","z-index","1050"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],["type","button",1,"btn","btn-outline-secondary",3,"click","title"],[1,"fas","fa-times"],["type","button",1,"btn","btn-outline-secondary","dropdown-toggle",3,"click","disabled"],[1,"dropdown-menu","show","w-100","mt-1","shadow"],["type","button",1,"dropdown-item"],[1,"dropdown-item-text","text-center","py-3","text-muted"],["type","button",1,"dropdown-item",3,"disabled"],["type","button",1,"dropdown-item",3,"mousedown"],[1,"d-flex","flex-column"],[1,"fw-medium"],[1,"text-muted"],[1,"d-flex","align-items-center"],[1,"fas","fa-plus","me-2","text-primary"],[1,"text-primary"],[1,"d-flex","align-items-center","justify-content-center"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"input",2),g("input",function(p){return o.searchable?o.onSearchInput(p):null})("focus",function(){return o.onInputFocus()})("blur",function(){return o.onInputBlur()})("click",function(){return o.searchable?null:o.onToggleDropdown()}),l(),d(3,q,4,1,"div",3),d(4,B,2,1,"button",4),d(5,$,3,3,"button",5),l(),d(6,Q,5,12,"div",6),d(7,W,7,2,"div",7),l()),e&2&&(i(2),M("is-invalid",o.isInvalid||o.required&&!o.selectedValue()&&o.searchTerm().trim()===""),v("value",o.displayValue())("placeholder",o.placeholder)("disabled",o.disabled)("readOnly",!o.searchable),i(),c(o.loading?3:-1),i(),c(o.clearable&&o.selectedValue()&&!o.loading&&!o.disabled?4:-1),i(),c(o.loading?-1:5),i(),c(o.showDropdown()&&!o.loading?6:-1),i(),c(o.showDropdown()&&o.loading?7:-1))},dependencies:[L,F],styles:[".searchable-select[_ngcontent-%COMP%]{position:relative}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.375rem;box-shadow:0 .5rem 1rem #00000026}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;background:none;text-align:left;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#f8f9fa;color:#495057}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus:not(.disabled){background-color:#e9ecef;color:#495057;outline:0}.searchable-select[_ngcontent-%COMP%]   .dropdown-item.disabled[_ngcontent-%COMP%]{color:#6c757d;cursor:not-allowed;pointer-events:none}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .fw-medium[_ngcontent-%COMP%]{font-weight:500}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;opacity:.8}.searchable-select[_ngcontent-%COMP%]   .dropdown-item-text[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:0;font-size:.875rem}.searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:#ced4da}.searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{border-color:#adb5bd;background-color:#e9ecef}.searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #007bff40;border-color:#80bdff}.searchable-select[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.searchable-select[_ngcontent-%COMP%]   .form-control[readonly][_ngcontent-%COMP%]{cursor:pointer}.searchable-select[_ngcontent-%COMP%]   .spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a1a1a1}[dir=rtl][_ngcontent-%COMP%]   .searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-right:1px solid #ced4da;border-left:none}@media (max-width: 576px){.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{max-height:150px!important}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem}}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dropdown-fade-in .15s ease-out}@keyframes _ngcontent-%COMP%_dropdown-fade-in{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.searchable-select[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:transparent;border:none}.searchable-select[_ngcontent-%COMP%]:focus-within   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}"]})};export{A as a};
