import{a as V}from"./chunk-YHEEW5V6.js";import{a as B}from"./chunk-MRHL7QNZ.js";import{a as A}from"./chunk-I575RJ3N.js";import{a as $}from"./chunk-K7WTKFJQ.js";import{a as R}from"./chunk-H5EPUHY6.js";import{a as E}from"./chunk-MPEAAPTS.js";import"./chunk-Y62N6K5S.js";import{a as T}from"./chunk-EYAJMHM7.js";import{a as N}from"./chunk-HHXRLUSQ.js";import"./chunk-TZ2XIVGW.js";import{b as O}from"./chunk-RCBJJ7UY.js";import{d as D,g as M}from"./chunk-TWXUAMJ4.js";import{Bb as s,Cb as x,Db as m,Ea as S,Eb as _,H as W,I as C,R as d,Sb as b,Tb as k,Xa as v,Ya as y,Yb as f,bb as p,cb as n,da as h,db as a,eb as c,f as I,pb as l,ta as r,uc as w,wc as P}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";function U(i,e){if(i&1&&(n(0,"div",1),c(1,"app-loading-spinner",3),a()),i&2){let t=l();r(),p("message",t.i18n.t("remoteWork.policy.loading_details"))("variant","primary")("centered",!0)}}function F(i,e){if(i&1&&s(0),i&2){let t=l();m(" ",t.branchName||"Branch "+t.branchId," ")}}function j(i,e){if(i&1&&s(0),i&2){let t=l(2);m(" ",t.i18n.t("remoteWork.policy.company_wide")," ")}}function L(i,e){if(i&1&&s(0),i&2){let t=l(2);m(" ",t.i18n.t("remoteWork.policy.branch_policy")," ")}}function Y(i,e){if(i&1&&s(0),i&2){let t=l(2);m(" ",t.i18n.t("remoteWork.policy.company_wide_policy")," ")}}function z(i,e){if(i&1&&(n(0,"div",20),c(1,"i",30),s(2),b(3,"date"),a()),i&2){let t=l(),o=l();r(2),_(" ",o.i18n.t("common.modified_at"),": ",k(3,2,t.modifiedAtUtc,"medium")," ")}}function H(i,e){if(i&1&&(c(0,"app-form-header",4),n(1,"div",5)(2,"div",6)(3,"div",7),c(4,"i",8),a(),n(5,"div",9)(6,"div",10)(7,"div",11)(8,"h3",12),v(9,F,1,1)(10,j,1,1),a(),n(11,"p",13),c(12,"i",14),v(13,L,1,1)(14,Y,1,1),a()(),n(15,"div",15)(16,"div",16),c(17,"app-status-badge",17),n(18,"div",18)(19,"div"),c(20,"i",19),s(21),b(22,"date"),a(),v(23,z,4,5,"div",20),a()()()()()()(),n(24,"div",21)(25,"div",22)(26,"h5",23),c(27,"i",24),s(28),a()(),n(29,"div",25),c(30,"app-definition-list",26),a()(),n(31,"div",21)(32,"div",22)(33,"h5",23),c(34,"i",27),s(35),a()(),n(36,"div",25),c(37,"app-definition-list",26),a()(),n(38,"div",21)(39,"div",22)(40,"h5",23),c(41,"i",28),s(42),a()(),n(43,"div",25),c(44,"app-definition-list",26),a()(),n(45,"div",21)(46,"div",22)(47,"h5",23),c(48,"i",29),s(49),a()(),n(50,"div",25),c(51,"app-definition-list",26),a()()),i&2){let t=e,o=l();p("title",o.i18n.t("remoteWork.policy.policy_details"))("entityId",o.policyId()||void 0)("loading",o.loading()),r(9),y(t.branchId?9:10),r(4),y(t.branchId?13:14),r(4),p("status",o.statusBadge().label)("variant",o.statusBadge().variant),r(4),_(" ",o.i18n.t("common.created_at"),": ",k(22,26,t.createdAtUtc,"medium")," "),r(2),y(t.modifiedAtUtc?23:-1),r(5),m(" ",o.i18n.t("common.basic_information")," "),r(2),p("items",o.basicInfoItems())("labelWidth","4")("valueWidth","8"),r(5),m(" ",o.i18n.t("remoteWork.policy.quota_settings")," "),r(2),p("items",o.quotaInfoItems())("labelWidth","4")("valueWidth","8"),r(5),m(" ",o.i18n.t("remoteWork.policy.approval_settings")," "),r(2),p("items",o.approvalSettingsItems())("labelWidth","4")("valueWidth","8"),r(5),m(" ",o.i18n.t("remoteWork.policy.advance_notice")," "),r(2),p("items",o.advanceNoticeItems())("labelWidth","4")("valueWidth","8")}}function G(i,e){if(i&1&&(n(0,"div",2),c(1,"i",31),n(2,"h4",32),s(3),a(),n(4,"p",32),s(5),a()()),i&2){let t=l();r(3),x(t.i18n.t("remoteWork.policy.policy_not_found")),r(2),x(t.i18n.t("remoteWork.policy.policy_not_found_message"))}}var q=class i{router=d(M);route=d(D);service=d(V);notificationService=d(N);confirmationService=d(R);destroy$=new I;i18n=d(O);permissionService=d(E);loading=h(!1);policy=h(null);policyId=h(null);PERMISSIONS={UPDATE:"remoteWork.policy.update",DELETE:"remoteWork.policy.delete"};ngOnInit(){this.loadPolicy()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPolicy(){this.loading.set(!0),this.route.paramMap.pipe(C(this.destroy$),W(e=>{let t=Number(e.get("id"));if(!t||t<=0)throw this.notificationService.error(this.i18n.t("remoteWork.policy.errors.invalid_id")),this.router.navigate(["/settings/remote-work-policy"]),new Error("Invalid policy ID");return this.policyId.set(t),this.service.getById(t)})).subscribe({next:e=>{this.loading.set(!1),this.policy.set(e)},error:e=>{this.loading.set(!1),console.error("Failed to load remote work policy:",e),e.status===404?this.notificationService.error(this.i18n.t("remoteWork.policy.errors.not_found")):this.notificationService.error(this.i18n.t("remoteWork.policy.errors.load_failed")),this.router.navigate(["/settings/remote-work-policy"])}})}onToggleStatus(){let e=this.policy();if(!e||!this.permissionService.has(this.PERMISSIONS.UPDATE)){this.notificationService.error(this.i18n.t("common.errors.insufficient_permissions"));return}let t=e.isActive?"deactivate":"activate",o=this.i18n.t(`remoteWork.policy.confirm_${t}`);this.confirmationService.confirm({title:this.i18n.t(`remoteWork.policy.${t}_policy`),message:o,confirmText:this.i18n.t(`common.${t}`),cancelText:this.i18n.t("common.cancel")}).then(u=>{u.confirmed&&e&&this.service.toggleStatus(e.id).subscribe({next:()=>{let g=e.isActive?this.i18n.t("remoteWork.policy.success.deactivated"):this.i18n.t("remoteWork.policy.success.activated");this.notificationService.success(g),this.loadPolicy()},error:g=>{console.error("Failed to toggle policy status:",g),this.notificationService.error(this.i18n.t("remoteWork.policy.errors.status_toggle_failed"))}})})}onDelete(){let e=this.policy();if(!e||!this.permissionService.has(this.PERMISSIONS.DELETE)){this.notificationService.error(this.i18n.t("common.errors.insufficient_permissions"));return}this.confirmationService.confirm({title:this.i18n.t("remoteWork.policy.delete_policy"),message:this.i18n.t("remoteWork.policy.confirm_delete"),confirmText:this.i18n.t("common.delete"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-danger"}).then(t=>{t.confirmed&&e&&this.service.delete(e.id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("remoteWork.policy.success.deleted")),this.router.navigate(["/settings/remote-work-policy"])},error:o=>{console.error("Failed to delete policy:",o),this.notificationService.error(this.i18n.t("remoteWork.policy.errors.delete_failed"))}})})}statusBadge=f(()=>{let e=this.policy();return e?{label:e.isActive?this.i18n.t("common.active"):this.i18n.t("common.inactive"),variant:e.isActive?"success":"secondary"}:{label:"",variant:"secondary"}});basicInfoItems=f(()=>{let e=this.policy();return e?[{label:this.i18n.t("remoteWork.policy.branch"),value:e.branchId?e.branchName||`Branch ${e.branchId}`:this.i18n.t("remoteWork.policy.company_wide")},{label:this.i18n.t("common.status"),value:this.statusBadge().label,type:"badge",badgeVariant:this.statusBadge().variant}]:[]});quotaInfoItems=f(()=>{let e=this.policy();if(!e)return[];let t=[];return e.maxDaysPerWeek!==null&&e.maxDaysPerWeek!==void 0&&t.push({label:this.i18n.t("remoteWork.policy.max_days_per_week"),value:`${e.maxDaysPerWeek} ${this.i18n.t("common.days")}`}),e.maxDaysPerMonth!==null&&e.maxDaysPerMonth!==void 0&&t.push({label:this.i18n.t("remoteWork.policy.max_days_per_month"),value:`${e.maxDaysPerMonth} ${this.i18n.t("common.days")}`}),e.maxDaysPerYear!==null&&e.maxDaysPerYear!==void 0&&t.push({label:this.i18n.t("remoteWork.policy.max_days_per_year"),value:`${e.maxDaysPerYear} ${this.i18n.t("common.days")}`}),t.length===0&&t.push({label:this.i18n.t("remoteWork.policy.quotas"),value:this.i18n.t("remoteWork.policy.no_quotas_set")}),t});approvalSettingsItems=f(()=>{let e=this.policy();return e?[{label:this.i18n.t("remoteWork.policy.requires_manager_approval"),value:e.requiresManagerApproval?this.i18n.t("common.yes"):this.i18n.t("common.no")}]:[]});advanceNoticeItems=f(()=>{let e=this.policy();if(!e)return[];let t=[];return e.minAdvanceNoticeDays!==null&&e.minAdvanceNoticeDays!==void 0?t.push({label:this.i18n.t("remoteWork.policy.min_advance_notice_days"),value:`${e.minAdvanceNoticeDays} ${this.i18n.t("common.days")}`}):t.push({label:this.i18n.t("remoteWork.policy.min_advance_notice_days"),value:this.i18n.t("remoteWork.policy.no_advance_notice_required")}),t});static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-view-remote-work-policy"]],decls:4,vars:1,consts:[[1,"view-remote-work-policy-page"],[1,"d-flex","justify-content-center","align-items-center","py-5"],[1,"text-center","py-5"],[3,"message","variant","centered"],["mode","view","moduleName","remote-work-policy","moduleRoute","settings/remote-work-policy",3,"title","entityId","loading"],[1,"header-card","mb-4"],[1,"d-flex","align-items-center"],[1,"policy-icon","me-4"],[1,"fas","fa-laptop-house","text-primary","fa-3x"],[1,"flex-grow-1"],[1,"row"],[1,"col-md-8"],[1,"mb-1"],[1,"text-muted","mb-0"],[1,"fas","fa-building","me-2"],[1,"col-md-4","text-md-end"],[1,"status-info"],[1,"fs-6","mb-2",3,"status","variant"],[1,"text-muted","small"],[1,"fas","fa-clock","me-1"],[1,"mt-1"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fas","fa-info-circle","text-info","me-2"],[1,"card-body"],["layout","two-column",3,"items","labelWidth","valueWidth"],[1,"fas","fa-calendar-check","text-success","me-2"],[1,"fas","fa-user-check","text-warning","me-2"],[1,"fas","fa-bell","text-primary","me-2"],[1,"fas","fa-edit","me-1"],[1,"fas","fa-exclamation-triangle","fa-3x","text-warning","mb-3"],[1,"text-muted"]],template:function(t,o){if(t&1&&(n(0,"div",0),v(1,U,2,3,"div",1)(2,H,52,29)(3,G,6,2,"div",2),a()),t&2){let u;r(),y(o.loading()?1:(u=o.policy())?2:3,u)}},dependencies:[P,A,T,$,B,w],styles:[".view-remote-work-policy-page[_ngcontent-%COMP%]{padding:1.5rem}.header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff);border:1px solid #e9ecef;border-radius:.5rem;padding:2rem;box-shadow:0 2px 4px #0000000d}.policy-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;color:#fff;box-shadow:0 4px 6px #667eea4d}.status-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:.5rem;box-shadow:0 1px 3px #0000000d;transition:box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 1.5rem}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#495057}.card-body[_ngcontent-%COMP%]{padding:1.5rem}@media (max-width: 768px){.view-remote-work-policy-page[_ngcontent-%COMP%]{padding:1rem}.header-card[_ngcontent-%COMP%]{padding:1.5rem}.policy-icon[_ngcontent-%COMP%]{width:60px;height:60px}.status-info[_ngcontent-%COMP%]{align-items:flex-start;margin-top:1rem}}"]})};export{q as ViewRemoteWorkPolicyComponent};
