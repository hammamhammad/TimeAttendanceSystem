import{a as R,w as F,x as L}from"./chunk-UWMUXUZF.js";import{b as z}from"./chunk-MCSGSJCX.js";import{C as i,H as O,Ha as D,L as m,M as C,Pa as p,Q as S,Va as k,Wa as E,X as l,Y as s,Z as a,_ as M,ab as N,ca as y,da as P,fa as w,ha as h,ja as r,oa as T,pa as v,s as x,sa as d,t as b,ta as V,u as _,ua as u,va as I,y as f}from"./chunk-H3A4D7EH.js";function A(n,t){if(n&1&&(s(0,"div",8)(1,"div",9)(2,"span",10),d(3),a()()()),n&2){let e=r();i(3),u("",e.loadingMessage,"...")}}function H(n,t){if(n&1){let e=w();s(0,"button",11),h("click",function(c){b(e);let g=r();return _(g.onClear(c))}),M(1,"i",12),a()}if(n&2){let e=r();l("title",e.i18n.t("common.clear"))}}function q(n,t){if(n&1){let e=w();s(0,"button",13),h("click",function(){b(e);let c=r();return _(c.onToggleDropdown())}),s(1,"span",10),d(2),a()()}if(n&2){let e=r();l("disabled",e.disabled),S("aria-expanded",e.showDropdown()),i(2),V(e.i18n.t("common.select"))}}function $(n,t){if(n&1&&(s(0,"small",23),d(1),a()),n&2){let e=r().$implicit;i(),u(" ",e.subLabel," ")}}function j(n,t){if(n&1){let e=w();s(0,"button",19),h("click",function(){let c=b(e).$implicit,g=r(3);return _(g.onSelectOption(c))}),s(1,"div",20)(2,"span",21),d(3),a(),m(4,$,2,1,"small",22),a()()}if(n&2){let e=t.$implicit;v("disabled",e.disabled),i(2),v("text-muted",e.disabled),i(),u(" ",e.label," "),i(),l("ngIf",e.subLabel)}}function Y(n,t){if(n&1&&(y(0),m(1,j,5,6,"button",18),P()),n&2){let e=r(2);i(),l("ngForOf",e.filteredOptions())("ngForTrackBy",e.trackByValue)}}function G(n,t){if(n&1){let e=w();s(0,"button",19),h("click",function(){b(e);let c=r(2);return _(c.onSelectCustomValue())}),s(1,"div",24),M(2,"i",25),s(3,"span",26),d(4),a()()()}if(n&2){let e=r(2);i(4),I(" ",e.customValueMessage,': "',e.searchTerm(),'" ')}}function U(n,t){if(n&1&&(s(0,"div",27),d(1),a()),n&2){let e=r(2);i(),u(" ",e.noResultsMessage," ")}}function J(n,t){if(n&1&&(s(0,"div",27),d(1),a()),n&2){let e=r(2);i(),u(" ",e.emptyMessage," ")}}function K(n,t){if(n&1&&(s(0,"div",14),m(1,Y,2,2,"ng-container",15)(2,G,5,2,"button",16)(3,U,2,1,"div",17)(4,J,2,1,"div",17),a()),n&2){let e=r();T("max-height",e.maxDropdownHeight)("overflow-y","auto")("position","absolute")("z-index","1050"),i(),l("ngIf",e.hasResults()),i(),l("ngIf",e.shouldShowCustomValueOption()),i(),l("ngIf",e.shouldShowNoResults()),i(),l("ngIf",e.shouldShowEmptyMessage())}}function Q(n,t){if(n&1&&(s(0,"div",28)(1,"div",29)(2,"div",30)(3,"span",10),d(4),a()(),s(5,"span",23),d(6),a()()()),n&2){let e=r();i(4),u("",e.loadingMessage,"..."),i(2),u("",e.loadingMessage,"...")}}var B=class n{i18n=x(z);options=[];placeholder="";loading=!1;disabled=!1;clearable=!0;required=!1;searchable=!0;maxDropdownHeight="200px";noResultsMessage="";loadingMessage="";emptyMessage="";allowCustomValue=!1;customValueMessage="";value=null;selectionChange=new C;searchChange=new C;focus=new C;blur=new C;searchTerm=f("");showDropdown=f(!1);selectedValue=f(null);selectedOption=f(null);filteredOptions=p(()=>{let t=this.searchTerm().toLowerCase().trim();return t?this.options.filter(e=>e.label.toLowerCase().includes(t)||e.subLabel&&e.subLabel.toLowerCase().includes(t)||String(e.value).toLowerCase().includes(t)):this.options});displayValue=p(()=>this.searchTerm()&&this.showDropdown()?this.searchTerm():this.selectedOption()?.label||"");hasResults=p(()=>this.filteredOptions().length>0);shouldShowNoResults=p(()=>this.showDropdown()&&!this.loading&&this.searchTerm().trim().length>0&&!this.hasResults()&&!this.allowCustomValue);shouldShowEmptyMessage=p(()=>this.showDropdown()&&!this.loading&&this.options.length===0&&this.searchTerm().trim().length===0);shouldShowCustomValueOption=p(()=>this.allowCustomValue&&this.searchTerm().trim().length>0&&!this.hasResults()&&!this.loading);onChange=t=>{};onTouched=()=>{};writeValue(t){this.selectedValue.set(t);let e=this.options.find(o=>o.value===t)||null;this.selectedOption.set(e)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}ngOnInit(){this.noResultsMessage||(this.noResultsMessage=this.i18n.t("common.noResultsFound")),this.loadingMessage||(this.loadingMessage=this.i18n.t("common.loading")),this.emptyMessage||(this.emptyMessage=this.i18n.t("common.no_data")),this.customValueMessage||(this.customValueMessage=this.i18n.t("common.create"))}ngOnDestroy(){}onInputFocus(){this.disabled||(this.showDropdown.set(!0),this.focus.emit(),this.selectedOption()&&this.searchTerm.set(""))}onInputBlur(){setTimeout(()=>{this.showDropdown.set(!1),this.onTouched(),this.blur.emit()},200)}onSearchInput(t){let o=t.target.value;this.searchTerm.set(o),this.showDropdown.set(!0),this.searchChange.emit(o)}onSelectOption(t){t.disabled||(this.selectedValue.set(t.value),this.selectedOption.set(t),this.searchTerm.set(""),this.showDropdown.set(!1),this.onChange(t.value),this.selectionChange.emit(t.value))}onSelectCustomValue(){if(!this.allowCustomValue||!this.searchTerm().trim())return;let t=this.searchTerm().trim();this.selectedValue.set(t),this.selectedOption.set({value:t,label:t}),this.searchTerm.set(""),this.showDropdown.set(!1),this.onChange(t),this.selectionChange.emit(t)}onClear(t){t.preventDefault(),t.stopPropagation(),this.selectedValue.set(null),this.selectedOption.set(null),this.searchTerm.set(""),this.onChange(null),this.selectionChange.emit(null)}onToggleDropdown(){this.disabled||(this.showDropdown()?this.showDropdown.set(!1):this.onInputFocus())}trackByValue(t,e){return e.value}focusInput(){this.onInputFocus()}clear(){this.onClear(new Event("clear"))}search(t){this.searchTerm.set(t),this.showDropdown.set(!0)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=O({type:n,selectors:[["app-searchable-select"]],inputs:{options:"options",placeholder:"placeholder",loading:"loading",disabled:"disabled",clearable:"clearable",required:"required",searchable:"searchable",maxDropdownHeight:"maxDropdownHeight",noResultsMessage:"noResultsMessage",loadingMessage:"loadingMessage",emptyMessage:"emptyMessage",allowCustomValue:"allowCustomValue",customValueMessage:"customValueMessage",value:"value"},outputs:{selectionChange:"selectionChange",searchChange:"searchChange",focus:"focus",blur:"blur"},features:[D([{provide:R,useExisting:n,multi:!0}])],decls:8,vars:11,consts:[[1,"searchable-select","position-relative"],[1,"input-group"],["type","text","autocomplete","off",1,"form-control",3,"input","focus","blur","click","value","placeholder","disabled","readonly"],["class","input-group-text",4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"title","click",4,"ngIf"],["type","button","class","btn btn-outline-secondary dropdown-toggle",3,"disabled","click",4,"ngIf"],["class","dropdown-menu show w-100 mt-1 shadow",3,"max-height","overflow-y","position","z-index",4,"ngIf"],["class","dropdown-menu show w-100 mt-1 shadow text-center py-3","style","position: absolute; z-index: 1050;",4,"ngIf"],[1,"input-group-text"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],["type","button",1,"btn","btn-outline-secondary",3,"click","title"],[1,"fas","fa-times"],["type","button",1,"btn","btn-outline-secondary","dropdown-toggle",3,"click","disabled"],[1,"dropdown-menu","show","w-100","mt-1","shadow"],[4,"ngIf"],["type","button","class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-item-text text-center py-3 text-muted",4,"ngIf"],["type","button","class","dropdown-item",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"dropdown-item",3,"click"],[1,"d-flex","flex-column"],[1,"fw-medium"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[1,"d-flex","align-items-center"],[1,"fas","fa-plus","me-2","text-primary"],[1,"text-primary"],[1,"dropdown-item-text","text-center","py-3","text-muted"],[1,"dropdown-menu","show","w-100","mt-1","shadow","text-center","py-3",2,"position","absolute","z-index","1050"],[1,"d-flex","align-items-center","justify-content-center"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"div",1)(2,"input",2),h("input",function(g){return o.searchable?o.onSearchInput(g):null})("focus",function(){return o.onInputFocus()})("blur",function(){return o.onInputBlur()})("click",function(){return o.searchable?null:o.onToggleDropdown()}),a(),m(3,A,4,1,"div",3)(4,H,2,1,"button",4)(5,q,3,3,"button",5),a(),m(6,K,5,12,"div",6)(7,Q,7,2,"div",7),a()),e&2&&(i(2),v("is-invalid",o.required&&!o.selectedValue()&&o.searchTerm().trim()===""),l("value",o.displayValue())("placeholder",o.placeholder)("disabled",o.disabled)("readonly",!o.searchable),i(),l("ngIf",o.loading),i(),l("ngIf",o.clearable&&o.selectedValue()&&!o.loading&&!o.disabled),i(),l("ngIf",!o.loading),i(),l("ngIf",o.showDropdown()&&!o.loading),i(),l("ngIf",o.showDropdown()&&o.loading))},dependencies:[N,k,E,F,L],styles:[".searchable-select[_ngcontent-%COMP%]{position:relative}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.375rem;box-shadow:0 .5rem 1rem #00000026}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;background:none;text-align:left;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#f8f9fa;color:#495057}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus:not(.disabled){background-color:#e9ecef;color:#495057;outline:0}.searchable-select[_ngcontent-%COMP%]   .dropdown-item.disabled[_ngcontent-%COMP%]{color:#6c757d;cursor:not-allowed;pointer-events:none}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .fw-medium[_ngcontent-%COMP%]{font-weight:500}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;opacity:.8}.searchable-select[_ngcontent-%COMP%]   .dropdown-item-text[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:0;font-size:.875rem}.searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-color:#ced4da}.searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{border-color:#adb5bd;background-color:#e9ecef}.searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #007bff40;border-color:#80bdff}.searchable-select[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.searchable-select[_ngcontent-%COMP%]   .form-control[readonly][_ngcontent-%COMP%]{cursor:pointer}.searchable-select[_ngcontent-%COMP%]   .spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a1a1a1}[dir=rtl][_ngcontent-%COMP%]   .searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{text-align:right}[dir=rtl][_ngcontent-%COMP%]   .searchable-select[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-right:1px solid #ced4da;border-left:none}@media (max-width: 576px){.searchable-select[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{max-height:150px!important}.searchable-select[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem}}.searchable-select[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dropdown-fade-in .15s ease-out}@keyframes _ngcontent-%COMP%_dropdown-fade-in{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.searchable-select[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:transparent;border:none}.searchable-select[_ngcontent-%COMP%]:focus-within   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}"]})};export{B as a};
