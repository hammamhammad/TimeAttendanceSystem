import{a as N}from"./chunk-K7WTKFJQ.js";import{a as V}from"./chunk-MRHL7QNZ.js";import{a as T}from"./chunk-IOKJIQ6J.js";import{a as O}from"./chunk-H5EPUHY6.js";import{a as E}from"./chunk-ANEZOAXP.js";import{a as k}from"./chunk-UBCI4X5Q.js";import{a as w}from"./chunk-EYAJMHM7.js";import{a as I}from"./chunk-HHXRLUSQ.js";import{b as F}from"./chunk-TJ2U7DWW.js";import{d as R,g as M}from"./chunk-TWXUAMJ4.js";import{Bb as s,Cb as u,Db as d,Ea as D,R as b,W as q,X as C,Xa as f,Ya as g,Yb as _,bb as m,cb as n,da as x,db as a,eb as l,lb as y,nb as h,pb as c,ta as i,wc as P,yb as v}from"./chunk-JSQL33QG.js";import{d as S}from"./chunk-DGAILPFQ.js";function L(o,t){if(o&1){let e=y();n(0,"button",11),h("click",function(){q(e);let p=c();return C(p.editRequest())}),l(1,"i",12),s(2),a()}if(o&2){let e=c();m("disabled",e.loading()),i(2),d(" ",e.i18n.t("common.edit")," ")}}function W(o,t){if(o&1){let e=y();n(0,"button",13),h("click",function(){q(e);let p=c();return C(p.cancelRequest())}),l(1,"i",14),s(2),a()}if(o&2){let e=c();m("disabled",e.loading()),i(2),d(" ",e.i18n.t("common.cancel")," ")}}function z(o,t){if(o&1&&l(0,"app-loading-spinner",8),o&2){let e=c();m("message",e.i18n.t("common.loading"))}}function B(o,t){if(o&1){let e=y();n(0,"div",9),l(1,"i",15),s(2),n(3,"button",16),h("click",function(){q(e);let p=c();return C(p.refresh())}),s(4),a()()}if(o&2){let e=c();i(2),d(" ",e.error()," "),i(2),d(" ",e.i18n.t("common.retry")," ")}}function U(o,t){if(o&1&&(n(0,"div",18)(1,"div",25)(2,"h5",20),l(3,"i",44),s(4),a()(),n(5,"div",23),l(6,"app-definition-list",24),a()()),o&2){let e=c(2);i(4),d(" ",e.i18n.t("portal.scheduling_information")," "),i(2),m("items",e.schedulingItems())("labelWidth","4")("valueWidth","8")}}function j(o,t){if(o&1&&(n(0,"div",38)(1,"div",45),l(2,"i",46),a(),n(3,"div",34)(4,"h6"),s(5),a(),n(6,"small",35),s(7),a()()()),o&2){let e=c(2);i(5),u(e.request().status),i(2),u(e.i18n.t("portal.request_terminated"))}}function Y(o,t){if(o&1&&(n(0,"div",10)(1,"div",17)(2,"div",18)(3,"div",19)(4,"h5",20),l(5,"i",21),s(6),a(),l(7,"app-status-badge",22),a(),n(8,"div",23),l(9,"app-definition-list",24),a()(),n(10,"div",18)(11,"div",25)(12,"h5",20),l(13,"i",26),s(14),a()(),n(15,"div",23),l(16,"app-definition-list",24),a()(),f(17,U,7,4,"div",18),a(),n(18,"div",27)(19,"div",28)(20,"div",25)(21,"h5",20),l(22,"i",29),s(23),a()(),n(24,"div",23)(25,"div",30)(26,"div",31)(27,"div",32),l(28,"i",33),a(),n(29,"div",34)(30,"h6"),s(31),a(),n(32,"small",35),s(33),a()()(),n(34,"div",31)(35,"div",32),l(36,"i",36),a(),n(37,"div",34)(38,"h6"),s(39),a(),n(40,"small",35),s(41),a()()(),n(42,"div",31)(43,"div",32),l(44,"i",37),a(),n(45,"div",34)(46,"h6"),s(47),a(),n(48,"small",35),s(49),a()()(),f(50,j,8,2,"div",38),a()()(),n(51,"div",39)(52,"div",23)(53,"div",40),l(54,"i",41),n(55,"div")(56,"h6",42),s(57),a(),n(58,"p",43),s(59),a()()()()()()()),o&2){let e=c();i(6),d(" ",e.i18n.t("portal.request_information")," "),i(),m("status",e.statusBadge().label)("variant",e.statusBadge().variant),i(2),m("items",e.requestInfoItems())("labelWidth","4")("valueWidth","8"),i(5),d(" ",e.i18n.t("portal.request_details")," "),i(2),m("items",e.detailsItems())("labelWidth","4")("valueWidth","8"),i(),g(e.schedulingItems().length>0?17:-1),i(6),d(" ",e.i18n.t("portal.request_status")," "),i(3),v("active",!0),i(),v("completed",e.request().status!==e.FingerprintRequestStatus.Pending),i(4),u(e.i18n.t("portal.pending")),i(2),u(e.i18n.t("portal.request_submitted")),i(),v("active",e.request().status===e.FingerprintRequestStatus.Scheduled||e.request().status===e.FingerprintRequestStatus.Completed),i(),v("completed",e.request().status===e.FingerprintRequestStatus.Completed),i(4),u(e.i18n.t("portal.scheduled")),i(2),u(e.i18n.t("portal.appointment_scheduled")),i(),v("active",e.request().status===e.FingerprintRequestStatus.Completed),i(),v("completed",e.request().status===e.FingerprintRequestStatus.Completed),i(4),u(e.i18n.t("portal.completed")),i(2),u(e.i18n.t("portal.request_completed")),i(),g(e.request().status===e.FingerprintRequestStatus.Cancelled||e.request().status===e.FingerprintRequestStatus.Rejected?50:-1),i(7),u(e.i18n.t("portal.need_help")),i(2),d(" ",e.i18n.t("portal.contact_hr_support")," ")}}var A=class o{portalService=b(E);router=b(M);route=b(R);notificationService=b(I);confirmationService=b(O);i18n=b(F);FingerprintRequestStatus=T;request=x(null);loading=x(!1);error=x(null);statusBadge=_(()=>{let t=this.request();if(!t)return{label:"",variant:"secondary"};let e={Pending:"warning",Scheduled:"info",Completed:"success",Cancelled:"secondary",Rejected:"danger"};return{label:t.status,variant:e[t.status]||"secondary"}});canEdit=_(()=>this.request()?.status==="Pending");canCancel=_(()=>{let t=this.request();return t?.status==="Pending"||t?.status==="Scheduled"});requestInfoItems=_(()=>{let t=this.request();return t?[{label:"Request ID",value:`#${t.id}`},{label:"Request Type",value:this.formatRequestType(t.requestType)},{label:"Created",value:this.formatDate(t.createdAtUtc)},{label:"Last Modified",value:t.modifiedAtUtc?this.formatDate(t.modifiedAtUtc):"Not modified"}]:[]});detailsItems=_(()=>{let t=this.request();return t?[{label:"Issue Description",value:t.issueDescription},{label:"Affected Fingers",value:t.affectedFingers||"Not specified"},{label:"Preferred Date",value:t.preferredDate?this.formatDate(t.preferredDate):"Not specified"},{label:"Preferred Time",value:t.preferredTime||"Not specified"}]:[]});schedulingItems=_(()=>{let t=this.request();if(!t)return[];let e=[];return t.scheduledDate&&e.push({label:"Scheduled Date",value:this.formatDate(t.scheduledDate)}),t.scheduledTime&&e.push({label:"Scheduled Time",value:t.scheduledTime}),t.technicianName&&e.push({label:"Assigned Technician",value:t.technicianName}),t.completedDate&&e.push({label:"Completed Date",value:this.formatDate(t.completedDate)}),t.technicianNotes&&e.push({label:"Technician Notes",value:t.technicianNotes}),e});ngOnInit(){this.loadRequest()}loadRequest(){let t=this.route.snapshot.paramMap.get("id");if(!t){this.router.navigate(["/portal/fingerprint-requests"]);return}this.loading.set(!0),this.portalService.loadFingerprintRequests().subscribe({next:()=>{let r=this.portalService.fingerprintRequests().find(p=>p.id===parseInt(t,10));r?this.request.set(r):this.error.set("Request not found"),this.loading.set(!1)},error:e=>{console.error("Failed to load request:",e),this.error.set("Failed to load request details"),this.loading.set(!1)}})}refresh(){this.loadRequest()}editRequest(){let t=this.request();t&&this.router.navigate(["/portal/fingerprint-requests",t.id,"edit"])}cancelRequest(){return S(this,null,function*(){let t=this.request();if(!t)return;(yield this.confirmationService.confirm({title:this.i18n.t("portal.cancel_request"),message:this.i18n.t("portal.cancel_request_confirm"),confirmText:this.i18n.t("common.yes_cancel"),cancelText:this.i18n.t("common.no"),confirmButtonClass:"btn-danger",icon:"fa-times",iconClass:"text-danger"})).confirmed&&this.portalService.cancelFingerprintRequest(t.id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("portal.request_cancelled_successfully")),this.loadRequest()},error:r=>{console.error("Failed to cancel request:",r),this.notificationService.error(this.i18n.t("portal.failed_to_cancel_request"))}})})}backToList(){this.router.navigate(["/portal/fingerprint-requests"])}formatRequestType(t){return{NewEnrollment:"New Enrollment",Update:"Update Existing",Issue:"Issue/Problem",AdditionalFingers:"Additional Fingers",LocationChange:"Location Change"}[t]||t}formatDate(t){return(typeof t=="string"?new Date(t):t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=D({type:o,selectors:[["app-fingerprint-request-details"]],decls:13,vars:11,consts:[[3,"title"],["header-actions",""],["type","button",1,"btn","btn-warning","btn-sm","me-2",3,"disabled"],["type","button",1,"btn","btn-danger","btn-sm","me-2",3,"disabled"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click","disabled"],[1,"fa-solid","fa-sync-alt"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"fa-solid","fa-arrow-left","me-1"],[3,"message"],["role","alert",1,"alert","alert-danger"],[1,"row","g-4"],["type","button",1,"btn","btn-warning","btn-sm","me-2",3,"click","disabled"],[1,"fa-solid","fa-edit","me-1"],["type","button",1,"btn","btn-danger","btn-sm","me-2",3,"click","disabled"],[1,"fa-solid","fa-times","me-1"],[1,"fa-solid","fa-exclamation-triangle","me-2"],["type","button",1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"col-lg-8"],[1,"card","mb-3"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"fa-solid","fa-info-circle","me-2"],[3,"status","variant"],[1,"card-body"],[3,"items","labelWidth","valueWidth"],[1,"card-header","bg-white"],[1,"fa-solid","fa-file-alt","me-2"],[1,"col-lg-4"],[1,"card"],[1,"fa-solid","fa-list-check","me-2"],[1,"status-timeline"],[1,"timeline-item"],[1,"timeline-marker"],[1,"fa-solid","fa-clock"],[1,"timeline-content"],[1,"text-muted"],[1,"fa-solid","fa-calendar"],[1,"fa-solid","fa-check"],[1,"timeline-item","active"],[1,"card","mt-3"],[1,"d-flex","align-items-start"],[1,"fa-solid","fa-question-circle","text-primary","me-3","mt-1",2,"font-size","1.5rem"],[1,"mb-2"],[1,"text-muted","mb-0","small"],[1,"fa-solid","fa-calendar-check","me-2"],[1,"timeline-marker","cancelled"],[1,"fa-solid","fa-times"]],template:function(e,r){e&1&&(n(0,"app-page-header",0)(1,"div",1),f(2,L,3,2,"button",2),f(3,W,3,2,"button",3),n(4,"button",4),h("click",function(){return r.refresh()}),l(5,"i",5),s(6),a(),n(7,"button",6),h("click",function(){return r.backToList()}),l(8,"i",7),s(9),a()()(),f(10,z,1,1,"app-loading-spinner",8),f(11,B,5,2,"div",9),f(12,Y,60,33,"div",10)),e&2&&(m("title",r.request()?r.i18n.t("portal.fingerprint_request_details")+" #"+r.request().id:r.i18n.t("portal.fingerprint_request_details")),i(2),g(r.canEdit()?2:-1),i(),g(r.canCancel()?3:-1),i(),m("disabled",r.loading()),i(),v("fa-spin",r.loading()),i(),d(" ",r.i18n.t("common.refresh")," "),i(3),d(" ",r.i18n.t("common.back")," "),i(),g(r.loading()&&!r.request()?10:-1),i(),g(r.error()&&!r.request()?11:-1),i(),g(r.request()?12:-1))},dependencies:[P,k,w,N,V],styles:['.card[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013;border:1px solid var(--bs-border-color)}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--bs-border-color);padding:1rem 1.5rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.status-timeline[_ngcontent-%COMP%]{position:relative;padding-left:0}.timeline-item[_ngcontent-%COMP%]{position:relative;padding-left:3rem;padding-bottom:1.5rem;opacity:.4;transition:opacity .3s ease}.timeline-item.active[_ngcontent-%COMP%]{opacity:1}.timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:1.125rem;top:2.5rem;bottom:-.5rem;width:2px;background-color:var(--bs-border-color)}.timeline-item[_ngcontent-%COMP%]:last-child:before{display:none}.timeline-marker[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:2.5rem;height:2.5rem;border-radius:50%;background-color:var(--bs-light);border:2px solid var(--bs-border-color);display:flex;align-items:center;justify-content:center;color:var(--bs-secondary);font-size:1rem;transition:all .3s ease}.timeline-marker.completed[_ngcontent-%COMP%]{background-color:var(--bs-success);border-color:var(--bs-success);color:#fff}.timeline-marker.cancelled[_ngcontent-%COMP%]{background-color:var(--bs-danger);border-color:var(--bs-danger);color:#fff}.timeline-item.active[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]:not(.completed):not(.cancelled){background-color:var(--bs-warning);border-color:var(--bs-warning);color:#fff;animation:_ngcontent-%COMP%_pulse 2s infinite}.timeline-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:.25rem;font-size:.9rem;font-weight:600}.timeline-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ffc107b3}50%{box-shadow:0 0 0 10px #ffc10700}to{box-shadow:0 0 #ffc10700}}.card[_ngcontent-%COMP%]   .fa-question-circle[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .fa-info-circle[_ngcontent-%COMP%]{flex-shrink:0}@media (max-width: 992px){.timeline-item[_ngcontent-%COMP%]{padding-left:2.5rem}.timeline-marker[_ngcontent-%COMP%]{width:2rem;height:2rem;font-size:.875rem}.timeline-item[_ngcontent-%COMP%]:before{left:.875rem}}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}.card-header[_ngcontent-%COMP%]{padding:.875rem 1rem}.timeline-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.85rem}.timeline-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}']})};export{A as FingerprintRequestDetailsComponent};
