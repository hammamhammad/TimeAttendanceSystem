import{a as D}from"./chunk-GC2ZOSF6.js";import"./chunk-5BLMYARA.js";import{a as l}from"./chunk-O7VLIHRG.js";import{b as d}from"./chunk-MCSGSJCX.js";import{A as y,F as M,H as S,Na as w,_ as T,bb as b,d as u,eb as R,fb as A,gb as I,i as f,j as C,jb as E,kb as m,lb as k,o as g,ob as _,pb as F,qb as H,s as r,x as v}from"./chunk-H3A4D7EH.js";import"./chunk-DGAILPFQ.js";var e=(t,n)=>{let o=r(l),i=r(D),a=r(k);if(!o.isAuthenticated())return a.navigate(["/login"]),!1;if(o.isTokenExpired())if(o.getRefreshToken())o.refreshToken().subscribe({error:()=>{a.navigate(["/login"])}});else return a.navigate(["/login"]),!1;let p=t.data?.permission;return p&&!i.has(p)?(a.navigate(["/unauthorized"]),!1):!0};var B=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-2BCMZHLN.js").then(t=>t.LoginComponent),data:{title:"auth.login"}},{path:"",loadComponent:()=>import("./chunk-7OVPY56T.js").then(t=>t.LayoutComponent),canMatch:[e],children:[{path:"dashboard",loadComponent:()=>import("./chunk-SHU4TX3F.js").then(t=>t.DashboardComponent),data:{title:"dashboard.title"}},{path:"users",loadComponent:()=>import("./chunk-2LPLIUCP.js").then(t=>t.UsersComponent),data:{title:"users.title",permission:"user.read"},canMatch:[e]},{path:"users/create",loadComponent:()=>import("./chunk-FGDNOUWC.js").then(t=>t.CreateUserPageComponent),data:{title:"users.create_user",permission:"user.create"},canMatch:[e]},{path:"users/:id/view",loadComponent:()=>import("./chunk-KIHUMLTX.js").then(t=>t.ViewUserComponent),data:{title:"users.view_details",permission:"user.read"},canMatch:[e]},{path:"users/:id/edit",loadComponent:()=>import("./chunk-BUPVRJVL.js").then(t=>t.EditUserPageComponent),data:{title:"users.edit_user",permission:"user.update"},canMatch:[e]},{path:"employees",loadComponent:()=>import("./chunk-J643OM6U.js").then(t=>t.EmployeesComponent),data:{title:"employees.title",permission:"employee.read"},canMatch:[e]},{path:"employees/create",loadComponent:()=>import("./chunk-MQGXIAMT.js").then(t=>t.CreateEmployeeComponent),data:{title:"employees.create_employee",permission:"employee.create"},canMatch:[e]},{path:"employees/:id/view",loadComponent:()=>import("./chunk-RTTIBROA.js").then(t=>t.ViewEmployeeComponent),data:{title:"employees.view_details",permission:"employee.read"},canMatch:[e]},{path:"employees/:id/edit",loadComponent:()=>import("./chunk-WKUX4Z3Y.js").then(t=>t.EditEmployeeComponent),data:{title:"employees.edit_employee",permission:"employee.update"},canMatch:[e]},{path:"roles",loadComponent:()=>import("./chunk-Q4D3MJJV.js").then(t=>t.RolesComponent),data:{title:"roles.title",permission:"role.read"},canMatch:[e]},{path:"roles/create",loadComponent:()=>import("./chunk-ORAYPF6E.js").then(t=>t.CreateRoleComponent),data:{title:"roles.create_role",permission:"role.create"},canMatch:[e]},{path:"roles/:id/view",loadComponent:()=>import("./chunk-EO4LFA5A.js").then(t=>t.ViewRoleComponent),data:{title:"roles.view_details",permission:"role.read"},canMatch:[e]},{path:"roles/:id/edit",loadComponent:()=>import("./chunk-G4PVJKZR.js").then(t=>t.EditRoleComponent),data:{title:"roles.edit_role",permission:"role.update"},canMatch:[e]},{path:"branches",loadComponent:()=>import("./chunk-SBQJJODJ.js").then(t=>t.BranchesComponent),data:{title:"branches.title",permission:"branch.read"},canMatch:[e]},{path:"branches/:id/view",loadComponent:()=>import("./chunk-VXOHDV4R.js").then(t=>t.ViewBranchComponent),data:{title:"branches.view_details",permission:"branch.read"},canMatch:[e]},{path:"branches/:id/edit",loadComponent:()=>import("./chunk-CZQAJ3OT.js").then(t=>t.EditBranchComponent),data:{title:"branches.edit_branch",permission:"branch.update"},canMatch:[e]},{path:"departments",loadComponent:()=>import("./chunk-LJ6SVFZD.js").then(t=>t.DepartmentsComponent),data:{title:"departments.title",permission:"department.read"},canMatch:[e]},{path:"departments/create",loadComponent:()=>import("./chunk-2EV5R3IJ.js").then(t=>t.CreateDepartmentComponent),data:{title:"departments.create",permission:"department.create"},canMatch:[e]},{path:"departments/:id/view",loadComponent:()=>import("./chunk-NQFMQSBT.js").then(t=>t.ViewDepartmentComponent),data:{title:"departments.view_details",permission:"department.read"},canMatch:[e]},{path:"departments/:id/edit",loadComponent:()=>import("./chunk-HLFQNPQD.js").then(t=>t.EditDepartmentComponent),data:{title:"departments.edit",permission:"department.update"},canMatch:[e]},{path:"shifts",loadComponent:()=>import("./chunk-OSIS65AV.js").then(t=>t.ShiftsComponent),data:{title:"shifts.title",permission:"shift.read"},canMatch:[e]},{path:"shifts/create",loadComponent:()=>import("./chunk-TLLID4OQ.js").then(t=>t.CreateShiftComponent),data:{title:"shifts.create_shift",permission:"shift.create"},canMatch:[e]},{path:"shifts/:id/edit",loadComponent:()=>import("./chunk-HF5GFDSB.js").then(t=>t.EditShiftComponent),data:{title:"shifts.edit_shift",permission:"shift.update"},canMatch:[e]},{path:"shifts/assign",loadComponent:()=>import("./chunk-QRJ5E3UJ.js").then(t=>t.AssignShiftsComponent),data:{title:"shifts.assignments.title",permission:"shift.assign"},canMatch:[e]},{path:"settings",loadComponent:()=>import("./chunk-NMJAM6C2.js").then(t=>t.SettingsComponent),data:{title:"settings.title"}}]},{path:"unauthorized",loadComponent:()=>import("./chunk-FT47WEJM.js").then(t=>t.UnauthorizedComponent),data:{title:"Unauthorized Access"}},{path:"**",loadComponent:()=>import("./chunk-M2E65QCY.js").then(t=>t.NotFoundComponent),data:{title:"Page Not Found"}}];var U=(t,n)=>{let o=r(l);if(t.url.includes("/auth/login")||t.url.includes("/auth/refresh"))return n(t);let i=o.getAccessToken(),a=t;return i&&(a=t.clone({headers:t.headers.set("Authorization",`Bearer ${i}`)})),n(a).pipe(f(p=>{if(p.status===401&&!t.url.includes("/auth/refresh")){if(o.getRefreshToken())return o.refreshToken().pipe(C(()=>{let s=o.getAccessToken(),j=t.clone({headers:t.headers.set("Authorization",`Bearer ${s}`)});return n(j)}),f(s=>(o.logout(),u(()=>s))));o.logout()}return u(()=>p)}))};var c=class t extends m{title=r(I);i18n=r(d);updateTitle(n){let o=this.buildTitle(n);if(o){let a=`${this.i18n.t(o)} | Time Attendance System`;this.title.setTitle(a)}else this.title.setTitle("Time Attendance System")}static \u0275fac=(()=>{let n;return function(i){return(n||(n=y(t)))(i||t)}})();static \u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})};var x={providers:[v(),w({eventCoalescing:!0}),_(B,H(),F()),R(A([U])),{provide:m,useClass:c}]};var h=class t{constructor(n){this.i18n=n}ngOnInit(){let n=localStorage.getItem("app_locale")||"en";this.i18n.setLocale(n)}static \u0275fac=function(o){return new(o||t)(M(d))};static \u0275cmp=S({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){o&1&&T(0,"router-outlet")},dependencies:[E],encapsulation:2})};b(h,x).catch(t=>console.error(t));
