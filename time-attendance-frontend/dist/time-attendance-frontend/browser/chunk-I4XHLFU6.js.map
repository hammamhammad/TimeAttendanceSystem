{
  "version": 3,
  "sources": ["src/app/pages/departments/edit-department/edit-department.component.ts"],
  "sourcesContent": ["import { Component, OnInit, signal, inject } from '@angular/core';\n\nimport { ActivatedRoute, Router, RouterModule } from '@angular/router';\nimport { DepartmentFormComponent } from '../department-form/department-form.component';\nimport { DepartmentsService } from '../departments.service';\nimport { Department, DepartmentDto, CreateDepartmentRequest, UpdateDepartmentRequest } from '../../../shared/models/department.model';\nimport { I18nService } from '../../../core/i18n/i18n.service';\n\n@Component({\n  selector: 'app-edit-department',\n  standalone: true,\n  imports: [RouterModule, DepartmentFormComponent],\n  template: `\n    <div class=\"container-fluid\">\n      <!-- Header -->\n      <div class=\"d-flex justify-content-between align-items-center mb-4\">\n        <div>\n          <h2>{{ i18n.t('department.edit') }}</h2>\n          <nav aria-label=\"breadcrumb\">\n            <ol class=\"breadcrumb\">\n              <li class=\"breadcrumb-item\">\n                <a routerLink=\"/dashboard\">{{ i18n.t('dashboard.title') }}</a>\n              </li>\n              <li class=\"breadcrumb-item\">\n                <a routerLink=\"/departments\">{{ i18n.t('departments.title') }}</a>\n              </li>\n              <li class=\"breadcrumb-item active\">{{ i18n.t('department.edit') }}</li>\n            </ol>\n          </nav>\n        </div>\n        <button \n          type=\"button\" \n          class=\"btn btn-outline-secondary\"\n          (click)=\"onCancel()\">\n          <i class=\"fa-solid fa-arrow-left me-2\"></i>\n          {{ i18n.t('common.back') }}\n        </button>\n      </div>\n\n      @if (loading()) {\n        <div class=\"d-flex justify-content-center py-5\">\n          <div class=\"spinner-border\" role=\"status\">\n            <span class=\"visually-hidden\">{{ i18n.t('common.loading') }}</span>\n          </div>\n        </div>\n      } @else if (department()) {\n        @if (error()) {\n          <div class=\"alert alert-danger\">\n            <i class=\"fa-solid fa-exclamation-triangle me-2\"></i>\n            {{ error() }}\n          </div>\n        }\n\n        <!-- Main Form Card -->\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h5 class=\"card-title mb-0\">\n              <i class=\"fa-solid fa-building me-2\"></i>\n              {{ i18n.t('department.information') }}\n            </h5>\n          </div>\n          <div class=\"card-body\">\n            <app-department-form\n              [department]=\"department()\"\n              [branchId]=\"department()?.branchId || null\"\n              [isEditMode]=\"true\"\n              [externalSaving]=\"saving()\"\n              (save)=\"onDepartmentSaved($event)\"\n              (cancel)=\"onCancel()\">\n            </app-department-form>\n          </div>\n        </div>\n      } @else {\n        <div class=\"alert alert-danger\">\n          <i class=\"fa-solid fa-exclamation-triangle me-2\"></i>\n          {{ error() || i18n.t('department.not_found') }}\n        </div>\n      }\n    </div>\n  `\n})\nexport class EditDepartmentComponent implements OnInit {\n  private route = inject(ActivatedRoute);\n  private router = inject(Router);\n  private departmentsService = inject(DepartmentsService);\n  public i18n = inject(I18nService);\n\n  department = signal<Department | null>(null);\n  loading = signal(true);\n  saving = signal(false);\n  error = signal('');\n\n  ngOnInit(): void {\n    const departmentId = this.route.snapshot.paramMap.get('id');\n    if (departmentId) {\n      this.loadDepartment(departmentId);\n    } else {\n      this.error.set('Invalid department ID');\n      this.loading.set(false);\n    }\n  }\n\n  loadDepartment(departmentId: string): void {\n    this.departmentsService.getDepartmentById(+departmentId).subscribe({\n      next: (department) => {\n        this.department.set(department);\n        this.loading.set(false);\n      },\n      error: (error) => {\n        this.error.set(this.getErrorMessage(error));\n        this.loading.set(false);\n      }\n    });\n  }\n\n  onDepartmentSaved(department: CreateDepartmentRequest | UpdateDepartmentRequest): void {\n    if (this.saving() || !this.department()) return;\n\n    this.saving.set(true);\n    this.error.set('');\n\n    const departmentId = this.department()!.id;\n    const updateRequest = department as UpdateDepartmentRequest;\n\n    this.departmentsService.updateDepartment(departmentId, updateRequest).subscribe({\n      next: () => {\n        console.log('Department updated successfully');\n        this.saving.set(false);\n        this.router.navigate(['/departments']);\n      },\n      error: (error) => {\n        console.error('Error updating department:', error);\n        this.error.set(this.getErrorMessage(error));\n        this.saving.set(false);\n      }\n    });\n  }\n\n  onCancel(): void {\n    this.router.navigate(['/departments']);\n  }\n\n  private getErrorMessage(error: any): string {\n    if (error?.error?.error) {\n      return error.error.error;\n    }\n    return this.i18n.t('errors.unknown');\n  }\n}"],
  "mappings": "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",
  "names": []
}
