import{a as G}from"./chunk-HPTHOH3X.js";import{b as z}from"./chunk-AS5QRUY4.js";import{$ as t,E as e,J as P,U as u,V as v,Y as E,Z as w,aa as n,ba as _,fb as R,ia as D,ka as x,ma as c,nb as j,qb as B,rb as O,sa as $,t as S,ta as L,u as C,v as g,wa as a,wb as q,xa as m,ya as s,z as f}from"./chunk-LDUBOZPL.js";import"./chunk-DGAILPFQ.js";var K=(r,o)=>o.id;function Q(r,o){if(r&1&&(t(0,"div",13)(1,"div",15)(2,"span",16),a(3),n()()()),r&2){let i=c();e(3),m(i.i18n.t("common.loading"))}}function U(r,o){if(r&1&&(t(0,"span",32),a(1),n()),r&2){let i=c(2);e(),m(i.i18n.t("common.active"))}}function W(r,o){if(r&1&&(t(0,"span",33),a(1),n()),r&2){let i=c(2);e(),m(i.i18n.t("common.inactive"))}}function X(r,o){if(r&1&&(t(0,"div",34)(1,"h6",50),a(2),n(),t(3,"p",51),a(4),n()()),r&2){let i,l=c(2);e(2),m(l.i18n.t("common.description")),e(2),m((i=l.department())==null?null:i.description)}}function Y(r,o){if(r&1&&(t(0,"div",34)(1,"h6",50),a(2),n(),t(3,"p",52),a(4),n()()),r&2){let i,l=c(2);e(2),m(l.i18n.t("departments.description_ar")),e(2),m((i=l.department())==null?null:i.descriptionAr)}}function Z(r,o){if(r&1&&(t(0,"div",29),_(1,"i",53),t(2,"span"),a(3),n()()),r&2){let i,l=c(3);e(3),m((i=l.department())==null?null:i.phone)}}function ee(r,o){if(r&1&&(t(0,"div",29),_(1,"i",54),t(2,"span"),a(3),n()()),r&2){let i,l=c(3);e(3),m((i=l.department())==null?null:i.email)}}function te(r,o){if(r&1&&(t(0,"div",34)(1,"h6",50),a(2),n(),t(3,"div",17),u(4,Z,4,1,"div",29),u(5,ee,4,1,"div",29),n()()),r&2){let i,l,p=c(2);e(2),m(p.i18n.t("departments.contact_info")),e(2),v((i=p.department())!=null&&i.phone?4:-1),e(),v((l=p.department())!=null&&l.email?5:-1)}}function ne(r,o){if(r&1&&(t(0,"div",57),_(1,"i",58),t(2,"span"),a(3),n()()),r&2){let i,l=o.$implicit,p=c(3);$("margin-left",l.level*20,"px"),e(2),L("fw-bold",l.id.toString()===((i=p.department())==null||i.id==null?null:i.id.toString())),e(),m(l.name)}}function ie(r,o){if(r&1&&(t(0,"div",42)(1,"div",20)(2,"h6",21),a(3),n()(),t(4,"div",28)(5,"div",55),E(6,ne,4,5,"div",56,K),n()()()),r&2){let i=c(2);e(3),m(i.i18n.t("departments.hierarchy")),e(3),w(i.departmentHierarchy())}}function ae(r,o){if(r&1){let i=D();t(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",22)(4,"div",23)(5,"div",64),_(6,"i",25),n()(),t(7,"div",65)(8,"h6",66),a(9),n(),t(10,"p",67),a(11),n()(),t(12,"div",68)(13,"button",69),_(14,"i",70),n(),t(15,"ul",71)(16,"li")(17,"a",72),x("click",function(){let p=C(i).$implicit,b=c(3);return g(b.onViewSubDepartment(p.id.toString()))}),_(18,"i",73),a(19),n()(),t(20,"li")(21,"a",72),x("click",function(){let p=C(i).$implicit,b=c(3);return g(b.onEditSubDepartment(p.id.toString()))}),_(22,"i",10),a(23),n()()()()()()()()}if(r&2){let i=o.$implicit,l=c(3);e(9),m(i.name),e(2),m(i.code),e(8),s("",l.i18n.t("common.view")," "),e(4),s("",l.i18n.t("common.edit")," ")}}function re(r,o){if(r&1&&(t(0,"div",49)(1,"div",20)(2,"h6",21),_(3,"i",59),a(4),n()(),t(5,"div",28)(6,"div",60),E(7,ae,24,4,"div",61,K),n()()()),r&2){let i=c(2);e(4),s(" ",i.i18n.t("departments.sub_departments")," "),e(3),w(i.subDepartments())}}function le(r,o){if(r&1){let i=D();t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h5",21)(5,"div",22)(6,"div",23)(7,"div",24),_(8,"i",25),n()(),t(9,"div")(10,"div",26),a(11),n(),t(12,"small",27),a(13),n()()()()(),t(14,"div",28)(15,"div",17)(16,"div",29)(17,"dl",17)(18,"dt",30),a(19),n(),t(20,"dd",31),a(21),n(),t(22,"dt",30),a(23),n(),t(24,"dd",31),a(25),n(),t(26,"dt",30),a(27),n(),t(28,"dd",31),a(29),n(),t(30,"dt",30),a(31),n(),t(32,"dd",31),a(33),n()()(),t(34,"div",29)(35,"dl",17)(36,"dt",30),a(37),n(),t(38,"dd",31),a(39),n(),t(40,"dt",30),a(41),n(),t(42,"dd",31),a(43),n(),t(44,"dt",30),a(45),n(),t(46,"dd",31),a(47),n(),t(48,"dt",30),a(49),n(),t(50,"dd",31),u(51,U,2,1,"span",32)(52,W,2,1,"span",33),n()()()(),u(53,X,5,2,"div",34),u(54,Y,5,2,"div",34),u(55,te,6,3,"div",34),n()()(),t(56,"div",35)(57,"div",19)(58,"div",20)(59,"h6",21),a(60),n()(),t(61,"div",28)(62,"div",36)(63,"button",37),x("click",function(){C(i);let p=c();return g(p.onEdit())}),_(64,"i",10),a(65),n(),t(66,"button",38),x("click",function(){C(i);let p=c();return g(p.onViewEmployees())}),_(67,"i",39),a(68),n(),t(69,"button",40),x("click",function(){C(i);let p=c();return g(p.onCreateSubDepartment())}),_(70,"i",41),a(71),n()()()(),t(72,"div",42)(73,"div",20)(74,"h6",21),a(75),n()(),t(76,"div",28)(77,"div",43)(78,"div",44)(79,"div",45)(80,"h4",46),a(81),n(),t(82,"p",47),a(83),n()()(),t(84,"div",44)(85,"h4",48),a(86),n(),t(87,"p",47),a(88),n()()()()(),u(89,ie,8,1,"div",42),n()(),u(90,re,9,1,"div",49)}if(r&2){let i,l,p,b,I,y,V,k,T,M,N,H,h,A,F,d=c();e(11),m((i=d.department())==null?null:i.name),e(2),m((l=d.department())==null?null:l.code),e(6),s("",d.i18n.t("departments.name"),":"),e(2),m((p=d.department())==null?null:p.name),e(2),s("",d.i18n.t("departments.name_ar"),":"),e(2),m(((b=d.department())==null?null:b.nameAr)||"-"),e(2),s("",d.i18n.t("departments.code"),":"),e(2),m((I=d.department())==null?null:I.code),e(2),s("",d.i18n.t("departments.parent"),":"),e(2),m(((y=d.department())==null?null:y.parentDepartmentName)||d.i18n.t("departments.root_department")),e(4),s("",d.i18n.t("departments.manager"),":"),e(2),m(((V=d.department())==null?null:V.managerName)||"-"),e(2),s("",d.i18n.t("departments.cost_center"),":"),e(2),m(((k=d.department())==null?null:k.costCenter)||"-"),e(2),s("",d.i18n.t("departments.location"),":"),e(2),m(((T=d.department())==null?null:T.location)||"-"),e(2),s("",d.i18n.t("common.status"),":"),e(2),v((M=d.department())!=null&&M.isActive?51:52),e(2),v((N=d.department())!=null&&N.description?53:-1),e(),v((H=d.department())!=null&&H.descriptionAr?54:-1),e(),v((h=d.department())!=null&&h.phone||(h=d.department())!=null&&h.email?55:-1),e(5),m(d.i18n.t("common.actions")),e(5),s(" ",d.i18n.t("departments.edit")," "),e(3),s(" ",d.i18n.t("departments.view_employees")," "),e(3),s(" ",d.i18n.t("departments.create_subdepartment")," "),e(4),m(d.i18n.t("departments.statistics")),e(6),m(((A=d.statistics())==null?null:A.employeeCount)||0),e(2),m(d.i18n.t("departments.employees")),e(3),m(((F=d.statistics())==null?null:F.subDepartmentCount)||0),e(2),m(d.i18n.t("departments.sub_departments")),e(),v(d.departmentHierarchy().length>0?89:-1),e(),v(d.subDepartments().length>0?90:-1)}}function oe(r,o){if(r&1&&(t(0,"div",14),_(1,"i",74),a(2),n()),r&2){let i=c();e(2),s(" ",i.error()||i.i18n.t("departments.department_not_found")," ")}}var J=class r{route=S(j);router=S(B);departmentsService=S(G);i18n=S(z);department=f(null);statistics=f(null);subDepartments=f([]);departmentHierarchy=f([]);loading=f(!0);error=f("");ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?(this.loadDepartment(o),this.loadSubDepartments(o),this.loadHierarchy(o)):(this.error.set("Invalid department ID"),this.loading.set(!1))}loadDepartment(o){this.departmentsService.getDepartmentById(+o).subscribe({next:i=>{this.department.set(i),this.statistics.set({employeeCount:i.employeeCount||0,subDepartmentCount:0}),this.loading.set(!1)},error:i=>{this.error.set(this.getErrorMessage(i)),this.loading.set(!1)}})}loadSubDepartments(o){this.subDepartments.set([])}loadHierarchy(o){this.departmentHierarchy.set([])}onEdit(){this.department()&&this.router.navigate(["/departments",this.department().id,"edit"])}onViewEmployees(){this.department()&&this.router.navigate(["/employees"],{queryParams:{departmentId:this.department().id}})}onCreateSubDepartment(){this.department()&&this.router.navigate(["/departments/create"],{queryParams:{parentId:this.department().id}})}onViewSubDepartment(o){this.router.navigate(["/departments",o,"view"])}onEditSubDepartment(o){this.router.navigate(["/departments",o,"edit"])}onBack(){this.router.navigate(["/departments"])}formatDate(o){return new Date(o).toLocaleDateString()}getErrorMessage(o){return o?.error?.error?o.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=P({type:r,selectors:[["app-view-department"]],decls:25,vars:7,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/departments"],[1,"breadcrumb-item","active"],[1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-edit","me-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"row"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-3"],[1,"avatar-title","bg-light","text-primary","rounded-circle"],[1,"fa-solid","fa-sitemap"],[1,"fw-medium"],[1,"text-muted"],[1,"card-body"],[1,"col-md-6"],[1,"col-sm-5"],[1,"col-sm-7"],[1,"badge","bg-success"],[1,"badge","bg-light","text-dark","border"],[1,"mt-3"],[1,"col-lg-4"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"fa-solid","fa-users","me-2"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-plus","me-2"],[1,"card","mt-3"],[1,"row","text-center"],[1,"col-6"],[1,"border-end"],[1,"mb-1","text-primary"],[1,"text-muted","mb-0","small"],[1,"mb-1","text-info"],[1,"card","mt-4"],[1,"fw-semibold"],[1,"mb-0"],["dir","rtl",1,"mb-0"],[1,"fa-solid","fa-phone","me-2","text-muted"],[1,"fa-solid","fa-envelope","me-2","text-muted"],[1,"hierarchy-tree"],[1,"hierarchy-item",3,"margin-left"],[1,"hierarchy-item"],[1,"fa-solid","fa-sitemap","me-2","text-muted"],[1,"fa-solid","fa-sitemap","me-2"],[1,"row","g-3"],[1,"col-md-6","col-lg-4"],[1,"card","border"],[1,"card-body","p-3"],[1,"avatar-title","bg-info-subtle","text-info","rounded-circle"],[1,"flex-grow-1"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[1,"dropdown"],["data-bs-toggle","dropdown",1,"btn","btn-sm","btn-light"],[1,"fa-solid","fa-ellipsis-vertical"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fa-solid","fa-eye","me-2"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(i,l){i&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),a(4),n(),t(5,"nav",2)(6,"ol",3)(7,"li",4)(8,"a",5),a(9),n()(),t(10,"li",4)(11,"a",6),a(12),n()(),t(13,"li",7),a(14),n()()()(),t(15,"div",8)(16,"button",9),x("click",function(){return l.onEdit()}),_(17,"i",10),a(18),n(),t(19,"button",11),x("click",function(){return l.onBack()}),_(20,"i",12),a(21),n()()(),u(22,Q,4,1,"div",13)(23,le,91,32)(24,oe,3,1,"div",14),n()),i&2&&(e(4),m(l.i18n.t("departments.view_details")),e(5),m(l.i18n.t("dashboard.title")),e(3),m(l.i18n.t("departments.title")),e(2),m(l.i18n.t("departments.view_details")),e(4),s(" ",l.i18n.t("departments.edit")," "),e(3),s(" ",l.i18n.t("common.back")," "),e(),v(l.loading()?22:l.department()?23:24))},dependencies:[R,q,O],encapsulation:2})};export{J as ViewDepartmentComponent};
