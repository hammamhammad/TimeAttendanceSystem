import{a as ue,d as P,e as T}from"./chunk-OTYH7YON.js";import{a as pe}from"./chunk-635VP34W.js";import{a as ge}from"./chunk-5RFSWC3I.js";import{a as me}from"./chunk-GC4SRGYM.js";import{a as de}from"./chunk-ASABUVRV.js";import{a as ce}from"./chunk-JTZMRZUG.js";import{a as Q}from"./chunk-GC2ZOSF6.js";import{a as M,b as x}from"./chunk-5BLMYARA.js";import"./chunk-O7VLIHRG.js";import{b as W,c as X,e as Y,f as Z,g as ee,h as te,i as ne,j as ie,r as se,s as oe,t as ae,w as re}from"./chunk-UWMUXUZF.js";import{a as J,b as le}from"./chunk-MCSGSJCX.js";import{Aa as $,C as i,H as B,Ia as f,L as _,Q as R,Ua as z,Va as U,Wa as q,X as d,Y as s,Z as o,_ as O,ab as G,cb as L,db as j,fa as y,ha as u,ja as m,lb as K,o as N,oa as H,pa as A,r as V,s as C,sa as r,t as S,ta as p,u as v,ua as h,va as E,y as g}from"./chunk-H3A4D7EH.js";import{a as w,b as k}from"./chunk-DGAILPFQ.js";var I=class a{constructor(t){this.http=t}apiUrl=`${J.apiUrl}/api/v1/shift-assignments`;getShiftAssignments(t){let e=new L;return t&&(t.page!==void 0&&(e=e.set("page",t.page.toString())),t.pageSize!==void 0&&(e=e.set("pageSize",t.pageSize.toString())),t.search&&(e=e.set("search",t.search)),t.assignmentType!==void 0&&(e=e.set("assignmentType",t.assignmentType.toString())),t.employeeId!==void 0&&(e=e.set("employeeId",t.employeeId.toString())),t.departmentId!==void 0&&(e=e.set("departmentId",t.departmentId.toString())),t.branchId!==void 0&&(e=e.set("branchId",t.branchId.toString())),t.shiftId!==void 0&&(e=e.set("shiftId",t.shiftId.toString())),t.status!==void 0&&(e=e.set("status",t.status.toString())),t.effectiveFrom&&(e=e.set("effectiveFrom",t.effectiveFrom)),t.effectiveTo&&(e=e.set("effectiveTo",t.effectiveTo)),t.currentlyActive!==void 0&&(e=e.set("currentlyActive",t.currentlyActive.toString())),t.minPriority!==void 0&&(e=e.set("minPriority",t.minPriority.toString())),t.maxPriority!==void 0&&(e=e.set("maxPriority",t.maxPriority.toString()))),this.http.get(this.apiUrl,{params:e})}getShiftAssignmentById(t){return this.http.get(`${this.apiUrl}/${t}`)}createShiftAssignment(t){return this.http.post(this.apiUrl,t)}updateShiftAssignment(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteShiftAssignment(t){return this.http.delete(`${this.apiUrl}/${t}`)}getAssignmentOptions(){return this.http.get(`${this.apiUrl}/options`)}getAssignmentTypeDisplay(t){switch(t){case 1:return"Employee";case 2:return"Department";case 3:return"Branch";default:return"Unknown"}}getStatusDisplay(t){switch(t){case 1:return"Pending";case 2:return"Active";case 3:return"Inactive";case 4:return"Expired";case 5:return"Cancelled";default:return"Unknown"}}getStatusBadgeClass(t){switch(t){case 1:return"badge-warning";case 2:return"badge-success";case 3:return"badge-secondary";case 4:return"badge-danger";case 5:return"badge-dark";default:return"badge-light"}}formatDate(t){return t?new Date(t).toLocaleDateString():""}isCurrentlyActive(t){let e=new Date,n=new Date(t.effectiveDate),l=t.endDate?new Date(t.endDate):null;return t.status===2&&n<=e&&(!l||l>=e)}static \u0275fac=function(e){return new(e||a)(V(j))};static \u0275prov=N({token:a,factory:a.\u0275fac,providedIn:"root"})};var b=()=>({standalone:!0}),be=()=>[];function _e(a,t){if(a&1){let e=y();s(0,"button",46),u("click",function(){S(e);let l=m();return v(l.openCreateModal())}),O(1,"i",47),r(2),o()}if(a&2){let e=m();i(2),h(" ",e.i18n.t("shifts.assignments.createButton")," ")}}function Se(a,t){if(a&1&&(s(0,"div",48)(1,"div",49)(2,"span",50),r(3),o()()()),a&2){let e=m();i(3),p(e.i18n.t("common.loading"))}}function ve(a,t){if(a&1&&(s(0,"div",51),r(1),o()),a&2){let e=m();i(),h(" ",e.error()," ")}}function Ce(a,t){if(a&1&&(s(0,"th"),r(1),o()),a&2){let e=m(2);i(),p(e.i18n.t("common.actions"))}}function ye(a,t){if(a&1&&(s(0,"small",57),r(1),o()),a&2){let e=m().$implicit,n=m(2);i(),E(" ",n.i18n.t("employees.employeeNumber"),": ",e.employeeNumber," ")}}function Ae(a,t){if(a&1&&(s(0,"small",57),r(1),o()),a&2){let e=m().$implicit,n=m(2);i(),E(" ",n.i18n.t("branches.code"),": ",e.branchCode," ")}}function Me(a,t){if(a&1&&(s(0,"span"),r(1),o()),a&2){let e=m().$implicit,n=m(2);i(),p(n.formatDate(e.endDate))}}function xe(a,t){if(a&1&&(s(0,"span",3),r(1),o()),a&2){let e=m(3);i(),p(e.i18n.t("common.indefinite"))}}function Oe(a,t){if(a&1){let e=y();s(0,"td")(1,"div",63)(2,"button",64),u("click",function(){S(e);let l=m().$implicit,c=m(2);return v(c.editAssignment(l))}),O(3,"i",65),o(),s(4,"button",66),u("click",function(){S(e);let l=m().$implicit,c=m(2);return v(c.deleteAssignment(l))}),O(5,"i",67),o()()()}if(a&2){let e=m(3);i(2),d("title",e.i18n.t("common.edit")),i(2),d("title",e.i18n.t("common.delete"))}}function Ie(a,t){if(a&1&&(s(0,"tr")(1,"td")(2,"div")(3,"strong"),r(4),o(),s(5,"small",57),r(6),o()()(),s(7,"td")(8,"span",58),r(9),o()(),s(10,"td")(11,"div")(12,"strong"),r(13),o(),_(14,ye,2,2,"small",59)(15,Ae,2,2,"small",59),o()(),s(16,"td"),r(17),o(),s(18,"td"),_(19,Me,2,1,"span",56)(20,xe,2,1,"span",60),o(),s(21,"td")(22,"span",61),r(23),o()(),s(24,"td")(25,"span",62),r(26),o()(),_(27,Oe,6,2,"td",54),o()),a&2){let e=t.$implicit,n=m(2);A("table-success",n.isCurrentlyActive(e)),i(4),p(e.shiftName),i(2),p(e.shiftType),i(3),p(e.assignmentTypeDisplay),i(4),p(e.targetDisplayName),i(),d("ngIf",e.employeeNumber),i(),d("ngIf",e.branchCode),i(2),p(n.formatDate(e.effectiveDate)),i(2),d("ngIf",e.endDate),i(),d("ngIf",!e.endDate),i(2),d("ngClass",n.getStatusBadgeClass(e.status)),i(),h(" ",e.statusDisplay," "),i(3),p(e.priority),i(),d("appHasPermission",n.PERMISSIONS.SHIFT_ASSIGNMENT_MANAGE)}}function Ee(a,t){if(a&1&&(s(0,"tr")(1,"td",68),r(2),o()()),a&2){let e=m(2);i(),R("colspan",8),i(),h(" ",e.i18n.t("shifts.assignments.noAssignments")," ")}}function Pe(a,t){if(a&1&&(s(0,"div",52)(1,"table",53)(2,"thead")(3,"tr")(4,"th"),r(5),o(),s(6,"th"),r(7),o(),s(8,"th"),r(9),o(),s(10,"th"),r(11),o(),s(12,"th"),r(13),o(),s(14,"th"),r(15),o(),s(16,"th"),r(17),o(),_(18,Ce,2,1,"th",54),o()(),s(19,"tbody"),_(20,Ie,28,15,"tr",55)(21,Ee,3,2,"tr",56),o()()()),a&2){let e=m();i(5),p(e.i18n.t("shifts.shift")),i(2),p(e.i18n.t("shifts.assignments.assignmentType")),i(2),p(e.i18n.t("shifts.assignments.target")),i(2),p(e.i18n.t("shifts.assignments.effectiveDate")),i(2),p(e.i18n.t("shifts.assignments.endDate")),i(2),p(e.i18n.t("common.status")),i(2),p(e.i18n.t("shifts.assignments.priority")),i(),d("appHasPermission",e.PERMISSIONS.SHIFT_ASSIGNMENT_MANAGE),i(2),d("ngForOf",e.assignments()),i(),d("ngIf",e.assignments().length===0)}}function Te(a,t){if(a&1){let e=y();s(0,"li",72)(1,"a",73),u("click",function(){let l=S(e).index,c=m(2);return v(c.onPageChanged(l+1))}),r(2),o()()}if(a&2){let e=t.index,n=m(2);A("active",n.currentPage()===e+1),i(2),p(e+1)}}function De(a,t){if(a&1){let e=y();s(0,"nav",69)(1,"div",70)(2,"div")(3,"span",3),r(4),o()(),s(5,"ul",71)(6,"li",72)(7,"a",73),u("click",function(){S(e);let l=m();return v(l.onPageChanged(l.currentPage()-1))}),r(8),o()(),_(9,Te,3,3,"li",74),s(10,"li",72)(11,"a",73),u("click",function(){S(e);let l=m();return v(l.onPageChanged(l.currentPage()+1))}),r(12),o()()()()()}if(a&2){let e=m();i(4),$(" ",e.i18n.t("common.showing")," ",(e.currentPage()-1)*e.pageSize()+1," ",e.i18n.t("common.to")," ",e.Math.min(e.currentPage()*e.pageSize(),e.totalCount())," ",e.i18n.t("common.of")," ",e.totalCount()," ",e.i18n.t("common.entries")," "),i(2),A("disabled",e.currentPage()===1),i(2),h(" ",e.i18n.t("common.previous")," "),i(),d("ngForOf",f(14,be).constructor(e.totalPages())),i(),A("disabled",e.currentPage()===e.totalPages()),i(2),h(" ",e.i18n.t("common.next")," ")}}function Fe(a,t){if(a&1){let e=y();s(0,"div",32)(1,"label",11),r(2),s(3,"span",33),r(4,"*"),o()(),s(5,"app-searchable-select",34),u("selectionChange",function(l){S(e);let c=m();return v(c.onEmployeeSelectionChange(l))}),o()()}if(a&2){let e,n=m();i(2),h("",n.i18n.t("employees.employee")," "),i(3),d("options",n.employeeSelectOptions)("ngModel",((e=n.createForm().employeeId)==null?null:e.toString())||"")("ngModelOptions",f(7,b))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1)}}function we(a,t){if(a&1){let e=y();s(0,"div",32)(1,"label",11),r(2),s(3,"span",33),r(4,"*"),o()(),s(5,"app-searchable-select",34),u("selectionChange",function(l){S(e);let c=m();return v(c.onDepartmentSelectionChange(l))}),o()()}if(a&2){let e,n=m();i(2),h("",n.i18n.t("departments.department")," "),i(3),d("options",n.departmentSelectOptions)("ngModel",((e=n.createForm().departmentId)==null?null:e.toString())||"")("ngModelOptions",f(7,b))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1)}}function ke(a,t){if(a&1){let e=y();s(0,"div",32)(1,"label",11),r(2),s(3,"span",33),r(4,"*"),o()(),s(5,"app-searchable-select",34),u("selectionChange",function(l){S(e);let c=m();return v(c.onBranchSelectionChange(l))}),o()()}if(a&2){let e,n=m();i(2),h("",n.i18n.t("branches.branch")," "),i(3),d("options",n.branchSelectOptions)("ngModel",((e=n.createForm().branchId)==null?null:e.toString())||"")("ngModelOptions",f(7,b))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1)}}function Ne(a,t){a&1&&O(0,"div",75)}var he=class a{shiftAssignmentService=C(I);shiftsService=C(ue);branchesService=C(pe);employeesService=C(me);departmentsService=C(ge);router=C(K);i18n=C(le);permissionService=C(Q);PERMISSIONS={SHIFT_ASSIGNMENT_CREATE:`${x.SHIFT}.${M.CREATE}`,SHIFT_ASSIGNMENT_READ:`${x.SHIFT}.${M.READ}`,SHIFT_ASSIGNMENT_UPDATE:`${x.SHIFT}.${M.UPDATE}`,SHIFT_ASSIGNMENT_DELETE:`${x.SHIFT}.${M.DELETE}`,SHIFT_ASSIGNMENT_MANAGE:`${x.SHIFT}.${M.MANAGE}`};ShiftAssignmentType=P;ShiftAssignmentStatus=T;Math=Math;assignments=g([]);totalCount=g(0);currentPage=g(1);pageSize=g(10);totalPages=g(0);loading=g(!1);error=g(null);searchTerm=g("");selectedAssignmentType=g(null);selectedStatus=g(null);selectedShiftId=g(null);selectedEmployeeId=g(null);selectedDepartmentId=g(null);selectedBranchId=g(null);currentlyActiveOnly=g(!1);showCreateModal=g(!1);showEditModal=g(!1);editingAssignment=g(null);createForm=g({shiftId:0,assignmentType:1,effectiveDate:new Date().toISOString().split("T")[0],status:2,priority:10});assignmentOptions=g({assignmentTypes:[],statuses:[]});availableShifts=g([]);availableBranches=g([]);availableEmployees=g([]);availableDepartments=g([]);selectedBranchForFilter=g(null);ngOnInit(){this.loadAssignments(),this.loadOptions(),this.loadShifts(),this.loadBranches(),this.loadEmployees(),this.loadDepartments()}loadAssignments(){this.loading.set(!0),this.error.set(null);let t={page:this.currentPage(),pageSize:this.pageSize(),search:this.searchTerm()||void 0,assignmentType:this.selectedAssignmentType()||void 0,status:this.selectedStatus()||void 0,shiftId:this.selectedShiftId()||void 0,employeeId:this.selectedEmployeeId()||void 0,departmentId:this.selectedDepartmentId()||void 0,branchId:this.selectedBranchId()||void 0,currentlyActive:this.currentlyActiveOnly()||void 0};this.shiftAssignmentService.getShiftAssignments(t).subscribe({next:e=>{this.assignments.set(e.items),this.totalCount.set(e.totalCount),this.totalPages.set(e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading shift assignments:",e),this.error.set(this.i18n.t("shifts.assignments.loadError")),this.loading.set(!1)}})}loadOptions(){this.shiftAssignmentService.getAssignmentOptions().subscribe({next:t=>{this.assignmentOptions.set(t)},error:t=>{console.error("Error loading assignment options:",t)}})}loadShifts(){this.shiftsService.getShifts(1,1e3).subscribe({next:t=>{this.availableShifts.set(t.items)},error:t=>{console.error("Error loading shifts:",t)}})}loadBranches(){this.branchesService.getBranches(1,1e3).subscribe({next:t=>{this.availableBranches.set(t.items)},error:t=>{console.error("Error loading branches:",t)}})}loadEmployees(t){this.employeesService.getEmployeesForSelection(t).subscribe({next:e=>{this.availableEmployees.set(e)},error:e=>{console.error("Error loading employees:",e)}})}loadDepartments(t){let e=t?{branchId:t,isActive:!0}:{isActive:!0};this.departmentsService.getDepartments(e).subscribe({next:n=>{this.availableDepartments.set(n)},error:n=>{console.error("Error loading departments:",n)}})}onPageChanged(t){this.currentPage.set(t),this.loadAssignments()}onPageSizeChanged(t){this.pageSize.set(t),this.currentPage.set(1),this.loadAssignments()}onSearchChanged(){this.currentPage.set(1),this.loadAssignments()}onFilterChanged(){this.currentPage.set(1),this.loadAssignments()}onBranchFilterChanged(t){this.selectedBranchId.set(t),this.onFilterChanged(),this.loadEmployees(t||void 0),this.loadDepartments(t||void 0)}clearFilters(){this.searchTerm.set(""),this.selectedAssignmentType.set(null),this.selectedStatus.set(null),this.selectedShiftId.set(null),this.selectedEmployeeId.set(null),this.selectedDepartmentId.set(null),this.selectedBranchId.set(null),this.currentlyActiveOnly.set(!1),this.currentPage.set(1),this.loadAssignments()}openCreateModal(){this.createForm.set({shiftId:0,assignmentType:1,effectiveDate:new Date().toISOString().split("T")[0],status:2,priority:10}),this.showCreateModal.set(!0)}closeCreateModal(){this.showCreateModal.set(!1)}createAssignment(){this.isCreateFormValid()&&this.shiftAssignmentService.createShiftAssignment(this.createForm()).subscribe({next:t=>{console.log("Assignment created successfully:",t),this.closeCreateModal(),this.loadAssignments()},error:t=>{console.error("Error creating assignment:",t)}})}isCreateFormValid(){let t=this.createForm();return t.shiftId>0&&t.effectiveDate!==""&&this.isTargetValid(t.assignmentType,t.employeeId,t.departmentId,t.branchId)}isTargetValid(t,e,n,l){switch(t){case 1:return!!e&&e>0;case 2:return!!n&&n>0;case 3:return!!l&&l>0;default:return!1}}editAssignment(t){this.editingAssignment.set(t),this.showEditModal.set(!0)}closeEditModal(){this.showEditModal.set(!1),this.editingAssignment.set(null)}updateAssignment(){let t=this.editingAssignment();if(t){let e={shiftId:t.shiftId,assignmentType:t.assignmentType,employeeId:t.employeeId,departmentId:t.departmentId,branchId:t.branchId,effectiveDate:t.effectiveDate,endDate:t.endDate,status:t.status,priority:t.priority,notes:t.notes};this.shiftAssignmentService.updateShiftAssignment(t.id,e).subscribe({next:()=>{console.log("Assignment updated successfully"),this.closeEditModal(),this.loadAssignments()},error:n=>{console.error("Error updating assignment:",n)}})}}deleteAssignment(t){confirm(this.i18n.t("shifts.assignments.confirmDelete"))&&this.shiftAssignmentService.deleteShiftAssignment(t.id).subscribe({next:()=>{console.log("Assignment deleted successfully"),this.loadAssignments()},error:e=>{console.error("Error deleting assignment:",e)}})}getStatusBadgeClass(t){return this.shiftAssignmentService.getStatusBadgeClass(t)}formatDate(t){return this.shiftAssignmentService.formatDate(t)}isCurrentlyActive(t){return this.shiftAssignmentService.isCurrentlyActive(t)}getAssignmentTypeDisplay(t){return this.shiftAssignmentService.getAssignmentTypeDisplay(t)}getStatusDisplay(t){return this.shiftAssignmentService.getStatusDisplay(t)}updateCreateForm(t,e){this.createForm.update(n=>k(w({},n),{[t]:e}))}onAssignmentTypeChanged(t){this.updateCreateForm("assignmentType",t),this.updateCreateForm("employeeId",void 0),this.updateCreateForm("departmentId",void 0),this.updateCreateForm("branchId",void 0)}get shiftSelectOptions(){let t=[{value:"0",label:this.i18n.t("common.select")}];return this.availableShifts().forEach(e=>{let n="";if(e.shiftPeriods&&e.shiftPeriods.length>0){let l=e.shiftPeriods[0];n=`${l.startTime} - ${l.endTime}`}t.push({value:e.id.toString(),label:e.name,subLabel:n})}),t}get assignmentTypeSelectOptions(){return this.assignmentOptions().assignmentTypes.map(t=>({value:t.value.toString(),label:t.label}))}get assignmentTypeFilterOptions(){return[{value:"",label:this.i18n.t("common.all")}].concat(this.assignmentTypeSelectOptions)}get statusFilterOptions(){return[{value:"",label:this.i18n.t("common.all")}].concat(this.statusSelectOptions)}get branchSelectOptions(){let t=[{value:"",label:this.i18n.t("common.select")}];return this.availableBranches().forEach(e=>{t.push({value:e.id.toString(),label:e.name,subLabel:e.code})}),t}get employeeSelectOptions(){let t=[{value:"",label:this.i18n.t("common.select")}];return this.availableEmployees().forEach(e=>{t.push({value:e.id.toString(),label:e.name,subLabel:e.employeeNumber})}),t}get departmentSelectOptions(){let t=[{value:"",label:this.i18n.t("common.select")}];return this.availableDepartments().forEach(e=>{t.push({value:e.id.toString(),label:e.name,subLabel:e.code})}),t}get statusSelectOptions(){return this.assignmentOptions().statuses.map(t=>({value:t.value.toString(),label:t.label}))}get shiftFilterOptions(){return[{value:"",label:this.i18n.t("common.all")}].concat(this.shiftSelectOptions.filter(e=>e.value!=="0"))}onShiftSelectionChange(t){let e=t?parseInt(t):0;this.updateCreateForm("shiftId",e)}onAssignmentTypeSelectionChange(t){let e=t?parseInt(t):1;this.onAssignmentTypeChanged(e)}onBranchSelectionChange(t){let e=t?parseInt(t):void 0;this.updateCreateForm("branchId",e),this.loadEmployees(e),this.loadDepartments(e),this.updateCreateForm("employeeId",void 0),this.updateCreateForm("departmentId",void 0)}onEmployeeSelectionChange(t){let e=t?parseInt(t):void 0;this.updateCreateForm("employeeId",e)}onDepartmentSelectionChange(t){let e=t?parseInt(t):void 0;this.updateCreateForm("departmentId",e)}onStatusSelectionChange(t){let e=t?parseInt(t):2;this.updateCreateForm("status",e)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=B({type:a,selectors:[["app-assign-shifts"]],decls:97,vars:84,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"h3","mb-0"],[1,"text-muted"],["type","button","class","btn btn-primary",3,"click",4,"appHasPermission"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","placeholder","ngModel","ngModelOptions"],[1,"col-md-2"],[3,"selectionChange","options","value","searchable","clearable"],[1,"form-check","mt-4"],["type","checkbox","id","currentlyActive",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","currentlyActive",1,"form-check-label"],[1,"col-md-1"],["type","button",1,"btn","btn-outline-secondary","mt-4",3,"click"],[1,"card"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-6"],[1,"text-danger"],[3,"selectionChange","options","ngModel","ngModelOptions","placeholder","searchable","clearable"],[3,"selectionChange","options","ngModel","ngModelOptions","searchable","clearable"],["class","col-md-6",4,"ngIf"],["type","date","name","effectiveDate","required","",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","date","name","endDate",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","number","name","priority","min","0","max","100",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],[1,"col-12"],["name","notes","rows","3",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","modal-backdrop fade show",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus","me-2"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"appHasPermission"],[3,"table-success",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-muted","d-block"],[1,"badge","bg-info"],["class","text-muted d-block",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"badge","bg-secondary"],[1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-primary",3,"click","title"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-outline-danger",3,"click","title"],[1,"fas","fa-trash"],[1,"text-center","py-4","text-muted"],[1,"mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"modal-backdrop","fade","show"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4),o(),s(5,"p",3),r(6),o()(),_(7,_e,3,1,"button",4),o(),s(8,"div",5)(9,"div",6)(10,"h5",7),r(11),o()(),s(12,"div",8)(13,"div",9)(14,"div",10)(15,"label",11),r(16),o(),s(17,"input",12),u("ngModelChange",function(c){return n.searchTerm.set(c)})("keyup.enter",function(){return n.onSearchChanged()}),o()(),s(18,"div",13)(19,"label",11),r(20),o(),s(21,"app-searchable-select",14),u("selectionChange",function(c){return n.selectedAssignmentType.set(c?+c:null),n.onFilterChanged()}),o()(),s(22,"div",13)(23,"label",11),r(24),o(),s(25,"app-searchable-select",14),u("selectionChange",function(c){return n.selectedStatus.set(c?+c:null),n.onFilterChanged()}),o()(),s(26,"div",13)(27,"label",11),r(28),o(),s(29,"app-searchable-select",14),u("selectionChange",function(c){return n.selectedShiftId.set(c?+c:null),n.onFilterChanged()}),o()(),s(30,"div",13)(31,"div",15)(32,"input",16),u("ngModelChange",function(c){return n.currentlyActiveOnly.set(c),n.onFilterChanged()}),o(),s(33,"label",17),r(34),o()()(),s(35,"div",18)(36,"button",19),u("click",function(){return n.clearFilters()}),r(37),o()()()()(),s(38,"div",20)(39,"div",8),_(40,Se,4,1,"div",21)(41,ve,2,1,"div",22)(42,Pe,22,10,"div",23)(43,De,13,15,"nav",24),o()()(),s(44,"div",25)(45,"div",26)(46,"div",27)(47,"div",28)(48,"h5",29),r(49),o(),s(50,"button",30),u("click",function(){return n.closeCreateModal()}),o()(),s(51,"div",31)(52,"form")(53,"div",9)(54,"div",32)(55,"label",11),r(56),s(57,"span",33),r(58,"*"),o()(),s(59,"app-searchable-select",34),u("selectionChange",function(c){return n.onShiftSelectionChange(c)}),o()(),s(60,"div",32)(61,"label",11),r(62),s(63,"span",33),r(64,"*"),o()(),s(65,"app-searchable-select",35),u("selectionChange",function(c){return n.onAssignmentTypeSelectionChange(c)}),o()(),_(66,Fe,6,8,"div",36)(67,we,6,8,"div",36)(68,ke,6,8,"div",36),s(69,"div",32)(70,"label",11),r(71),s(72,"span",33),r(73,"*"),o()(),s(74,"input",37),u("ngModelChange",function(c){return n.updateCreateForm("effectiveDate",c)}),o()(),s(75,"div",32)(76,"label",11),r(77),o(),s(78,"input",38),u("ngModelChange",function(c){return n.updateCreateForm("endDate",c)}),o()(),s(79,"div",32)(80,"label",11),r(81),o(),s(82,"app-searchable-select",35),u("selectionChange",function(c){return n.onStatusSelectionChange(c)}),o()(),s(83,"div",32)(84,"label",11),r(85),o(),s(86,"input",39),u("ngModelChange",function(c){return n.updateCreateForm("priority",+c)}),o()(),s(87,"div",40)(88,"label",11),r(89),o(),s(90,"textarea",41),u("ngModelChange",function(c){return n.updateCreateForm("notes",c)}),o()()()()(),s(91,"div",42)(92,"button",43),u("click",function(){return n.closeCreateModal()}),r(93),o(),s(94,"button",44),u("click",function(){return n.createAssignment()}),r(95),o()()()()(),_(96,Ne,1,0,"div",45)),e&2){let l,c,D,F;i(4),p(n.i18n.t("shifts.assignments.title")),i(2),p(n.i18n.t("shifts.assignments.subtitle")),i(),d("appHasPermission",n.PERMISSIONS.SHIFT_ASSIGNMENT_CREATE),i(4),p(n.i18n.t("common.filters")),i(5),p(n.i18n.t("common.search")),i(),d("placeholder",n.i18n.t("shifts.assignments.searchPlaceholder"))("ngModel",n.searchTerm())("ngModelOptions",f(75,b)),i(3),p(n.i18n.t("shifts.assignments.assignmentType")),i(),d("options",n.assignmentTypeFilterOptions)("value",((l=n.selectedAssignmentType())==null?null:l.toString())||"")("searchable",!1)("clearable",!1),i(3),p(n.i18n.t("common.status")),i(),d("options",n.statusFilterOptions)("value",((c=n.selectedStatus())==null?null:c.toString())||"")("searchable",!1)("clearable",!1),i(3),p(n.i18n.t("shifts.shift")),i(),d("options",n.shiftFilterOptions)("value",((D=n.selectedShiftId())==null?null:D.toString())||"")("searchable",!0)("clearable",!1),i(3),d("ngModel",n.currentlyActiveOnly())("ngModelOptions",f(76,b)),i(2),h(" ",n.i18n.t("shifts.assignments.currentlyActiveOnly")," "),i(3),h(" ",n.i18n.t("common.clear")," "),i(3),d("ngIf",n.loading()),i(),d("ngIf",n.error()),i(),d("ngIf",!n.loading()&&!n.error()),i(),d("ngIf",n.totalPages()>1),i(),H("display",n.showCreateModal()?"block":"none"),A("show",n.showCreateModal()),i(5),p(n.i18n.t("shifts.assignments.createTitle")),i(7),h("",n.i18n.t("shifts.shift")," "),i(3),d("options",n.shiftSelectOptions)("ngModel",n.createForm().shiftId.toString())("ngModelOptions",f(77,b))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1),i(3),h("",n.i18n.t("shifts.assignments.assignmentType")," "),i(3),d("options",n.assignmentTypeSelectOptions)("ngModel",n.createForm().assignmentType.toString())("ngModelOptions",f(78,b))("searchable",!1)("clearable",!1),i(),d("ngIf",n.createForm().assignmentType===n.ShiftAssignmentType.Employee),i(),d("ngIf",n.createForm().assignmentType===n.ShiftAssignmentType.Department),i(),d("ngIf",n.createForm().assignmentType===n.ShiftAssignmentType.Branch),i(3),h("",n.i18n.t("shifts.assignments.effectiveDate")," "),i(3),d("ngModel",n.createForm().effectiveDate)("ngModelOptions",f(79,b)),i(3),p(n.i18n.t("shifts.assignments.endDate")),i(),d("ngModel",n.createForm().endDate)("ngModelOptions",f(80,b)),i(3),p(n.i18n.t("common.status")),i(),d("options",n.statusSelectOptions)("ngModel",((F=n.createForm().status)==null?null:F.toString())||"")("ngModelOptions",f(81,b))("searchable",!1)("clearable",!1),i(3),p(n.i18n.t("shifts.assignments.priority")),i(),d("ngModel",n.createForm().priority)("ngModelOptions",f(82,b)),i(3),p(n.i18n.t("common.notes")),i(),d("ngModel",n.createForm().notes)("ngModelOptions",f(83,b))("placeholder",n.i18n.t("shifts.assignments.notesPlaceholder")),i(3),h(" ",n.i18n.t("common.cancel")," "),i(),d("disabled",!n.isCreateFormValid()),i(),h(" ",n.i18n.t("common.create")," "),i(),d("ngIf",n.showCreateModal()||n.showEditModal())}},dependencies:[G,z,U,q,re,ne,X,ie,W,Y,Z,ae,oe,se,te,ee,ce,de],styles:['.container-fluid[_ngcontent-%COMP%]{padding:1.5rem}.badge-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.badge-dark[_ngcontent-%COMP%]{background-color:#212529!important}.badge-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important;color:#000!important}.badge-info[_ngcontent-%COMP%]{background-color:#0dcaf0!important;color:#000!important}.table-responsive[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013;border-radius:.375rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;border-bottom:2px solid #dee2e6;white-space:nowrap}.table-success[_ngcontent-%COMP%]{background-color:#1987541a!important}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000013}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-outline-danger[_ngcontent-%COMP%]:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013;border-radius:.5rem}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:1rem 1.25rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#495057;font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#86b7fe;box-shadow:0 0 0 .25rem #0d6efd40}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#0d6efd;border-color:#0d6efd}.modal-content[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 1rem #00000026;border-radius:.5rem}.modal-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;border-radius:.5rem .5rem 0 0}.modal-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.btn-close[_ngcontent-%COMP%]{padding:.5rem;margin:-.5rem -.5rem -.5rem auto}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#0d6efd;border:1px solid #dee2e6;padding:.375rem .75rem}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd;color:#fff}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{color:#0a58ca;background-color:#e9ecef;border-color:#dee2e6}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;background-color:#fff;border-color:#dee2e6;cursor:not-allowed}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.alert[_ngcontent-%COMP%]{border-radius:.5rem;border:none}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#721c24}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]{padding:1rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.2rem .4rem;font-size:.8rem}.table-responsive[_ngcontent-%COMP%]{font-size:.9rem}.modal-dialog[_ngcontent-%COMP%]{margin:.5rem}}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.min-width-120[_ngcontent-%COMP%]{min-width:120px}.card-body[_ngcontent-%COMP%]   .row.g-3[_ngcontent-%COMP%] > .col-md-1[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row.g-3[_ngcontent-%COMP%] > .col-md-2[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row.g-3[_ngcontent-%COMP%] > .col-md-3[_ngcontent-%COMP%]{min-height:80px;display:flex;flex-direction:column;justify-content:space-between}.target-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.target-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#212529}.target-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem}.priority-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}.status-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem}.status-indicator[_ngcontent-%COMP%]:before{content:"";width:8px;height:8px;border-radius:50%;background-color:currentColor}.table-success[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative}.table-success[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background-color:#198754;border-radius:0 4px 4px 0}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}.empty-state[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}']})};export{he as AssignShiftsComponent};
