import{b}from"./chunk-AS5QRUY4.js";import{$ as s,A as P,E as a,H as u,J as f,O as w,S,U as o,V as c,_ as I,aa as l,ba as _,ca as p,da as g,ea as O,fb as v,ka as E,ma as d,oa as k,pa as A,qa as z,rb as T,sa as D,va as C,wa as r,wb as V,xa as m,ya as x}from"./chunk-LDUBOZPL.js";import{a as y,d as M}from"./chunk-DGAILPFQ.js";var N=["chartCanvas"];function Q(n,e){if(n&1&&(p(0,"div",2)(1,"h5",6),r(2),g()()),n&2){let t=d();a(2),m(t.title)}}function Y(n,e){if(n&1&&(p(0,"div",3)(1,"div",7)(2,"span",8),r(3),g()(),p(4,"p",9),r(5),g()()),n&2){let t=d();a(3),m(t.i18nService.t("app.loading")),a(2),m(t.i18nService.t("attendance.chart.loading"))}}function J(n,e){if(n&1&&(p(0,"div",10),O(1,"canvas",11,0),g()),n&2){let t=d();D("height",t.height,"px")("width",t.width,"px"),a(),S("aria-label",t.title||"Attendance Chart")}}function U(n,e){if(n&1&&(p(0,"div",5),O(1,"i",12),p(2,"p",13),r(3),g()()),n&2){let t=d();a(3),m(t.i18nService.t("attendance.chart.no_data"))}}var $=class n{constructor(e){this.i18nService=e}chartCanvas;type="bar";data;options={};height=400;width;title;loading=!1;chart;chartInstance;ngOnInit(){this.loadChartJS()}ngAfterViewInit(){this.chart&&this.data&&this.createChart()}ngOnChanges(e){e.data&&this.chart&&this.chartCanvas&&this.updateChart()}loadChartJS(){return M(this,null,function*(){try{let{Chart:e,registerables:t}=yield import("./chunk-3D32XSF6.js");e.register(...t),this.chart=e,this.chartCanvas&&this.data&&this.createChart()}catch(e){console.error("Failed to load Chart.js:",e)}})}createChart(){if(!this.chart||!this.chartCanvas||!this.data){console.log("\u{1F534} Chart creation skipped:",{chart:!!this.chart,canvas:!!this.chartCanvas,data:!!this.data});return}let e=this.chartCanvas.nativeElement.getContext("2d");if(!e){console.log("\u{1F534} No canvas context");return}this.chartInstance&&this.chartInstance.destroy();let t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0}},scales:this.type==="pie"||this.type==="doughnut"?void 0:{x:{display:!0},y:{display:!0,beginAtZero:!0}}},i=y(y({},t),this.options);console.log("\u{1F4C8} Creating chart:",{type:this.type,data:this.data,options:i}),this.chartInstance=new this.chart(e,{type:this.type,data:this.data,options:i}),console.log("\u2705 Chart created successfully")}updateChart(){this.chartInstance&&this.data?(this.chartInstance.data=this.data,this.chartInstance.update()):this.chart&&this.data&&this.createChart()}hasData(){return!!(this.data&&this.data.datasets&&this.data.datasets.length>0&&this.data.labels&&this.data.labels.length>0)}ngOnDestroy(){this.chartInstance&&this.chartInstance.destroy()}static \u0275fac=function(t){return new(t||n)(u(b))};static \u0275cmp=f({type:n,selectors:[["app-attendance-chart"]],viewQuery:function(t,i){if(t&1&&k(N,5),t&2){let h;A(h=z())&&(i.chartCanvas=h.first)}},inputs:{type:"type",data:"data",options:"options",height:"height",width:"width",title:"title",loading:"loading"},features:[P],decls:5,vars:4,consts:[["chartCanvas",""],[1,"chart-container"],[1,"chart-header","mb-3"],[1,"chart-loading","text-center","py-5"],[1,"chart-wrapper",3,"height","width"],[1,"no-data-state","text-center","py-5"],[1,"chart-title","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"chart-wrapper"],["role","img",1,"attendance-chart"],[1,"fa-solid","fa-chart-bar","fa-3x","text-muted","mb-3"],[1,"text-muted"]],template:function(t,i){t&1&&(p(0,"div",1),o(1,Q,3,1,"div",2),o(2,Y,6,2,"div",3),o(3,J,3,5,"div",4),o(4,U,4,1,"div",5),g()),t&2&&(a(),c(i.title?1:-1),a(),c(i.loading?2:-1),a(),c(!i.loading&&i.hasData()?3:-1),a(),c(!i.loading&&!i.hasData()?4:-1))},dependencies:[v],styles:[".chart-container[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 4px #0000001a}.chart-header[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;padding-bottom:.75rem;margin-bottom:1rem}.chart-title[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin:0;font-size:1.1rem}.chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.attendance-chart[_ngcontent-%COMP%]{max-width:100%;height:auto}.chart-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px}.no-data-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;color:#6c757d}.no-data-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.5}@media (max-width: 768px){.chart-container[_ngcontent-%COMP%]{padding:.75rem}.chart-title[_ngcontent-%COMP%]{font-size:1rem}}.chart-loading[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_chart-pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_chart-pulse{0%{opacity:.6}50%{opacity:1}to{opacity:.6}}"]})};function Z(n,e){if(n&1&&(s(0,"div",2)(1,"div",4)(2,"span",5),r(3),l()()()),n&2){let t=d();a(3),m(t.i18nService.t("app.loading"))}}function q(n,e){if(n&1&&(s(0,"div",9)(1,"div",12)(2,"span",13),r(3),l(),s(4,"span",14),r(5,"%"),l()()()),n&2){let t=d(2);a(3),m(t.data.percentage.toFixed(1))}}function H(n,e){if(n&1&&(s(0,"div",10)(1,"span",15),_(2,"i"),r(3),l()()),n&2){let t=d(2);a(),C(t.trendClasses),a(),C(t.trendIcon),a(),x(" ",t.data.trend.value,"% ")}}function K(n,e){if(n&1&&(s(0,"div",11)(1,"a",16),r(2),_(3,"i",17),l()()),n&2){let t=d(2);a(),I("routerLink",t.data.link),a(),x(" ",t.data.actionLabel," ")}}function W(n,e){if(n&1&&(s(0,"div",3)(1,"h6",6),r(2),l(),s(3,"div",7)(4,"h1",8),r(5),l()(),o(6,q,6,1,"div",9),o(7,H,4,5,"div",10),o(8,K,4,2,"div",11),l()),n&2){let t=d();a(2),m(t.data.title),a(2),C("text-"+t.data.color),a(),x(" ",t.formatValue(t.data.value)," "),a(),c(t.showProgress&&t.data.percentage!==void 0?6:-1),a(),c(t.data.trend?7:-1),a(),c(t.data.link&&t.data.actionLabel?8:-1)}}var F=class n{constructor(e){this.i18nService=e}data;loading=!1;size="md";showProgress=!1;clickable=!1;cardClick=new w;get progressPercentage(){if(!this.data.percentage&&this.data.maxValue){let e=typeof this.data.value=="number"?this.data.value:0;return Math.min(e/this.data.maxValue*100,100)}return this.data.percentage||0}get cardClasses(){let e="h-100",t=`card-${this.size}`,i=`border-${this.data.color}`,h=this.clickable?"clickable-card":"";return`${e} ${t} ${i} ${h}`.trim()}get iconClasses(){return`fa-solid ${this.data.icon} text-${this.data.color}`}get trendClasses(){return this.data.trend?this.data.trend.isPositive?"text-success":"text-danger":""}get trendIcon(){return this.data.trend?this.data.trend.isPositive?"fa-solid fa-arrow-up":"fa-solid fa-arrow-down":""}onCardClick(){this.clickable&&this.cardClick.emit()}formatValue(e){return typeof e=="number"?e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString():e}static \u0275fac=function(t){return new(t||n)(u(b))};static \u0275cmp=f({type:n,selectors:[["app-attendance-summary-card"]],inputs:{data:"data",loading:"loading",size:"size",showProgress:"showProgress",clickable:"clickable"},outputs:{cardClick:"cardClick"},decls:4,vars:4,consts:[[1,"card","summary-card",3,"click"],[1,"card-body"],[1,"text-center","py-3"],[1,"card-content"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"card-title","text-uppercase","text-muted","mb-3"],[1,"value-section","mb-3"],[1,"display-value","mb-0"],[1,"percentage-display","text-center","mb-3"],[1,"trend-display","text-center","mb-3"],[1,"action-section"],[1,"percentage-box"],[1,"percentage-value"],[1,"percentage-symbol"],[1,"trend-indicator"],[1,"btn","btn-outline-primary","btn-sm","w-100","action-btn",3,"routerLink"],[1,"fa-solid","fa-arrow-right","ms-1"]],template:function(t,i){t&1&&(s(0,"div",0),E("click",function(){return i.onCardClick()}),s(1,"div",1),o(2,Z,4,1,"div",2),o(3,W,9,7,"div",3),l()()),t&2&&(C(i.cardClasses),a(2),c(i.loading?2:-1),a(),c(i.loading?-1:3))},dependencies:[v,V,T],styles:[".summary-card[_ngcontent-%COMP%]{transition:all .3s ease;border-radius:16px;position:relative;overflow:hidden;background:#fff;height:100%}.summary-card.border-primary[_ngcontent-%COMP%]{border:3px solid #0d6efd}.summary-card.border-success[_ngcontent-%COMP%]{border:3px solid #198754}.summary-card.border-danger[_ngcontent-%COMP%]{border:3px solid #dc3545}.summary-card.border-warning[_ngcontent-%COMP%]{border:3px solid #ffc107}.summary-card.border-info[_ngcontent-%COMP%]{border:3px solid #0dcaf0}.summary-card.border-secondary[_ngcontent-%COMP%]{border:3px solid #6c757d}.summary-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #0000001f;transform:translateY(-4px)}.clickable-card[_ngcontent-%COMP%]{cursor:pointer}.clickable-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 30px #00000026;transform:translateY(-6px)}.card-body[_ngcontent-%COMP%]{padding:1.75rem;position:relative;display:flex;flex-direction:column;height:100%}.card-content[_ngcontent-%COMP%]{position:relative;z-index:1;text-align:center;flex-grow:1;display:flex;flex-direction:column}.card-title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.8px;margin-bottom:1rem;color:#6c757d}.value-section[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;justify-content:center}.display-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;line-height:1;margin:0}.percentage-display[_ngcontent-%COMP%]{margin:1rem 0}.percentage-box[_ngcontent-%COMP%]{display:inline-block;background:#f8f9fa;border-radius:8px;padding:.5rem 1rem}.percentage-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#212529}.percentage-symbol[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;margin-left:.25rem}.trend-display[_ngcontent-%COMP%]{margin:.5rem 0}.trend-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;font-size:.9rem;font-weight:600}.trend-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.trend-indicator.text-success[_ngcontent-%COMP%]{color:#198754}.trend-indicator.text-danger[_ngcontent-%COMP%]{color:#dc3545}.action-section[_ngcontent-%COMP%]{margin-top:auto;padding-top:1rem}.action-btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;padding:.5rem 1rem;text-transform:capitalize;transition:all .3s ease}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.card-sm[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.card-sm[_ngcontent-%COMP%]   .display-value[_ngcontent-%COMP%]{font-size:2rem}.card-lg[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2.25rem}.card-lg[_ngcontent-%COMP%]   .display-value[_ngcontent-%COMP%]{font-size:3.5rem}.spinner-border-sm[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1.25rem}.display-value[_ngcontent-%COMP%]{font-size:2.25rem}.card-title[_ngcontent-%COMP%]{font-size:.7rem}.percentage-value[_ngcontent-%COMP%]{font-size:1rem}.trend-indicator[_ngcontent-%COMP%]{font-size:.85rem}}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]{padding:1rem}.display-value[_ngcontent-%COMP%]{font-size:2rem}.action-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.4rem .8rem}}.display-value[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_valueUpdate .6s ease-out}@keyframes _ngcontent-%COMP%_valueUpdate{0%{opacity:.7;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};export{$ as a,F as b};
