import{a as j}from"./chunk-LRWEBFSR.js";import"./chunk-GBFD7MFB.js";import{a as $}from"./chunk-544KHMX2.js";import{a as F}from"./chunk-HBA4LCS7.js";import{a as N}from"./chunk-CYQTDKAB.js";import{w as L,y as B}from"./chunk-7QCK55IR.js";import{b as V}from"./chunk-AS5QRUY4.js";import{$ as n,Aa as h,E as e,J as w,Na as M,Oa as T,U as v,V as x,aa as t,ba as m,db as P,fb as R,ia as E,ka as y,ma as p,nb as k,qb as A,rb as O,t as u,u as g,v as b,va as C,wa as a,wb as H,xa as s,ya as c,z as _,za as S}from"./chunk-LDUBOZPL.js";import{d as D}from"./chunk-DGAILPFQ.js";function z(l,o){if(l&1&&(n(0,"div",0)(1,"div",4)(2,"span",5),a(3),t()()()),l&2){let i=p();e(3),s(i.i18n.t("common.loading"))}}function G(l,o){if(l&1&&(n(0,"div",1),m(1,"i",6),a(2),t()),l&2){let i=p();e(2),c(" ",i.error()," ")}}function K(l,o){if(l&1&&(n(0,"div",30)(1,"div",24)(2,"strong"),a(3),t(),m(4,"br"),n(5,"span",52),a(6),t()()()),l&2){let i=p(2);e(3),c("",i.i18n.t("attendance.fields.break_hours"),":"),e(3),s(i.formatHoursAsTime(i.attendanceRecord().breakHours||0))}}function U(l,o){if(l&1&&(n(0,"div",30)(1,"div",24)(2,"div",56)(3,"strong"),a(4),t(),n(5,"ul",57)(6,"li"),a(7),t(),n(8,"li"),a(9),t(),n(10,"li"),a(11),t()()()()()),l&2){let i=p(),d=p(2);e(4),c("",d.i18n.t("shifts.fields.flexible_hours"),":"),e(3),h("",d.i18n.t("shifts.fields.flex_minutes_before"),": ",i.flexMinutesBefore||0," ",d.i18n.t("common.minutes")),e(2),h("",d.i18n.t("shifts.fields.flex_minutes_after"),": ",i.flexMinutesAfter||0," ",d.i18n.t("common.minutes")),e(2),h("",d.i18n.t("shifts.fields.grace_period"),": ",i.gracePeriodMinutes||0," ",d.i18n.t("common.minutes"))}}function J(l,o){if(l&1&&(n(0,"div")(1,"div",48)(2,"div",49)(3,"strong"),a(4),t(),m(5,"br"),n(6,"span",33),a(7),t()(),n(8,"div",49)(9,"strong"),a(10),t(),m(11,"br"),n(12,"span",32),a(13),t()()(),n(14,"div",48)(15,"div",49)(16,"strong"),a(17),t(),m(18,"br"),n(19,"span",53),a(20),t()(),n(21,"div",49)(22,"strong"),a(23),t(),m(24,"br"),n(25,"span",54),a(26),t()()(),n(27,"div",48)(28,"div",49)(29,"strong"),a(30),t(),m(31,"br"),n(32,"span",33),a(33),t()(),n(34,"div",49)(35,"strong"),a(36),t(),m(37,"br"),n(38,"span",55),a(39),t()()(),v(40,U,12,10,"div",30),t()),l&2){let i=o,d=p(2);e(4),c("",d.i18n.t("shifts.fields.name"),":"),e(3),s(i.name),e(3),c("",d.i18n.t("shifts.fields.description"),":"),e(3),s(i.description||"--"),e(4),c("",d.i18n.t("shifts.fields.start_time"),":"),e(3),s(d.getShiftStartTime(i)),e(3),c("",d.i18n.t("shifts.fields.end_time"),":"),e(3),s(d.getShiftEndTime(i)),e(4),c("",d.i18n.t("shifts.fields.working_hours"),":"),e(3),s(d.formatHoursAsTime(i.requiredHours||0)),e(3),c("",d.i18n.t("shifts.fields.shift_type"),":"),e(3),s(d.getShiftTypeDisplay(i)),e(),x(i.allowFlexibleHours?40:-1)}}function Q(l,o){if(l&1&&(n(0,"div",51),m(1,"i",58),n(2,"p"),a(3),t()()),l&2){let i=p(2);e(3),s(i.i18n.t("attendance.daily_detail.no_shift_assigned"))}}function W(l,o){if(l&1&&(n(0,"div",60)(1,"strong"),a(2),t(),m(3,"br"),n(4,"p",32),a(5),t()()),l&2){let i=p(3);e(2),c("",i.i18n.t("attendance.fields.notes"),":"),e(3),s(i.attendanceRecord().notes)}}function X(l,o){if(l&1&&(n(0,"div",60)(1,"strong"),a(2),t(),m(3,"br"),n(4,"span",61),a(5),t()()),l&2){let i=p(3);e(2),c("",i.i18n.t("attendance.fields.manual_override"),":"),e(3),s(i.i18n.t("attendance.status.manual_override"))}}function Y(l,o){if(l&1&&(n(0,"div",30)(1,"div",24)(2,"strong"),a(3),t(),m(4,"br"),n(5,"span"),a(6),t()()()),l&2){let i=p(3);e(3),c("",i.i18n.t("attendance.fields.approval_status"),":"),e(2),C(i.attendanceRecord().isApproved?"badge bg-success":"badge bg-warning"),e(),c(" ",i.attendanceRecord().isApproved?i.i18n.t("attendance.approved"):i.i18n.t("attendance.pending_approval")," ")}}function Z(l,o){if(l&1&&(n(0,"div",30)(1,"div",24)(2,"div",25)(3,"div",26)(4,"h5",27),m(5,"i",59),a(6),t()(),n(7,"div",29)(8,"div",30),v(9,W,6,2,"div",60),v(10,X,6,2,"div",60),t(),v(11,Y,7,4,"div",30),t()()()()),l&2){let i=p(2);e(6),c(" ",i.i18n.t("attendance.daily_detail.additional_info")," "),e(3),x(i.attendanceRecord().notes?9:-1),e(),x(i.attendanceRecord().isManualOverride?10:-1),e(),x(i.attendanceRecord().isApproved!==void 0?11:-1)}}function ee(l,o){if(l&1){let i=E();n(0,"div",2)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div")(5,"h2",10),a(6),t(),n(7,"nav",11)(8,"ol",12)(9,"li",13)(10,"a",14),a(11),t()(),n(12,"li",13)(13,"a",15),a(14),t()(),n(15,"li",16),a(16),t()()()(),n(17,"div",17)(18,"button",18),y("click",function(){g(i);let f=p();return b(f.onRefresh())}),m(19,"i",19),a(20),t(),n(21,"button",20),y("click",function(){g(i);let f=p();return b(f.onEdit())}),m(22,"i",21),a(23),t(),n(24,"button",22),y("click",function(){g(i);let f=p();return b(f.onBack())}),m(25,"i",23),a(26),t()()()()(),n(27,"div",7)(28,"div",24)(29,"div",25)(30,"div",26)(31,"h5",27),m(32,"i",28),a(33),t()(),n(34,"div",29)(35,"div",30)(36,"div",31)(37,"strong"),a(38),t(),m(39,"br"),n(40,"span",32),a(41),t()(),n(42,"div",31)(43,"strong"),a(44),t(),m(45,"br"),n(46,"span",33),a(47),t()(),n(48,"div",31)(49,"strong"),a(50),t(),m(51,"br"),n(52,"span",32),a(53),t()(),n(54,"div",31)(55,"strong"),a(56),t(),m(57,"br"),n(58,"span",34),a(59),M(60,"date"),t()()()()()()(),n(61,"div",7)(62,"div",24)(63,"div",25)(64,"div",26)(65,"h5",27),m(66,"i",35),a(67),t()(),n(68,"div",29)(69,"div",36)(70,"div",37)(71,"div",38)(72,"h6",39),a(73),t(),n(74,"span",40),a(75),t()()(),n(76,"div",37)(77,"div",38)(78,"h6",39),a(79),t(),n(80,"div",41),a(81),t()()(),n(82,"div",37)(83,"div",38)(84,"h6",39),a(85),t(),n(86,"div",42),a(87),t()()(),n(88,"div",37)(89,"div",38)(90,"h6",39),a(91),t(),n(92,"div",43),a(93),t()()(),n(94,"div",37)(95,"div",38)(96,"h6",39),a(97),t(),n(98,"div",44),a(99),t()()(),n(100,"div",37)(101,"div",38)(102,"h6",39),a(103),t(),n(104,"div",45),a(105),t()()()()()()()(),n(106,"div",7)(107,"div",46)(108,"div",25)(109,"div",26)(110,"h5",27),m(111,"i",47),a(112),t()(),n(113,"div",29)(114,"div",48)(115,"div",49)(116,"strong"),a(117),t(),m(118,"br"),n(119,"span"),a(120),t()(),n(121,"div",49)(122,"strong"),a(123),t(),m(124,"br"),n(125,"span"),a(126),t()()(),v(127,K,7,2,"div",30),t()()(),n(128,"div",46)(129,"div",25)(130,"div",26)(131,"h5",27),m(132,"i",50),a(133),t()(),n(134,"div",29),v(135,J,41,13,"div")(136,Q,4,1,"div",51),t()()()(),v(137,Z,12,4,"div",30),t()}if(l&2){let i,d,f,I,r=p();e(6),s(r.i18n.t("attendance.daily_detail.title")),e(5),s(r.i18n.t("attendance.title")),e(3),s(r.i18n.t("attendance.daily_view")),e(2),c(" ",r.i18n.t("attendance.daily_detail.title")," "),e(4),c(" ",r.i18n.t("common.refresh")," "),e(3),c(" ",r.i18n.t("attendance.actions.edit")," "),e(3),c(" ",r.i18n.t("common.back")," "),e(7),c(" ",r.i18n.t("attendance.daily_detail.employee_info")," "),e(5),c("",r.i18n.t("employees.fields.employee_number"),":"),e(3),s((i=r.employee())==null?null:i.employeeNumber),e(3),c("",r.i18n.t("employees.fields.full_name"),":"),e(3),s((d=r.employee())==null?null:d.fullName),e(3),c("",r.i18n.t("employees.fields.department"),":"),e(3),s(((f=r.employee())==null?null:f.departmentName)||"--"),e(3),c("",r.i18n.t("attendance.fields.attendance_date"),":"),e(3),s(T(60,47,r.attendanceDate,"fullDate")),e(8),c(" ",r.i18n.t("attendance.daily_detail.attendance_overview")," "),e(6),s(r.i18n.t("attendance.fields.status")),e(),C(r.getStatusBadgeClass(r.attendanceRecord().status)),e(),c(" ",r.getStatusDisplayText(r.attendanceRecord().status)," "),e(4),s(r.i18n.t("attendance.fields.working_hours")),e(2),s(r.formatHoursAsTime(r.attendanceRecord().workingHours||0)),e(4),s(r.i18n.t("attendance.fields.overtime_hours")),e(2),s(r.formatHoursAsTime(r.attendanceRecord().overtimeHours||0)),e(4),s(r.i18n.t("attendance.fields.late_minutes")),e(2),S("",r.attendanceRecord().lateMinutes||0," ",r.i18n.t("common.minutes")),e(4),s(r.i18n.t("attendance.fields.early_leave_minutes")),e(2),S("",r.attendanceRecord().earlyLeaveMinutes||0," ",r.i18n.t("common.minutes")),e(4),s(r.i18n.t("attendance.fields.total_late")),e(2),S("",r.getTotalLateMinutes()," ",r.i18n.t("common.minutes")),e(7),c(" ",r.i18n.t("attendance.daily_detail.time_details")," "),e(5),c("",r.i18n.t("attendance.fields.check_in_time"),":"),e(2),C(r.attendanceRecord().actualCheckInTime?"text-success fw-bold":"text-muted"),e(),c(" ",r.formatTime(r.attendanceRecord().actualCheckInTime)," "),e(3),c("",r.i18n.t("attendance.fields.check_out_time"),":"),e(2),C(r.attendanceRecord().actualCheckOutTime?"text-info fw-bold":"text-muted"),e(),c(" ",r.formatTime(r.attendanceRecord().actualCheckOutTime)," "),e(),x(r.attendanceRecord().breakHours?127:-1),e(6),c(" ",r.i18n.t("attendance.daily_detail.shift_info")," "),e(2),x((I=r.shift())?135:136,I),e(2),x(r.attendanceRecord().notes||r.attendanceRecord().isApproved!==void 0?137:-1)}}function te(l,o){if(l&1){let i=E();n(0,"div",3),m(1,"i",62),n(2,"h5",32),a(3),t(),n(4,"p",32),a(5),t(),n(6,"button",20),y("click",function(){g(i);let f=p();return b(f.onBack())}),m(7,"i",23),a(8),t()()}if(l&2){let i=p();e(3),s(i.i18n.t("attendance.daily_detail.no_data")),e(2),s(i.i18n.t("attendance.daily_detail.no_data_description")),e(3),c(" ",i.i18n.t("common.back")," ")}}var q=class l{route=u(k);router=u(A);fb=u(L);attendanceService=u($);employeesService=u(F);shiftsService=u(j);notificationService=u(N);i18n=u(V);loading=_(!1);error=_(null);attendanceRecord=_(null);employee=_(null);shift=_(null);employeeId;attendanceDate;ngOnInit(){this.route.params.subscribe(o=>{this.employeeId=+o.employeeId,this.attendanceDate=o.date,this.loadData()})}loadData(){return D(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let[o,i]=yield Promise.all([this.employeesService.getEmployeeById(this.employeeId).toPromise(),this.attendanceService.getEmployeeAttendanceRecord(this.employeeId,this.attendanceDate).toPromise()]);o&&this.employee.set(o),i&&this.attendanceRecord.set(i)}catch(o){console.error("Error loading attendance details:",o),this.error.set(this.i18n.t("attendance.errors.load_failed")),this.notificationService.error(this.i18n.t("attendance.errors.load_failed"))}finally{this.loading.set(!1)}})}formatTime(o){return o?new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--"}formatHoursAsTime(o){if(!o||o===0)return"0:00";let i=Math.floor(o),d=Math.round((o-i)*60);if(d===60)return`${i+1}:00`;let f=d.toString().padStart(2,"0");return`${i}:${f}`}getStatusBadgeClass(o){switch(o){case 1:return"badge bg-success";case 3:return"badge bg-warning";case 4:return"badge bg-info";case 2:return"badge bg-danger";case 9:return"badge bg-secondary";case 5:return"badge bg-primary";default:return"badge bg-secondary"}}getStatusDisplayText(o){let i=typeof o=="number"?o.toString():String(o).toLowerCase();return this.i18n.t(`attendance.status.${i}`)}onEdit(){let o=this.attendanceRecord();o&&this.router.navigate(["/attendance/edit",o.id])}onBack(){this.router.navigate(["/attendance/daily"],{queryParams:{date:this.attendanceDate}})}onRefresh(){this.loadData()}getTotalLateMinutes(){let o=this.attendanceRecord();return o?(o.lateMinutes||0)+(o.earlyLeaveMinutes||0):0}getShiftStartTime(o){return!o.shiftPeriods||o.shiftPeriods.length===0?"--:--":o.shiftPeriods[0].startTime}getShiftEndTime(o){return!o.shiftPeriods||o.shiftPeriods.length===0?"--:--":o.shiftPeriods[o.shiftPeriods.length-1].endTime}getShiftTypeDisplay(o){return o.shiftType===1?"Time Based":"Hours Only"}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=w({type:l,selectors:[["app-daily-attendance-detail"]],decls:4,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"min-height","400px"],["role","alert",1,"alert","alert-danger"],[1,"container-fluid"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"row","mb-4"],[1,"col"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-1"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/attendance"],["routerLink","/attendance/daily"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-sync-alt","me-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit","me-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left","me-2"],[1,"col-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fas","fa-user","me-2"],[1,"card-body"],[1,"row"],[1,"col-md-3"],[1,"text-muted"],[1,"text-primary","fw-bold"],[1,"text-info","fw-bold"],[1,"fas","fa-chart-line","me-2"],[1,"row","text-center"],[1,"col-md-2"],[1,"border","rounded","p-3"],[1,"text-muted","small","mb-1"],[1,"fs-6"],[1,"fw-bold","text-primary"],[1,"fw-bold","text-success"],[1,"fw-bold","text-warning"],[1,"fw-bold","text-info"],[1,"fw-bold","text-danger"],[1,"col-lg-6"],[1,"fas","fa-clock","me-2"],[1,"row","mb-3"],[1,"col-6"],[1,"fas","fa-calendar-clock","me-2"],[1,"text-center","text-muted","py-3"],[1,"text-warning","fw-bold"],[1,"text-success"],[1,"text-info"],[1,"text-warning"],[1,"alert","alert-info"],[1,"mb-0","mt-2"],[1,"fas","fa-info-circle","fa-2x","mb-2"],[1,"fas","fa-sticky-note","me-2"],[1,"col-md-6"],[1,"badge","bg-warning"],[1,"fas","fa-exclamation-circle","fa-3x","text-muted","mb-3"]],template:function(i,d){i&1&&(v(0,z,4,1,"div",0),v(1,G,3,1,"div",1),v(2,ee,138,50,"div",2),v(3,te,9,3,"div",3)),i&2&&(x(d.loading()?0:-1),e(),x(d.error()?1:-1),e(),x(!d.loading()&&!d.error()&&d.employee()&&d.attendanceRecord()?2:-1),e(),x(!d.loading()&&!d.error()&&(!d.employee()||!d.attendanceRecord())?3:-1))},dependencies:[R,H,O,B,P],styles:[".card[_ngcontent-%COMP%]{border:1px solid #e3e6f0;border-radius:.5rem;box-shadow:0 .15rem 1.75rem #3a3b4526}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fc;border-bottom:1px solid #e3e6f0;padding:1rem 1.25rem}.card-title[_ngcontent-%COMP%]{color:#5a5c69;font-weight:600}.badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem .75rem}.border[_ngcontent-%COMP%]{border-color:#e3e6f0!important}.text-primary[_ngcontent-%COMP%]{color:#5a9bd4!important}.text-success[_ngcontent-%COMP%]{color:#1cc88a!important}.text-info[_ngcontent-%COMP%]{color:#36b9cc!important}.text-warning[_ngcontent-%COMP%]{color:#f6c23e!important}.text-danger[_ngcontent-%COMP%]{color:#e74a3b!important}.btn[_ngcontent-%COMP%]{border-radius:.35rem;font-weight:400}.btn-primary[_ngcontent-%COMP%]{background-color:#4e73df;border-color:#4e73df}.btn-outline-primary[_ngcontent-%COMP%]{color:#4e73df;border-color:#4e73df}.btn-outline-secondary[_ngcontent-%COMP%]{color:#858796;border-color:#858796}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.alert[_ngcontent-%COMP%]{border-radius:.5rem}.alert-info[_ngcontent-%COMP%]{background-color:#d1ecf1;border-color:#bee5eb;color:#0c5460}.breadcrumb[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin-bottom:0}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5a5c69;text-decoration:none}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#4e73df;text-decoration:underline}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#858796}.fw-bold[_ngcontent-%COMP%]{font-weight:600!important}.fs-6[_ngcontent-%COMP%]{font-size:1rem!important}"]})};export{q as DailyAttendanceDetailComponent};
