import{a as A}from"./chunk-GU3M6ZHF.js";import{a as se}from"./chunk-HPD5AHCS.js";import{a as me}from"./chunk-RQBJFQCN.js";import{a as T}from"./chunk-K7WTKFJQ.js";import{a as ce}from"./chunk-NPDCAEA6.js";import"./chunk-QW24EDIR.js";import"./chunk-QXVLGI72.js";import"./chunk-HUSARQNL.js";import{a as re}from"./chunk-H5EPUHY6.js";import{a as Q}from"./chunk-N7S3JMGU.js";import"./chunk-Y62N6K5S.js";import{b as U,c as G,d as v,e as j,f as H,i as z,j as J,m as K,n as X,o as Z,p as ee,r as te,s as ie,t as oe,w as ne,y as ae}from"./chunk-VRETN7JA.js";import"./chunk-GRQ6RO47.js";import{a as le}from"./chunk-UBCI4X5Q.js";import"./chunk-EYAJMHM7.js";import{a as E}from"./chunk-HHXRLUSQ.js";import"./chunk-UWVH5K3J.js";import{b as I}from"./chunk-RUY4WPQA.js";import{g as Y}from"./chunk-TWXUAMJ4.js";import{$a as V,$b as R,Bb as l,Cb as c,Db as u,Ea as W,Eb as L,Ia as N,Pb as B,R as y,Ta as F,Ub as $,W as f,X as h,Xa as x,Ya as b,ab as q,bb as p,cb as n,da as k,db as a,eb as s,lb as g,nb as _,pb as d,ta as o,tb as S,ub as D,vb as M,wc as w,yb as O}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";var ve=["modalElement"],fe=(r,t)=>t.id;function he(r,t){if(r&1&&(n(0,"div",19)(1,"label",14),l(2),a(),n(3,"p",15),l(4),a()()),r&2){let e=d(2);o(2),c(e.i18n.t("remoteWork.policy.maxConsecutiveDays")),o(2),c(e.currentPolicy().maxConsecutiveDays)}}function xe(r,t){if(r&1&&(n(0,"div",8)(1,"div",13)(2,"label",14),l(3),a(),n(4,"p",15),l(5),a()(),n(6,"div",13)(7,"h6",16),l(8),a()(),n(9,"div",17)(10,"label",14),l(11),a(),n(12,"p",15),l(13),a()(),n(14,"div",17)(15,"label",14),l(16),a(),n(17,"p",15),l(18),a()(),n(19,"div",17)(20,"label",14),l(21),a(),n(22,"p",15),l(23),a()(),n(24,"div",18)(25,"h6",16),l(26),a()(),n(27,"div",19)(28,"label",14),l(29),a(),n(30,"p",15),s(31,"app-status-badge",20),a()(),n(32,"div",19)(33,"label",14),l(34),a(),n(35,"p",15),s(36,"app-status-badge",20),a()(),x(37,he,5,2,"div",19),n(38,"div",19)(39,"label",14),l(40),a(),n(41,"p",15),l(42),a()(),n(43,"div",18)(44,"h6",16),l(45),a()(),n(46,"div",19)(47,"label",14),l(48),a(),n(49,"p",15),s(50,"app-status-badge",20),a()(),n(51,"div",19)(52,"label",14),l(53),a(),n(54,"p",15),s(55,"app-status-badge",20),a()(),n(56,"div",18)(57,"label",14),l(58),a(),n(59,"p",15),s(60,"app-status-badge",20),a()()()),r&2){let e,i=d();o(3),c(i.i18n.t("remoteWork.policy.branch")),o(2),c(i.getBranchName((e=i.currentPolicy())==null?null:e.branchId)),o(3),c(i.i18n.t("remoteWork.policy.quotas")),o(3),c(i.i18n.t("remoteWork.policy.maxDaysPerWeek")),o(2),c(i.currentPolicy().maxDaysPerWeek||i.i18n.t("common.unlimited")),o(3),c(i.i18n.t("remoteWork.policy.maxDaysPerMonth")),o(2),c(i.currentPolicy().maxDaysPerMonth||i.i18n.t("common.unlimited")),o(3),c(i.i18n.t("remoteWork.policy.maxDaysPerYear")),o(2),c(i.currentPolicy().maxDaysPerYear||i.i18n.t("common.unlimited")),o(3),c(i.i18n.t("remoteWork.policy.rules")),o(3),c(i.i18n.t("remoteWork.policy.requiresManagerApproval")),o(2),p("status",i.currentPolicy().requiresManagerApproval?i.i18n.t("common.yes"):i.i18n.t("common.no"))("variant",i.currentPolicy().requiresManagerApproval?"warning":"secondary"),o(3),c(i.i18n.t("remoteWork.policy.allowConsecutiveDays")),o(2),p("status",i.currentPolicy().allowConsecutiveDays?i.i18n.t("common.yes"):i.i18n.t("common.no"))("variant",i.currentPolicy().allowConsecutiveDays?"success":"secondary"),o(),b(!i.currentPolicy().allowConsecutiveDays&&i.currentPolicy().maxConsecutiveDays?37:-1),o(3),c(i.i18n.t("remoteWork.policy.minAdvanceNoticeDays")),o(2),L("",i.currentPolicy().minAdvanceNoticeDays||0," ",i.i18n.t("common.days")),o(3),c(i.i18n.t("remoteWork.policy.attendanceSettings")),o(3),c(i.i18n.t("remoteWork.policy.countForOvertime")),o(2),p("status",i.currentPolicy().countForOvertime?i.i18n.t("common.yes"):i.i18n.t("common.no"))("variant",i.currentPolicy().countForOvertime?"success":"secondary"),o(3),c(i.i18n.t("remoteWork.policy.enforceShiftTimes")),o(2),p("status",i.currentPolicy().enforceShiftTimes?i.i18n.t("common.yes"):i.i18n.t("common.no"))("variant",i.currentPolicy().enforceShiftTimes?"warning":"secondary"),o(3),c(i.i18n.t("common.status")),o(2),p("status",i.currentPolicy().isActive?i.i18n.t("common.active"):i.i18n.t("common.inactive"))("variant",i.currentPolicy().isActive?"success":"secondary")}}function be(r,t){if(r&1&&(n(0,"option",25),l(1),a()),r&2){let e=t.$implicit;p("ngValue",e.id),o(),c(e.name)}}function ke(r,t){if(r&1&&(n(0,"div",26),l(1),a()),r&2){let e=d(2);o(),c(e.i18n.t("validation.required"))}}function _e(r,t){if(r&1&&(n(0,"div",19)(1,"label",46),l(2),a(),s(3,"input",47),a()),r&2){let e=d(2);o(2),c(e.i18n.t("remoteWork.policy.maxConsecutiveDays"))}}function Ce(r,t){if(r&1){let e=g();n(0,"form",21),_("ngSubmit",function(){f(e);let m=d();return h(m.onSubmit())}),n(1,"div",8)(2,"div",13)(3,"label",22),l(4),n(5,"span",23),l(6,"*"),a()(),n(7,"select",24)(8,"option",25),l(9),a(),V(10,be,2,2,"option",25,fe),a(),x(12,ke,2,1,"div",26),a(),n(13,"div",18)(14,"h6",16),l(15),a()(),n(16,"div",17)(17,"label",27),l(18),a(),s(19,"input",28),a(),n(20,"div",17)(21,"label",29),l(22),a(),s(23,"input",30),a(),n(24,"div",17)(25,"label",31),l(26),a(),s(27,"input",32),a(),n(28,"div",18)(29,"h6",16),l(30),a()(),n(31,"div",19)(32,"div",33),s(33,"input",34),n(34,"label",35),l(35),a()()(),n(36,"div",19)(37,"div",33),s(38,"input",36),n(39,"label",37),l(40),a()()(),x(41,_e,4,1,"div",19),n(42,"div",19)(43,"label",38),l(44),a(),s(45,"input",39),a(),n(46,"div",18)(47,"h6",16),l(48),a()(),n(49,"div",19)(50,"div",33),s(51,"input",40),n(52,"label",41),l(53),a()()(),n(54,"div",19)(55,"div",33),s(56,"input",42),n(57,"label",43),l(58),a()()(),n(59,"div",18)(60,"div",33),s(61,"input",44),n(62,"label",45),l(63),a()()()()()}if(r&2){let e=d();p("formGroup",e.policyForm),o(4),u(" ",e.i18n.t("remoteWork.policy.branch")," "),o(3),O("is-invalid",e.hasError("branchId","required")),o(),p("ngValue",null),o(),c(e.i18n.t("common.select")),o(),q(e.availableBranches()),o(2),b(e.hasError("branchId","required")?12:-1),o(3),c(e.i18n.t("remoteWork.policy.quotas")),o(3),c(e.i18n.t("remoteWork.policy.maxDaysPerWeek")),o(),p("placeholder",e.i18n.t("common.unlimited")),o(3),c(e.i18n.t("remoteWork.policy.maxDaysPerMonth")),o(),p("placeholder",e.i18n.t("common.unlimited")),o(3),c(e.i18n.t("remoteWork.policy.maxDaysPerYear")),o(),p("placeholder",e.i18n.t("common.unlimited")),o(3),c(e.i18n.t("remoteWork.policy.rules")),o(5),u(" ",e.i18n.t("remoteWork.policy.requiresManagerApproval")," "),o(5),u(" ",e.i18n.t("remoteWork.policy.allowConsecutiveDays")," "),o(),b(e.getFieldValue("allowConsecutiveDays")?-1:41),o(3),c(e.i18n.t("remoteWork.policy.minAdvanceNoticeDays")),o(4),c(e.i18n.t("remoteWork.policy.attendanceSettings")),o(5),u(" ",e.i18n.t("remoteWork.policy.countForOvertime")," "),o(5),u(" ",e.i18n.t("remoteWork.policy.enforceShiftTimes")," "),o(5),u(" ",e.i18n.t("common.active")," ")}}function ge(r,t){r&1&&s(0,"span",49)}function Pe(r,t){if(r&1){let e=g();n(0,"button",48),_("click",function(){f(e);let m=d();return h(m.onSubmit())}),x(1,ge,1,0,"span",49),l(2),a()}if(r&2){let e=d();p("disabled",e.submitting()||e.policyForm.invalid),o(),b(e.submitting()?1:-1),o(),u(" ",e.modalMode()==="create"?e.i18n.t("common.create"):e.i18n.t("common.save")," ")}}var P=class r{fb=y(ne);remoteWorkPoliciesService=y(A);notificationService=y(E);i18n=y(I);modalElement;policyCreated=R();policyUpdated=R();modalMode=k("create");currentPolicy=k(null);availableBranches=k([]);loading=k(!1);submitting=k(!1);policyForm;modalInstance;ngOnInit(){this.initializeForm(),this.loadBranches()}initializeForm(){this.policyForm=this.fb.group({branchId:[null,[v.required]],maxDaysPerWeek:[null,[v.min(1),v.max(7)]],maxDaysPerMonth:[null,[v.min(1),v.max(31)]],maxDaysPerYear:[null,[v.min(1),v.max(365)]],requiresManagerApproval:[!1],allowConsecutiveDays:[!0],maxConsecutiveDays:[null,[v.min(1),v.max(31)]],minAdvanceNoticeDays:[null,[v.min(0),v.max(90)]],blackoutPeriods:[""],countForOvertime:[!0],enforceShiftTimes:[!1],isActive:[!0]})}loadBranches(){this.availableBranches.set([{id:1,name:"Main Branch"},{id:2,name:"Secondary Branch"}])}openModal(t,e="create"){this.modalMode.set(e),this.currentPolicy.set(t||null),e==="create"?(this.policyForm.reset({requiresManagerApproval:!1,allowConsecutiveDays:!0,countForOvertime:!0,enforceShiftTimes:!1,isActive:!0}),this.policyForm.enable()):e==="edit"&&t?(this.policyForm.patchValue({branchId:t.branchId,maxDaysPerWeek:t.maxDaysPerWeek,maxDaysPerMonth:t.maxDaysPerMonth,maxDaysPerYear:t.maxDaysPerYear,requiresManagerApproval:t.requiresManagerApproval,allowConsecutiveDays:t.allowConsecutiveDays,maxConsecutiveDays:t.maxConsecutiveDays,minAdvanceNoticeDays:t.minAdvanceNoticeDays,blackoutPeriods:t.blackoutPeriods,countForOvertime:t.countForOvertime,enforceShiftTimes:t.enforceShiftTimes,isActive:t.isActive}),this.policyForm.enable()):e==="view"&&t&&(this.policyForm.patchValue({branchId:t.branchId,maxDaysPerWeek:t.maxDaysPerWeek,maxDaysPerMonth:t.maxDaysPerMonth,maxDaysPerYear:t.maxDaysPerYear,requiresManagerApproval:t.requiresManagerApproval,allowConsecutiveDays:t.allowConsecutiveDays,maxConsecutiveDays:t.maxConsecutiveDays,minAdvanceNoticeDays:t.minAdvanceNoticeDays,blackoutPeriods:t.blackoutPeriods,countForOvertime:t.countForOvertime,enforceShiftTimes:t.enforceShiftTimes,isActive:t.isActive}),this.policyForm.disable()),this.showModal()}showModal(){this.modalElement&&(this.modalInstance=new bootstrap.Modal(this.modalElement.nativeElement),this.modalInstance.show())}closeModal(){this.modalInstance&&this.modalInstance.hide()}onSubmit(){if(this.policyForm.invalid){this.markFormGroupTouched(this.policyForm);return}this.submitting.set(!0);let t=this.policyForm.value;this.modalMode()==="create"?this.createPolicy(t):this.modalMode()==="edit"&&this.updatePolicy(t)}createPolicy(t){this.remoteWorkPoliciesService.create(t).subscribe({next:()=>{this.notificationService.success(this.i18n.t("remoteWork.policy.success.created")),this.submitting.set(!1),this.closeModal(),this.policyCreated.emit()},error:e=>{console.error("Failed to create remote work policy:",e),this.notificationService.error(this.i18n.t("remoteWork.policy.errors.create_failed")),this.submitting.set(!1)}})}updatePolicy(t){let e=this.currentPolicy()?.id;e&&this.remoteWorkPoliciesService.update(e,t).subscribe({next:()=>{this.notificationService.success(this.i18n.t("remoteWork.policy.success.updated")),this.submitting.set(!1),this.closeModal(),this.policyUpdated.emit()},error:i=>{console.error("Failed to update remote work policy:",i),this.notificationService.error(this.i18n.t("remoteWork.policy.errors.update_failed")),this.submitting.set(!1)}})}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{t.get(e)?.markAsTouched()})}getModalTitle(){switch(this.modalMode()){case"create":return this.i18n.t("remoteWork.policy.create");case"edit":return this.i18n.t("remoteWork.policy.edit");case"view":return this.i18n.t("remoteWork.policy.view");default:return""}}hasError(t,e){let i=this.policyForm.get(t);return!!(i&&i.hasError(e)&&(i.dirty||i.touched))}getFieldValue(t){return this.policyForm.get(t)?.value}getBranchName(t){return t&&this.availableBranches().find(e=>e.id===t)?.name||""}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=W({type:r,selectors:[["app-remote-work-policy-modal"]],viewQuery:function(e,i){if(e&1&&S(ve,5),e&2){let m;D(m=M())&&(i.modalElement=m.first)}},outputs:{policyCreated:"policyCreated",policyUpdated:"policyUpdated"},decls:15,vars:5,consts:[["modalElement",""],["tabindex","-1","aria-labelledby","policyModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","policyModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3"],[3,"formGroup"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled"],[1,"col-12"],[1,"form-label","fw-bold"],[1,"mb-0"],[1,"border-bottom","pb-2"],[1,"col-md-4"],[1,"col-12","mt-4"],[1,"col-md-6"],[3,"status","variant"],[3,"ngSubmit","formGroup"],["for","branchId",1,"form-label"],[1,"text-danger"],["id","branchId","formControlName","branchId",1,"form-select"],[3,"ngValue"],[1,"invalid-feedback"],["for","maxDaysPerWeek",1,"form-label"],["type","number","id","maxDaysPerWeek","formControlName","maxDaysPerWeek","min","1","max","7",1,"form-control",3,"placeholder"],["for","maxDaysPerMonth",1,"form-label"],["type","number","id","maxDaysPerMonth","formControlName","maxDaysPerMonth","min","1","max","31",1,"form-control",3,"placeholder"],["for","maxDaysPerYear",1,"form-label"],["type","number","id","maxDaysPerYear","formControlName","maxDaysPerYear","min","1","max","365",1,"form-control",3,"placeholder"],[1,"form-check","form-switch"],["type","checkbox","id","requiresManagerApproval","formControlName","requiresManagerApproval",1,"form-check-input"],["for","requiresManagerApproval",1,"form-check-label"],["type","checkbox","id","allowConsecutiveDays","formControlName","allowConsecutiveDays",1,"form-check-input"],["for","allowConsecutiveDays",1,"form-check-label"],["for","minAdvanceNoticeDays",1,"form-label"],["type","number","id","minAdvanceNoticeDays","formControlName","minAdvanceNoticeDays","min","0","max","90",1,"form-control"],["type","checkbox","id","countForOvertime","formControlName","countForOvertime",1,"form-check-input"],["for","countForOvertime",1,"form-check-label"],["type","checkbox","id","enforceShiftTimes","formControlName","enforceShiftTimes",1,"form-check-input"],["for","enforceShiftTimes",1,"form-check-label"],["type","checkbox","id","isActive","formControlName","isActive",1,"form-check-input"],["for","isActive",1,"form-check-label"],["for","maxConsecutiveDays",1,"form-label"],["type","number","id","maxConsecutiveDays","formControlName","maxConsecutiveDays","min","1","max","31",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,i){if(e&1){let m=g();n(0,"div",1,0)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),l(6),a(),n(7,"button",6),_("click",function(){return f(m),h(i.closeModal())}),a()(),n(8,"div",7),x(9,xe,61,30,"div",8)(10,Ce,64,23,"form",9),a(),n(11,"div",10)(12,"button",11),_("click",function(){return f(m),h(i.closeModal())}),l(13),a(),x(14,Pe,3,3,"button",12),a()()()()}e&2&&(o(6),c(i.getModalTitle()),o(),F("aria-label",i.i18n.t("common.close")),o(2),b(i.modalMode()==="view"&&i.currentPolicy()?9:10),o(4),u(" ",i.i18n.t("common.close")," "),o(),b(i.modalMode()!=="view"?14:-1))},dependencies:[w,ae,z,ee,te,G,J,U,Z,j,H,oe,ie,K,X,T],encapsulation:2})};var We=()=>[];function Se(r,t){if(r&1&&l(0),r&2){let e=d(2).$implicit;u(" ",e.branchName||"Branch "+e.branchId," ")}}function De(r,t){if(r&1&&l(0),r&2){let e=d(3);u(" ",e.i18n.t("remoteWork.policy.company_wide")," ")}}function Me(r,t){if(r&1&&x(0,Se,1,1)(1,De,1,1),r&2){let e=d().$implicit;b(e.branchId?0:1)}}function we(r,t){if(r&1&&l(0),r&2){let e=d().$implicit,i=d();u(" ",i.formatQuotas(e)," ")}}function Ee(r,t){if(r&1&&l(0),r&2){let e=d().$implicit,i=d();u(" ",e.requiresManagerApproval?i.i18n.t("common.required"):i.i18n.t("common.automatic")," ")}}function Ie(r,t){if(r&1&&s(0,"app-status-badge",7),r&2){let e=d().$implicit,i=d();p("status",e.isActive?"active":"inactive")("label",e.isActive?i.i18n.t("common.active"):i.i18n.t("common.inactive"))}}function Te(r,t){if(r&1&&l(0),r&2){let e=d(),i=e.$implicit,m=e.column;u(" ",i[m.key]," ")}}function Ae(r,t){if(r&1&&x(0,Me,2,1)(1,we,1,1)(2,Ee,1,1)(3,Ie,1,2,"app-status-badge",7)(4,Te,1,1),r&2){let e=t.column;b(e.key==="branchName"?0:e.key==="quotas"?1:e.key==="requiresManagerApproval"?2:e.key==="isActive"?3:4)}}var de=class r{service=y(A);router=y(Y);notification=y(E);confirmation=y(re);i18n=y(I);permissionService=y(Q);policyModal;policies=k([]);loading=k(!1);tableColumns=[{key:"branchName",label:this.i18n.t("remoteWork.policy.branch"),sortable:!0,width:"20%"},{key:"quotas",label:this.i18n.t("remoteWork.policy.quotas"),width:"25%"},{key:"requiresManagerApproval",label:this.i18n.t("remoteWork.policy.managerApproval"),width:"20%"},{key:"isActive",label:this.i18n.t("common.status"),width:"15%"}];tableActions=[{key:"view",label:this.i18n.t("common.view"),icon:"fa-eye",color:"primary"},{key:"activate",label:this.i18n.t("common.activate"),icon:"fa-play",color:"success",condition:t=>!t.isActive&&this.permissionService.has("remoteWork.policy.update")},{key:"deactivate",label:this.i18n.t("common.deactivate"),icon:"fa-pause",color:"warning",condition:t=>t.isActive&&this.permissionService.has("remoteWork.policy.update")},{key:"edit",label:this.i18n.t("common.edit"),icon:"fa-edit",color:"secondary",condition:()=>this.permissionService.has("remoteWork.policy.update")},{key:"delete",label:this.i18n.t("common.delete"),icon:"fa-trash",color:"danger",condition:t=>!t.isActive&&this.permissionService.has("remoteWork.policy.delete")}];ngOnInit(){this.loadPolicies()}loadPolicies(){this.loading.set(!0),this.service.getAll().subscribe({next:t=>{this.policies.set(t),this.loading.set(!1)},error:t=>{this.notification.error(this.i18n.t("remoteWork.policy.loadError")),this.loading.set(!1)}})}onView(t){this.router.navigate(["/settings/remote-work-policy",t.id,"view"])}onEdit(t){this.router.navigate(["/settings/remote-work-policy",t.id,"edit"])}onDelete(t){this.confirmation.confirm({title:this.i18n.t("remoteWork.policy.deleteConfirm"),message:this.i18n.t("remoteWork.policy.deleteMessage"),confirmText:this.i18n.t("common.yes"),cancelText:this.i18n.t("common.no")}).then(e=>{e.confirmed&&this.service.delete(t.id).subscribe({next:()=>{this.notification.success(this.i18n.t("remoteWork.policy.success.deleted")),this.loadPolicies()},error:()=>{this.notification.error(this.i18n.t("remoteWork.policy.errors.delete_failed"))}})})}onActivate(t){this.confirmation.confirm({title:this.i18n.t("remoteWork.policy.activate_policy"),message:this.i18n.t("remoteWork.policy.confirm_activate"),confirmText:this.i18n.t("common.activate"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-success",icon:"fa-play",iconClass:"text-success"}).then(e=>{e.confirmed&&this.service.toggleStatus(t.id).subscribe({next:()=>{this.notification.success(this.i18n.t("remoteWork.policy.success.activated")),this.loadPolicies()},error:()=>{this.notification.error(this.i18n.t("remoteWork.policy.errors.toggle_failed"))}})})}onDeactivate(t){this.confirmation.confirm({title:this.i18n.t("remoteWork.policy.deactivate_policy"),message:this.i18n.t("remoteWork.policy.confirm_deactivate"),confirmText:this.i18n.t("common.deactivate"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-warning",icon:"fa-pause",iconClass:"text-warning"}).then(e=>{e.confirmed&&this.service.toggleStatus(t.id).subscribe({next:()=>{this.notification.success(this.i18n.t("remoteWork.policy.success.deactivated")),this.loadPolicies()},error:()=>{this.notification.error(this.i18n.t("remoteWork.policy.errors.toggle_failed"))}})})}onCreate(){this.router.navigate(["/settings/remote-work-policy/create"])}onPolicyCreated(){this.loadPolicies()}onPolicyUpdated(){this.loadPolicies()}onTableAction(t){switch(t.action){case"view":this.onView(t.item);break;case"activate":this.onActivate(t.item);break;case"deactivate":this.onDeactivate(t.item);break;case"edit":this.onEdit(t.item);break;case"delete":this.onDelete(t.item);break}}formatQuotas(t){let e=[];return t.maxDaysPerWeek&&e.push(`${t.maxDaysPerWeek}/${this.i18n.t("common.week")}`),t.maxDaysPerMonth&&e.push(`${t.maxDaysPerMonth}/${this.i18n.t("common.month")}`),t.maxDaysPerYear&&e.push(`${t.maxDaysPerYear}/${this.i18n.t("common.year")}`),e.length>0?e.join(", "):"-"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=W({type:r,selectors:[["app-remote-work-policy-list"]],viewQuery:function(e,i){if(e&1&&S(P,5),e&2){let m;D(m=M())&&(i.policyModal=m.first)}},decls:8,vars:12,consts:[["cellTemplate",""],[1,"app-list-page"],[3,"title"],["moduleName","remote-work-policy",3,"add","refresh","refreshing"],[3,"title","showHeader","bodyClass"],[3,"actionClick","data","columns","actions","loading","emptyTitle","emptyMessage"],[3,"policyCreated","policyUpdated"],[3,"status","label"]],template:function(e,i){if(e&1){let m=g();n(0,"div",1),s(1,"app-page-header",2),n(2,"app-unified-filter",3),_("add",function(){return f(m),h(i.onCreate())})("refresh",function(){return f(m),h(i.loadPolicies())}),a(),n(3,"app-section-card",4)(4,"app-data-table",5),_("actionClick",function(pe){return f(m),h(i.onTableAction(pe))}),N(5,Ae,5,1,"ng-template",null,0,$),a()(),n(7,"app-remote-work-policy-modal",6),_("policyCreated",function(){return f(m),h(i.onPolicyCreated())})("policyUpdated",function(){return f(m),h(i.onPolicyUpdated())}),a()()}e&2&&(o(),p("title",i.i18n.t("remoteWork.policy.title")),o(),p("refreshing",i.loading()),o(),p("title",i.i18n.t("remoteWork.policy.title"))("showHeader",!1)("bodyClass","p-0"),o(),p("data",i.policies()||B(11,We))("columns",i.tableColumns)("actions",i.tableActions)("loading",i.loading)("emptyTitle",i.i18n.t("remoteWork.policy.noData"))("emptyMessage",i.i18n.t("remoteWork.policy.noDataMessage")))},dependencies:[w,P,ce,le,T,me,se],encapsulation:2})};export{de as RemoteWorkPolicyListComponent};
