import{a as ce}from"./chunk-MI7Q5EGH.js";import{a as pe}from"./chunk-55A7GONC.js";import{c as de,d as me}from"./chunk-GBFD7MFB.js";import{a as re}from"./chunk-JG2HLXEI.js";import{a as le}from"./chunk-FG4PW2NX.js";import{a as se}from"./chunk-NTMNSCJN.js";import{a as ae}from"./chunk-LNNUMUW4.js";import{a as oe}from"./chunk-CQWFZVPO.js";import{a as L}from"./chunk-Y4G43P3P.js";import{a as A,b as O}from"./chunk-AYMGSBNU.js";import"./chunk-3BUDJKKE.js";import{b as j,c as U,e as K,f as J,g as Q,h as W,i as X,j as Y,s as Z,t as ee,u as te,x as ne}from"./chunk-OTKBQKTN.js";import{b as ie}from"./chunk-NJ656CWW.js";import{$ as o,Ca as H,E as i,J as N,Ka as b,N as V,S as B,U as f,V as _,W as R,Xa as z,Y as I,Z as P,_ as h,aa as a,ba as E,eb as G,ia as y,ka as g,ma as d,pb as q,ra as $,sa as x,t as M,u as C,v,va as r,wa as m,xa as u,ya as T,z as p}from"./chunk-6T5SYK5O.js";import{a as w,b as k}from"./chunk-DGAILPFQ.js";var S=()=>({standalone:!0}),he=()=>[],ue=(s,t)=>t.id;function fe(s,t){if(s&1){let e=y();o(0,"button",45),g("click",function(){C(e);let l=d();return v(l.openCreateModal())}),E(1,"i",46),r(2),a()}if(s&2){let e=d();i(2),u(" ",e.i18n.t("shifts.assignments.createButton")," ")}}function _e(s,t){if(s&1&&(o(0,"div",21)(1,"div",47)(2,"span",48),r(3),a()()()),s&2){let e=d();i(3),m(e.i18n.t("common.loading"))}}function be(s,t){if(s&1&&(o(0,"div",22),r(1),a()),s&2){let e=d();i(),u(" ",e.error()," ")}}function Se(s,t){if(s&1&&(o(0,"th"),r(1),a()),s&2){let e=d(2);i(),m(e.i18n.t("common.actions"))}}function Ce(s,t){if(s&1&&(o(0,"small",51),r(1),a()),s&2){let e=d().$implicit,n=d(2);i(),T(" ",n.i18n.t("employees.employeeNumber"),": ",e.employeeNumber," ")}}function ve(s,t){if(s&1&&(o(0,"small",51),r(1),a()),s&2){let e=d().$implicit,n=d(2);i(),T(" ",n.i18n.t("branches.code"),": ",e.branchCode," ")}}function Me(s,t){if(s&1&&(o(0,"span"),r(1),a()),s&2){let e=d().$implicit,n=d(2);i(),m(n.formatDate(e.endDate))}}function ye(s,t){if(s&1&&(o(0,"span",3),r(1),a()),s&2){let e=d(3);i(),m(e.i18n.t("common.indefinite"))}}function xe(s,t){if(s&1){let e=y();o(0,"td")(1,"div",54)(2,"button",55),g("click",function(){C(e);let l=d().$implicit,c=d(2);return v(c.editAssignment(l))}),E(3,"i",56),a(),o(4,"button",57),g("click",function(){C(e);let l=d().$implicit,c=d(2);return v(c.deleteAssignment(l))}),E(5,"i",58),a()()()}if(s&2){let e=d(3);i(2),h("title",e.i18n.t("common.edit")),i(2),h("title",e.i18n.t("common.delete"))}}function Ae(s,t){if(s&1&&(o(0,"tr")(1,"td")(2,"div")(3,"strong"),r(4),a(),o(5,"small",51),r(6),a()()(),o(7,"td")(8,"span",52),r(9),a()(),o(10,"td")(11,"div")(12,"strong"),r(13),a(),f(14,Ce,2,2,"small",51),f(15,ve,2,2,"small",51),a()(),o(16,"td"),r(17),a(),o(18,"td"),f(19,Me,2,1,"span"),f(20,ye,2,1,"span",3),a(),o(21,"td")(22,"span",53),r(23),a()(),o(24,"td")(25,"span",52),r(26),a()(),f(27,xe,6,2,"td"),a()),s&2){let e=t.$implicit,n=d(2);x("table-success",n.isCurrentlyActive(e)),i(4),m(e.shiftName),i(2),m(e.shiftType),i(3),m(e.assignmentTypeDisplay),i(4),m(e.targetDisplayName),i(),_(e.employeeNumber?14:-1),i(),_(e.branchCode?15:-1),i(2),m(n.formatDate(e.effectiveDate)),i(2),_(e.endDate?19:-1),i(),_(e.endDate?-1:20),i(2),h("ngClass",n.getStatusBadgeClass(e.status)),i(),u(" ",e.statusDisplay," "),i(3),m(e.priority),i(),_(n.PERMISSIONS.SHIFT_ASSIGNMENT_MANAGE?27:-1)}}function Oe(s,t){if(s&1&&(o(0,"tr")(1,"td",59),r(2),a()()),s&2){let e=d(2);i(),B("colspan",8),i(),u(" ",e.i18n.t("shifts.assignments.noAssignments")," ")}}function Ee(s,t){if(s&1&&(o(0,"div",23)(1,"table",49)(2,"thead")(3,"tr")(4,"th"),r(5),a(),o(6,"th"),r(7),a(),o(8,"th"),r(9),a(),o(10,"th"),r(11),a(),o(12,"th"),r(13),a(),o(14,"th"),r(15),a(),o(16,"th"),r(17),a(),f(18,Se,2,1,"th"),a()(),o(19,"tbody"),I(20,Ae,28,15,"tr",50,ue),f(22,Oe,3,2,"tr"),a()()()),s&2){let e=d();i(5),m(e.i18n.t("shifts.shift")),i(2),m(e.i18n.t("shifts.assignments.assignmentType")),i(2),m(e.i18n.t("shifts.assignments.target")),i(2),m(e.i18n.t("shifts.assignments.effectiveDate")),i(2),m(e.i18n.t("shifts.assignments.endDate")),i(2),m(e.i18n.t("common.status")),i(2),m(e.i18n.t("shifts.assignments.priority")),i(),_(e.PERMISSIONS.SHIFT_ASSIGNMENT_MANAGE?18:-1),i(2),P(e.assignments()),i(2),_(e.assignments().length===0?22:-1)}}function Ie(s,t){if(s&1){let e=y();o(0,"li",62)(1,"a",63),g("click",function(){let l=C(e).$index,c=d(2);return v(c.onPageChanged(l+1))}),r(2),a()()}if(s&2){let e=t.$index,n=d(2);x("active",n.currentPage()===e+1),i(2),m(e+1)}}function Pe(s,t){if(s&1){let e=y();o(0,"nav",24)(1,"div",60)(2,"div")(3,"span",3),r(4),a()(),o(5,"ul",61)(6,"li",62)(7,"a",63),g("click",function(){C(e);let l=d();return v(l.onPageChanged(l.currentPage()-1))}),r(8),a()(),I(9,Ie,3,3,"li",64,R),o(11,"li",62)(12,"a",63),g("click",function(){C(e);let l=d();return v(l.onPageChanged(l.currentPage()+1))}),r(13),a()()()()()}if(s&2){let e=d();i(4),H(" ",e.i18n.t("common.showing")," ",(e.currentPage()-1)*e.pageSize()+1," ",e.i18n.t("common.to")," ",e.Math.min(e.currentPage()*e.pageSize(),e.totalCount())," ",e.i18n.t("common.of")," ",e.totalCount()," ",e.i18n.t("common.entries")," "),i(2),x("disabled",e.currentPage()===1),i(2),u(" ",e.i18n.t("common.previous")," "),i(),P(b(13,he).constructor(e.totalPages())),i(2),x("disabled",e.currentPage()===e.totalPages()),i(2),u(" ",e.i18n.t("common.next")," ")}}function Te(s,t){if(s&1){let e=y();o(0,"div",32)(1,"label",11),r(2),o(3,"span",33),r(4,"*"),a()(),o(5,"app-searchable-select",34),g("selectionChange",function(l){C(e);let c=d();return v(c.onEmployeeSelectionChange(l))}),a()()}if(s&2){let e,n=d();i(2),u("",n.i18n.t("employees.employee")," "),i(3),h("options",n.employeeSelectOptions)("ngModel",((e=n.createForm().employeeId)==null?null:e.toString())||"")("ngModelOptions",b(7,S))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1)}}function De(s,t){if(s&1){let e=y();o(0,"div",32)(1,"label",11),r(2),o(3,"span",33),r(4,"*"),a()(),o(5,"app-searchable-select",34),g("selectionChange",function(l){C(e);let c=d();return v(c.onDepartmentSelectionChange(l))}),a()()}if(s&2){let e,n=d();i(2),u("",n.i18n.t("departments.department")," "),i(3),h("options",n.departmentSelectOptions)("ngModel",((e=n.createForm().departmentId)==null?null:e.toString())||"")("ngModelOptions",b(7,S))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1)}}function Fe(s,t){if(s&1){let e=y();o(0,"div",32)(1,"label",11),r(2),o(3,"span",33),r(4,"*"),a()(),o(5,"app-searchable-select",34),g("selectionChange",function(l){C(e);let c=d();return v(c.onBranchSelectionChange(l))}),a()()}if(s&2){let e,n=d();i(2),u("",n.i18n.t("branches.branch")," "),i(3),h("options",n.branchSelectOptions)("ngModel",((e=n.createForm().branchId)==null?null:e.toString())||"")("ngModelOptions",b(7,S))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1)}}function we(s,t){s&1&&E(0,"div",44)}var ge=class s{shiftAssignmentService=M(pe);shiftsService=M(ce);branchesService=M(re);employeesService=M(se);departmentsService=M(le);router=M(q);i18n=M(ie);permissionService=M(L);PERMISSIONS={SHIFT_ASSIGNMENT_CREATE:`${O.SHIFT}.${A.CREATE}`,SHIFT_ASSIGNMENT_READ:`${O.SHIFT}.${A.READ}`,SHIFT_ASSIGNMENT_UPDATE:`${O.SHIFT}.${A.UPDATE}`,SHIFT_ASSIGNMENT_DELETE:`${O.SHIFT}.${A.DELETE}`,SHIFT_ASSIGNMENT_MANAGE:`${O.SHIFT}.${A.MANAGE}`};ShiftAssignmentType=de;ShiftAssignmentStatus=me;Math=Math;assignments=p([]);totalCount=p(0);currentPage=p(1);pageSize=p(10);totalPages=p(0);loading=p(!1);error=p(null);searchTerm=p("");selectedAssignmentType=p(null);selectedStatus=p(null);selectedShiftId=p(null);selectedEmployeeId=p(null);selectedDepartmentId=p(null);selectedBranchId=p(null);currentlyActiveOnly=p(!1);showCreateModal=p(!1);showEditModal=p(!1);editingAssignment=p(null);createForm=p({shiftId:0,assignmentType:1,effectiveDate:new Date().toISOString().split("T")[0],status:2,priority:10});assignmentOptions=p({assignmentTypes:[],statuses:[]});availableShifts=p([]);availableBranches=p([]);availableEmployees=p([]);availableDepartments=p([]);selectedBranchForFilter=p(null);ngOnInit(){this.loadAssignments(),this.loadOptions(),this.loadShifts(),this.loadBranches(),this.loadEmployees(),this.loadDepartments()}loadAssignments(){this.loading.set(!0),this.error.set(null);let t={page:this.currentPage(),pageSize:this.pageSize(),search:this.searchTerm()||void 0,assignmentType:this.selectedAssignmentType()||void 0,status:this.selectedStatus()||void 0,shiftId:this.selectedShiftId()||void 0,employeeId:this.selectedEmployeeId()||void 0,departmentId:this.selectedDepartmentId()||void 0,branchId:this.selectedBranchId()||void 0,currentlyActive:this.currentlyActiveOnly()||void 0};this.shiftAssignmentService.getShiftAssignments(t).subscribe({next:e=>{this.assignments.set(e.items),this.totalCount.set(e.totalCount),this.totalPages.set(e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading shift assignments:",e),this.error.set(this.i18n.t("shifts.assignments.loadError")),this.loading.set(!1)}})}loadOptions(){this.shiftAssignmentService.getAssignmentOptions().subscribe({next:t=>{this.assignmentOptions.set(t)},error:t=>{console.error("Error loading assignment options:",t)}})}loadShifts(){this.shiftsService.getShifts(1,1e3).subscribe({next:t=>{this.availableShifts.set(t.items)},error:t=>{console.error("Error loading shifts:",t)}})}loadBranches(){this.branchesService.getBranches(1,1e3).subscribe({next:t=>{this.availableBranches.set(t.items)},error:t=>{console.error("Error loading branches:",t)}})}loadEmployees(t){this.employeesService.getEmployeesForSelection(t).subscribe({next:e=>{this.availableEmployees.set(e)},error:e=>{console.error("Error loading employees:",e)}})}loadDepartments(t){let e=t?{branchId:t,isActive:!0}:{isActive:!0};this.departmentsService.getDepartments(e).subscribe({next:n=>{this.availableDepartments.set(n)},error:n=>{console.error("Error loading departments:",n)}})}onPageChanged(t){this.currentPage.set(t),this.loadAssignments()}onPageSizeChanged(t){this.pageSize.set(t),this.currentPage.set(1),this.loadAssignments()}onSearchChanged(){this.currentPage.set(1),this.loadAssignments()}onFilterChanged(){this.currentPage.set(1),this.loadAssignments()}onBranchFilterChanged(t){this.selectedBranchId.set(t),this.onFilterChanged(),this.loadEmployees(t||void 0),this.loadDepartments(t||void 0)}clearFilters(){this.searchTerm.set(""),this.selectedAssignmentType.set(null),this.selectedStatus.set(null),this.selectedShiftId.set(null),this.selectedEmployeeId.set(null),this.selectedDepartmentId.set(null),this.selectedBranchId.set(null),this.currentlyActiveOnly.set(!1),this.currentPage.set(1),this.loadAssignments()}openCreateModal(){let t=new Date;t.setDate(t.getDate()+1),this.createForm.set({shiftId:0,assignmentType:1,effectiveDate:t.toISOString().split("T")[0],status:2,priority:10}),this.showCreateModal.set(!0)}closeCreateModal(){this.showCreateModal.set(!1)}createAssignment(){this.isCreateFormValid()&&this.shiftAssignmentService.createShiftAssignment(this.createForm()).subscribe({next:t=>{console.log("Assignment created successfully:",t),this.closeCreateModal(),this.loadAssignments()},error:t=>{console.error("Error creating assignment:",t)}})}isCreateFormValid(){let t=this.createForm();return t.shiftId>0&&t.effectiveDate!==""&&this.isEffectiveDateValid(t.effectiveDate)&&this.isTargetValid(t.assignmentType,t.employeeId,t.departmentId,t.branchId)}isEffectiveDateValid(t){if(!t)return!1;let e=new Date;e.setHours(0,0,0,0);let n=new Date(t);return n.setHours(0,0,0,0),n>e}isTargetValid(t,e,n,l){switch(t){case 1:return!!e&&e>0;case 2:return!!n&&n>0;case 3:return!!l&&l>0;default:return!1}}editAssignment(t){this.editingAssignment.set(t),this.showEditModal.set(!0)}closeEditModal(){this.showEditModal.set(!1),this.editingAssignment.set(null)}updateAssignment(){let t=this.editingAssignment();if(t){let e={shiftId:t.shiftId,assignmentType:t.assignmentType,employeeId:t.employeeId,departmentId:t.departmentId,branchId:t.branchId,effectiveDate:t.effectiveDate,endDate:t.endDate,status:t.status,priority:t.priority,notes:t.notes};this.shiftAssignmentService.updateShiftAssignment(t.id,e).subscribe({next:()=>{console.log("Assignment updated successfully"),this.closeEditModal(),this.loadAssignments()},error:n=>{console.error("Error updating assignment:",n)}})}}deleteAssignment(t){confirm(this.i18n.t("shifts.assignments.confirmDelete"))&&this.shiftAssignmentService.deleteShiftAssignment(t.id).subscribe({next:()=>{console.log("Assignment deleted successfully"),this.loadAssignments()},error:e=>{console.error("Error deleting assignment:",e)}})}getStatusBadgeClass(t){return this.shiftAssignmentService.getStatusBadgeClass(t)}formatDate(t){return this.shiftAssignmentService.formatDate(t)}isCurrentlyActive(t){return this.shiftAssignmentService.isCurrentlyActive(t)}getAssignmentTypeDisplay(t){return this.shiftAssignmentService.getAssignmentTypeDisplay(t)}getStatusDisplay(t){return this.shiftAssignmentService.getStatusDisplay(t)}updateCreateForm(t,e){this.createForm.update(n=>k(w({},n),{[t]:e}))}onAssignmentTypeChanged(t){this.updateCreateForm("assignmentType",t),this.updateCreateForm("employeeId",void 0),this.updateCreateForm("departmentId",void 0),this.updateCreateForm("branchId",void 0)}get shiftSelectOptions(){let t=[{value:"0",label:this.i18n.t("common.select")}];return this.availableShifts().forEach(e=>{let n="";if(e.shiftPeriods&&e.shiftPeriods.length>0){let l=e.shiftPeriods[0];n=`${l.startTime} - ${l.endTime}`}t.push({value:e.id.toString(),label:e.name,subLabel:n})}),t}get assignmentTypeSelectOptions(){return this.assignmentOptions().assignmentTypes.map(t=>({value:t.value.toString(),label:t.label}))}get assignmentTypeFilterOptions(){return[{value:"",label:this.i18n.t("common.all")}].concat(this.assignmentTypeSelectOptions)}get statusFilterOptions(){return[{value:"",label:this.i18n.t("common.all")}].concat(this.statusSelectOptions)}get branchSelectOptions(){let t=[{value:"",label:this.i18n.t("common.select")}];return this.availableBranches().forEach(e=>{t.push({value:e.id.toString(),label:e.name,subLabel:e.code})}),t}get employeeSelectOptions(){let t=[{value:"",label:this.i18n.t("common.select")}];return this.availableEmployees().forEach(e=>{t.push({value:e.id.toString(),label:e.name,subLabel:e.employeeNumber})}),t}get departmentSelectOptions(){let t=[{value:"",label:this.i18n.t("common.select")}];return this.availableDepartments().forEach(e=>{t.push({value:e.id.toString(),label:e.name,subLabel:e.code})}),t}get statusSelectOptions(){return this.assignmentOptions().statuses.map(t=>({value:t.value.toString(),label:t.label}))}get shiftFilterOptions(){return[{value:"",label:this.i18n.t("common.all")}].concat(this.shiftSelectOptions.filter(e=>e.value!=="0"))}onShiftSelectionChange(t){let e=t?parseInt(t):0;this.updateCreateForm("shiftId",e)}onAssignmentTypeSelectionChange(t){let e=t?parseInt(t):1;this.onAssignmentTypeChanged(e)}onBranchSelectionChange(t){let e=t?parseInt(t):void 0;this.updateCreateForm("branchId",e),this.loadEmployees(e),this.loadDepartments(e),this.updateCreateForm("employeeId",void 0),this.updateCreateForm("departmentId",void 0)}onEmployeeSelectionChange(t){let e=t?parseInt(t):void 0;this.updateCreateForm("employeeId",e)}onDepartmentSelectionChange(t){let e=t?parseInt(t):void 0;this.updateCreateForm("departmentId",e)}onStatusSelectionChange(t){let e=t?parseInt(t):2;this.updateCreateForm("status",e)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=N({type:s,selectors:[["app-assign-shifts"]],decls:97,vars:84,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"h3","mb-0"],[1,"text-muted"],["type","button","class","btn btn-primary",3,"click",4,"appHasPermission"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","placeholder","ngModel","ngModelOptions"],[1,"col-md-2"],[3,"selectionChange","options","value","searchable","clearable"],[1,"form-check","mt-4"],["type","checkbox","id","currentlyActive",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","currentlyActive",1,"form-check-label"],[1,"col-md-1"],["type","button",1,"btn","btn-outline-secondary","mt-4",3,"click"],[1,"card"],[1,"text-center","py-4"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"mt-4"],[1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-md-6"],[1,"text-danger"],[3,"selectionChange","options","ngModel","ngModelOptions","placeholder","searchable","clearable"],[3,"selectionChange","options","ngModel","ngModelOptions","searchable","clearable"],["type","date","name","effectiveDate","required","",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","date","name","endDate",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","number","name","priority","min","0","max","100",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],[1,"col-12"],["name","notes","rows","3",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"modal-backdrop","fade","show"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus","me-2"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table","table-hover"],[3,"table-success"],[1,"text-muted","d-block"],[1,"badge","bg-info"],[1,"badge",3,"ngClass"],[1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-primary",3,"click","title"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-outline-danger",3,"click","title"],[1,"fas","fa-trash"],[1,"text-center","py-4","text-muted"],[1,"d-flex","justify-content-between","align-items-center"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],[1,"page-item",3,"active"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4),a(),o(5,"p",3),r(6),a()(),V(7,fe,3,1,"button",4),a(),o(8,"div",5)(9,"div",6)(10,"h5",7),r(11),a()(),o(12,"div",8)(13,"div",9)(14,"div",10)(15,"label",11),r(16),a(),o(17,"input",12),g("ngModelChange",function(c){return n.searchTerm.set(c)})("keyup.enter",function(){return n.onSearchChanged()}),a()(),o(18,"div",13)(19,"label",11),r(20),a(),o(21,"app-searchable-select",14),g("selectionChange",function(c){return n.selectedAssignmentType.set(c?+c:null),n.onFilterChanged()}),a()(),o(22,"div",13)(23,"label",11),r(24),a(),o(25,"app-searchable-select",14),g("selectionChange",function(c){return n.selectedStatus.set(c?+c:null),n.onFilterChanged()}),a()(),o(26,"div",13)(27,"label",11),r(28),a(),o(29,"app-searchable-select",14),g("selectionChange",function(c){return n.selectedShiftId.set(c?+c:null),n.onFilterChanged()}),a()(),o(30,"div",13)(31,"div",15)(32,"input",16),g("ngModelChange",function(c){return n.currentlyActiveOnly.set(c),n.onFilterChanged()}),a(),o(33,"label",17),r(34),a()()(),o(35,"div",18)(36,"button",19),g("click",function(){return n.clearFilters()}),r(37),a()()()()(),o(38,"div",20)(39,"div",8),f(40,_e,4,1,"div",21),f(41,be,2,1,"div",22),f(42,Ee,23,9,"div",23),f(43,Pe,14,14,"nav",24),a()()(),o(44,"div",25)(45,"div",26)(46,"div",27)(47,"div",28)(48,"h5",29),r(49),a(),o(50,"button",30),g("click",function(){return n.closeCreateModal()}),a()(),o(51,"div",31)(52,"form")(53,"div",9)(54,"div",32)(55,"label",11),r(56),o(57,"span",33),r(58,"*"),a()(),o(59,"app-searchable-select",34),g("selectionChange",function(c){return n.onShiftSelectionChange(c)}),a()(),o(60,"div",32)(61,"label",11),r(62),o(63,"span",33),r(64,"*"),a()(),o(65,"app-searchable-select",35),g("selectionChange",function(c){return n.onAssignmentTypeSelectionChange(c)}),a()(),f(66,Te,6,8,"div",32),f(67,De,6,8,"div",32),f(68,Fe,6,8,"div",32),o(69,"div",32)(70,"label",11),r(71),o(72,"span",33),r(73,"*"),a()(),o(74,"input",36),g("ngModelChange",function(c){return n.updateCreateForm("effectiveDate",c)}),a()(),o(75,"div",32)(76,"label",11),r(77),a(),o(78,"input",37),g("ngModelChange",function(c){return n.updateCreateForm("endDate",c)}),a()(),o(79,"div",32)(80,"label",11),r(81),a(),o(82,"app-searchable-select",35),g("selectionChange",function(c){return n.onStatusSelectionChange(c)}),a()(),o(83,"div",32)(84,"label",11),r(85),a(),o(86,"input",38),g("ngModelChange",function(c){return n.updateCreateForm("priority",+c)}),a()(),o(87,"div",39)(88,"label",11),r(89),a(),o(90,"textarea",40),g("ngModelChange",function(c){return n.updateCreateForm("notes",c)}),a()()()()(),o(91,"div",41)(92,"button",42),g("click",function(){return n.closeCreateModal()}),r(93),a(),o(94,"button",43),g("click",function(){return n.createAssignment()}),r(95),a()()()()(),f(96,we,1,0,"div",44)),e&2){let l,c,D,F;i(4),m(n.i18n.t("shifts.assignments.title")),i(2),m(n.i18n.t("shifts.assignments.subtitle")),i(),h("appHasPermission",n.PERMISSIONS.SHIFT_ASSIGNMENT_CREATE),i(4),m(n.i18n.t("common.filters")),i(5),m(n.i18n.t("common.search")),i(),h("placeholder",n.i18n.t("shifts.assignments.searchPlaceholder"))("ngModel",n.searchTerm())("ngModelOptions",b(75,S)),i(3),m(n.i18n.t("shifts.assignments.assignmentType")),i(),h("options",n.assignmentTypeFilterOptions)("value",((l=n.selectedAssignmentType())==null?null:l.toString())||"")("searchable",!1)("clearable",!1),i(3),m(n.i18n.t("common.status")),i(),h("options",n.statusFilterOptions)("value",((c=n.selectedStatus())==null?null:c.toString())||"")("searchable",!1)("clearable",!1),i(3),m(n.i18n.t("shifts.shift")),i(),h("options",n.shiftFilterOptions)("value",((D=n.selectedShiftId())==null?null:D.toString())||"")("searchable",!0)("clearable",!1),i(3),h("ngModel",n.currentlyActiveOnly())("ngModelOptions",b(76,S)),i(2),u(" ",n.i18n.t("shifts.assignments.currentlyActiveOnly")," "),i(3),u(" ",n.i18n.t("common.clear")," "),i(3),_(n.loading()?40:-1),i(),_(n.error()?41:-1),i(),_(!n.loading()&&!n.error()?42:-1),i(),_(n.totalPages()>1?43:-1),i(),$("display",n.showCreateModal()?"block":"none"),x("show",n.showCreateModal()),i(5),m(n.i18n.t("shifts.assignments.createTitle")),i(7),u("",n.i18n.t("shifts.shift")," "),i(3),h("options",n.shiftSelectOptions)("ngModel",n.createForm().shiftId.toString())("ngModelOptions",b(77,S))("placeholder",n.i18n.t("common.select"))("searchable",!0)("clearable",!1),i(3),u("",n.i18n.t("shifts.assignments.assignmentType")," "),i(3),h("options",n.assignmentTypeSelectOptions)("ngModel",n.createForm().assignmentType.toString())("ngModelOptions",b(78,S))("searchable",!1)("clearable",!1),i(),_(n.createForm().assignmentType===n.ShiftAssignmentType.Employee?66:-1),i(),_(n.createForm().assignmentType===n.ShiftAssignmentType.Department?67:-1),i(),_(n.createForm().assignmentType===n.ShiftAssignmentType.Branch?68:-1),i(3),u("",n.i18n.t("shifts.assignments.effectiveDate")," "),i(3),h("ngModel",n.createForm().effectiveDate)("ngModelOptions",b(79,S)),i(3),m(n.i18n.t("shifts.assignments.endDate")),i(),h("ngModel",n.createForm().endDate)("ngModelOptions",b(80,S)),i(3),m(n.i18n.t("common.status")),i(),h("options",n.statusSelectOptions)("ngModel",((F=n.createForm().status)==null?null:F.toString())||"")("ngModelOptions",b(81,S))("searchable",!1)("clearable",!1),i(3),m(n.i18n.t("shifts.assignments.priority")),i(),h("ngModel",n.createForm().priority)("ngModelOptions",b(82,S)),i(3),m(n.i18n.t("common.notes")),i(),h("ngModel",n.createForm().notes)("ngModelOptions",b(83,S))("placeholder",n.i18n.t("shifts.assignments.notesPlaceholder")),i(3),u(" ",n.i18n.t("common.cancel")," "),i(),h("disabled",!n.isCreateFormValid()),i(),u(" ",n.i18n.t("common.create")," "),i(),_(n.showCreateModal()||n.showEditModal()?96:-1)}},dependencies:[G,z,ne,X,U,Y,j,K,J,te,ee,Z,W,Q,oe,ae],styles:['.container-fluid[_ngcontent-%COMP%]{padding:1.5rem}.badge-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.badge-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.badge-dark[_ngcontent-%COMP%]{background-color:#212529!important}.badge-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important;color:#000!important}.badge-info[_ngcontent-%COMP%]{background-color:#0dcaf0!important;color:#000!important}.table-responsive[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013;border-radius:.375rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;border-bottom:2px solid #dee2e6;white-space:nowrap}.table-success[_ngcontent-%COMP%]{background-color:#1987541a!important}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000013}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem}.btn-outline-primary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-outline-danger[_ngcontent-%COMP%]:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013;border-radius:.5rem}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;padding:1rem 1.25rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#495057;font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#86b7fe;box-shadow:0 0 0 .25rem #0d6efd40}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#0d6efd;border-color:#0d6efd}.modal-content[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 1rem #00000026;border-radius:.5rem}.modal-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6;border-radius:.5rem .5rem 0 0}.modal-title[_ngcontent-%COMP%]{color:#495057;font-weight:600}.btn-close[_ngcontent-%COMP%]{padding:.5rem;margin:-.5rem -.5rem -.5rem auto}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#0d6efd;border:1px solid #dee2e6;padding:.375rem .75rem}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#0d6efd;border-color:#0d6efd;color:#fff}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{color:#0a58ca;background-color:#e9ecef;border-color:#dee2e6}.pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;background-color:#fff;border-color:#dee2e6;cursor:not-allowed}.spinner-border[_ngcontent-%COMP%]{width:2rem;height:2rem}.alert[_ngcontent-%COMP%]{border-radius:.5rem;border:none}.alert-danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#721c24}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]{padding:1rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.2rem .4rem;font-size:.8rem}.table-responsive[_ngcontent-%COMP%]{font-size:.9rem}.modal-dialog[_ngcontent-%COMP%]{margin:.5rem}}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.min-width-120[_ngcontent-%COMP%]{min-width:120px}.card-body[_ngcontent-%COMP%]   .row.g-3[_ngcontent-%COMP%] > .col-md-1[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row.g-3[_ngcontent-%COMP%] > .col-md-2[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row.g-3[_ngcontent-%COMP%] > .col-md-3[_ngcontent-%COMP%]{min-height:80px;display:flex;flex-direction:column;justify-content:space-between}.target-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.target-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#212529}.target-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem}.priority-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem}.status-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem}.status-indicator[_ngcontent-%COMP%]:before{content:"";width:8px;height:8px;border-radius:50%;background-color:currentColor}.table-success[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative}.table-success[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background-color:#198754;border-radius:0 4px 4px 0}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}.empty-state[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}']})};export{ge as AssignShiftsComponent};
