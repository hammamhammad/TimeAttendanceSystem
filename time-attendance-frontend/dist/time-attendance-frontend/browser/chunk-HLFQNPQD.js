import{a as k}from"./chunk-7VDQSUNU.js";import"./chunk-635VP34W.js";import{a as w}from"./chunk-5RFSWC3I.js";import"./chunk-GC4SRGYM.js";import"./chunk-ASABUVRV.js";import"./chunk-UWMUXUZF.js";import{b as R}from"./chunk-MCSGSJCX.js";import{C as r,H as C,R as _,S as x,X as D,Y as o,Z as a,_ as u,ab as E,fa as h,ha as b,ib as I,ja as s,lb as S,mb as y,rb as M,s as p,sa as d,t as f,ta as l,u as g,ua as v,y as c}from"./chunk-H3A4D7EH.js";import"./chunk-DGAILPFQ.js";function N(i,n){if(i&1&&(o(0,"div",10)(1,"div",12)(2,"span",13),d(3),a()()()),i&2){let e=s();r(3),l(e.i18n.t("common.loading"))}}function V(i,n){if(i&1&&(o(0,"div",11),u(1,"i",20),d(2),a()),i&2){let e=s(2);r(2),v(" ",e.error()," ")}}function j(i,n){if(i&1){let e=h();_(0,V,3,1,"div",11),o(1,"div",14)(2,"div",15)(3,"h5",16),u(4,"i",17),d(5),a()(),o(6,"div",18)(7,"app-department-form",19),b("save",function(m){f(e);let q=s();return g(q.onDepartmentSaved(m))})("cancel",function(){f(e);let m=s();return g(m.onCancel())}),a()()()}if(i&2){let e,t=s();x(t.error()?0:-1),r(5),v(" ",t.i18n.t("department.information")," "),r(2),D("department",t.department())("branchId",((e=t.department())==null?null:e.branchId)||null)("isEditMode",!0)("externalSaving",t.saving())}}function L(i,n){if(i&1&&(o(0,"div",11),u(1,"i",20),d(2),a()),i&2){let e=s();r(2),v(" ",e.error()||e.i18n.t("department.not_found")," ")}}var T=class i{route=p(I);router=p(S);departmentsService=p(w);i18n=p(R);department=c(null);loading=c(!0);saving=c(!1);error=c("");ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n?this.loadDepartment(n):(this.error.set("Invalid department ID"),this.loading.set(!1))}loadDepartment(n){this.departmentsService.getDepartmentById(+n).subscribe({next:e=>{this.department.set(e),this.loading.set(!1)},error:e=>{this.error.set(this.getErrorMessage(e)),this.loading.set(!1)}})}onDepartmentSaved(n){if(this.saving()||!this.department())return;this.saving.set(!0),this.error.set("");let e=this.department().id,t=n;this.departmentsService.updateDepartment(e,t).subscribe({next:()=>{console.log("Department updated successfully"),this.saving.set(!1),this.router.navigate(["/departments"])},error:m=>{console.error("Error updating department:",m),this.error.set(this.getErrorMessage(m)),this.saving.set(!1)}})}onCancel(){this.router.navigate(["/departments"])}getErrorMessage(n){return n?.error?.error?n.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-edit-department"]],decls:21,vars:6,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/departments"],[1,"breadcrumb-item","active"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fa-solid","fa-building","me-2"],[1,"card-body"],[3,"save","cancel","department","branchId","isEditMode","externalSaving"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),d(4),a(),o(5,"nav",2)(6,"ol",3)(7,"li",4)(8,"a",5),d(9),a()(),o(10,"li",4)(11,"a",6),d(12),a()(),o(13,"li",7),d(14),a()()()(),o(15,"button",8),b("click",function(){return t.onCancel()}),u(16,"i",9),d(17),a()(),_(18,N,4,1,"div",10)(19,j,8,6)(20,L,3,1,"div",11),a()),e&2&&(r(4),l(t.i18n.t("department.edit")),r(5),l(t.i18n.t("dashboard.title")),r(3),l(t.i18n.t("departments.title")),r(2),l(t.i18n.t("department.edit")),r(3),v(" ",t.i18n.t("common.back")," "),r(),x(t.loading()?18:t.department()?19:20))},dependencies:[E,M,y,k],encapsulation:2})};export{T as EditDepartmentComponent};
