import{a as Y}from"./chunk-7OHWWQRB.js";import{a as X}from"./chunk-6YOSOA3I.js";import{a as J}from"./chunk-DX3KH33G.js";import{a as Q}from"./chunk-DXDCYKZU.js";import{a as K}from"./chunk-XEQ2WLKT.js";import{a as Z}from"./chunk-U76UCUGX.js";import{a as S}from"./chunk-QW24EDIR.js";import"./chunk-QXVLGI72.js";import"./chunk-HUSARQNL.js";import{a as C}from"./chunk-5MHFUEKN.js";import"./chunk-Y62N6K5S.js";import{b as c}from"./chunk-O7LPL3AF.js";import{b as g}from"./chunk-3VZ5QHEY.js";import{a as j,b as G,e as B,f as b,g as f,j as U,k as $,l as N}from"./chunk-TWXUAMJ4.js";import{Cc as D,Dc as H,Ea as I,Ec as z,H as T,M as v,Pa as W,R as p,Wb as L,ca as q,eb as V,g as E,ga as P,k,n as y,x as A,ya as O}from"./chunk-JSQL33QG.js";import{a as h,b as u}from"./chunk-DGAILPFQ.js";var a=(e,t)=>{let o=p(c),r=p(C),i=p(f);if(!o.isAuthenticated())return i.navigate(["/login"]),!1;if(o.isTokenExpired())if(o.getRefreshToken())o.refreshToken().subscribe({error:()=>{i.navigate(["/login"])}});else return i.navigate(["/login"]),!1;let m=e.data?.permission;return m&&!r.has(m)?(i.navigate(["/unauthorized"]),!1):!0};var s=(e,t)=>{let o=p(c),r=p(C),i=p(f);if(!o.isAuthenticated())return i.navigate(["/login"]),!1;if(o.isAdmin()||o.isSystemAdmin())return!0;let m=e.data?.permission;return m&&r.has(m)?!0:(i.navigate(["/unauthorized"]),!1)};var l=(e,t)=>{let o=p(c),r=p(C),i=p(f);if(!o.isAuthenticated())return i.navigate(["/login"]),!1;if(o.isSystemAdmin()||o.isAdmin()||r.hasRole("Manager"))return!0;let m=["employee.read","employee.assign","shift.read","shift.assign","department.read","attendance.read","report.read"];if(r.hasAny(m))return!0;let d=e.data?.permission;return d&&r.has(d)?!0:(i.navigate(["/unauthorized"]),!1)};var ee=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-GB3YVZ23.js").then(e=>e.LoginComponent),data:{title:"auth.login"}},{path:"auth/change-password",loadComponent:()=>import("./chunk-LDUK2NAS.js").then(e=>e.ChangePasswordComponent),canMatch:[a],data:{title:"auth.change_password"}},{path:"",loadComponent:()=>import("./chunk-YXBYFSG3.js").then(e=>e.LayoutComponent),canMatch:[a],children:[{path:"dashboard",loadComponent:()=>import("./chunk-LA2TVR2P.js").then(e=>e.DashboardComponent),data:{title:"dashboard.title"}},{path:"portal",redirectTo:"portal/employee-dashboard",pathMatch:"full"},{path:"portal/employee-dashboard",loadComponent:()=>import("./chunk-W7VELJXL.js").then(e=>e.EmployeeDashboardComponent),data:{title:"portal.employee_dashboard",permission:"portal.access"},canMatch:[a]},{path:"portal/my-attendance",loadComponent:()=>import("./chunk-YC5RUYJP.js").then(e=>e.MyAttendanceComponent),data:{title:"portal.my_attendance",permission:"portal.access"},canMatch:[a]},{path:"portal/my-profile",loadComponent:()=>import("./chunk-ZDQMSPFW.js").then(e=>e.MyProfileComponent),data:{title:"portal.my_profile",permission:"portal.access"},canMatch:[a]},{path:"portal/fingerprint-requests",loadComponent:()=>import("./chunk-QBMKLCTN.js").then(e=>e.FingerprintRequestsListComponent),data:{title:"portal.fingerprint_requests",permission:"portal.access"},canMatch:[a]},{path:"portal/fingerprint-requests/new",loadComponent:()=>import("./chunk-O4ZS3YQE.js").then(e=>e.FingerprintRequestFormComponent),data:{title:"portal.new_fingerprint_request",permission:"portal.access"},canMatch:[a]},{path:"portal/fingerprint-requests/:id",loadComponent:()=>import("./chunk-PLK5O4Y6.js").then(e=>e.FingerprintRequestDetailsComponent),data:{title:"portal.fingerprint_request_details",permission:"portal.access"},canMatch:[a]},{path:"portal/fingerprint-requests/:id/edit",loadComponent:()=>import("./chunk-O4ZS3YQE.js").then(e=>e.FingerprintRequestFormComponent),data:{title:"portal.edit_fingerprint_request",permission:"portal.access"},canMatch:[a]},{path:"portal/vacation-requests",loadComponent:()=>import("./chunk-H4WJ2PV5.js").then(e=>e.VacationRequestsListComponent),data:{title:"portal.vacation_requests",permission:"portal.access"},canMatch:[a]},{path:"portal/excuse-requests",loadComponent:()=>import("./chunk-RSX2ZKWO.js").then(e=>e.ExcuseRequestsListComponent),data:{title:"portal.excuse_requests",permission:"portal.access"},canMatch:[a]},{path:"portal/excuse-requests/new",loadComponent:()=>import("./chunk-WEZSZIDG.js").then(e=>e.PortalExcuseRequestFormComponent),data:{title:"portal.new_excuse",permission:"portal.access"},canMatch:[a]},{path:"portal/excuse-requests/:id/edit",loadComponent:()=>import("./chunk-WEZSZIDG.js").then(e=>e.PortalExcuseRequestFormComponent),data:{title:"portal.edit_excuse",permission:"portal.access"},canMatch:[a]},{path:"portal/excuse-requests/:id",loadComponent:()=>import("./chunk-64BAYEUD.js").then(e=>e.PortalExcuseRequestDetailsComponent),data:{title:"portal.excuse_details",permission:"portal.access"},canMatch:[a]},{path:"portal/remote-work-requests",loadComponent:()=>import("./chunk-PBSLXLE3.js").then(e=>e.RemoteWorkRequestsListComponent),data:{title:"portal.remote_work_requests",permission:"portal.access"},canMatch:[a]},{path:"portal/remote-work-requests/new",loadComponent:()=>import("./chunk-7MOVCP7M.js").then(e=>e.PortalRemoteWorkRequestFormComponent),data:{title:"portal.new_remote_work",permission:"portal.access"},canMatch:[a]},{path:"portal/remote-work-requests/:id/edit",loadComponent:()=>import("./chunk-7MOVCP7M.js").then(e=>e.PortalRemoteWorkRequestFormComponent),data:{title:"portal.edit_remote_work",permission:"portal.access"},canMatch:[a]},{path:"portal/remote-work-requests/:id",loadComponent:()=>import("./chunk-4B4JQWVS.js").then(e=>e.PortalRemoteWorkRequestDetailsComponent),data:{title:"portal.remote_work_details",permission:"portal.access"},canMatch:[a]},{path:"users",loadComponent:()=>import("./chunk-RMIVOO2U.js").then(e=>e.UsersComponent),data:{title:"users.title",permission:"user.read"},canMatch:[s]},{path:"users/create",loadComponent:()=>import("./chunk-7O26XCFH.js").then(e=>e.CreateUserPageComponent),data:{title:"users.create_user",permission:"user.create"},canMatch:[s]},{path:"users/:id/view",loadComponent:()=>import("./chunk-QXW67L7X.js").then(e=>e.ViewUserComponent),data:{title:"users.view_details",permission:"user.read"},canMatch:[s]},{path:"users/:id/edit",loadComponent:()=>import("./chunk-U4GR7IML.js").then(e=>e.EditUserPageComponent),data:{title:"users.edit_user",permission:"user.update"},canMatch:[s]},{path:"employees",loadComponent:()=>import("./chunk-OF3AXCTJ.js").then(e=>e.EmployeesComponent),data:{title:"employees.title",permission:"employee.read"},canMatch:[l]},{path:"employees/create",loadComponent:()=>import("./chunk-QWGNXLGJ.js").then(e=>e.CreateEmployeeComponent),data:{title:"employees.create_employee",permission:"employee.create"},canMatch:[s]},{path:"employees/:id/view",loadComponent:()=>import("./chunk-46PPZT7P.js").then(e=>e.ViewEmployeeComponent),data:{title:"employees.view_details",permission:"employee.read"},canMatch:[l]},{path:"employees/:id/edit",loadComponent:()=>import("./chunk-DXA3ZZVD.js").then(e=>e.EditEmployeeComponent),data:{title:"employees.edit_employee",permission:"employee.update"},canMatch:[s]},{path:"employees/:employeeId/change-shift",loadComponent:()=>import("./chunk-JBXHWO6T.js").then(e=>e.ChangeEmployeeShiftComponent),data:{title:"employees.change_shift",permission:"employee.update"},canMatch:[l]},{path:"roles",loadComponent:()=>import("./chunk-DNAU6QK4.js").then(e=>e.RolesComponent),data:{title:"roles.title",permission:"role.read"},canMatch:[s]},{path:"roles/create",loadComponent:()=>import("./chunk-GLJF6WOO.js").then(e=>e.CreateRoleComponent),data:{title:"roles.create_role",permission:"role.create"},canMatch:[s]},{path:"roles/:id/view",loadComponent:()=>import("./chunk-Q23VLOMA.js").then(e=>e.ViewRoleComponent),data:{title:"roles.view_details",permission:"role.read"},canMatch:[s]},{path:"roles/:id/edit",loadComponent:()=>import("./chunk-HOSTE7DV.js").then(e=>e.EditRoleComponent),data:{title:"roles.edit_role",permission:"role.update"},canMatch:[s]},{path:"branches",loadComponent:()=>import("./chunk-XRKCCEZA.js").then(e=>e.BranchesComponent),data:{title:"branches.title",permission:"branch.read"},canMatch:[a]},{path:"branches/:id/view",loadComponent:()=>import("./chunk-KZCLQ3LQ.js").then(e=>e.ViewBranchComponent),data:{title:"branches.view_details",permission:"branch.read"},canMatch:[a]},{path:"branches/:id/edit",loadComponent:()=>import("./chunk-S2554OB7.js").then(e=>e.EditBranchComponent),data:{title:"branches.edit_branch",permission:"branch.update"},canMatch:[a]},{path:"departments",loadComponent:()=>import("./chunk-LFT6BPJI.js").then(e=>e.DepartmentsComponent),data:{title:"departments.title",permission:"department.read"},canMatch:[a]},{path:"departments/create",loadComponent:()=>import("./chunk-YO5TRF5Y.js").then(e=>e.CreateDepartmentComponent),data:{title:"departments.create",permission:"department.create"},canMatch:[a]},{path:"departments/:id/view",loadComponent:()=>import("./chunk-7PY54U2E.js").then(e=>e.ViewDepartmentComponent),data:{title:"departments.view_details",permission:"department.read"},canMatch:[a]},{path:"departments/:id/edit",loadComponent:()=>import("./chunk-44SPTDQM.js").then(e=>e.EditDepartmentComponent),data:{title:"departments.edit",permission:"department.update"},canMatch:[a]},{path:"shifts",loadComponent:()=>import("./chunk-G5EW3FZT.js").then(e=>e.ShiftsComponent),data:{title:"shifts.title",permission:"shift.read"},canMatch:[l]},{path:"shifts/create",loadComponent:()=>import("./chunk-LEW3FVDK.js").then(e=>e.CreateShiftComponent),data:{title:"shifts.create_shift",permission:"shift.create"},canMatch:[s]},{path:"shifts/:id/view",loadComponent:()=>import("./chunk-V4HDCY4K.js").then(e=>e.ViewShiftComponent),data:{title:"shifts.view_details",permission:"shift.read"},canMatch:[l]},{path:"shifts/:id/edit",loadComponent:()=>import("./chunk-WB4RNF22.js").then(e=>e.EditShiftComponent),data:{title:"shifts.edit_shift",permission:"shift.update"},canMatch:[s]},{path:"shifts/assign",loadComponent:()=>import("./chunk-PNM7DVZD.js").then(e=>e.AssignShiftsComponent),data:{title:"shifts.assignments.title",permission:"shift.assign"},canMatch:[l]},{path:"attendance",loadComponent:()=>import("./chunk-NFXZTIXQ.js").then(e=>e.AttendanceComponent),data:{title:"attendance.dashboard_title",permission:"attendance.read"},canMatch:[a]},{path:"attendance/daily",loadComponent:()=>import("./chunk-GLASKGOG.js").then(e=>e.DailyAttendanceComponent),data:{title:"attendance.daily_view",permission:"attendance.read"},canMatch:[a]},{path:"attendance/monthly-report",loadComponent:()=>import("./chunk-4WNYHGWE.js").then(e=>e.MonthlyReportComponent),data:{title:"attendance.monthly_report",permission:"attendance.read"},canMatch:[a]},{path:"attendance/daily-detail/:employeeId/:date",loadComponent:()=>import("./chunk-PQUR5KDI.js").then(e=>e.DailyAttendanceDetailComponent),data:{title:"attendance.daily_detail.title",permission:"attendance.read"},canMatch:[a]},{path:"attendance/employee-history",loadComponent:()=>import("./chunk-CJR2BGCS.js").then(e=>e.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_history.title",permission:"attendance.read"},canMatch:[a]},{path:"attendance/employee/:id",loadComponent:()=>import("./chunk-CJR2BGCS.js").then(e=>e.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_detail",permission:"attendance.read"},canMatch:[a]},{path:"attendance/edit/:id",loadComponent:()=>import("./chunk-DOFJAQRJ.js").then(e=>e.EditAttendanceComponent),data:{title:"attendance.edit.title",permission:"attendance.update"},canMatch:[a]},{path:"attendance/:attendanceId/change-shift",loadComponent:()=>import("./chunk-HZLLEEXW.js").then(e=>e.ChangeAttendanceShiftComponent),data:{title:"attendance.change_shift_title",permission:"attendance.update"},canMatch:[a]},{path:"settings",loadComponent:()=>import("./chunk-J7GZBX4E.js").then(e=>e.SettingsComponent),data:{title:"settings.title"}},{path:"settings/overtime",loadComponent:()=>import("./chunk-6NZ2ODA6.js").then(e=>e.OvertimeConfigurationsComponent),data:{title:"settings.overtime.title",permission:"settings.overtime.read"},canMatch:[s]},{path:"settings/overtime/create",loadComponent:()=>import("./chunk-NXE56FTB.js").then(e=>e.CreateOvertimeConfigurationComponent),data:{title:"settings.overtime.create",permission:"settings.overtime.create"},canMatch:[s]},{path:"settings/overtime/edit/:id",loadComponent:()=>import("./chunk-HVTJXVWT.js").then(e=>e.EditOvertimeConfigurationComponent),data:{title:"settings.overtime.edit",permission:"settings.overtime.update"},canMatch:[s]},{path:"settings/overtime/:id/view",loadComponent:()=>import("./chunk-H6EGDFVQ.js").then(e=>e.ViewOvertimeConfigurationComponent),data:{title:"settings.overtime.view_details",permission:"settings.overtime.read"},canMatch:[s]},{path:"settings/public-holidays",loadComponent:()=>import("./chunk-MM2ZABHO.js").then(e=>e.PublicHolidaysComponent),data:{title:"settings.holidays.title",permission:"publicHoliday.read"},canMatch:[s]},{path:"settings/public-holidays/create",loadComponent:()=>import("./chunk-2OJCTE5L.js").then(e=>e.CreatePublicHolidayComponent),data:{title:"settings.holidays.create",permission:"publicHoliday.create"},canMatch:[s]},{path:"settings/public-holidays/:id/view",loadComponent:()=>import("./chunk-EAVLBKUN.js").then(e=>e.ViewPublicHolidayComponent),data:{title:"settings.holidays.view_details",permission:"publicHoliday.read"},canMatch:[s]},{path:"settings/public-holidays/:id/edit",loadComponent:()=>import("./chunk-562IPYGA.js").then(e=>e.EditPublicHolidayComponent),data:{title:"settings.holidays.edit",permission:"publicHoliday.update"},canMatch:[s]},{path:"vacation-types",loadComponent:()=>import("./chunk-JKMT4MMH.js").then(e=>e.VacationTypesComponent),data:{title:"vacation_types.title",permission:"vacationType.read"},canMatch:[l]},{path:"vacation-types/:id",loadComponent:()=>import("./chunk-Z3O6EBIE.js").then(e=>e.ViewVacationTypeComponent),data:{title:"vacation_types.view_details",permission:"vacationType.read"},canMatch:[l]},{path:"employee-vacations",loadComponent:()=>import("./chunk-Q2N5TGYN.js").then(e=>e.EmployeeVacationsComponent),data:{title:"employee_vacations.title",permission:"vacation.read"},canMatch:[a]},{path:"employee-vacations/create",loadComponent:()=>import("./chunk-UQ3XI3IU.js").then(e=>e.CreateEmployeeVacationComponent),data:{title:"employee_vacations.create_vacation",permission:"vacation.create"},canMatch:[a]},{path:"employee-vacations/:id/view",loadComponent:()=>import("./chunk-U5JMLUS2.js").then(e=>e.ViewEmployeeVacationComponent),data:{title:"employee_vacations.view_details",permission:"vacation.read"},canMatch:[a]},{path:"employee-vacations/:id/edit",loadComponent:()=>import("./chunk-KWH3S4CP.js").then(e=>e.EditEmployeeVacationComponent),data:{title:"employee_vacations.edit_vacation",permission:"vacation.update"},canMatch:[a]},{path:"employee-excuses",loadComponent:()=>import("./chunk-UR6MZFKY.js").then(e=>e.EmployeeExcusesComponent),data:{title:"employee_excuses.title",permission:"excuse.read"},canMatch:[a]},{path:"employee-excuses/create",loadComponent:()=>import("./chunk-JNB4ZL4F.js").then(e=>e.ExcuseRequestFormComponent),data:{title:"employee_excuses.create_request",permission:"excuse.create"},canMatch:[a]},{path:"employee-excuses/:id/view",loadComponent:()=>import("./chunk-2TPNGVIW.js").then(e=>e.ExcuseDetailsComponent),data:{title:"employee_excuses.excuse_details",permission:"excuse.read"},canMatch:[a]},{path:"employee-excuses/:id/edit",loadComponent:()=>import("./chunk-JNB4ZL4F.js").then(e=>e.ExcuseRequestFormComponent),data:{title:"employee_excuses.edit_request",permission:"excuse.update"},canMatch:[a]},{path:"remote-work",loadComponent:()=>import("./chunk-H5YHFY3W.js").then(e=>e.RemoteWorkListComponent),data:{title:"remoteWork.request.title",permission:"remoteWork.request.read"},canMatch:[l]},{path:"remote-work/create",loadComponent:()=>import("./chunk-4WTNZDBK.js").then(e=>e.AssignRemoteWorkComponent),data:{title:"remoteWork.request.create",permission:"remoteWork.request.create"},canMatch:[l]},{path:"remote-work/:id/view",loadComponent:()=>import("./chunk-OSXB6JSB.js").then(e=>e.ViewRemoteWorkAssignmentComponent),data:{title:"remoteWork.request.view_details",permission:"remoteWork.request.read"},canMatch:[l]},{path:"remote-work/edit/:id",loadComponent:()=>import("./chunk-BOODRZSC.js").then(e=>e.EditRemoteWorkComponent),data:{title:"remoteWork.request.edit",permission:"remoteWork.request.update"},canMatch:[l]},{path:"settings/remote-work-policy",loadComponent:()=>import("./chunk-ILATZXEE.js").then(e=>e.RemoteWorkPolicyListComponent),data:{title:"remoteWork.policy.title",permission:"remoteWork.policy.read"},canMatch:[s]},{path:"settings/remote-work-policy/create",loadComponent:()=>import("./chunk-DBNNYIV3.js").then(e=>e.CreateRemoteWorkPolicyComponent),data:{title:"remoteWork.policy.create_policy",permission:"remoteWork.policy.create"},canMatch:[s]},{path:"settings/remote-work-policy/:id/view",loadComponent:()=>import("./chunk-VENLOQUH.js").then(e=>e.ViewRemoteWorkPolicyComponent),data:{title:"remoteWork.policy.policy_details",permission:"remoteWork.policy.read"},canMatch:[s]},{path:"settings/remote-work-policy/:id/edit",loadComponent:()=>import("./chunk-X4JRV5GZ.js").then(e=>e.EditRemoteWorkPolicyComponent),data:{title:"remoteWork.policy.edit_policy",permission:"remoteWork.policy.update"},canMatch:[s]},{path:"settings/excuse-policies",loadComponent:()=>import("./chunk-N6K3XWHJ.js").then(e=>e.ExcusePoliciesComponent),data:{title:"excuse_policies.title",permission:"settings.excusePolicy.read"},canMatch:[s]},{path:"settings/excuse-policies/create",loadComponent:()=>import("./chunk-H3TAU4HW.js").then(e=>e.CreateExcusePolicyComponent),data:{title:"excuse_policies.create_policy",permission:"settings.excusePolicy.create"},canMatch:[s]},{path:"settings/excuse-policies/:id/view",loadComponent:()=>import("./chunk-4LRYOJQR.js").then(e=>e.ViewExcusePolicyComponent),data:{title:"excuse_policies.view_policy",permission:"settings.excusePolicy.read"},canMatch:[s]},{path:"settings/excuse-policies/:id/edit",loadComponent:()=>import("./chunk-DZUFBL54.js").then(e=>e.EditExcusePolicyComponent),data:{title:"excuse_policies.edit_policy",permission:"settings.excusePolicy.update"},canMatch:[s]},{path:"reports/sessions",loadComponent:()=>import("./chunk-K33G2CVC.js").then(e=>e.SessionsComponent),data:{title:"sessions.title",permission:"session.read"},canMatch:[a]},{path:"reports/audit-logs",loadComponent:()=>import("./chunk-XLBK74QR.js").then(e=>e.AuditLogsComponent),data:{title:"audit_logs.title",permission:"audit.read"},canMatch:[s]}]},{path:"unauthorized",loadComponent:()=>import("./chunk-C3ZO5I7R.js").then(e=>e.UnauthorizedComponent),data:{title:"Unauthorized Access"}},{path:"**",loadComponent:()=>import("./chunk-4HEPCKG6.js").then(e=>e.NotFoundComponent),data:{title:"Page Not Found"}}];var te=(e,t)=>{let o=p(c);if(e.url.includes("/auth/login")||e.url.includes("/auth/refresh"))return t(e);let r=o.getAccessToken(),i=e;return r&&(i=e.clone({headers:e.headers.set("Authorization",`Bearer ${r}`)})),t(i).pipe(A(m=>{if(m.status===401&&!e.url.includes("/auth/refresh")){if(o.getRefreshToken())return o.refreshToken().pipe(T(()=>{let d=o.getAccessToken(),M=e.clone({headers:e.headers.set("Authorization",`Bearer ${d}`)});return t(M)}),A(d=>(o.logout(),k(()=>d))));o.logout()}return k(()=>m)}))};var _=class e extends b{title=p(G);i18n=p(g);updateTitle(t){let o=this.buildTitle(t);if(o){let i=`${this.i18n.t(o)} | Time Attendance System`;this.title.setTitle(i)}else this.title.setTitle("Time Attendance System")}static \u0275fac=(()=>{let t;return function(r){return(t||(t=P(e)))(r||e)}})();static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var w=class e{http=p(D);i18n=p(g);branchesService=p(J);departmentsService=p(Q);employeesService=p(K);shiftsService=p(X);vacationTypesService=p(Y);rolesService=p(Z);registry={};dataCache=new E({});constructor(){this.initializeCommonData()}registerModule(t,o){this.registry[t]=o}getModuleConfig(t){return this.registry[t]||null}getAllModules(){return Object.keys(this.registry)}initializeCommonData(){this.loadBranches(),this.initShiftsData(),this.initRolesData()}loadBranches(){this.branchesService.getBranches(1,1e3).subscribe({next:t=>{let o=this.dataCache.value;this.dataCache.next(u(h({},o),{branches:t.items}))},error:t=>{console.error("Failed to load branches for filter registry:",t)}})}loadDepartments(t){return this.departmentsService.getDepartments(t?{branchId:t}:{}).pipe(y(o=>{let r=this.dataCache.value,i=t?`departments_${t}`:"departments_all";return this.dataCache.next(u(h({},r),{[i]:o})),o}))}loadEmployees(t){return this.employeesService.getEmployeesForSelection(t).pipe(y(o=>{let r=this.dataCache.value,i=t?`employees_${t}`:"employees_all";return this.dataCache.next(u(h({},r),{[i]:o})),o}))}loadShifts(t){return this.shiftsService.getShifts(1,1e3).pipe(y(o=>{let r=o.items||[],i=this.dataCache.value,m=t?`shifts_${t}`:"shifts_all";return this.dataCache.next(u(h({},i),{[m]:r,shifts:r})),r}))}initShiftsData(){this.loadShifts().subscribe({error:t=>{console.error("Failed to load shifts for filter registry:",t)}})}loadVacationTypes(t){return this.vacationTypesService.getVacationTypes({branchId:t}).pipe(y(o=>{let r=o.items||[],i=this.dataCache.value,m=t?`vacationTypes_${t}`:"vacationTypes_all";return this.dataCache.next(u(h({},i),{[m]:r,vacationTypes:r})),r}))}loadRoles(){return this.rolesService.getRoles().pipe(y(t=>{let o=this.dataCache.value;return this.dataCache.next(u(h({},o),{roles:t})),t}))}initRolesData(){this.loadRoles().subscribe({error:t=>{console.error("Failed to load roles for filter registry:",t)}})}getCachedData(){return this.dataCache.asObservable()}buildFilterOptions(t,o,r){let i={value:"",label:this.i18n.t("common.all")};switch(t.type){case"branch":return[i,...(o.branches||[]).map(n=>({value:n.id.toString(),label:n.name,subLabel:n.code}))];case"department":let m=t.dependsOn&&r?r[t.dependsOn]:null,d=m?`departments_${m}`:"departments_all";return[i,...(o[d]||[]).map(n=>({value:n.id.toString(),label:n.name,subLabel:n.nameAr}))];case"employee":let M=t.dependsOn&&r?r[t.dependsOn]:null,ae=M?`employees_${M}`:"employees_all";return[i,...(o[ae]||[]).map(n=>({value:n.id.toString(),label:n.name,subLabel:n.employeeNumber}))];case"status":return t.statusEnum&&t.statusLabels?[i,...Object.keys(t.statusEnum).filter(n=>isNaN(Number(n))).map(n=>({value:t.statusEnum[n],label:this.i18n.t(t.statusLabels[n]||n)}))]:[i];case"shift":let ie=t.dependsOn?`shifts_${o[t.dependsOn]}`:"shifts_all";return[i,...(o[ie]||o.shifts||[]).map(n=>({value:n.id.toString(),label:n.name,subLabel:n.description||n.shiftType}))];case"vacationType":let ne=t.dependsOn?`vacationTypes_${o[t.dependsOn]}`:"vacationTypes_all";return[i,...(o[ne]||o.vacationTypes||[]).map(n=>({value:n.id.toString(),label:n.name,subLabel:n.nameAr}))];case"role":return[i,...(o.roles||[]).map(n=>({value:n.id.toString(),label:n.name,subLabel:n.type}))];case"custom":return t.options?.map(n=>u(h({},n),{label:this.i18n.t(n.label)}))||[i];default:return[i]}}buildActiveInactiveOptions(){return[{value:"",label:this.i18n.t("common.all")},{value:"true",label:this.i18n.t("common.active")},{value:"false",label:this.i18n.t("common.inactive")}]}clearCache(){this.dataCache.next({}),this.initializeCommonData()}static \u0275fac=function(o){return new(o||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var R=class e{filterRegistry=p(w);constructor(){this.initializeConfigurations()}initializeConfigurations(){Object.keys(S).forEach(t=>{this.filterRegistry.registerModule(t,S[t])}),console.log(`Registered ${Object.keys(S).length} filter configurations`)}reinitialize(){this.initializeConfigurations()}getRegisteredModules(){return this.filterRegistry.getAllModules()}static \u0275fac=function(o){return new(o||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var oe={providers:[q(),L({eventCoalescing:!0}),U(ee,N(),$()),H(z([te])),{provide:b,useClass:_},{provide:W,useFactory:e=>()=>(console.log("Initializing filter configurations..."),Promise.resolve()),deps:[R],multi:!0}]};var x=class e{constructor(t){this.i18n=t}ngOnInit(){let t=localStorage.getItem("app_locale")||"en";this.i18n.setLocale(t)}static \u0275fac=function(o){return new(o||e)(O(g))};static \u0275cmp=I({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,r){o&1&&V(0,"router-outlet")},dependencies:[B],encapsulation:2})};j(x,oe).catch(e=>console.error(e));
