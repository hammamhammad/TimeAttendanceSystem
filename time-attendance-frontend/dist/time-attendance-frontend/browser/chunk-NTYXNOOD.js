import"./chunk-BLUZVNQL.js";import{a as G}from"./chunk-53CNHAPR.js";import{a as Y}from"./chunk-VPCY7LU7.js";import{a as B}from"./chunk-MRSJZ7DK.js";import"./chunk-OCNPGNI4.js";import{a as U}from"./chunk-NGEOUUU5.js";import"./chunk-BSEKTODI.js";import"./chunk-HUSARQNL.js";import"./chunk-QXVLGI72.js";import{a as R}from"./chunk-KREF7F7A.js";import{a as x}from"./chunk-LPMX3N5X.js";import{a as u,b as h}from"./chunk-LDWMK676.js";import"./chunk-IE5XUEO5.js";import{a as V}from"./chunk-C3GHRZ52.js";import"./chunk-YQIE4CGE.js";import{a as F}from"./chunk-JNFDDMIM.js";import"./chunk-ZURD34HZ.js";import{a as D}from"./chunk-GEGVYT7O.js";import"./chunk-A6EM5NV6.js";import{A as f,E as p,Fb as $,Ga as g,Ha as S,Ia as v,Ja as A,L as r,Q as T,U as L,V as y,aa as w,ba as M,cb as N,ga as _,ha as l,ia as s,ja as E,qa as z,sa as b,ua as m,y as d,z as C}from"./chunk-5OFYUWMA.js";import{a as P,b as I,e as k}from"./chunk-YMDWBF3A.js";function q(o,e){if(o&1&&(l(0,"div",2)(1,"div",4)(2,"div",5),g(3),s()(),l(4,"div")(5,"div",3),g(6),s(),l(7,"small",6),g(8),s()()()),o&2){let t=m().$implicit,n=m();r(3),v(" ",n.getInitials(t.firstName,t.lastName)," "),r(3),A("",t.firstName," ",t.lastName),r(2),S(t.email)}}function J(o,e){if(o&1&&(l(0,"span",3),g(1),s()),o&2){let t=m().$implicit;r(),v(" ",t.employeeNumber," ")}}function K(o,e){if(o&1&&(l(0,"div")(1,"div"),g(2),s(),l(3,"small",6),g(4),s()()),o&2){let t=m().$implicit;r(2),S(t.departmentName),r(2),S(t.branchName)}}function Q(o,e){if(o&1&&(l(0,"span"),E(1,"app-status-badge",7),s()),o&2){let t=m().$implicit,n=m();r(),_("status",n.getEmploymentStatusBadgeStatus(t.employmentStatus))("label",n.getEmploymentStatusLabel(t.employmentStatus))}}function X(o,e){if(o&1&&(l(0,"span"),g(1),s()),o&2){let t=m().$implicit,n=m();r(),v(" ",n.getGenderLabel(t.gender)," ")}}function Z(o,e){if(o&1&&(l(0,"span"),E(1,"app-status-badge",7),s()),o&2){let t=m().$implicit,n=m();r(),_("status","info")("label",n.getWorkLocationLabel(t.workLocationType))}}function ee(o,e){if(o&1&&(l(0,"span"),E(1,"app-status-badge",8),s()),o&2){let t=m().$implicit;r(),_("status",t.isActive?"active":"inactive")("label",t.isActive?"Active":"Inactive")("showIcon",!0)}}function te(o,e){if(o&1&&(l(0,"span"),g(1),s()),o&2){let t=m().$implicit,n=m();r(),v(" ",n.formatDate(t.hireDate)," ")}}function ne(o,e){if(o&1&&(l(0,"div"),g(1),s()),o&2){let t=m(2).$implicit;r(),S(t.currentShiftName)}}function oe(o,e){o&1&&(l(0,"span",6),g(1,"No shift assigned"),s())}function ie(o,e){if(o&1&&(l(0,"div"),w(1,ne,2,1,"div"),w(2,oe,2,0,"span",6),s()),o&2){let t=m().$implicit;r(),M(t.currentShiftName?1:-1),r(),M(t.currentShiftName?-1:2)}}function ae(o,e){if(o&1&&w(0,q,9,4,"div",2)(1,J,2,1,"span",3)(2,K,5,2,"div")(3,Q,2,2,"span")(4,X,2,1,"span")(5,Z,2,2,"span")(6,ee,2,3,"span")(7,te,2,1,"span")(8,ie,3,2,"div"),o&2){let t,n=e.column;M((t=n.key)==="name"?0:t==="employeeCode"?1:t==="department"?2:t==="employmentStatus"?3:t==="gender"?4:t==="workLocation"?5:t==="status"?6:t==="hireDate"?7:t==="shift"?8:-1)}}var O=class o{i18n=d(D);permissionService=d(x);employees=[];loading=p(!1);currentPage=p(1);totalPages=p(1);totalItems=p(0);pageSize=p(10);viewEmployee=new y;editEmployee=new y;deleteEmployee=new y;changeShift=new y;pageChange=new y;pageSizeChange=new y;selectionChange=new y;sortChange=new y;columns=[{key:"name",label:"Employee",width:"250px",sortable:!0,priority:"high",mobileLabel:"Employee"},{key:"employeeCode",label:"Code",width:"100px",sortable:!0,priority:"high",mobileLabel:"Code"},{key:"department",label:"Department",width:"200px",sortable:!0,priority:"medium",hideOnMobile:!1,mobileLabel:"Dept"},{key:"employmentStatus",label:"Employment",width:"120px",align:"center",sortable:!0,priority:"low",hideOnMobile:!0,mobileLabel:"Status"},{key:"workLocation",label:"Location",width:"100px",align:"center",priority:"low",hideOnMobile:!0,mobileLabel:"Location"},{key:"shift",label:"Current Shift",width:"150px",priority:"medium",hideOnMobile:!1,mobileLabel:"Shift"},{key:"hireDate",label:"Hire Date",width:"120px",sortable:!0,priority:"low",hideOnMobile:!0,mobileLabel:"Hired"},{key:"status",label:"Status",width:"100px",align:"center",sortable:!0,priority:"high",mobileLabel:"Status"}];get actions(){let e=[];return this.permissionService.has(`${h.EMPLOYEE}.${u.READ}`)&&e.push({key:"view",label:"View",icon:"fa-eye",color:"info"}),this.permissionService.has(`${h.EMPLOYEE}.${u.UPDATE}`)&&(e.push({key:"edit",label:"Edit",icon:"fa-edit",color:"primary"}),e.push({key:"changeShift",label:"Change Shift",icon:"fa-clock",color:"warning"})),this.permissionService.has(`${h.EMPLOYEE}.${u.DELETE}`)&&e.push({key:"delete",label:"Delete",icon:"fa-trash",color:"danger"}),e}onActionClick(e){let{action:t,item:n}=e;switch(t){case"view":this.viewEmployee.emit(n);break;case"edit":this.editEmployee.emit(n);break;case"delete":this.deleteEmployee.emit(n);break;case"changeShift":this.changeShift.emit(n);break}}onPageChange(e){this.pageChange.emit(e)}onPageSizeChange(e){this.pageSizeChange.emit(e)}onSelectionChange(e){this.selectionChange.emit(e)}onSortChange(e){this.sortChange.emit(e)}getInitials(e,t){let n=e?e.charAt(0).toUpperCase():"",a=t?t.charAt(0).toUpperCase():"";return n+a}getEmploymentStatusLabel(e){return{1:"Active",2:"Full Time",3:"Part Time",4:"Contract",5:"Intern",6:"Consultant",7:"Terminated",8:"Inactive"}[e]||"Unknown"}getEmploymentStatusClass(e){return{1:"bg-success",2:"bg-success",3:"bg-info",4:"bg-warning",5:"bg-primary",6:"bg-light text-dark border",7:"bg-danger",8:"bg-light text-dark border"}[e]||"bg-light text-dark border"}getEmploymentStatusBadgeStatus(e){return{1:"success",2:"success",3:"info",4:"warning",5:"primary",6:"secondary",7:"danger",8:"secondary"}[e]||"secondary"}getGenderLabel(e){return e===1?"Male":"Female"}getWorkLocationLabel(e){return{1:"On-site",2:"Remote",3:"Hybrid"}[e]||"Unknown"}formatDate(e){if(!e)return"";let t=e.match(/^(\d{4})-(\d{2})-(\d{2})/);if(t){let[,a,i,c]=t;return new Date(parseInt(a),parseInt(i)-1,parseInt(c)).toLocaleDateString()}return new Date(e).toLocaleDateString()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-employee-table"]],inputs:{employees:"employees",loading:"loading",currentPage:"currentPage",totalPages:"totalPages",totalItems:"totalItems",pageSize:"pageSize"},outputs:{viewEmployee:"viewEmployee",editEmployee:"editEmployee",deleteEmployee:"deleteEmployee",changeShift:"changeShift",pageChange:"pageChange",pageSizeChange:"pageSizeChange",selectionChange:"selectionChange",sortChange:"sortChange"},decls:3,vars:9,consts:[["cellTemplate",""],[3,"actionClick","pageChange","pageSizeChange","selectionChange","sortChange","data","columns","actions","loading","currentPage","totalPages","totalItems","pageSize","emptyMessage"],[1,"d-flex","align-items-center"],[1,"fw-medium"],[1,"avatar-sm","me-2"],[1,"avatar-initial","bg-primary","text-white","rounded-circle"],[1,"text-muted"],[3,"status","label"],[3,"status","label","showIcon"]],template:function(t,n){if(t&1){let a=z();l(0,"app-data-table",1),b("actionClick",function(c){return C(a),f(n.onActionClick(c))})("pageChange",function(c){return C(a),f(n.onPageChange(c))})("pageSizeChange",function(c){return C(a),f(n.onPageSizeChange(c))})("selectionChange",function(c){return C(a),f(n.onSelectionChange(c))})("sortChange",function(c){return C(a),f(n.onSortChange(c))}),L(1,ae,9,1,"ng-template",null,0,N),s()}t&2&&_("data",n.employees)("columns",n.columns)("actions",n.actions)("loading",n.loading)("currentPage",n.currentPage)("totalPages",n.totalPages)("totalItems",n.totalItems)("pageSize",n.pageSize)("emptyMessage","No employees found")},dependencies:[Y,U],styles:[".avatar-sm[_ngcontent-%COMP%]{width:2rem;height:2rem}.avatar-initial[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:.875rem;font-weight:600}"]})};var H=class o{i18n=d(D);permissionService=d(x);employeesService=d(G);notificationService=d(F);confirmationService=d(R);router=d($);employees=p([]);loading=p(!1);totalCount=p(0);currentPage=p(1);pageSize=p(10);totalPages=p(0);currentFilter={};PERMISSIONS={EMPLOYEE_CREATE:`${h.EMPLOYEE}.${u.CREATE}`,EMPLOYEE_READ:`${h.EMPLOYEE}.${u.READ}`,EMPLOYEE_UPDATE:`${h.EMPLOYEE}.${u.UPDATE}`,EMPLOYEE_DELETE:`${h.EMPLOYEE}.${u.DELETE}`,EMPLOYEE_MANAGE:`${h.EMPLOYEE}.${u.MANAGE}`};ngOnInit(){this.loadEmployees()}loadEmployees(){this.loading.set(!0);let e=P({page:this.currentPage(),pageSize:this.pageSize()},this.currentFilter);this.employeesService.getEmployees(e).subscribe({next:t=>{this.employees.set(t.items),this.totalCount.set(t.totalCount),this.totalPages.set(t.totalPages),this.loading.set(!1)},error:t=>{console.error("Failed to load employees:",t),this.loading.set(!1)}})}onSearchChange(e){this.currentFilter=I(P({},this.currentFilter),{search:e}),this.currentPage.set(1),this.loadEmployees()}onAddEmployee(){this.router.navigate(["/employees/create"])}onRefreshData(){this.currentFilter={},this.currentPage.set(1),this.loadEmployees()}onViewEmployee(e){this.router.navigate(["/employees",e.id,"view"])}onEditEmployee(e){this.router.navigate(["/employees",e.id,"edit"])}onDeleteEmployee(e){return k(this,null,function*(){(yield this.confirmationService.confirm({title:this.i18n.t("employees.delete_employee"),message:`Are you sure you want to delete "${e.firstName} ${e.lastName}"? This action cannot be undone.`,confirmText:this.i18n.t("common.delete"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-danger",icon:"fa-trash",iconClass:"text-danger"})).confirmed&&this.employeesService.deleteEmployee(e.id).subscribe({next:()=>{this.loadEmployees(),this.notificationService.success(this.i18n.t("app.success"),this.i18n.t("employees.employee_deleted"))},error:n=>{console.error("Failed to delete employee:",n),this.notificationService.error(this.i18n.t("app.error"),this.i18n.t("errors.server"))}})})}onChangeShift(e){this.router.navigate(["/employees",e.id,"change-shift"])}onPageChange(e){this.currentPage.set(e),this.loadEmployees()}onPageSizeChange(e){this.pageSize.set(e),this.currentPage.set(1),this.loadEmployees()}onSelectionChange(e){console.log("Selected employees:",e)}onSortChange(e){this.currentFilter=I(P({},this.currentFilter),{sortBy:e.column,sortDirection:e.direction}),this.currentPage.set(1),this.loadEmployees()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-employees"]],decls:4,vars:13,consts:[[1,"employees-page"],[3,"title"],[3,"searchChange","add","refresh","searchPlaceholder","showAddButton","addButtonText","showRefreshButton","refreshButtonText","refreshing"],[3,"viewEmployee","editEmployee","deleteEmployee","changeShift","pageChange","pageSizeChange","selectionChange","sortChange","employees","loading","currentPage","totalPages","totalItems","pageSize"]],template:function(t,n){t&1&&(l(0,"div",0),E(1,"app-page-header",1),l(2,"app-unified-filter",2),b("searchChange",function(i){return n.onSearchChange(i)})("add",function(){return n.onAddEmployee()})("refresh",function(){return n.onRefreshData()}),s(),l(3,"app-employee-table",3),b("viewEmployee",function(i){return n.onViewEmployee(i)})("editEmployee",function(i){return n.onEditEmployee(i)})("deleteEmployee",function(i){return n.onDeleteEmployee(i)})("changeShift",function(i){return n.onChangeShift(i)})("pageChange",function(i){return n.onPageChange(i)})("pageSizeChange",function(i){return n.onPageSizeChange(i)})("selectionChange",function(i){return n.onSelectionChange(i)})("sortChange",function(i){return n.onSortChange(i)}),s()()),t&2&&(r(),_("title",n.i18n.t("employees.title")),r(),_("searchPlaceholder",n.i18n.t("employees.search_placeholder"))("showAddButton",!0)("addButtonText",n.i18n.t("employees.add_employee"))("showRefreshButton",!0)("refreshButtonText",n.i18n.t("common.refresh"))("refreshing",n.loading()),r(),_("employees",n.employees())("loading",n.loading)("currentPage",n.currentPage)("totalPages",n.totalPages)("totalItems",n.totalCount)("pageSize",n.pageSize))},dependencies:[B,O,V],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.modal[_ngcontent-%COMP%]{background-color:#00000080}.employee-avatar[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover}.badge[_ngcontent-%COMP%]{font-size:.75em}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.pagination[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:0}.search-filters[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .search-filters[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border-radius:.375rem}.employee-status.active[_ngcontent-%COMP%]{color:#198754}.employee-status.inactive[_ngcontent-%COMP%]{color:#6c757d}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.125rem .25rem}.modal-lg[_ngcontent-%COMP%]{max-width:95%}}"]})};export{H as EmployeesComponent};
