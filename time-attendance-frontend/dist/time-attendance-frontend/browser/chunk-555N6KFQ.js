import{a as N}from"./chunk-7CNFAB45.js";import{a as A}from"./chunk-EHNHB6RU.js";import{a as M}from"./chunk-JWR47IJL.js";import"./chunk-QHBTYDS6.js";import{a as I}from"./chunk-32LY3B2D.js";import"./chunk-BSEKTODI.js";import"./chunk-HUSARQNL.js";import"./chunk-QXVLGI72.js";import{a as L}from"./chunk-7TWIWOLV.js";import{a as D}from"./chunk-4335LQ3A.js";import"./chunk-LDWMK676.js";import"./chunk-HCDX4O2L.js";import{a as V}from"./chunk-6B6T6MZ3.js";import"./chunk-HF7V7ZC6.js";import{a as T}from"./chunk-RUOWTK24.js";import"./chunk-HZR4WXEY.js";import{g as x}from"./chunk-O3U3HUCY.js";import{a as S}from"./chunk-77FC2LKR.js";import"./chunk-A6EM5NV6.js";import{$a as v,$b as w,Eb as m,Gb as c,Ha as R,La as y,T as a,Tb as q,Y as s,Z as l,_a as W,eb as u,fa as g,fb as f,gb as k,hb as h,ob as b,qb as C,sb as n,wa as _}from"./chunk-IGEIB4M6.js";import"./chunk-YMDWBF3A.js";var F=()=>[];function $(i,e){if(i&1&&m(0),i&2){let t=n().$implicit;c(" ",t.employeeName||"N/A"," ")}}function P(i,e){if(i&1&&m(0),i&2){let t=n().$implicit,o=n();c(" ",o.formatDate(t.startDate)," ")}}function j(i,e){if(i&1&&m(0),i&2){let t=n().$implicit,o=n();c(" ",o.formatDate(t.endDate)," ")}}function O(i,e){if(i&1&&m(0),i&2){let t=n().$implicit;c(" ",t.workingDaysCount," ")}}function B(i,e){if(i&1&&h(0,"app-status-badge",5),i&2){let t=n().$implicit,o=n();u("status",o.getStatusVariant(t.status))("label",o.getStatusText(t.status))}}function H(i,e){if(i&1&&m(0),i&2){let t=n(),o=t.$implicit,r=t.column;c(" ",o[r.key]," ")}}function U(i,e){if(i&1&&W(0,$,1,1)(1,P,1,1)(2,j,1,1)(3,O,1,1)(4,B,1,2,"app-status-badge",5)(5,H,1,1),i&2){let t=e.column;v(t.key==="employeeName"?0:t.key==="startDate"?1:t.key==="endDate"?2:t.key==="workingDaysCount"?3:t.key==="status"?4:5)}}var E=class i{service=a(N);router=a(x);notification=a(T);confirmation=a(L);permissionService=a(D);i18n=a(S);requests=g([]);loading=g(!1);tableColumns=[{key:"employeeName",label:this.i18n.t("remoteWork.request.employee"),sortable:!0,width:"25%"},{key:"startDate",label:this.i18n.t("remoteWork.request.startDate"),sortable:!0,width:"15%"},{key:"endDate",label:this.i18n.t("remoteWork.request.endDate"),sortable:!0,width:"15%"},{key:"workingDaysCount",label:this.i18n.t("remoteWork.request.workingDays"),sortable:!0,width:"15%",align:"center"},{key:"status",label:this.i18n.t("common.status"),sortable:!0,width:"15%",align:"center"}];tableActions=[{key:"view",label:this.i18n.t("common.view"),icon:"fa-eye",color:"info"},{key:"edit",label:this.i18n.t("common.edit"),icon:"fa-edit",color:"primary"},{key:"cancel",label:this.i18n.t("remoteWork.request.cancel"),icon:"fa-ban",color:"warning"}];ngOnInit(){this.loadRequests()}loadRequests(){this.loading.set(!0),this.service.getAll().subscribe({next:e=>{this.requests.set(e),this.loading.set(!1)},error:e=>{this.notification.error(this.i18n.t("remoteWork.request.loadError")),this.loading.set(!1)}})}onView(e){this.router.navigate(["/remote-work",e.id,"view"])}onEdit(e){this.router.navigate(["/remote-work/edit",e.id])}onCancel(e){this.confirmation.confirm({title:this.i18n.t("remoteWork.request.cancelConfirm"),message:this.i18n.t("remoteWork.request.cancelMessage"),confirmText:this.i18n.t("common.yes"),cancelText:this.i18n.t("common.no")}).then(t=>{t.confirmed&&this.service.cancel(e.id).subscribe({next:()=>{this.notification.success(this.i18n.t("remoteWork.request.success.cancelled")),this.loadRequests()},error:()=>{this.notification.error(this.i18n.t("remoteWork.request.errors.cancel_failed"))}})})}onCreate(){this.router.navigate(["/remote-work/create"])}onSearchChange(e){console.log("Search term:",e)}onFiltersChange(e){console.log("Filters changed:",e)}onRefreshData(){this.loadRequests()}onActionClick(e){let{action:t,item:o}=e;switch(t){case"view":this.onView(o);break;case"edit":this.onEdit(o);break;case"cancel":this.onCancel(o);break}}getStatusText(e){return{0:this.i18n.t("remoteWork.status.pending"),1:this.i18n.t("remoteWork.status.approved"),2:this.i18n.t("remoteWork.status.rejected"),3:this.i18n.t("remoteWork.status.cancelled")}[e]||""}getStatusVariant(e){return{0:"warning",1:"success",2:"danger",3:"secondary"}[e]||"secondary"}formatDate(e){return e?new Date(e).toLocaleDateString():""}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-remote-work-list"]],decls:6,vars:9,consts:[["cellTemplate",""],[1,"app-list-page"],[3,"title"],["moduleName","remote-work-requests",3,"searchChange","filtersChange","add","refresh","refreshing"],[3,"actionClick","data","columns","actions","loading","emptyTitle","emptyMessage"],[3,"status","label"]],template:function(t,o){if(t&1){let r=b();f(0,"div",1),h(1,"app-page-header",2),f(2,"app-unified-filter",3),C("searchChange",function(p){return s(r),l(o.onSearchChange(p))})("filtersChange",function(p){return s(r),l(o.onFiltersChange(p))})("add",function(){return s(r),l(o.onCreate())})("refresh",function(){return s(r),l(o.onRefreshData())}),k(),f(3,"app-data-table",4),C("actionClick",function(p){return s(r),l(o.onActionClick(p))}),y(4,U,6,1,"ng-template",null,0,w),k()()}t&2&&(_(),u("title",o.i18n.t("remoteWork.request.title")),_(),u("refreshing",o.loading()),_(),u("data",o.requests()||q(8,F))("columns",o.tableColumns)("actions",o.tableActions)("loading",o.loading)("emptyTitle",o.i18n.t("remoteWork.request.noData"))("emptyMessage",o.i18n.t("remoteWork.request.noDataMessage")))},dependencies:[A,V,I,M],encapsulation:2})};export{E as RemoteWorkListComponent};
