import{a as Y}from"./chunk-BDZLNZZ6.js";import{a as z}from"./chunk-HBA4LCS7.js";import{c as x,e as V,f as q,g as N,h as P,i as w,o as F,p as Q,r as U,u as L,x as k}from"./chunk-7QCK55IR.js";import{b as W}from"./chunk-AS5QRUY4.js";import{$ as i,Aa as M,E as n,Ea as _,Fa as C,Ga as T,H as y,J as h,O as I,U as f,V as u,Y as b,Z as O,_ as d,aa as o,ba as S,fb as A,ka as g,ma as E,ta as v,wa as l,xa as m,ya as c,z as D,za as R}from"./chunk-LDUBOZPL.js";var j=(a,t)=>t.id;function G(a,t){if(a&1&&(i(0,"option",8),l(1),o()),a&2){let r=t.$implicit;d("value",r.id),n(),M("",r.firstName," ",r.lastName," (",r.employeeNumber,")")}}function H(a,t){if(a&1&&(i(0,"div",9),l(1),o()),a&2){let r=E();n(),m(r.formErrors.employeeId)}}function J(a,t){if(a&1&&(i(0,"option",8),l(1),o()),a&2){let r=t.$implicit;d("value",r.id),n(),R("",r.name," (",r.code,")")}}function K(a,t){if(a&1&&(i(0,"div",9),l(1),o()),a&2){let r=E();n(),m(r.formErrors.vacationTypeId)}}function X(a,t){if(a&1&&(i(0,"div",9),l(1),o()),a&2){let r=E();n(),m(r.formErrors.startDate)}}function Z(a,t){if(a&1&&(i(0,"div",9),l(1),o()),a&2){let r=E();n(),m(r.formErrors.endDate)}}function $(a,t){a&1&&S(0,"i",24)}function ee(a,t){a&1&&S(0,"i",25)}var B=class a{constructor(t,r,e){this.vacationTypesService=t;this.employeesService=r;this.i18n=e}vacationRequest;loading=!1;save=new I;cancel=new I;formData={employeeId:0,vacationTypeId:0,startDate:new Date,endDate:new Date,reason:"",notes:""};vacationTypes=D([]);employees=D([]);formErrors={};ngOnInit(){this.loadVacationTypes(),this.loadEmployees(),this.vacationRequest&&(this.formData={employeeId:this.vacationRequest.employeeId,vacationTypeId:this.vacationRequest.vacationTypeId,startDate:new Date(this.vacationRequest.startDate),endDate:new Date(this.vacationRequest.endDate),reason:this.vacationRequest.reason||"",notes:this.vacationRequest.notes||""})}loadVacationTypes(){this.vacationTypesService.getVacationTypes(!0).subscribe({next:t=>{this.vacationTypes.set(t.vacationTypes)},error:t=>{console.error("Error loading vacation types:",t)}})}loadEmployees(){this.employeesService.getEmployees().subscribe({next:t=>{this.employees.set(t.items)},error:t=>{console.error("Error loading employees:",t)}})}onSubmit(){this.validateForm()&&this.save.emit(this.formData)}onCancel(){this.cancel.emit()}validateForm(){this.formErrors={};let t=!0;return(!this.formData.employeeId||this.formData.employeeId===0)&&(this.formErrors.employeeId=this.i18n.t("VACATION_REQUESTS.VALIDATION.EMPLOYEE_REQUIRED"),t=!1),(!this.formData.vacationTypeId||this.formData.vacationTypeId===0)&&(this.formErrors.vacationTypeId=this.i18n.t("VACATION_REQUESTS.VALIDATION.VACATION_TYPE_REQUIRED"),t=!1),this.formData.startDate||(this.formErrors.startDate=this.i18n.t("VACATION_REQUESTS.VALIDATION.START_DATE_REQUIRED"),t=!1),this.formData.endDate||(this.formErrors.endDate=this.i18n.t("VACATION_REQUESTS.VALIDATION.END_DATE_REQUIRED"),t=!1),this.formData.startDate&&this.formData.endDate&&this.formData.endDate<this.formData.startDate&&(this.formErrors.endDate=this.i18n.t("VACATION_REQUESTS.VALIDATION.END_DATE_AFTER_START"),t=!1),t}getFormattedDate(t){return t.toISOString().split("T")[0]}setStartDate(t){this.formData.startDate=new Date(t)}setEndDate(t){this.formData.endDate=new Date(t)}static \u0275fac=function(r){return new(r||a)(y(Y),y(z),y(W))};static \u0275cmp=h({type:a,selectors:[["app-vacation-request-form"]],inputs:{vacationRequest:"vacationRequest",loading:"loading"},outputs:{save:"save",cancel:"cancel"},decls:56,vars:36,consts:[[1,"vacation-request-form",3,"ngSubmit"],[1,"form-section"],[1,"section-title"],[1,"form-row"],[1,"form-group"],["for","employee",1,"required"],["id","employee","name","employeeId","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","0"],[3,"value"],[1,"error-message"],["for","vacationType",1,"required"],["id","vacationType","name","vacationTypeId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","startDate",1,"required"],["id","startDate","type","date","required","",1,"form-control",3,"change","value"],["for","endDate",1,"required"],["id","endDate","type","date","required","",1,"form-control",3,"change","value"],["for","reason"],["id","reason","name","reason","rows","3",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","notes"],["id","notes","name","notes","rows","3",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-save"]],template:function(r,e){r&1&&(i(0,"form",0),g("ngSubmit",function(){return e.onSubmit()}),i(1,"div",1)(2,"h3",2),l(3),o(),i(4,"div",3)(5,"div",4)(6,"label",5),l(7),o(),i(8,"select",6),T("ngModelChange",function(s){return C(e.formData.employeeId,s)||(e.formData.employeeId=s),s}),i(9,"option",7),l(10),o(),b(11,G,2,4,"option",8,j),o(),f(13,H,2,1,"div",9),o(),i(14,"div",4)(15,"label",10),l(16),o(),i(17,"select",11),T("ngModelChange",function(s){return C(e.formData.vacationTypeId,s)||(e.formData.vacationTypeId=s),s}),i(18,"option",7),l(19),o(),b(20,J,2,3,"option",8,j),o(),f(22,K,2,1,"div",9),o()()(),i(23,"div",1)(24,"h3",2),l(25),o(),i(26,"div",3)(27,"div",4)(28,"label",12),l(29),o(),i(30,"input",13),g("change",function(s){return e.setStartDate(s.target.value)}),o(),f(31,X,2,1,"div",9),o(),i(32,"div",4)(33,"label",14),l(34),o(),i(35,"input",15),g("change",function(s){return e.setEndDate(s.target.value)}),o(),f(36,Z,2,1,"div",9),o()()(),i(37,"div",1)(38,"h3",2),l(39),o(),i(40,"div",4)(41,"label",16),l(42),o(),i(43,"textarea",17),T("ngModelChange",function(s){return C(e.formData.reason,s)||(e.formData.reason=s),s}),o()(),i(44,"div",4)(45,"label",18),l(46),o(),i(47,"textarea",19),T("ngModelChange",function(s){return C(e.formData.notes,s)||(e.formData.notes=s),s}),o()()(),i(48,"div",20)(49,"button",21),g("click",function(){return e.onCancel()}),S(50,"i",22),l(51),o(),i(52,"button",23),f(53,$,1,0,"i",24)(54,ee,1,0,"i",25),l(55),o()()()),r&2&&(n(3),m(e.i18n.t("VACATION_REQUESTS.FORM.BASIC_INFO")),n(4),c(" ",e.i18n.t("VACATION_REQUESTS.EMPLOYEE")," "),n(),v("error",e.formErrors.employeeId),_("ngModel",e.formData.employeeId),n(2),m(e.i18n.t("VACATION_REQUESTS.FORM.SELECT_EMPLOYEE")),n(),O(e.employees()),n(2),u(e.formErrors.employeeId?13:-1),n(3),c(" ",e.i18n.t("VACATION_REQUESTS.VACATION_TYPE")," "),n(),v("error",e.formErrors.vacationTypeId),_("ngModel",e.formData.vacationTypeId),n(2),m(e.i18n.t("VACATION_REQUESTS.FORM.SELECT_VACATION_TYPE")),n(),O(e.vacationTypes()),n(2),u(e.formErrors.vacationTypeId?22:-1),n(3),m(e.i18n.t("VACATION_REQUESTS.FORM.DATE_RANGE")),n(4),c(" ",e.i18n.t("VACATION_REQUESTS.START_DATE")," "),n(),v("error",e.formErrors.startDate),d("value",e.getFormattedDate(e.formData.startDate)),n(),u(e.formErrors.startDate?31:-1),n(3),c(" ",e.i18n.t("VACATION_REQUESTS.END_DATE")," "),n(),v("error",e.formErrors.endDate),d("value",e.getFormattedDate(e.formData.endDate)),n(),u(e.formErrors.endDate?36:-1),n(3),m(e.i18n.t("VACATION_REQUESTS.FORM.DETAILS")),n(3),c(" ",e.i18n.t("VACATION_REQUESTS.REASON")," "),n(),_("ngModel",e.formData.reason),d("placeholder",e.i18n.t("VACATION_REQUESTS.FORM.REASON_PLACEHOLDER")),n(3),c(" ",e.i18n.t("VACATION_REQUESTS.NOTES")," "),n(),_("ngModel",e.formData.notes),d("placeholder",e.i18n.t("VACATION_REQUESTS.FORM.NOTES_PLACEHOLDER")),n(2),d("disabled",e.loading),n(2),c(" ",e.i18n.t("COMMON.CANCEL")," "),n(),d("disabled",e.loading),n(),u(e.loading?53:54),n(2),c(" ",e.i18n.t("COMMON.SAVE")," "))},dependencies:[A,k,w,Q,U,x,F,V,q,L,P,N],styles:['.vacation-request-form[_ngcontent-%COMP%]{max-width:800px}.form-section[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:25px;border-bottom:1px solid #e9ecef}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none;margin-bottom:0}.section-title[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.2rem;font-weight:600;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #3498db;display:inline-block}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:0}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#2c3e50;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#e74c3c}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:2px solid #ddd;border-radius:6px;font-size:14px;background-color:#fff;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.form-control.error[_ngcontent-%COMP%]{border-color:#e74c3c}.form-control.error[_ngcontent-%COMP%]:focus{border-color:#e74c3c;box-shadow:0 0 0 3px #e74c3c1a}select.form-control[_ngcontent-%COMP%]{cursor:pointer}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:5px;display:block}.form-actions[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:flex-end;padding-top:30px;margin-top:30px;border-top:1px solid #e9ecef}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2980b9;transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#7f8c8d;transform:translateY(-1px)}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.vacation-request-form[_ngcontent-%COMP%]{max-width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}.form-control[_ngcontent-%COMP%]{padding:10px 12px}}']})};export{B as a};
