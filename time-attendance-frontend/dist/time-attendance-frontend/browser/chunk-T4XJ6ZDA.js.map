{
  "version": 3,
  "sources": ["src/app/pages/settings/workflows/workflows.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from '../../../../environments/environment';\r\nimport {\r\n  WorkflowDefinition,\r\n  WorkflowEntityType,\r\n  CreateWorkflowDefinitionRequest,\r\n  UpdateWorkflowDefinitionRequest,\r\n  PagedWorkflowResponse\r\n} from '../../../shared/models/workflow.model';\r\n\r\n/**\r\n * API response wrapper (matches backend Result<T> structure)\r\n */\r\ninterface ApiResponse<T> {\r\n  value: T;\r\n  isSuccess: boolean;\r\n  isFailure: boolean;\r\n  error?: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkflowsService {\r\n  private http = inject(HttpClient);\r\n  private baseUrl = `${environment.apiUrl}/api/v1/workflows`;\r\n\r\n  /**\r\n   * Get workflow definitions with pagination and filtering\r\n   */\r\n  getWorkflowDefinitions(\r\n    page: number = 1,\r\n    pageSize: number = 10,\r\n    entityType?: WorkflowEntityType | null,\r\n    branchId?: number | null,\r\n    isActive?: boolean | null\r\n  ): Observable<PagedWorkflowResponse<WorkflowDefinition>> {\r\n    let params = new HttpParams()\r\n      .set('page', page.toString())\r\n      .set('pageSize', pageSize.toString());\r\n\r\n    if (entityType !== null && entityType !== undefined) {\r\n      params = params.set('entityType', entityType);\r\n    }\r\n\r\n    if (branchId !== null && branchId !== undefined) {\r\n      params = params.set('branchId', branchId.toString());\r\n    }\r\n\r\n    if (isActive !== null && isActive !== undefined) {\r\n      params = params.set('isActive', isActive.toString());\r\n    }\r\n\r\n    return this.http.get<ApiResponse<PagedWorkflowResponse<WorkflowDefinition>>>(this.baseUrl, { params })\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Get a single workflow definition by ID\r\n   */\r\n  getWorkflowDefinitionById(id: number): Observable<WorkflowDefinition> {\r\n    return this.http.get<ApiResponse<WorkflowDefinition>>(`${this.baseUrl}/${id}`)\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Create a new workflow definition\r\n   */\r\n  createWorkflowDefinition(request: CreateWorkflowDefinitionRequest): Observable<number> {\r\n    return this.http.post<ApiResponse<number>>(this.baseUrl, request)\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Update an existing workflow definition\r\n   */\r\n  updateWorkflowDefinition(id: number, request: UpdateWorkflowDefinitionRequest): Observable<boolean> {\r\n    return this.http.put<ApiResponse<boolean>>(`${this.baseUrl}/${id}`, request)\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Delete a workflow definition (soft delete)\r\n   */\r\n  deleteWorkflowDefinition(id: number): Observable<boolean> {\r\n    return this.http.delete<ApiResponse<boolean>>(`${this.baseUrl}/${id}`)\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Activate a workflow definition\r\n   */\r\n  activateWorkflowDefinition(id: number): Observable<boolean> {\r\n    return this.http.post<ApiResponse<boolean>>(`${this.baseUrl}/${id}/activate`, {})\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Deactivate a workflow definition\r\n   */\r\n  deactivateWorkflowDefinition(id: number): Observable<boolean> {\r\n    return this.http.post<ApiResponse<boolean>>(`${this.baseUrl}/${id}/deactivate`, {})\r\n      .pipe(\r\n        map(response => response.value)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Get entity type display name\r\n   */\r\n  getEntityTypeDisplayName(entityType: WorkflowEntityType): string {\r\n    const displayNames: Record<WorkflowEntityType, string> = {\r\n      'Vacation': 'Vacation Request',\r\n      'Excuse': 'Excuse Request',\r\n      'RemoteWork': 'Remote Work Request',\r\n      'Overtime': 'Overtime Request',\r\n      'Timesheet': 'Timesheet',\r\n      'AttendanceCorrection': 'Attendance Correction'\r\n    };\r\n    return displayNames[entityType] || entityType;\r\n  }\r\n\r\n  /**\r\n   * Get all entity types for dropdown\r\n   */\r\n  getEntityTypes(): { value: WorkflowEntityType; label: string }[] {\r\n    return [\r\n      { value: 'Vacation', label: 'Vacation Request' },\r\n      { value: 'Excuse', label: 'Excuse Request' },\r\n      { value: 'RemoteWork', label: 'Remote Work Request' },\r\n      { value: 'Overtime', label: 'Overtime Request' },\r\n      { value: 'Timesheet', label: 'Timesheet' },\r\n      { value: 'AttendanceCorrection', label: 'Attendance Correction' }\r\n    ];\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AA0BM,IAAO,oBAAP,MAAO,kBAAgB;EACnB,OAAO,OAAO,UAAU;EACxB,UAAU,GAAG,YAAY,MAAM;;;;EAKvC,uBACE,OAAe,GACf,WAAmB,IACnB,YACA,UACA,UAAyB;AAEzB,QAAI,SAAS,IAAI,WAAU,EACxB,IAAI,QAAQ,KAAK,SAAQ,CAAE,EAC3B,IAAI,YAAY,SAAS,SAAQ,CAAE;AAEtC,QAAI,eAAe,QAAQ,eAAe,QAAW;AACnD,eAAS,OAAO,IAAI,cAAc,UAAU;IAC9C;AAEA,QAAI,aAAa,QAAQ,aAAa,QAAW;AAC/C,eAAS,OAAO,IAAI,YAAY,SAAS,SAAQ,CAAE;IACrD;AAEA,QAAI,aAAa,QAAQ,aAAa,QAAW;AAC/C,eAAS,OAAO,IAAI,YAAY,SAAS,SAAQ,CAAE;IACrD;AAEA,WAAO,KAAK,KAAK,IAA4D,KAAK,SAAS,EAAE,OAAM,CAAE,EAClG,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,0BAA0B,IAAU;AAClC,WAAO,KAAK,KAAK,IAAqC,GAAG,KAAK,OAAO,IAAI,EAAE,EAAE,EAC1E,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,yBAAyB,SAAwC;AAC/D,WAAO,KAAK,KAAK,KAA0B,KAAK,SAAS,OAAO,EAC7D,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,yBAAyB,IAAY,SAAwC;AAC3E,WAAO,KAAK,KAAK,IAA0B,GAAG,KAAK,OAAO,IAAI,EAAE,IAAI,OAAO,EACxE,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,yBAAyB,IAAU;AACjC,WAAO,KAAK,KAAK,OAA6B,GAAG,KAAK,OAAO,IAAI,EAAE,EAAE,EAClE,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,2BAA2B,IAAU;AACnC,WAAO,KAAK,KAAK,KAA2B,GAAG,KAAK,OAAO,IAAI,EAAE,aAAa,CAAA,CAAE,EAC7E,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,6BAA6B,IAAU;AACrC,WAAO,KAAK,KAAK,KAA2B,GAAG,KAAK,OAAO,IAAI,EAAE,eAAe,CAAA,CAAE,EAC/E,KACC,IAAI,cAAY,SAAS,KAAK,CAAC;EAErC;;;;EAKA,yBAAyB,YAA8B;AACrD,UAAM,eAAmD;MACvD,YAAY;MACZ,UAAU;MACV,cAAc;MACd,YAAY;MACZ,aAAa;MACb,wBAAwB;;AAE1B,WAAO,aAAa,UAAU,KAAK;EACrC;;;;EAKA,iBAAc;AACZ,WAAO;MACL,EAAE,OAAO,YAAY,OAAO,mBAAkB;MAC9C,EAAE,OAAO,UAAU,OAAO,iBAAgB;MAC1C,EAAE,OAAO,cAAc,OAAO,sBAAqB;MACnD,EAAE,OAAO,YAAY,OAAO,mBAAkB;MAC9C,EAAE,OAAO,aAAa,OAAO,YAAW;MACxC,EAAE,OAAO,wBAAwB,OAAO,wBAAuB;;EAEnE;;AA3H2B;cAAhB;mCAAA,mBAAgB;AAAA;cAAhB,uFAAA,mBAAgB,SAAhB,kBAAgB,WAAA,YAFf,OAAM,CAAA;AAEd,IAAO,mBAAP;;sEAAO,kBAAgB,CAAA;UAH5B;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
