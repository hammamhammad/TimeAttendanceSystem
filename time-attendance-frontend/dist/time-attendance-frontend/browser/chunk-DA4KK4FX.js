import{a as X}from"./chunk-FGI2IUJS.js";import{a as Q}from"./chunk-4G2EQDXN.js";import{a as Y}from"./chunk-4DSP56PF.js";import{b as A,c as V,e as N,f as q,g as B,h as L,i as G,j,t as U,u as z,x as J}from"./chunk-OTKBQKTN.js";import{b as K}from"./chunk-NJ656CWW.js";import{$ as i,Da as C,E as t,Ea as h,Fa as _,J as D,Ma as E,Na as F,U as p,V as x,_ as M,aa as n,ba as f,cb as T,eb as R,ia as I,ka as O,ma as d,mb as k,pb as H,t as y,u as v,ua as b,v as u,va as o,vb as W,wa as s,xa as c,ya as P,z as S}from"./chunk-6T5SYK5O.js";import{d as w}from"./chunk-DGAILPFQ.js";function $(l,r){if(l&1&&(i(0,"div",2)(1,"div",3),f(2,"i",4),i(3,"p",5),o(4),n()()()),l&2){let e=d();t(4),s(e.t("common.loading"))}}function ee(l,r){if(l&1&&(i(0,"div",9),f(1,"i",78),o(2),n()),l&2){let e=d(2);t(2),c(" ",e.t("settings.overtime.currentlyActive")," ")}}function te(l,r){if(l&1&&(i(0,"div",14),f(1,"i",79),o(2),n()),l&2){let e=d(2);t(2),c(" ",e.error()," ")}}function ie(l,r){if(l&1&&(i(0,"div",15),f(1,"i",79),i(2,"strong"),o(3),n(),o(4),n()),l&2){let e=d(2);t(3),s(e.t("settings.overtime.editActiveWarning")),t(),c(" ",e.t("settings.overtime.editActiveWarningMessage")," ")}}function ne(l,r){if(l&1&&(i(0,"div",30),o(1),n()),l&2){let e=d(2);t(),s(e.getError("general"))}}function oe(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("normalDayRate"))}}function re(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("publicHolidayRate"))}}function ae(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("offDayRate"))}}function le(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("maxPreShiftOvertimeHours"))}}function me(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("maxPostShiftOvertimeHours"))}}function se(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("minimumOvertimeMinutes"))}}function de(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("overtimeGracePeriodMinutes"))}}function ce(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("roundingIntervalMinutes"))}}function fe(l,r){if(l&1&&(i(0,"div",81)(1,"small",5),o(2),n(),i(3,"div"),o(4),E(5,"date"),n()()),l&2){let e=d(3);t(2),c("",e.t("common.lastModified"),":"),t(2),P("",e.originalConfig.updatedBy," on ",F(5,3,e.originalConfig.updatedAtUtc,"medium"))}}function ge(l,r){if(l&1&&(i(0,"span",82),o(1),n()),l&2){let e=d(3);t(),s(e.t("settings.overtime.active"))}}function ve(l,r){if(l&1&&(i(0,"span",83),o(1),n()),l&2){let e=d(3);t(),s(e.t("settings.overtime.inactive"))}}function ue(l,r){if(l&1&&(i(0,"div",19)(1,"div",20)(2,"h5",21),f(3,"i",80),o(4),n()(),i(5,"div",23)(6,"div",81)(7,"small",5),o(8),n(),i(9,"div"),o(10),E(11,"date"),n()(),p(12,fe,6,6,"div",81),i(13,"div",81)(14,"small",5),o(15),n(),i(16,"div"),p(17,ge,2,1,"span",82)(18,ve,2,1,"span",83),n()()()()),l&2){let e=d(2);t(4),c(" ",e.t("settings.overtime.configurationInfo")," "),t(4),c("",e.t("common.created"),":"),t(2),P("",e.originalConfig.createdBy," on ",F(11,7,e.originalConfig.createdAtUtc,"medium")),t(2),x(e.originalConfig.updatedAtUtc?12:-1),t(3),c("",e.t("settings.overtime.status"),":"),t(2),x(e.originalConfig.isActive?17:18)}}function pe(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("effectiveFromDate"))}}function xe(l,r){if(l&1&&(i(0,"div",39),o(1),n()),l&2){let e=d(2);t(),s(e.getError("effectiveToDate"))}}function Ce(l,r){l&1&&f(0,"i",76)}function he(l,r){l&1&&f(0,"i",77)}function _e(l,r){if(l&1){let e=I();i(0,"div",6)(1,"div")(2,"h2",7),o(3),n(),i(4,"p",8),o(5),n(),p(6,ee,3,1,"div",9),n(),i(7,"div")(8,"button",10),O("click",function(){v(e);let a=d();return u(a.onCancel())}),f(9,"i",11),o(10),n(),i(11,"button",12),O("click",function(){v(e);let a=d();return u(a.onReset())}),f(12,"i",13),o(13),n()()(),p(14,te,3,1,"div",14),p(15,ie,5,2,"div",15),i(16,"form",16,0),O("ngSubmit",function(){v(e);let a=d();return u(a.onSubmit())}),i(18,"div",17)(19,"div",18)(20,"div",19)(21,"div",20)(22,"h5",21),f(23,"i",22),o(24),n()(),i(25,"div",23)(26,"div",17)(27,"div",24)(28,"div",25)(29,"input",26),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.enablePreShiftOvertime,a)||(m.configForm.enablePreShiftOvertime=a),u(a)}),n(),i(30,"label",27)(31,"strong"),o(32),n(),f(33,"br"),i(34,"small",5),o(35),n()()()(),i(36,"div",24)(37,"div",25)(38,"input",28),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.enablePostShiftOvertime,a)||(m.configForm.enablePostShiftOvertime=a),u(a)}),n(),i(39,"label",29)(40,"strong"),o(41),n(),f(42,"br"),i(43,"small",5),o(44),n()()()()(),p(45,ne,2,1,"div",30),n()(),i(46,"div",19)(47,"div",20)(48,"h5",21),f(49,"i",31),o(50),n()(),i(51,"div",23)(52,"div",17)(53,"div",32)(54,"div",33)(55,"label",34),o(56),i(57,"span",35),o(58,"*"),n()(),i(59,"div",36)(60,"input",37),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.normalDayRate,a)||(m.configForm.normalDayRate=a),u(a)}),n(),i(61,"span",38),o(62,"x"),n()(),p(63,oe,2,1,"div",39),i(64,"div",40),o(65),n()()(),i(66,"div",32)(67,"div",33)(68,"label",41),o(69),i(70,"span",35),o(71,"*"),n()(),i(72,"div",36)(73,"input",42),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.publicHolidayRate,a)||(m.configForm.publicHolidayRate=a),u(a)}),n(),i(74,"span",38),o(75,"x"),n()(),p(76,re,2,1,"div",39),i(77,"div",40),o(78),n()()(),i(79,"div",32)(80,"div",33)(81,"label",43),o(82),i(83,"span",35),o(84,"*"),n()(),i(85,"div",36)(86,"input",44),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.offDayRate,a)||(m.configForm.offDayRate=a),u(a)}),n(),i(87,"span",38),o(88,"x"),n()(),p(89,ae,2,1,"div",39),i(90,"div",40),o(91),n()()()()()(),i(92,"div",19)(93,"div",20)(94,"h5",21),f(95,"i",45),o(96),n()(),i(97,"div",23)(98,"div",17)(99,"div",24)(100,"div",33)(101,"label",46),o(102),n(),i(103,"div",36)(104,"input",47),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.maxPreShiftOvertimeHours,a)||(m.configForm.maxPreShiftOvertimeHours=a),u(a)}),n(),i(105,"span",38),o(106),n()(),p(107,le,2,1,"div",39),i(108,"div",40),o(109),n()()(),i(110,"div",24)(111,"div",33)(112,"label",48),o(113),n(),i(114,"div",36)(115,"input",49),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.maxPostShiftOvertimeHours,a)||(m.configForm.maxPostShiftOvertimeHours=a),u(a)}),n(),i(116,"span",38),o(117),n()(),p(118,me,2,1,"div",39),i(119,"div",40),o(120),n()()()()()(),i(121,"div",19)(122,"div",20)(123,"h5",21),f(124,"i",50),o(125),n()(),i(126,"div",23)(127,"div",17)(128,"div",32)(129,"div",33)(130,"label",51),o(131),n(),i(132,"div",36)(133,"input",52),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.minimumOvertimeMinutes,a)||(m.configForm.minimumOvertimeMinutes=a),u(a)}),n(),i(134,"span",38),o(135),n()(),p(136,se,2,1,"div",39),i(137,"div",40),o(138),n()()(),i(139,"div",32)(140,"div",33)(141,"label",53),o(142),n(),i(143,"div",36)(144,"input",54),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.overtimeGracePeriodMinutes,a)||(m.configForm.overtimeGracePeriodMinutes=a),u(a)}),n(),i(145,"span",38),o(146),n()(),p(147,de,2,1,"div",39),i(148,"div",40),o(149),n()()(),i(150,"div",32)(151,"div",33)(152,"label",55),o(153),n(),i(154,"div",36)(155,"input",56),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.roundingIntervalMinutes,a)||(m.configForm.roundingIntervalMinutes=a),u(a)}),n(),i(156,"span",38),o(157),n()(),p(158,ce,2,1,"div",39),i(159,"div",40),o(160),n()()()(),i(161,"div",17)(162,"div",24)(163,"div",25)(164,"input",57),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.considerFlexibleTime,a)||(m.configForm.considerFlexibleTime=a),u(a)}),n(),i(165,"label",58),o(166),f(167,"br"),i(168,"small",5),o(169),n()()()(),i(170,"div",24)(171,"div",25)(172,"input",59),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.weekendAsOffDay,a)||(m.configForm.weekendAsOffDay=a),u(a)}),n(),i(173,"label",60),o(174),f(175,"br"),i(176,"small",5),o(177),n()()()()()()(),i(178,"div",19)(179,"div",20)(180,"h5",21),f(181,"i",61),o(182),n()(),i(183,"div",23)(184,"div",33)(185,"label",62),o(186),n(),i(187,"textarea",63),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.policyNotes,a)||(m.configForm.policyNotes=a),u(a)}),o(188,"                "),n(),i(189,"div",40),o(190),n()()()()(),i(191,"div",64),p(192,ue,19,10,"div",19),i(193,"div",19)(194,"div",20)(195,"h5",21),f(196,"i",65),o(197),n()(),i(198,"div",23)(199,"div",33)(200,"label",66),o(201),i(202,"span",35),o(203,"*"),n()(),i(204,"input",67),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.effectiveFromDate,a)||(m.configForm.effectiveFromDate=a),u(a)}),n(),p(205,pe,2,1,"div",39),i(206,"div",40),o(207),n()(),i(208,"div",33)(209,"label",68),o(210),n(),i(211,"input",69),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.effectiveToDate,a)||(m.configForm.effectiveToDate=a),u(a)}),n(),p(212,xe,2,1,"div",39),i(213,"div",40),o(214),n()()()(),i(215,"div",19)(216,"div",20)(217,"h5",21),f(218,"i",70),o(219),n()(),i(220,"div",23)(221,"div",25)(222,"input",71),_("ngModelChange",function(a){v(e);let m=d();return h(m.configForm.requireApproval,a)||(m.configForm.requireApproval=a),u(a)}),n(),i(223,"label",72),o(224),f(225,"br"),i(226,"small",5),o(227),n()()()()(),i(228,"div",73)(229,"div",23)(230,"div",74)(231,"button",75),p(232,Ce,1,0,"i",76)(233,he,1,0,"i",77),o(234),n()()()()()()()}if(l&2){let e=d();t(3),s(e.t("settings.overtime.editPolicy")),t(2),s(e.t("settings.overtime.editPolicySubtitle")),t(),x(e.isConfigurationActive()?6:-1),t(2),M("disabled",e.submitting()),t(2),c(" ",e.t("common.cancel")," "),t(),M("disabled",e.submitting()),t(2),c(" ",e.t("common.reset")," "),t(),x(e.error()?14:-1),t(),x(e.isConfigurationActive()?15:-1),t(9),c(" ",e.t("settings.overtime.overtimeTypes")," "),t(5),C("ngModel",e.configForm.enablePreShiftOvertime),t(3),s(e.t("settings.overtime.enablePreShift")),t(3),s(e.t("settings.overtime.enablePreShiftDescription")),t(3),C("ngModel",e.configForm.enablePostShiftOvertime),t(3),s(e.t("settings.overtime.enablePostShift")),t(3),s(e.t("settings.overtime.enablePostShiftDescription")),t(),x(e.hasError("general")?45:-1),t(5),c(" ",e.t("settings.overtime.overtimeRates")," "),t(6),c(" ",e.t("settings.overtime.normalDayRate")," "),t(4),b(e.getFieldClasses("normalDayRate")),C("ngModel",e.configForm.normalDayRate),t(3),x(e.hasError("normalDayRate")?63:-1),t(2),s(e.t("settings.overtime.normalDayRateDescription")),t(4),c(" ",e.t("settings.overtime.publicHolidayRate")," "),t(4),b(e.getFieldClasses("publicHolidayRate")),C("ngModel",e.configForm.publicHolidayRate),t(3),x(e.hasError("publicHolidayRate")?76:-1),t(2),s(e.t("settings.overtime.publicHolidayRateDescription")),t(4),c(" ",e.t("settings.overtime.offDayRate")," "),t(4),b(e.getFieldClasses("offDayRate")),C("ngModel",e.configForm.offDayRate),t(3),x(e.hasError("offDayRate")?89:-1),t(2),s(e.t("settings.overtime.offDayRateDescription")),t(5),c(" ",e.t("settings.overtime.overtimeLimits")," "),t(6),c(" ",e.t("settings.overtime.maxPreShiftHours")," "),t(2),b(e.getFieldClasses("maxPreShiftOvertimeHours")),C("ngModel",e.configForm.maxPreShiftOvertimeHours),t(2),s(e.t("common.hours")),t(),x(e.hasError("maxPreShiftOvertimeHours")?107:-1),t(2),s(e.t("settings.overtime.maxPreShiftHoursDescription")),t(4),c(" ",e.t("settings.overtime.maxPostShiftHours")," "),t(2),b(e.getFieldClasses("maxPostShiftOvertimeHours")),C("ngModel",e.configForm.maxPostShiftOvertimeHours),t(2),s(e.t("common.hours")),t(),x(e.hasError("maxPostShiftOvertimeHours")?118:-1),t(2),s(e.t("settings.overtime.maxPostShiftHoursDescription")),t(5),c(" ",e.t("settings.overtime.calculationSettings")," "),t(6),c(" ",e.t("settings.overtime.minimumOvertimeMinutes")," "),t(2),b(e.getFieldClasses("minimumOvertimeMinutes")),C("ngModel",e.configForm.minimumOvertimeMinutes),t(2),s(e.t("common.minutes")),t(),x(e.hasError("minimumOvertimeMinutes")?136:-1),t(2),s(e.t("settings.overtime.minimumOvertimeMinutesDescription")),t(4),c(" ",e.t("settings.overtime.gracePeriodMinutes")," "),t(2),b(e.getFieldClasses("overtimeGracePeriodMinutes")),C("ngModel",e.configForm.overtimeGracePeriodMinutes),t(2),s(e.t("common.minutes")),t(),x(e.hasError("overtimeGracePeriodMinutes")?147:-1),t(2),s(e.t("settings.overtime.gracePeriodMinutesDescription")),t(4),c(" ",e.t("settings.overtime.roundingIntervalMinutes")," "),t(2),b(e.getFieldClasses("roundingIntervalMinutes")),C("ngModel",e.configForm.roundingIntervalMinutes),t(2),s(e.t("common.minutes")),t(),x(e.hasError("roundingIntervalMinutes")?158:-1),t(2),s(e.t("settings.overtime.roundingIntervalMinutesDescription")),t(4),C("ngModel",e.configForm.considerFlexibleTime),t(2),c(" ",e.t("settings.overtime.considerFlexibleTime")," "),t(3),s(e.t("settings.overtime.considerFlexibleTimeDescription")),t(3),C("ngModel",e.configForm.weekendAsOffDay),t(2),c(" ",e.t("settings.overtime.weekendAsOffDay")," "),t(3),s(e.t("settings.overtime.weekendAsOffDayDescription")),t(5),c(" ",e.t("settings.overtime.policyNotes")," "),t(4),c(" ",e.t("settings.overtime.policyNotesLabel")," "),t(),C("ngModel",e.configForm.policyNotes),M("placeholder",e.t("settings.overtime.policyNotesPlaceholder")),t(3),s(e.t("settings.overtime.policyNotesDescription")),t(2),x(e.originalConfig?192:-1),t(5),c(" ",e.t("settings.overtime.effectivePeriod")," "),t(4),c(" ",e.t("settings.overtime.effectiveFrom")," "),t(3),b(e.getFieldClasses("effectiveFromDate")),C("ngModel",e.configForm.effectiveFromDate),t(),x(e.hasError("effectiveFromDate")?205:-1),t(2),s(e.t("settings.overtime.effectiveFromDescription")),t(3),c(" ",e.t("settings.overtime.effectiveTo")," "),t(),b(e.getFieldClasses("effectiveToDate")),C("ngModel",e.configForm.effectiveToDate),t(),x(e.hasError("effectiveToDate")?212:-1),t(2),s(e.t("settings.overtime.effectiveToDescription")),t(5),c(" ",e.t("settings.overtime.additionalSettings")," "),t(3),C("ngModel",e.configForm.requireApproval),t(2),c(" ",e.t("settings.overtime.requireApproval")," "),t(3),s(e.t("settings.overtime.requireApprovalDescription")),t(4),M("disabled",e.submitting()),t(),x(e.submitting()?232:233),t(2),c(" ",e.submitting()?e.t("common.saving"):e.t("settings.overtime.updatePolicy")," ")}}var Z=class l{overtimeService=y(X);router=y(H);route=y(k);notificationService=y(Y);confirmationService=y(Q);i18n=y(K);loading=S(!1);submitting=S(!1);error=S(null);configurationId=0;originalConfig=null;configForm={enablePreShiftOvertime:!1,enablePostShiftOvertime:!0,normalDayRate:1.5,publicHolidayRate:2,offDayRate:1.5,minimumOvertimeMinutes:15,considerFlexibleTime:!0,maxPreShiftOvertimeHours:2,maxPostShiftOvertimeHours:4,requireApproval:!1,overtimeGracePeriodMinutes:5,weekendAsOffDay:!0,roundingIntervalMinutes:15,policyNotes:"",effectiveFromDate:this.getTodayDate(),effectiveToDate:""};validationErrors=S({});ngOnInit(){this.route.params.subscribe(r=>{this.configurationId=+r.id,this.configurationId&&this.loadConfiguration()})}t(r){return this.i18n.t(r)}getTodayDate(){return new Date().toISOString().split("T")[0]}loadConfiguration(){this.loading.set(!0),this.error.set(null),this.overtimeService.getOvertimeConfigurationById(this.configurationId).subscribe({next:r=>{this.originalConfig=r,this.populateForm(r),this.loading.set(!1)},error:r=>{console.error("Failed to load overtime configuration:",r),this.loading.set(!1),r.status===404?(this.error.set(this.t("settings.overtime.errors.configurationNotFound")),this.notificationService.error(this.t("app.error"),this.t("settings.overtime.errors.configurationNotFound"))):(this.error.set(this.t("errors.server")),this.notificationService.error(this.t("app.error"),this.t("errors.server")))}})}populateForm(r){this.configForm={enablePreShiftOvertime:r.enablePreShiftOvertime,enablePostShiftOvertime:r.enablePostShiftOvertime,normalDayRate:r.normalDayRate,publicHolidayRate:r.publicHolidayRate,offDayRate:r.offDayRate,minimumOvertimeMinutes:r.minimumOvertimeMinutes,considerFlexibleTime:r.considerFlexibleTime,maxPreShiftOvertimeHours:r.maxPreShiftOvertimeHours,maxPostShiftOvertimeHours:r.maxPostShiftOvertimeHours,requireApproval:r.requireApproval,overtimeGracePeriodMinutes:r.overtimeGracePeriodMinutes,weekendAsOffDay:r.weekendAsOffDay,roundingIntervalMinutes:r.roundingIntervalMinutes,policyNotes:r.policyNotes||"",effectiveFromDate:r.effectiveFromDate.split("T")[0],effectiveToDate:r.effectiveToDate?r.effectiveToDate.split("T")[0]:""}}validateForm(){let r={};if(this.configForm.effectiveFromDate||(r.effectiveFromDate=this.t("settings.overtime.validation.effectiveFromRequired")),this.configForm.normalDayRate<=0&&(r.normalDayRate=this.t("settings.overtime.validation.ratePositive")),this.configForm.publicHolidayRate<=0&&(r.publicHolidayRate=this.t("settings.overtime.validation.ratePositive")),this.configForm.offDayRate<=0&&(r.offDayRate=this.t("settings.overtime.validation.ratePositive")),this.configForm.minimumOvertimeMinutes<0&&(r.minimumOvertimeMinutes=this.t("settings.overtime.validation.minimumOvertimePositive")),this.configForm.overtimeGracePeriodMinutes<0&&(r.overtimeGracePeriodMinutes=this.t("settings.overtime.validation.gracePeriodPositive")),this.configForm.roundingIntervalMinutes<=0&&(r.roundingIntervalMinutes=this.t("settings.overtime.validation.roundingIntervalPositive")),this.configForm.maxPreShiftOvertimeHours<0&&(r.maxPreShiftOvertimeHours=this.t("settings.overtime.validation.maxHoursPositive")),this.configForm.maxPostShiftOvertimeHours<0&&(r.maxPostShiftOvertimeHours=this.t("settings.overtime.validation.maxHoursPositive")),this.configForm.effectiveToDate&&this.configForm.effectiveFromDate){let e=new Date(this.configForm.effectiveFromDate);new Date(this.configForm.effectiveToDate)<=e&&(r.effectiveToDate=this.t("settings.overtime.validation.effectiveToAfterFrom"))}return!this.configForm.enablePreShiftOvertime&&!this.configForm.enablePostShiftOvertime&&(r.general=this.t("settings.overtime.validation.atLeastOneOvertimeType")),this.validationErrors.set(r),Object.keys(r).length===0}hasError(r){return!!this.validationErrors()[r]}getError(r){return this.validationErrors()[r]||""}onSubmit(){if(!this.validateForm()){this.error.set(this.t("settings.overtime.validation.pleaseFix"));return}this.submitting.set(!0),this.error.set(null);let r={enablePreShiftOvertime:this.configForm.enablePreShiftOvertime,enablePostShiftOvertime:this.configForm.enablePostShiftOvertime,normalDayRate:this.configForm.normalDayRate,publicHolidayRate:this.configForm.publicHolidayRate,offDayRate:this.configForm.offDayRate,minimumOvertimeMinutes:this.configForm.minimumOvertimeMinutes,considerFlexibleTime:this.configForm.considerFlexibleTime,maxPreShiftOvertimeHours:this.configForm.maxPreShiftOvertimeHours,maxPostShiftOvertimeHours:this.configForm.maxPostShiftOvertimeHours,requireApproval:this.configForm.requireApproval,overtimeGracePeriodMinutes:this.configForm.overtimeGracePeriodMinutes,weekendAsOffDay:this.configForm.weekendAsOffDay,roundingIntervalMinutes:this.configForm.roundingIntervalMinutes,policyNotes:this.configForm.policyNotes.trim(),effectiveFromDate:this.configForm.effectiveFromDate,effectiveToDate:this.configForm.effectiveToDate||void 0};this.overtimeService.updateOvertimeConfiguration(this.configurationId,r).subscribe({next:()=>{this.notificationService.success(this.t("app.success"),this.t("settings.overtime.policyUpdatedSuccessfully")),this.router.navigate(["/settings/overtime"])},error:e=>{console.error("Failed to update overtime configuration:",e),this.submitting.set(!1),e.status===400&&e.error?.errors?(this.validationErrors.set(e.error.errors),this.error.set(this.t("settings.overtime.validation.serverErrors"))):e.status===404?(this.error.set(this.t("settings.overtime.errors.configurationNotFound")),this.notificationService.error(this.t("app.error"),this.t("settings.overtime.errors.configurationNotFound"))):(this.error.set(this.t("errors.server")),this.notificationService.error(this.t("app.error"),this.t("errors.server")))}})}onCancel(){return w(this,null,function*(){this.hasFormChanges()&&!(yield this.confirmationService.confirm({title:this.t("common.unsavedChanges"),message:this.t("common.unsavedChangesMessage"),confirmText:this.t("common.discard"),cancelText:this.t("common.stay"),confirmButtonClass:"btn-warning",icon:"fa-exclamation-triangle",iconClass:"text-warning"})).confirmed||this.router.navigate(["/settings/overtime"])})}hasFormChanges(){if(!this.originalConfig)return!1;let r={enablePreShiftOvertime:this.originalConfig.enablePreShiftOvertime,enablePostShiftOvertime:this.originalConfig.enablePostShiftOvertime,normalDayRate:this.originalConfig.normalDayRate,publicHolidayRate:this.originalConfig.publicHolidayRate,offDayRate:this.originalConfig.offDayRate,minimumOvertimeMinutes:this.originalConfig.minimumOvertimeMinutes,considerFlexibleTime:this.originalConfig.considerFlexibleTime,maxPreShiftOvertimeHours:this.originalConfig.maxPreShiftOvertimeHours,maxPostShiftOvertimeHours:this.originalConfig.maxPostShiftOvertimeHours,requireApproval:this.originalConfig.requireApproval,overtimeGracePeriodMinutes:this.originalConfig.overtimeGracePeriodMinutes,weekendAsOffDay:this.originalConfig.weekendAsOffDay,roundingIntervalMinutes:this.originalConfig.roundingIntervalMinutes,policyNotes:this.originalConfig.policyNotes||"",effectiveFromDate:this.originalConfig.effectiveFromDate.split("T")[0],effectiveToDate:this.originalConfig.effectiveToDate?this.originalConfig.effectiveToDate.split("T")[0]:""};return JSON.stringify(this.configForm)!==JSON.stringify(r)}onReset(){this.originalConfig&&(this.populateForm(this.originalConfig),this.validationErrors.set({}),this.error.set(null))}isFieldInvalid(r){return this.hasError(r)}getFieldClasses(r){let e="form-control";return this.isFieldInvalid(r)?`${e} is-invalid`:e}isConfigurationActive(){return this.originalConfig?.isActive||!1}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=D({type:l,selectors:[["app-edit-overtime-configuration"]],decls:3,vars:1,consts:[["formRef","ngForm"],[1,"container-fluid"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","200px"],[1,"text-center"],[1,"fa-solid","fa-spinner","fa-spin","fs-2","text-primary","mb-3"],[1,"text-muted"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-1"],[1,"text-muted","mb-0"],[1,"badge","bg-success","mt-2"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click","disabled"],[1,"fa-solid","fa-times","me-2"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fa-solid","fa-refresh","me-2"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"],[3,"ngSubmit"],[1,"row"],[1,"col-lg-8"],[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"fa-solid","fa-clock","me-2"],[1,"card-body"],[1,"col-md-6"],[1,"form-check","mb-3"],["type","checkbox","id","enablePreShiftOvertime","name","enablePreShiftOvertime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","enablePreShiftOvertime",1,"form-check-label"],["type","checkbox","id","enablePostShiftOvertime","name","enablePostShiftOvertime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","enablePostShiftOvertime",1,"form-check-label"],[1,"text-danger","small"],[1,"fa-solid","fa-percentage","me-2"],[1,"col-md-4"],[1,"mb-3"],["for","normalDayRate",1,"form-label"],[1,"text-danger"],[1,"input-group"],["type","number","id","normalDayRate","name","normalDayRate","step","0.1","min","1","required","",3,"ngModelChange","ngModel"],[1,"input-group-text"],[1,"invalid-feedback","d-block"],[1,"form-text"],["for","publicHolidayRate",1,"form-label"],["type","number","id","publicHolidayRate","name","publicHolidayRate","step","0.1","min","1","required","",3,"ngModelChange","ngModel"],["for","offDayRate",1,"form-label"],["type","number","id","offDayRate","name","offDayRate","step","0.1","min","1","required","",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-hourglass-half","me-2"],["for","maxPreShiftOvertimeHours",1,"form-label"],["type","number","id","maxPreShiftOvertimeHours","name","maxPreShiftOvertimeHours","step","0.5","min","0",3,"ngModelChange","ngModel"],["for","maxPostShiftOvertimeHours",1,"form-label"],["type","number","id","maxPostShiftOvertimeHours","name","maxPostShiftOvertimeHours","step","0.5","min","0",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-calculator","me-2"],["for","minimumOvertimeMinutes",1,"form-label"],["type","number","id","minimumOvertimeMinutes","name","minimumOvertimeMinutes","min","0",3,"ngModelChange","ngModel"],["for","overtimeGracePeriodMinutes",1,"form-label"],["type","number","id","overtimeGracePeriodMinutes","name","overtimeGracePeriodMinutes","min","0",3,"ngModelChange","ngModel"],["for","roundingIntervalMinutes",1,"form-label"],["type","number","id","roundingIntervalMinutes","name","roundingIntervalMinutes","min","1",3,"ngModelChange","ngModel"],["type","checkbox","id","considerFlexibleTime","name","considerFlexibleTime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","considerFlexibleTime",1,"form-check-label"],["type","checkbox","id","weekendAsOffDay","name","weekendAsOffDay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","weekendAsOffDay",1,"form-check-label"],[1,"fa-solid","fa-sticky-note","me-2"],["for","policyNotes",1,"form-label"],["id","policyNotes","name","policyNotes","rows","4",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"col-lg-4"],[1,"fa-solid","fa-calendar","me-2"],["for","effectiveFromDate",1,"form-label"],["type","date","id","effectiveFromDate","name","effectiveFromDate","required","",3,"ngModelChange","ngModel"],["for","effectiveToDate",1,"form-label"],["type","date","id","effectiveToDate","name","effectiveToDate",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-cogs","me-2"],["type","checkbox","id","requireApproval","name","requireApproval",1,"form-check-input",3,"ngModelChange","ngModel"],["for","requireApproval",1,"form-check-label"],[1,"card"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fa-solid","fa-spinner","fa-spin","me-2"],[1,"fa-solid","fa-save","me-2"],[1,"fa-solid","fa-check-circle","me-1"],[1,"fa-solid","fa-exclamation-triangle","me-2"],[1,"fa-solid","fa-info-circle","me-2"],[1,"mb-2"],[1,"badge","bg-success"],[1,"badge","bg-light","text-dark","border"]],template:function(e,g){e&1&&(i(0,"div",1),p(1,$,5,1,"div",2)(2,_e,235,105),n()),e&2&&(t(),x(g.loading()?1:2))},dependencies:[R,J,G,V,j,A,N,q,z,U,L,B,W,T],styles:[`.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;box-shadow:0 .125rem .25rem #00000013;transition:box-shadow .15s ease-in-out}.card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 1.25rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#495057;font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-check-label[_ngcontent-%COMP%]{font-weight:500}.form-text[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-top:.25rem}.input-group-text[_ngcontent-%COMP%]{background-color:#f8f9fa;border-color:#ced4da;font-weight:500}.btn[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:.5rem;padding:1rem}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;border-left:4px solid #ffc107}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-left:4px solid #dc3545}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;padding:.35em .65em}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.fa-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.invalid-feedback[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]{padding:.5rem}.card-body[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch!important}.d-flex.justify-content-between[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{margin-top:1rem;display:flex;gap:.5rem}}.configuration-info[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:.5rem;padding:1rem;margin-bottom:1rem}.configuration-info[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}.alert-warning[_ngcontent-%COMP%]   .fa-exclamation-triangle[_ngcontent-%COMP%]{color:#856404}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.fa-solid[_ngcontent-%COMP%]{width:1em;text-align:center}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.col-lg-4[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:sticky;top:2rem}.form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem #0d6efd40}.form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.submitting[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{pointer-events:none}.submitting[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{opacity:.7}`]})};export{Z as EditOvertimeConfigurationComponent};
