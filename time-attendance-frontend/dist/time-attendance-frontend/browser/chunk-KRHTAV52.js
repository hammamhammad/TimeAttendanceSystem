import{a as K}from"./chunk-INX4ARZ5.js";import{a as J}from"./chunk-EYAJMHM7.js";import{b as G}from"./chunk-RUY4WPQA.js";import{d as B,g as O,h as q,m as z}from"./chunk-TWXUAMJ4.js";import{$a as E,Bb as a,Cb as m,Db as s,Ea as L,R as S,W as b,X as g,Xa as u,Ya as v,ab as w,bb as P,cb as t,da as f,db as n,eb as _,lb as D,nb as x,pb as c,ta as e,wc as j,xb as $,yb as R}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";var U=(r,o)=>o.id;function W(r,o){if(r&1&&(t(0,"div",13),_(1,"app-loading-spinner",15),n()),r&2){let i=c();e(),P("message",i.i18n.t("common.loading"))("centered",!0)}}function X(r,o){if(r&1&&(t(0,"span",31),a(1),n()),r&2){let i=c(2);e(),m(i.i18n.t("common.active"))}}function Y(r,o){if(r&1&&(t(0,"span",32),a(1),n()),r&2){let i=c(2);e(),m(i.i18n.t("common.inactive"))}}function Z(r,o){if(r&1&&(t(0,"div",33)(1,"h6",49),a(2),n(),t(3,"p",50),a(4),n()()),r&2){let i,l=c(2);e(2),m(l.i18n.t("common.description")),e(2),m((i=l.department())==null?null:i.description)}}function ee(r,o){if(r&1&&(t(0,"div",33)(1,"h6",49),a(2),n(),t(3,"p",51),a(4),n()()),r&2){let i,l=c(2);e(2),m(l.i18n.t("departments.description_ar")),e(2),m((i=l.department())==null?null:i.descriptionAr)}}function te(r,o){if(r&1&&(t(0,"div",28),_(1,"i",52),t(2,"span"),a(3),n()()),r&2){let i,l=c(3);e(3),m((i=l.department())==null?null:i.phone)}}function ne(r,o){if(r&1&&(t(0,"div",28),_(1,"i",53),t(2,"span"),a(3),n()()),r&2){let i,l=c(3);e(3),m((i=l.department())==null?null:i.email)}}function ie(r,o){if(r&1&&(t(0,"div",33)(1,"h6",49),a(2),n(),t(3,"div",16),u(4,te,4,1,"div",28),u(5,ne,4,1,"div",28),n()()),r&2){let i,l,p=c(2);e(2),m(p.i18n.t("departments.contact_info")),e(2),v((i=p.department())!=null&&i.phone?4:-1),e(),v((l=p.department())!=null&&l.email?5:-1)}}function ae(r,o){if(r&1&&(t(0,"div",56),_(1,"i",57),t(2,"span"),a(3),n()()),r&2){let i,l=o.$implicit,p=c(3);$("margin-left",l.level*20,"px"),e(2),R("fw-bold",l.id.toString()===((i=p.department())==null||i.id==null?null:i.id.toString())),e(),m(l.name)}}function re(r,o){if(r&1&&(t(0,"div",41)(1,"div",19)(2,"h6",20),a(3),n()(),t(4,"div",27)(5,"div",54),E(6,ae,4,5,"div",55,U),n()()()),r&2){let i=c(2);e(3),m(i.i18n.t("departments.hierarchy")),e(3),w(i.departmentHierarchy())}}function le(r,o){if(r&1){let i=D();t(0,"div",60)(1,"div",61)(2,"div",62)(3,"div",21)(4,"div",22)(5,"div",63),_(6,"i",24),n()(),t(7,"div",64)(8,"h6",65),a(9),n(),t(10,"p",66),a(11),n()(),t(12,"div",67)(13,"button",68),_(14,"i",69),n(),t(15,"ul",70)(16,"li")(17,"a",71),x("click",function(){let p=b(i).$implicit,C=c(3);return g(C.onViewSubDepartment(p.id.toString()))}),_(18,"i",72),a(19),n()(),t(20,"li")(21,"a",71),x("click",function(){let p=b(i).$implicit,C=c(3);return g(C.onEditSubDepartment(p.id.toString()))}),_(22,"i",10),a(23),n()()()()()()()()}if(r&2){let i=o.$implicit,l=c(3);e(9),m(i.name),e(2),m(i.code),e(8),s("",l.i18n.t("common.view")," "),e(4),s("",l.i18n.t("common.edit")," ")}}function oe(r,o){if(r&1&&(t(0,"div",48)(1,"div",19)(2,"h6",20),_(3,"i",58),a(4),n()(),t(5,"div",27)(6,"div",59),E(7,le,24,4,"div",60,U),n()()()),r&2){let i=c(2);e(4),s(" ",i.i18n.t("departments.sub_departments")," "),e(3),w(i.subDepartments())}}function de(r,o){if(r&1){let i=D();t(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"h5",20)(5,"div",21)(6,"div",22)(7,"div",23),_(8,"i",24),n()(),t(9,"div")(10,"div",25),a(11),n(),t(12,"small",26),a(13),n()()()()(),t(14,"div",27)(15,"div",16)(16,"div",28)(17,"dl",16)(18,"dt",29),a(19),n(),t(20,"dd",30),a(21),n(),t(22,"dt",29),a(23),n(),t(24,"dd",30),a(25),n(),t(26,"dt",29),a(27),n(),t(28,"dd",30),a(29),n(),t(30,"dt",29),a(31),n(),t(32,"dd",30),a(33),n()()(),t(34,"div",28)(35,"dl",16)(36,"dt",29),a(37),n(),t(38,"dd",30),a(39),n(),t(40,"dt",29),a(41),n(),t(42,"dd",30),a(43),n(),t(44,"dt",29),a(45),n(),t(46,"dd",30),a(47),n(),t(48,"dt",29),a(49),n(),t(50,"dd",30),u(51,X,2,1,"span",31)(52,Y,2,1,"span",32),n()()()(),u(53,Z,5,2,"div",33),u(54,ee,5,2,"div",33),u(55,ie,6,3,"div",33),n()()(),t(56,"div",34)(57,"div",18)(58,"div",19)(59,"h6",20),a(60),n()(),t(61,"div",27)(62,"div",35)(63,"button",36),x("click",function(){b(i);let p=c();return g(p.onEdit())}),_(64,"i",10),a(65),n(),t(66,"button",37),x("click",function(){b(i);let p=c();return g(p.onViewEmployees())}),_(67,"i",38),a(68),n(),t(69,"button",39),x("click",function(){b(i);let p=c();return g(p.onCreateSubDepartment())}),_(70,"i",40),a(71),n()()()(),t(72,"div",41)(73,"div",19)(74,"h6",20),a(75),n()(),t(76,"div",27)(77,"div",42)(78,"div",43)(79,"div",44)(80,"h4",45),a(81),n(),t(82,"p",46),a(83),n()()(),t(84,"div",43)(85,"h4",47),a(86),n(),t(87,"p",46),a(88),n()()()()(),u(89,re,8,1,"div",41),n()(),u(90,oe,9,1,"div",48)}if(r&2){let i,l,p,C,I,y,V,k,T,M,N,H,h,A,F,d=c();e(11),m((i=d.department())==null?null:i.name),e(2),m((l=d.department())==null?null:l.code),e(6),s("",d.i18n.t("departments.name"),":"),e(2),m((p=d.department())==null?null:p.name),e(2),s("",d.i18n.t("departments.name_ar"),":"),e(2),m(((C=d.department())==null?null:C.nameAr)||"-"),e(2),s("",d.i18n.t("departments.code"),":"),e(2),m((I=d.department())==null?null:I.code),e(2),s("",d.i18n.t("departments.parent"),":"),e(2),m(((y=d.department())==null?null:y.parentDepartmentName)||d.i18n.t("departments.root_department")),e(4),s("",d.i18n.t("departments.manager"),":"),e(2),m(((V=d.department())==null?null:V.managerName)||"-"),e(2),s("",d.i18n.t("departments.cost_center"),":"),e(2),m(((k=d.department())==null?null:k.costCenter)||"-"),e(2),s("",d.i18n.t("departments.location"),":"),e(2),m(((T=d.department())==null?null:T.location)||"-"),e(2),s("",d.i18n.t("common.status"),":"),e(2),v((M=d.department())!=null&&M.isActive?51:52),e(2),v((N=d.department())!=null&&N.description?53:-1),e(),v((H=d.department())!=null&&H.descriptionAr?54:-1),e(),v((h=d.department())!=null&&h.phone||(h=d.department())!=null&&h.email?55:-1),e(5),m(d.i18n.t("common.actions")),e(5),s(" ",d.i18n.t("departments.edit")," "),e(3),s(" ",d.i18n.t("departments.view_employees")," "),e(3),s(" ",d.i18n.t("departments.create_subdepartment")," "),e(4),m(d.i18n.t("departments.statistics")),e(6),m(((A=d.statistics())==null?null:A.employeeCount)||0),e(2),m(d.i18n.t("departments.employees")),e(3),m(((F=d.statistics())==null?null:F.subDepartmentCount)||0),e(2),m(d.i18n.t("departments.sub_departments")),e(),v(d.departmentHierarchy().length>0?89:-1),e(),v(d.subDepartments().length>0?90:-1)}}function me(r,o){if(r&1&&(t(0,"div",14),_(1,"i",73),a(2),n()),r&2){let i=c();e(2),s(" ",i.error()||i.i18n.t("departments.department_not_found")," ")}}var Q=class r{route=S(B);router=S(O);departmentsService=S(K);i18n=S(G);department=f(null);statistics=f(null);subDepartments=f([]);departmentHierarchy=f([]);loading=f(!0);error=f("");ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?(this.loadDepartment(o),this.loadSubDepartments(o),this.loadHierarchy(o)):(this.error.set("Invalid department ID"),this.loading.set(!1))}loadDepartment(o){this.departmentsService.getDepartmentById(+o).subscribe({next:i=>{this.department.set(i),this.statistics.set({employeeCount:i.employeeCount||0,subDepartmentCount:0}),this.loading.set(!1)},error:i=>{this.error.set(this.getErrorMessage(i)),this.loading.set(!1)}})}loadSubDepartments(o){this.subDepartments.set([])}loadHierarchy(o){this.departmentHierarchy.set([])}onEdit(){this.department()&&this.router.navigate(["/departments",this.department().id,"edit"])}onViewEmployees(){this.department()&&this.router.navigate(["/employees"],{queryParams:{departmentId:this.department().id}})}onCreateSubDepartment(){this.department()&&this.router.navigate(["/departments/create"],{queryParams:{parentId:this.department().id}})}onViewSubDepartment(o){this.router.navigate(["/departments",o,"view"])}onEditSubDepartment(o){this.router.navigate(["/departments",o,"edit"])}onBack(){this.router.navigate(["/departments"])}formatDate(o){return new Date(o).toLocaleDateString()}getErrorMessage(o){return o?.error?.error?o.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=L({type:r,selectors:[["app-view-department"]],decls:25,vars:7,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/departments"],[1,"breadcrumb-item","active"],[1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-edit","me-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],[3,"message","centered"],[1,"row"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-3"],[1,"avatar-title","bg-light","text-primary","rounded-circle"],[1,"fa-solid","fa-sitemap"],[1,"fw-medium"],[1,"text-muted"],[1,"card-body"],[1,"col-md-6"],[1,"col-sm-5"],[1,"col-sm-7"],[1,"badge","bg-success"],[1,"badge","bg-light","text-dark","border"],[1,"mt-3"],[1,"col-lg-4"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"fa-solid","fa-users","me-2"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-plus","me-2"],[1,"card","mt-3"],[1,"row","text-center"],[1,"col-6"],[1,"border-end"],[1,"mb-1","text-primary"],[1,"text-muted","mb-0","small"],[1,"mb-1","text-info"],[1,"card","mt-4"],[1,"fw-semibold"],[1,"mb-0"],["dir","rtl",1,"mb-0"],[1,"fa-solid","fa-phone","me-2","text-muted"],[1,"fa-solid","fa-envelope","me-2","text-muted"],[1,"hierarchy-tree"],[1,"hierarchy-item",3,"margin-left"],[1,"hierarchy-item"],[1,"fa-solid","fa-sitemap","me-2","text-muted"],[1,"fa-solid","fa-sitemap","me-2"],[1,"row","g-3"],[1,"col-md-6","col-lg-4"],[1,"card","border"],[1,"card-body","p-3"],[1,"avatar-title","bg-info-subtle","text-info","rounded-circle"],[1,"flex-grow-1"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[1,"dropdown"],["data-bs-toggle","dropdown",1,"btn","btn-sm","btn-light"],[1,"fa-solid","fa-ellipsis-vertical"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fa-solid","fa-eye","me-2"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(i,l){i&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),a(4),n(),t(5,"nav",2)(6,"ol",3)(7,"li",4)(8,"a",5),a(9),n()(),t(10,"li",4)(11,"a",6),a(12),n()(),t(13,"li",7),a(14),n()()()(),t(15,"div",8)(16,"button",9),x("click",function(){return l.onEdit()}),_(17,"i",10),a(18),n(),t(19,"button",11),x("click",function(){return l.onBack()}),_(20,"i",12),a(21),n()()(),u(22,W,2,2,"div",13)(23,de,91,32)(24,me,3,1,"div",14),n()),i&2&&(e(4),m(l.i18n.t("departments.view_details")),e(5),m(l.i18n.t("dashboard.title")),e(3),m(l.i18n.t("departments.title")),e(2),m(l.i18n.t("departments.view_details")),e(4),s(" ",l.i18n.t("departments.edit")," "),e(3),s(" ",l.i18n.t("common.back")," "),e(),v(l.loading()?22:l.department()?23:24))},dependencies:[j,z,q,J],encapsulation:2})};export{Q as ViewDepartmentComponent};
