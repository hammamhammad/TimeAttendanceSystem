import{a as L}from"./chunk-4QC5DFDN.js";import{a as H}from"./chunk-S52YPO73.js";import{a as z}from"./chunk-TBD3YDXS.js";import{a as B}from"./chunk-SRPEDAT4.js";import"./chunk-MUNQGSPX.js";import"./chunk-Y62N6K5S.js";import{c as D,d as h,e as M,f as O,i as w,m as k,n as N,w as P,x as q,y as G}from"./chunk-VRETN7JA.js";import{a as A}from"./chunk-EYAJMHM7.js";import{a as R}from"./chunk-HHXRLUSQ.js";import"./chunk-S3CAEY4A.js";import{b as j}from"./chunk-TJ2U7DWW.js";import{g as T}from"./chunk-TWXUAMJ4.js";import{Bb as r,Cb as _,Db as s,Ea as I,R as y,W as f,X as g,Xa as p,Ya as v,bb as d,cb as o,da as x,db as a,eb as u,lb as V,nb as b,pb as m,ta as t,wc as F,yb as S}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";function K(l,n){if(l&1&&(o(0,"div",2),u(1,"app-loading-spinner",4),a()),l&2){let i=m();t(),d("message",i.i18n.t("employee_vacations.loading_data"))("variant","primary")("centered",!0)}}function Q(l,n){if(l&1&&(o(0,"div",12),r(1),a()),l&2){let i=m(2);t(),s(" ",i.getErrorMessage("employeeId")," ")}}function U(l,n){if(l&1&&(o(0,"div",12),r(1),a()),l&2){let i=m(2);t(),s(" ",i.getErrorMessage("vacationTypeId")," ")}}function W(l,n){if(l&1&&(o(0,"div",16),r(1),a()),l&2){let i=m(2);t(),s(" ",i.getErrorMessage("startDate")," ")}}function X(l,n){if(l&1&&(o(0,"div",16),r(1),a()),l&2){let i=m(2);t(),s(" ",i.getErrorMessage("endDate")," ")}}function Y(l,n){l&1&&u(0,"span",26)}function Z(l,n){if(l&1){let i=V();o(0,"div",3)(1,"div",5)(2,"form",6),b("ngSubmit",function(){f(i);let e=m();return g(e.onSubmit())}),o(3,"app-form-section",7)(4,"div",3)(5,"div",8)(6,"label",9),r(7),o(8,"span",10),r(9,"*"),a()(),o(10,"app-searchable-select",11),b("selectionChange",function(e){let C;f(i);let E=m();return g((C=E.vacationForm.get("employeeId"))==null?null:C.setValue(e))}),a(),p(11,Q,2,1,"div",12),a(),o(12,"div",8)(13,"label",13),r(14),o(15,"span",10),r(16,"*"),a()(),o(17,"app-searchable-select",11),b("selectionChange",function(e){let C;f(i);let E=m();return g((C=E.vacationForm.get("vacationTypeId"))==null?null:C.setValue(e))}),a(),p(18,U,2,1,"div",12),a()(),o(19,"div",3)(20,"div",8)(21,"label",14),r(22),o(23,"span",10),r(24,"*"),a()(),u(25,"input",15),p(26,W,2,1,"div",16),a(),o(27,"div",8)(28,"label",17),r(29),o(30,"span",10),r(31,"*"),a()(),u(32,"input",18),p(33,X,2,1,"div",16),a()()(),o(34,"app-form-section",7)(35,"div",19)(36,"label",20),r(37),a(),u(38,"textarea",21),a()(),o(39,"div",22)(40,"button",23),b("click",function(){f(i);let e=m();return g(e.onCancel())}),r(41),a(),o(42,"button",24),b("click",function(){f(i);let e=m();return g(e.onReset())}),r(43),a(),o(44,"button",25),p(45,Y,1,0,"span",26),r(46),a()()()(),o(47,"div",27)(48,"div",28)(49,"div",29)(50,"h6",30),u(51,"i",31),r(52),a()(),o(53,"div",32)(54,"p",33),r(55),a(),o(56,"ul",34)(57,"li"),r(58),a(),o(59,"li"),r(60),a(),o(61,"li"),r(62),a(),o(63,"li"),r(64),a()()()()()()}if(l&2){let i,c,e=m();t(2),d("formGroup",e.vacationForm),t(),d("title",e.i18n.t("employee_vacations.required_information")),t(4),s(" ",e.i18n.t("fields.employee")," "),t(3),d("options",e.employeeOptions)("placeholder",e.i18n.t("common.select_employee"))("value",(i=e.vacationForm.get("employeeId"))==null?null:i.value)("disabled",e.saving()),t(),v(e.hasError("employeeId")?11:-1),t(3),s(" ",e.i18n.t("fields.vacationType")," "),t(3),d("options",e.vacationTypeOptions)("placeholder",e.i18n.t("common.select_vacation_type"))("value",(c=e.vacationForm.get("vacationTypeId"))==null?null:c.value)("disabled",e.saving()),t(),v(e.hasError("vacationTypeId")?18:-1),t(4),s(" ",e.i18n.t("fields.startDate")," "),t(3),S("is-invalid",e.isFieldInvalid("startDate")),d("disabled",e.saving()),t(),v(e.hasError("startDate")?26:-1),t(3),s(" ",e.i18n.t("fields.endDate")," "),t(3),S("is-invalid",e.isFieldInvalid("endDate")),d("disabled",e.saving()),t(),v(e.hasError("endDate")?33:-1),t(),d("title",e.i18n.t("employee_vacations.additional_information")),t(3),_(e.i18n.t("fields.notes")),t(),d("placeholder",e.i18n.t("employee_vacations.notes_placeholder"))("disabled",e.saving()),t(2),d("disabled",e.saving()),t(),s(" ",e.i18n.t("common.cancel")," "),t(),d("disabled",e.saving()),t(),s(" ",e.i18n.t("common.reset")," "),t(),d("disabled",e.vacationForm.invalid||e.saving()),t(),v(e.saving()?45:-1),t(),s(" ",e.i18n.t("employee_vacations.create_vacation")," "),t(6),s(" ",e.i18n.t("employee_vacations.help_title")," "),t(3),_(e.i18n.t("employee_vacations.help_text")),t(3),_(e.i18n.t("employee_vacations.help_select_employee")),t(2),_(e.i18n.t("employee_vacations.help_select_type")),t(2),_(e.i18n.t("employee_vacations.help_date_range")),t(2),_(e.i18n.t("employee_vacations.help_notes_optional"))}}var J=class l{fb=y(P);router=y(T);notificationService=y(R);employeeVacationsService=y(z);i18n=y(j);loading=x(!1);saving=x(!1);vacationForm;employees=x([]);vacationTypes=x([]);get employeeOptions(){return this.employees().map(n=>({value:n.id,label:n.name}))}get vacationTypeOptions(){return this.vacationTypes().map(n=>({value:n.id,label:n.name}))}constructor(){this.vacationForm=this.createForm()}ngOnInit(){this.loadEmployees(),this.loadVacationTypes()}createForm(){return this.fb.group({employeeId:[null,[h.required]],vacationTypeId:[null,[h.required]],startDate:["",[h.required]],endDate:["",[h.required]],notes:[""]})}loadEmployees(){this.loading.set(!0),this.employeeVacationsService.getEmployees().subscribe({next:n=>{this.employees.set(n),this.loading.set(!1)},error:n=>{console.error("Failed to load employees:",n),this.notificationService.error(this.i18n.t("employee_vacations.errors.load_employees_failed")),this.loading.set(!1)}})}loadVacationTypes(){this.employeeVacationsService.getVacationTypes().subscribe({next:n=>{this.vacationTypes.set(n)},error:n=>{console.error("Failed to load vacation types:",n),this.notificationService.error(this.i18n.t("employee_vacations.errors.load_vacation_types_failed"))}})}onSubmit(){if(this.vacationForm.invalid){this.markFormGroupTouched();return}this.saving.set(!0);let n=this.vacationForm.value,i={employeeId:n.employeeId,vacationTypeId:n.vacationTypeId,startDate:new Date(n.startDate),endDate:new Date(n.endDate),notes:n.notes||void 0};this.employeeVacationsService.createVacation(i).subscribe({next:()=>{this.saving.set(!1),this.notificationService.success(this.i18n.t("employee_vacations.success.created")),this.router.navigate(["/employee-vacations"])},error:c=>{this.saving.set(!1),console.error("Failed to create vacation:",c),this.notificationService.error(this.i18n.t("employee_vacations.errors.create_failed"))}})}onCancel(){this.router.navigate(["/employee-vacations"])}onReset(){this.vacationForm.reset()}markFormGroupTouched(){Object.keys(this.vacationForm.controls).forEach(n=>{let i=this.vacationForm.get(n);i&&i.markAsTouched()})}hasError(n){let i=this.vacationForm.get(n);return!!(i&&i.invalid&&(i.dirty||i.touched))}getErrorMessage(n){let i=this.vacationForm.get(n);return!i||!i.errors?"":i.errors.required?this.i18n.t("validation.required"):""}isFieldInvalid(n){return this.hasError(n)}getFormMode(){return"create"}getVacationId(){}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=I({type:l,selectors:[["app-create-employee-vacation"]],decls:4,vars:6,consts:[[1,"container-fluid"],["moduleName","employee-vacations","moduleRoute","employee-vacations",3,"mode","title","entityId","loading"],[1,"text-center","py-5"],[1,"row"],[3,"message","variant","centered"],[1,"col-lg-8"],["novalidate","",3,"ngSubmit","formGroup"],[3,"title"],[1,"col-md-6","mb-3"],["for","employeeId",1,"form-label"],[1,"text-danger"],[3,"selectionChange","options","placeholder","value","disabled"],[1,"invalid-feedback","d-block"],["for","vacationTypeId",1,"form-label"],["for","startDate",1,"form-label"],["type","date","id","startDate","formControlName","startDate",1,"form-control",3,"disabled"],[1,"invalid-feedback"],["for","endDate",1,"form-label"],["type","date","id","endDate","formControlName","endDate",1,"form-control",3,"disabled"],[1,"mb-3"],["for","notes",1,"form-label"],["id","notes","rows","3","formControlName","notes",1,"form-control",3,"placeholder","disabled"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"col-lg-4"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fas","fa-info-circle","me-2"],[1,"card-body"],[1,"small","text-muted","mb-2"],[1,"small","text-muted","mb-0"]],template:function(i,c){i&1&&(o(0,"div",0),u(1,"app-form-header",1),p(2,K,2,3,"div",2),p(3,Z,65,41,"div",3),a()),i&2&&(t(),d("mode",c.getFormMode())("title",c.i18n.t("employee_vacations.create_vacation"))("entityId",c.getVacationId())("loading",c.loading()),t(),v(c.loading()?2:-1),t(),v(c.loading()?-1:3))},dependencies:[F,q,w,D,M,O,G,k,N,H,L,B,A],styles:[".form-label[_ngcontent-%COMP%]{font-weight:500;color:var(--bs-gray-700)}.form-control[_ngcontent-%COMP%]:disabled, .form-select[_ngcontent-%COMP%]:disabled{background-color:var(--bs-gray-100);opacity:.8}.invalid-feedback[_ngcontent-%COMP%]{font-size:.875rem}.help-card[_ngcontent-%COMP%]{position:sticky;top:1rem}.card-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:.375rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}@media (max-width: 768px){.d-flex.justify-content-end[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{margin-bottom:.5rem}.btn[_ngcontent-%COMP%]:last-child{margin-bottom:0}}"]})};export{J as CreateEmployeeVacationComponent};
