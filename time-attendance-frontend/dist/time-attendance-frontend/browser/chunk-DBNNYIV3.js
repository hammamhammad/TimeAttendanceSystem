import{a as X}from"./chunk-Y4XJLWGP.js";import{a as K}from"./chunk-QS4HD2YC.js";import{a as J}from"./chunk-VVO5HLLI.js";import{a as U}from"./chunk-DX3KH33G.js";import"./chunk-5MHFUEKN.js";import"./chunk-Y62N6K5S.js";import{b as D,c as I,e as A,f as E,g as V,h as N,i as R,j as q,o as O,p as T,r as Y,s as B,t as L,u as j,x as Q}from"./chunk-VRETN7JA.js";import{a as H}from"./chunk-EYAJMHM7.js";import{a as z}from"./chunk-HHXRLUSQ.js";import"./chunk-O7LPL3AF.js";import{b as G}from"./chunk-3VZ5QHEY.js";import{g as F}from"./chunk-TWXUAMJ4.js";import{Bb as a,Cb as g,Db as c,Ea as P,Ib as _,Jb as x,Kb as f,R as v,W as p,X as y,Xa as b,Ya as k,bb as h,cb as o,da as C,db as n,eb as u,lb as S,nb as W,pb as s,ta as t,wb as M,wc as w}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";function $(m,d){if(m&1&&(o(0,"div",3),u(1,"app-loading-spinner",4),n()),m&2){let r=s();t(),h("message",r.i18n.t("common.loading"))("variant","primary")("centered",!0)}}function ee(m,d){if(m&1){let r=S();o(0,"div",12)(1,"label",47),a(2),n(),o(3,"app-searchable-select",48),f("ngModelChange",function(i){p(r);let l=s(2);return x(l.policyForm.branchId,i)||(l.policyForm.branchId=i),y(i)}),n()()}if(m&2){let r=s(2);t(2),c(" ",r.i18n.t("remoteWork.policy.branch")," "),t(),_("ngModel",r.policyForm.branchId),h("options",r.branches())("placeholder",r.i18n.t("remoteWork.policy.select_branch"))("required",!0)}}function te(m,d){m&1&&u(0,"span",45)}function ie(m,d){m&1&&u(0,"i",46)}function oe(m,d){if(m&1){let r=S();o(0,"form",5,0),W("ngSubmit",function(){p(r);let i=s();return y(i.onSubmit())}),o(2,"div",6)(3,"div",7)(4,"h5",8),u(5,"i",9),a(6),n()(),o(7,"div",10)(8,"div",11)(9,"div",12)(10,"label",13),a(11),n(),o(12,"select",14),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyScope,i)||(l.policyScope=i),y(i)}),W("change",function(){p(r);let i=s();return y(i.onPolicyScopeChange())}),o(13,"option",15),a(14),n(),o(15,"option",16),a(16),n()(),o(17,"div",17),u(18,"i",18),a(19),n()(),b(20,ee,4,5,"div",12),o(21,"div",12)(22,"label",19),a(23),n(),o(24,"div",20)(25,"input",21),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyForm.isActive,i)||(l.policyForm.isActive=i),y(i)}),n(),o(26,"label",22),a(27),n()()()()()(),o(28,"div",6)(29,"div",7)(30,"h5",8),u(31,"i",23),a(32),n()(),o(33,"div",10)(34,"p",24),u(35,"i",18),a(36),n(),o(37,"div",11)(38,"div",25)(39,"label",26),a(40),n(),o(41,"input",27),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyForm.maxDaysPerWeek,i)||(l.policyForm.maxDaysPerWeek=i),y(i)}),n(),o(42,"div",17),a(43),n()(),o(44,"div",25)(45,"label",28),a(46),n(),o(47,"input",29),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyForm.maxDaysPerMonth,i)||(l.policyForm.maxDaysPerMonth=i),y(i)}),n(),o(48,"div",17),a(49),n()(),o(50,"div",25)(51,"label",30),a(52),n(),o(53,"input",31),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyForm.maxDaysPerYear,i)||(l.policyForm.maxDaysPerYear=i),y(i)}),n(),o(54,"div",17),a(55),n()()()()(),o(56,"div",6)(57,"div",7)(58,"h5",8),u(59,"i",32),a(60),n()(),o(61,"div",10)(62,"div",11)(63,"div",33)(64,"div",34)(65,"input",35),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyForm.requiresManagerApproval,i)||(l.policyForm.requiresManagerApproval=i),y(i)}),n(),o(66,"label",36),a(67),n()(),o(68,"div",17),a(69),n()()()()(),o(70,"div",6)(71,"div",7)(72,"h5",8),u(73,"i",37),a(74),n()(),o(75,"div",10)(76,"div",11)(77,"div",12)(78,"label",38),a(79),n(),o(80,"input",39),f("ngModelChange",function(i){p(r);let l=s();return x(l.policyForm.minAdvanceNoticeDays,i)||(l.policyForm.minAdvanceNoticeDays=i),y(i)}),n(),o(81,"div",17),a(82),n()()()()(),o(83,"div",40)(84,"div",10)(85,"div",41)(86,"button",42),W("click",function(){p(r);let i=s();return y(i.onCancel())}),u(87,"i",43),a(88),n(),o(89,"button",44),b(90,te,1,0,"span",45)(91,ie,1,0,"i",46),a(92),n()()()()()}if(m&2){let r=M(1),e=s();t(6),c(" ",e.i18n.t("common.basic_information")," "),t(5),c(" ",e.i18n.t("remoteWork.policy.policy_scope")," "),t(),_("ngModel",e.policyScope),t(2),g(e.i18n.t("remoteWork.policy.company_wide")),t(2),g(e.i18n.t("remoteWork.policy.branch_specific")),t(3),c(" ",e.policyScope==="company"?e.i18n.t("remoteWork.policy.company_wide_help"):e.i18n.t("remoteWork.policy.branch_specific_help")," "),t(),k(e.policyScope==="branch"?20:-1),t(3),c(" ",e.i18n.t("common.status")," "),t(2),_("ngModel",e.policyForm.isActive),t(2),c(" ",e.policyForm.isActive?e.i18n.t("common.active"):e.i18n.t("common.inactive")," "),t(5),c(" ",e.i18n.t("remoteWork.policy.quota_settings")," "),t(4),c(" ",e.i18n.t("remoteWork.policy.quota_settings_help")," "),t(4),c(" ",e.i18n.t("remoteWork.policy.max_days_per_week")," "),t(),_("ngModel",e.policyForm.maxDaysPerWeek),h("placeholder",e.i18n.t("remoteWork.policy.no_limit")),t(2),g(e.i18n.t("remoteWork.policy.max_7_days")),t(3),c(" ",e.i18n.t("remoteWork.policy.max_days_per_month")," "),t(),_("ngModel",e.policyForm.maxDaysPerMonth),h("placeholder",e.i18n.t("remoteWork.policy.no_limit")),t(2),g(e.i18n.t("remoteWork.policy.max_31_days")),t(3),c(" ",e.i18n.t("remoteWork.policy.max_days_per_year")," "),t(),_("ngModel",e.policyForm.maxDaysPerYear),h("placeholder",e.i18n.t("remoteWork.policy.no_limit")),t(2),g(e.i18n.t("remoteWork.policy.max_365_days")),t(5),c(" ",e.i18n.t("remoteWork.policy.approval_settings")," "),t(5),_("ngModel",e.policyForm.requiresManagerApproval),t(2),c(" ",e.i18n.t("remoteWork.policy.requires_manager_approval")," "),t(2),c(" ",e.policyForm.requiresManagerApproval?e.i18n.t("remoteWork.policy.approval_required_help"):e.i18n.t("remoteWork.policy.approval_automatic_help")," "),t(5),c(" ",e.i18n.t("remoteWork.policy.advance_notice")," "),t(5),c(" ",e.i18n.t("remoteWork.policy.min_advance_notice_days")," "),t(),_("ngModel",e.policyForm.minAdvanceNoticeDays),h("placeholder",e.i18n.t("remoteWork.policy.no_advance_notice")),t(2),g(e.i18n.t("remoteWork.policy.advance_notice_help")),t(4),h("disabled",e.submitting()),t(2),c(" ",e.i18n.t("common.cancel")," "),t(),h("disabled",e.submitting()||!r.form.valid),t(),k(e.submitting()?90:91),t(2),c(" ",e.i18n.t("common.create")," ")}}var Z=class m{service=v(X);branchesService=v(U);router=v(F);notificationService=v(z);i18n=v(G);loading=C(!1);submitting=C(!1);branches=C([]);policyScope="company";policyForm={branchId:void 0,maxDaysPerWeek:void 0,maxDaysPerMonth:void 0,maxDaysPerYear:void 0,requiresManagerApproval:!0,allowConsecutiveDays:!1,maxConsecutiveDays:void 0,minAdvanceNoticeDays:void 0,blackoutPeriods:void 0,countForOvertime:!0,enforceShiftTimes:!0,isActive:!0};ngOnInit(){this.loadBranches()}loadBranches(){this.loading.set(!0),this.branchesService.getBranchesForDropdown().subscribe({next:d=>{this.branches.set(d.map(r=>({value:r.id,label:r.name}))),this.loading.set(!1)},error:d=>{console.error("Failed to load branches:",d),this.notificationService.error(this.i18n.t("branches.errors.load_failed")),this.loading.set(!1)}})}onSubmit(){if(!this.validateForm())return;this.submitting.set(!0);let d={branchId:this.policyScope==="company"?void 0:this.policyForm.branchId,maxDaysPerWeek:this.policyForm.maxDaysPerWeek,maxDaysPerMonth:this.policyForm.maxDaysPerMonth,maxDaysPerYear:this.policyForm.maxDaysPerYear,requiresManagerApproval:this.policyForm.requiresManagerApproval,allowConsecutiveDays:this.policyForm.allowConsecutiveDays,maxConsecutiveDays:this.policyForm.maxConsecutiveDays,minAdvanceNoticeDays:this.policyForm.minAdvanceNoticeDays,blackoutPeriods:this.policyForm.blackoutPeriods,countForOvertime:this.policyForm.countForOvertime,enforceShiftTimes:this.policyForm.enforceShiftTimes,isActive:this.policyForm.isActive};this.service.create(d).subscribe({next:r=>{this.submitting.set(!1),this.notificationService.success(this.i18n.t("remoteWork.policy.success.created")),this.router.navigate(["/settings/remote-work-policy"])},error:r=>{this.submitting.set(!1),console.error("Failed to create policy:",r),this.notificationService.error(this.i18n.t("remoteWork.policy.errors.create_failed"))}})}onPolicyScopeChange(){this.policyScope==="company"&&(this.policyForm.branchId=void 0)}validateForm(){return this.policyScope==="branch"&&!this.policyForm.branchId?(this.notificationService.error(this.i18n.t("remoteWork.policy.errors.branch_required")),!1):(this.policyForm.maxDaysPerWeek!==void 0&&this.policyForm.maxDaysPerWeek!==null||this.policyForm.maxDaysPerMonth!==void 0&&this.policyForm.maxDaysPerMonth!==null||this.policyForm.maxDaysPerYear!==void 0&&this.policyForm.maxDaysPerYear!==null||this.notificationService.warning(this.i18n.t("remoteWork.policy.warnings.no_quotas")),this.policyForm.maxDaysPerWeek!==void 0&&this.policyForm.maxDaysPerWeek!==null&&(this.policyForm.maxDaysPerWeek<0||this.policyForm.maxDaysPerWeek>7)?(this.notificationService.error(this.i18n.t("remoteWork.policy.errors.invalid_max_days_per_week")),!1):this.policyForm.maxDaysPerMonth!==void 0&&this.policyForm.maxDaysPerMonth!==null&&(this.policyForm.maxDaysPerMonth<0||this.policyForm.maxDaysPerMonth>31)?(this.notificationService.error(this.i18n.t("remoteWork.policy.errors.invalid_max_days_per_month")),!1):this.policyForm.maxDaysPerYear!==void 0&&this.policyForm.maxDaysPerYear!==null&&(this.policyForm.maxDaysPerYear<0||this.policyForm.maxDaysPerYear>365)?(this.notificationService.error(this.i18n.t("remoteWork.policy.errors.invalid_max_days_per_year")),!1):this.policyForm.minAdvanceNoticeDays!==void 0&&this.policyForm.minAdvanceNoticeDays!==null&&this.policyForm.minAdvanceNoticeDays<0?(this.notificationService.error(this.i18n.t("remoteWork.policy.errors.invalid_advance_notice")),!1):!0)}onCancel(){this.router.navigate(["/settings/remote-work-policy"])}static \u0275fac=function(r){return new(r||m)};static \u0275cmp=P({type:m,selectors:[["app-create-remote-work-policy"]],decls:4,vars:3,consts:[["policyFormElement","ngForm"],[1,"create-remote-work-policy-page"],["mode","create","moduleName","remote-work-policy","moduleRoute","settings/remote-work-policy",3,"title","loading"],[1,"d-flex","justify-content-center","align-items-center","py-5"],[3,"message","variant","centered"],[3,"ngSubmit"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fas","fa-info-circle","text-info","me-2"],[1,"card-body"],[1,"row"],[1,"col-md-6","mb-3"],["for","policyScope",1,"form-label","required"],["id","policyScope","name","policyScope","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value","company"],["value","branch"],[1,"form-text"],[1,"fas","fa-info-circle","me-1"],["for","isActive",1,"form-label"],[1,"form-check","form-switch","mt-2"],["type","checkbox","id","isActive","name","isActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isActive",1,"form-check-label"],[1,"fas","fa-calendar-check","text-success","me-2"],[1,"text-muted","mb-3"],[1,"col-md-4","mb-3"],["for","maxDaysPerWeek",1,"form-label"],["type","number","id","maxDaysPerWeek","name","maxDaysPerWeek","min","0","max","7",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","maxDaysPerMonth",1,"form-label"],["type","number","id","maxDaysPerMonth","name","maxDaysPerMonth","min","0","max","31",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["for","maxDaysPerYear",1,"form-label"],["type","number","id","maxDaysPerYear","name","maxDaysPerYear","min","0","max","365",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"fas","fa-user-check","text-warning","me-2"],[1,"col-md-12","mb-3"],[1,"form-check","form-switch"],["type","checkbox","id","requiresManagerApproval","name","requiresManagerApproval",1,"form-check-input",3,"ngModelChange","ngModel"],["for","requiresManagerApproval",1,"form-check-label"],[1,"fas","fa-bell","text-primary","me-2"],["for","minAdvanceNoticeDays",1,"form-label"],["type","number","id","minAdvanceNoticeDays","name","minAdvanceNoticeDays","min","0",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"card"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-times","me-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"],["for","branchId",1,"form-label","required"],["name","branchId","valueField","id","labelField","name",3,"ngModelChange","ngModel","options","placeholder","required"]],template:function(r,e){r&1&&(o(0,"div",1),u(1,"app-form-header",2),b(2,$,2,3,"div",3)(3,oe,93,38,"form"),n()),r&2&&(t(),h("title",e.i18n.t("remoteWork.policy.create_policy"))("loading",e.submitting()),t(),k(e.loading()?2:3))},dependencies:[w,Q,R,T,Y,I,q,D,O,A,E,j,L,B,N,V,K,J,H],styles:['.create-remote-work-policy-page[_ngcontent-%COMP%]{padding:1.5rem}.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;border-radius:.5rem;box-shadow:0 1px 3px #0000000d;transition:box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 1.5rem}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#495057}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.required[_ngcontent-%COMP%]:after{content:" *";color:#dc3545}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#198754;border-color:#198754}.gap-2[_ngcontent-%COMP%]{gap:.5rem}@media (max-width: 768px){.create-remote-work-policy-page[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]{padding:1rem}}']})};export{Z as CreateRemoteWorkPolicyComponent};
