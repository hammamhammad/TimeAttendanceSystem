import{a as Z}from"./chunk-DX3KH33G.js";import{b as w,c as z,d as x,e as M,f as D,i as P,m as V,n as L,o as q,p as G,r as R,w as O,y as U}from"./chunk-VRETN7JA.js";import{b as j}from"./chunk-3VZ5QHEY.js";import{d as B,g as A,h as k,m as N}from"./chunk-TWXUAMJ4.js";import{$a as S,Bb as o,Cb as l,Db as m,Ea as I,R as b,W as E,X as g,Xa as v,Ya as h,ab as F,bb as s,cb as n,da as f,db as i,eb as d,lb as y,nb as C,pb as c,ta as t,wc as T,yb as u}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";var Y=(a,r)=>r.value;function H(a,r){if(a&1&&(n(0,"div",10)(1,"div",13)(2,"span",14),o(3),i()()()),a&2){let e=c();t(3),l(e.i18n.t("common.loading"))}}function J(a,r){if(a&1&&(n(0,"div",20),d(1,"i",53),o(2),i()),a&2){let e=c(2);t(2),m(" ",e.error()," ")}}function K(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("name"))}}function Q(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("code"))}}function W(a,r){if(a&1&&(n(0,"option",34),o(1),i()),a&2){let e=r.$implicit;s("value",e.value),t(),l(e.label)}}function X(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("timezone"))}}function ee(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("phone"))}}function te(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("email"))}}function ie(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("address"))}}function ne(a,r){if(a&1&&(n(0,"div",29),o(1),i()),a&2){let e=c(2);t(),l(e.getFieldError("description"))}}function ae(a,r){a&1&&d(0,"span",51)}function oe(a,r){a&1&&d(0,"i",52)}function re(a,r){if(a&1){let e=y();n(0,"div",11)(1,"div",15)(2,"h5",16),d(3,"i",17),o(4),i()(),n(5,"div",18)(6,"form",19),C("ngSubmit",function(){E(e);let _=c();return g(_.onSubmit())}),v(7,J,3,1,"div",20),n(8,"div",21)(9,"h6",22),d(10,"i",23),o(11),i(),n(12,"div",24)(13,"div",25)(14,"label",26),o(15),n(16,"span",27),o(17,"*"),i()(),d(18,"input",28),v(19,K,2,1,"div",29),i(),n(20,"div",25)(21,"label",26),o(22),n(23,"span",27),o(24,"*"),i()(),d(25,"input",30),v(26,Q,2,1,"div",29),n(27,"div",31),o(28),i()(),n(29,"div",25)(30,"label",26),o(31),n(32,"span",27),o(33,"*"),i()(),n(34,"select",32)(35,"option",33),o(36),i(),S(37,W,2,2,"option",34,Y),i(),v(39,X,2,1,"div",29),i(),n(40,"div",25)(41,"label",26),o(42),i(),n(43,"div",35),d(44,"input",36),n(45,"label",37),o(46),i()()()()(),d(47,"hr"),n(48,"div",21)(49,"h6",38),d(50,"i",39),o(51),i(),n(52,"div",24)(53,"div",25)(54,"label",26),o(55),i(),d(56,"input",40),v(57,ee,2,1,"div",29),i(),n(58,"div",25)(59,"label",26),o(60),i(),d(61,"input",41),v(62,te,2,1,"div",29),i(),n(63,"div",42)(64,"label",26),o(65),i(),d(66,"textarea",43),v(67,ie,2,1,"div",29),i(),n(68,"div",42)(69,"label",26),o(70),i(),d(71,"textarea",44),v(72,ne,2,1,"div",29),i()()(),n(73,"div",45)(74,"h6",46),d(75,"i",23),o(76),i(),n(77,"ul",47)(78,"li"),o(79),i(),n(80,"li"),o(81),i(),n(82,"li"),o(83),i(),n(84,"li"),o(85),i(),n(86,"li"),o(87),i()()(),n(88,"div",48)(89,"button",8),C("click",function(){E(e);let _=c();return g(_.onCancel())}),d(90,"i",49),o(91),i(),n(92,"button",50),v(93,ae,1,0,"span",51)(94,oe,1,0,"i",52),o(95),i()()()()()}if(a&2){let e=c();t(4),m(" ",e.i18n.t("branches.branch_information")," "),t(2),s("formGroup",e.branchForm),t(),h(e.error()?7:-1),t(4),m(" ",e.i18n.t("branches.basic_information")," "),t(4),m(" ",e.i18n.t("branches.name")," "),t(3),u("is-invalid",e.isFieldInvalid("name")),s("placeholder",e.i18n.t("branches.name_placeholder")),t(),h(e.isFieldInvalid("name")?19:-1),t(3),m(" ",e.i18n.t("branches.code")," "),t(3),u("is-invalid",e.isFieldInvalid("code")),s("placeholder",e.i18n.t("branches.code_placeholder")),t(),h(e.isFieldInvalid("code")?26:-1),t(2),l(e.i18n.t("branches.code_hint")),t(3),m(" ",e.i18n.t("branches.timezone")," "),t(3),u("is-invalid",e.isFieldInvalid("timezone")),t(2),l(e.i18n.t("branches.select_timezone")),t(),F(e.timezones),t(2),h(e.isFieldInvalid("timezone")?39:-1),t(3),l(e.i18n.t("common.status")),t(4),m(" ",e.i18n.t("common.active")," "),t(5),m(" ",e.i18n.t("branches.contact_information")," "),t(4),l(e.i18n.t("common.phone")),t(),u("is-invalid",e.isFieldInvalid("phone")),s("placeholder",e.i18n.t("common.phone_placeholder")),t(),h(e.isFieldInvalid("phone")?57:-1),t(3),l(e.i18n.t("common.email")),t(),u("is-invalid",e.isFieldInvalid("email")),s("placeholder",e.i18n.t("common.email_placeholder")),t(),h(e.isFieldInvalid("email")?62:-1),t(3),l(e.i18n.t("branches.address")),t(),u("is-invalid",e.isFieldInvalid("address")),s("placeholder",e.i18n.t("branches.address_placeholder")),t(),h(e.isFieldInvalid("address")?67:-1),t(3),l(e.i18n.t("common.description")),t(),u("is-invalid",e.isFieldInvalid("description")),s("placeholder",e.i18n.t("branches.description_placeholder")),t(),h(e.isFieldInvalid("description")?72:-1),t(4),m(" ",e.i18n.t("branches.validation_rules.title")," "),t(3),l(e.i18n.t("branches.validation_rules.name")),t(2),l(e.i18n.t("branches.validation_rules.code")),t(2),l(e.i18n.t("branches.validation_rules.timezone")),t(2),l(e.i18n.t("branches.validation_rules.email")),t(2),l(e.i18n.t("branches.validation_rules.phone")),t(2),s("disabled",e.saving()),t(2),m(" ",e.i18n.t("common.cancel")," "),t(),s("disabled",e.branchForm.invalid||e.saving()),t(),h(e.saving()?93:94),t(2),m(" ",e.saving()?e.i18n.t("common.saving"):e.i18n.t("branches.update_branch")," ")}}function le(a,r){if(a&1&&(n(0,"div",12),d(1,"i",53),o(2),i()),a&2){let e=c();t(2),m(" ",e.error()||e.i18n.t("branches.branch_not_found")," ")}}var $=class a{route=b(B);router=b(A);branchesService=b(Z);fb=b(O);i18n=b(j);branch=f(null);loading=f(!0);saving=f(!1);error=f("");timezones=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"},{value:"Asia/Dubai",label:"Dubai"}];branchForm;ngOnInit(){this.initializeForm();let r=this.route.snapshot.paramMap.get("id");r?this.loadBranch(r):(this.error.set("Invalid branch ID"),this.loading.set(!1))}initializeForm(){this.branchForm=this.fb.group({name:["",[x.required,x.minLength(2)]],code:["",[x.required,x.minLength(2)]],timezone:["",x.required],phone:[""],email:["",x.email],address:[""],description:[""],isActive:[!0]})}loadBranch(r){setTimeout(()=>{let e={id:parseInt(r),name:"Sample Branch",code:"SAMPLE",timeZone:"UTC",isActive:!0,employeeCount:10,departmentCount:3,createdAtUtc:"2024-01-01T00:00:00Z"};this.branch.set(e),this.populateForm(e),this.loading.set(!1)},1e3)}populateForm(r){this.branchForm.patchValue({name:r.name,code:r.code,timezone:r.timeZone,phone:"",email:"",address:"",description:"",isActive:r.isActive})}onSubmit(){if(this.branchForm.invalid){this.branchForm.markAllAsTouched();return}this.saving.set(!0),this.error.set("");let r=this.branchForm.value,e={name:r.name,code:r.code.toUpperCase(),timeZone:r.timezone,isActive:r.isActive};setTimeout(()=>{this.saving.set(!1),this.router.navigate(["/branches",this.branch().id,"view"])},1e3)}onCancel(){this.branch()?this.router.navigate(["/branches",this.branch().id,"view"]):this.router.navigate(["/branches"])}getFieldError(r){let e=this.branchForm.get(r);if(e?.errors&&e.touched){if(e.errors.required)return this.i18n.t("validation.required");if(e.errors.email)return this.i18n.t("validation.email");if(e.errors.minlength)return this.i18n.t("validation.minlength").replace("{{min}}",e.errors.minlength.requiredLength)}return""}isFieldInvalid(r){let e=this.branchForm.get(r);return!!(e?.errors&&e.touched)}getErrorMessage(r){return r?.error?.error?r.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=I({type:a,selectors:[["app-edit-branch"]],decls:21,vars:7,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/branches"],[1,"breadcrumb-item","active"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","justify-content-center","py-5"],[1,"card"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fa-solid","fa-building","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],["role","alert",1,"alert","alert-danger"],[1,"mb-4"],[1,"text-primary","mb-3"],[1,"fa-solid","fa-info-circle","me-2"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],["type","text","formControlName","code",1,"form-control",2,"text-transform","uppercase",3,"placeholder"],[1,"form-text"],["formControlName","timezone",1,"form-select"],["value",""],[3,"value"],[1,"form-check","form-switch","mt-2"],["type","checkbox","role","switch","id","isActiveSwitch","formControlName","isActive",1,"form-check-input"],["for","isActiveSwitch",1,"form-check-label"],[1,"text-secondary","mb-3"],[1,"fa-solid","fa-address-book","me-2"],["type","tel","formControlName","phone",1,"form-control",3,"placeholder"],["type","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"col-12"],["formControlName","address","rows","3",1,"form-control",3,"placeholder"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"alert","alert-info"],[1,"alert-heading"],[1,"mb-0"],[1,"d-flex","justify-content-end","gap-2","mt-4"],[1,"fa-solid","fa-times","me-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fa-solid","fa-save","me-2"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,p){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),o(4),i(),n(5,"nav",2)(6,"ol",3)(7,"li",4)(8,"a",5),o(9),i()(),n(10,"li",4)(11,"a",6),o(12),i()(),n(13,"li",7),o(14),i()()()(),n(15,"button",8),C("click",function(){return p.onCancel()}),d(16,"i",9),o(17),i()(),v(18,H,4,1,"div",10)(19,re,96,54,"div",11)(20,le,3,1,"div",12),i()),e&2&&(t(4),l(p.i18n.t("branches.edit_branch")),t(5),l(p.i18n.t("dashboard.title")),t(3),l(p.i18n.t("branches.title")),t(2),l(p.i18n.t("branches.edit_branch")),t(),s("disabled",p.saving()),t(2),m(" ",p.i18n.t("common.back")," "),t(),h(p.loading()?18:p.branch()?19:20))},dependencies:[T,N,k,U,P,G,R,z,w,q,M,D,V,L],encapsulation:2})};export{$ as EditBranchComponent};
