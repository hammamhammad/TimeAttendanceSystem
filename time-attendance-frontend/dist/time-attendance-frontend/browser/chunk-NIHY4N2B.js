import{a as F,b as H,c as K}from"./chunk-BLUZVNQL.js";import{a as z}from"./chunk-ZSNO2TG4.js";import{a as B}from"./chunk-K7WTKFJQ.js";import{a as G}from"./chunk-MRHL7QNZ.js";import{a as U}from"./chunk-2MCKRQB6.js";import{a as R}from"./chunk-H5EPUHY6.js";import{a as k}from"./chunk-YRY7UVWD.js";import{a as w,b as M}from"./chunk-Y62N6K5S.js";import{x as j}from"./chunk-VRETN7JA.js";import{a as Y}from"./chunk-EYAJMHM7.js";import{a as W}from"./chunk-HHXRLUSQ.js";import"./chunk-WO762DVG.js";import{b as $}from"./chunk-7HHEMKQW.js";import{d as A,g as D}from"./chunk-TWXUAMJ4.js";import{Bb as m,Cb as s,Db as x,Ea as O,Eb as L,R as g,W as C,X as E,Xa as _,Ya as y,Yb as T,bb as f,cb as l,da as b,db as o,eb as p,lb as S,nb as I,pb as c,ta as n,wc as V}from"./chunk-JSQL33QG.js";import{d as P}from"./chunk-DGAILPFQ.js";function J(i,t){if(i&1&&(l(0,"div",2),p(1,"app-loading-spinner",5),o()),i&2){let e=c();n(),f("message",e.t("common.loading"))("centered",!0)}}function Q(i,t){if(i&1&&p(0,"app-status-badge",22),i&2){let e=c(2);f("label",e.employee().currentShiftName)("variant","primary")("icon","fas fa-clock")}}function X(i,t){if(i&1&&(l(0,"span",14),m(1),o()),i&2){let e=c(2);n(),s(e.t("employees.no_shift_assigned"))}}function Z(i,t){if(i&1&&(l(0,"div",19)(1,"h6",20),m(2),o(),p(3,"app-status-badge",26),o()),i&2){let e=c(2);n(2),s(e.t("employees.gender.title")),n(),f("label",e.getGenderLabel(e.employee().gender))("variant","light")("showIcon",!1)}}function ee(i,t){if(i&1&&(l(0,"div",27)(1,"small",14),m(2),o(),p(3,"br"),l(4,"span"),m(5),o()()),i&2){let e,r=c(3);n(2),s(r.t("employees.first_name_ar")),n(3),s((e=r.employee())==null?null:e.firstNameAr)}}function te(i,t){if(i&1&&(l(0,"div",27)(1,"small",14),m(2),o(),p(3,"br"),l(4,"span"),m(5),o()()),i&2){let e,r=c(3);n(2),s(r.t("employees.last_name_ar")),n(3),s((e=r.employee())==null?null:e.lastNameAr)}}function ie(i,t){if(i&1&&(l(0,"div")(1,"small",14),m(2),o(),p(3,"br"),l(4,"span"),m(5),o()()),i&2){let e,r=c(3);n(2),s(r.t("employees.job_title_ar")),n(3),s((e=r.employee())==null?null:e.jobTitleAr)}}function ne(i,t){if(i&1&&(l(0,"div",23)(1,"div",8)(2,"h6",9),m(3),o()(),l(4,"div",15),_(5,ee,6,2,"div",27),_(6,te,6,2,"div",27),_(7,ie,6,2,"div"),o()()),i&2){let e,r,d,v=c(2);n(3),s(v.t("employees.arabic_names")),n(2),y((e=v.employee())!=null&&e.firstNameAr?5:-1),n(),y((r=v.employee())!=null&&r.lastNameAr?6:-1),n(),y((d=v.employee())!=null&&d.jobTitleAr?7:-1)}}function oe(i,t){if(i&1){let e=S();l(0,"button",30),I("click",function(){C(e);let d=c(3);return E(d.toggleEmployeeStatus())}),p(1,"i",31),m(2),o()}if(i&2){let e=c(3);n(2),x(" ",e.t("employees.deactivate")," ")}}function le(i,t){if(i&1){let e=S();l(0,"button",32),I("click",function(){C(e);let d=c(3);return E(d.toggleEmployeeStatus())}),p(1,"i",33),m(2),o()}if(i&2){let e=c(3);n(2),x(" ",e.t("employees.activate")," ")}}function ae(i,t){if(i&1&&_(0,oe,3,1,"button",28)(1,le,3,1,"button",29),i&2){let e,r=c(2);y((e=r.employee())!=null&&e.isActive?0:1)}}function re(i,t){if(i&1){let e=S();l(0,"button",34),I("click",function(){C(e);let d=c(2);return E(d.deleteEmployee())}),p(1,"i",35),m(2),o()}if(i&2){let e=c(2);n(2),x(" ",e.t("employees.delete")," ")}}function me(i,t){if(i&1&&(l(0,"div",3)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h5",9)(5,"div",10)(6,"div",11)(7,"div",12),m(8),o()(),l(9,"div")(10,"div",13),m(11),o(),l(12,"small",14),m(13),o()()()()(),l(14,"div",15)(15,"div",3)(16,"div",16),p(17,"app-definition-list",17),o(),l(18,"div",16),p(19,"app-definition-list",17),o()()()()(),l(20,"div",18)(21,"div",7)(22,"div",8)(23,"h6",9),m(24),o()(),l(25,"div",15)(26,"div",19)(27,"h6",20),m(28),o(),p(29,"app-status-badge",21),o(),l(30,"div",19)(31,"h6",20),m(32),o(),p(33,"app-status-badge",22),o(),l(34,"div",19)(35,"h6",20),m(36),o(),p(37,"app-status-badge",22),o(),l(38,"div",19)(39,"h6",20),m(40),o(),_(41,Q,1,3,"app-status-badge",22)(42,X,2,1,"span",14),o(),_(43,Z,4,4,"div",19),l(44,"div")(45,"h6",20),m(46),o(),l(47,"small",14),m(48),o()()()(),_(49,ne,8,4,"div",23),l(50,"div",23)(51,"div",8)(52,"h6",9),m(53),o()(),l(54,"div",15)(55,"div",24),_(56,ae,2,1),_(57,re,3,1,"button",25),o()()()()()),i&2){let e,r,d,v,h,N,u,a=c();n(8),L(" ",(((e=a.employee())==null||e.firstName==null?null:e.firstName.charAt(0))||"")==null?null:(((e=e)==null||e.firstName==null?null:e.firstName.charAt(0))||"").toUpperCase(),"",(((e=a.employee())==null||e.lastName==null?null:e.lastName.charAt(0))||"")==null?null:(((e=e)==null||e.lastName==null?null:e.lastName.charAt(0))||"").toUpperCase()," "),n(3),s((r=a.employee())==null?null:r.fullName),n(2),s((d=a.employee())==null?null:d.employeeNumber),n(4),f("items",a.basicInfoItems())("labelWidth","5")("valueWidth","7"),n(2),f("items",a.employmentInfoItems())("labelWidth","5")("valueWidth","7"),n(5),s(a.t("employees.employment_details")),n(4),s(a.t("common.status")),n(),f("status",(v=a.employee())!=null&&v.isActive?"active":"inactive"),n(3),s(a.t("employees.employment_status.title")),n(),f("label",a.getEmploymentStatusLabel(a.employee().employmentStatus))("variant","info")("icon","fas fa-briefcase"),n(3),s(a.t("employees.work_location.title")),n(),f("label",a.getWorkLocationTypeLabel(a.employee().workLocationType))("variant","light")("icon","fas fa-map-marker-alt"),n(3),s(a.t("employees.current_shift")),n(),y((h=a.employee())!=null&&h.currentShiftName?41:42),n(2),y((N=a.employee())!=null&&N.gender?43:-1),n(3),s(a.t("employees.created_at")),n(2),s(a.formatDate(a.employee().createdAtUtc)),n(),y((u=a.employee())!=null&&u.firstNameAr||(u=a.employee())!=null&&u.lastNameAr||(u=a.employee())!=null&&u.jobTitleAr?49:-1),n(4),s(a.t("common.actions")),n(3),y(a.permissionService.has(a.PERMISSIONS.EMPLOYEE_MANAGE)?56:-1),n(),y(a.permissionService.has(a.PERMISSIONS.EMPLOYEE_DELETE)?57:-1)}}function se(i,t){if(i&1&&(l(0,"div",4),p(1,"i",36),m(2),o()),i&2){let e=c();n(2),x(" ",e.error()||e.t("employees.employee_not_found")," ")}}var q=class i{router=g(D);route=g(A);employeesService=g(U);notificationService=g(W);confirmationService=g(R);i18n=g($);permissionService=g(k);loading=b(!1);error=b(null);employee=b(null);employeeId=0;PERMISSIONS={EMPLOYEE_UPDATE:`${M.EMPLOYEE}.${w.UPDATE}`,EMPLOYEE_DELETE:`${M.EMPLOYEE}.${w.DELETE}`,EMPLOYEE_MANAGE:`${M.EMPLOYEE}.${w.MANAGE}`};ngOnInit(){this.employeeId=+this.route.snapshot.params.id,this.employeeId?this.loadEmployee():this.router.navigate(["/employees"])}loadEmployee(){this.loading.set(!0),this.employeesService.getEmployeeById(this.employeeId).subscribe({next:t=>{this.employee.set(t),this.loading.set(!1)},error:t=>{this.error.set("Failed to load employee"),this.loading.set(!1),console.error("Error loading employee:",t)}})}formatDate(t){return new Date(t).toLocaleDateString()}getEmploymentStatusLabel(t){return this.t(`employees.employment_status.${H[t].toLowerCase()}`)}getGenderLabel(t){return this.t(`employees.gender.${F[t].toLowerCase()}`)}getWorkLocationTypeLabel(t){return this.t(`employees.work_location.${K[t].toLowerCase()}`)}t(t){return this.i18n.t(t)}toggleEmployeeStatus(){return P(this,null,function*(){let t=this.employee();if(!t)return;let e=t.isActive,r=e?"employees.deactivate":"employees.activate",d=e?"employees.confirm_deactivate":"employees.confirm_activate",v=e?"text-danger":"text-success",h=e?"btn-danger":"btn-success";(yield this.confirmationService.confirm({title:this.t(r),message:this.t(d),confirmText:this.t("common.confirm"),cancelText:this.t("common.cancel"),confirmButtonClass:h,icon:"fa-user",iconClass:v})).confirmed&&this.employeesService.toggleEmployeeStatus(t.id).subscribe({next:u=>{this.notificationService.success(u.message),this.loadEmployee()},error:u=>{console.error("Error toggling employee status:",u),this.notificationService.error(u.error?.error||this.t("common.error_occurred"))}})})}deleteEmployee(){return P(this,null,function*(){(yield this.confirmationService.confirm({title:this.t("employees.confirm_delete_title"),message:this.t("employees.confirm_delete_message"),confirmText:this.t("common.delete"),cancelText:this.t("common.cancel"),confirmButtonClass:"btn-danger",icon:"fa-trash",iconClass:"text-danger"})).confirmed&&this.employeesService.deleteEmployee(this.employeeId).subscribe({next:()=>{this.notificationService.success(this.t("employees.delete_success")),this.router.navigate(["/employees"])},error:e=>{console.error("Error deleting employee:",e),this.notificationService.error(e.error?.error||this.t("common.error_occurred"))}})})}basicInfoItems=T(()=>{let t=this.employee();return t?[{label:this.t("employees.employee_number"),value:t.employeeNumber},{label:this.t("employees.first_name"),value:t.firstName},{label:this.t("employees.last_name"),value:t.lastName},{label:this.t("employees.email"),value:t.email||"-"},{label:this.t("employees.phone"),value:t.phone||"-"},{label:this.t("employees.national_id"),value:t.nationalId||"-"}]:[]});employmentInfoItems=T(()=>{let t=this.employee();if(!t)return[];let e=[{label:this.t("employees.job_title"),value:t.jobTitle},{label:this.t("employees.branch"),value:t.branchName},{label:this.t("employees.department"),value:t.departmentName||"-"},{label:this.t("employees.manager"),value:t.managerName||"-"},{label:this.t("employees.hire_date"),value:this.formatDate(t.hireDate),type:"date"}];return t.dateOfBirth&&e.push({label:this.t("employees.date_of_birth"),value:this.formatDate(t.dateOfBirth),type:"date"}),e});static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-view-employee"]],decls:5,vars:4,consts:[[1,"container-fluid"],["mode","view","moduleName","employees","moduleRoute","employees",3,"title","entityId","loading"],[1,"d-flex","justify-content-center","py-5"],[1,"row"],[1,"alert","alert-danger"],[3,"message","centered"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-3"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle"],[1,"fw-medium"],[1,"text-muted"],[1,"card-body"],[1,"col-md-6"],[3,"items","labelWidth","valueWidth"],[1,"col-lg-4"],[1,"mb-3"],[1,"fw-semibold"],[3,"status"],[3,"label","variant","icon"],[1,"card","mt-3"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-danger"],[3,"label","variant","showIcon"],[1,"mb-2"],["type","button",1,"btn","btn-outline-warning"],["type","button",1,"btn","btn-outline-success"],["type","button",1,"btn","btn-outline-warning",3,"click"],[1,"fa-solid","fa-user-slash","me-2"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-user-check","me-2"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash","me-2"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,r){e&1&&(l(0,"div",0),p(1,"app-form-header",1),_(2,J,2,2,"div",2)(3,me,58,30,"div",3)(4,se,3,1,"div",4),o()),e&2&&(n(),f("title",r.t("employees.view_details"))("entityId",r.employeeId)("loading",r.loading()),n(),y(r.loading()?2:r.employee()?3:4))},dependencies:[V,j,z,Y,B,G],styles:['.avatar-sm[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center}.avatar-title[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem}.icon-circle[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center}.icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.performance-circle[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;margin:0 auto}.circle-progress[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:50%;background:conic-gradient(#198754 0deg calc(var(--progress) * 3.6deg),#e9ecef calc(var(--progress) * 3.6deg) 360deg);display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}.circle-progress[_ngcontent-%COMP%]:before{content:"";position:absolute;width:80px;height:80px;border-radius:50%;background:#fff}.percentage[_ngcontent-%COMP%]{position:relative;font-size:1.5rem;font-weight:700;color:#198754;z-index:1}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.performance-circle[_ngcontent-%COMP%], .circle-progress[_ngcontent-%COMP%]{width:100px;height:100px}.circle-progress[_ngcontent-%COMP%]:before{width:70px;height:70px}.percentage[_ngcontent-%COMP%]{font-size:1.2rem}.icon-circle[_ngcontent-%COMP%]{width:40px;height:40px}.icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}}']})};export{q as ViewEmployeeComponent};
