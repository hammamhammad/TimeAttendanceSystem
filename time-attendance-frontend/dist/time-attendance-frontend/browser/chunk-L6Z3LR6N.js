import{a as w}from"./chunk-SJPWTQSH.js";import"./chunk-3OLRZNFC.js";import"./chunk-SHLCHTQ4.js";import"./chunk-46YUKDEL.js";import{a as R}from"./chunk-SHPIBPD3.js";import"./chunk-53CNHAPR.js";import"./chunk-IE5XUEO5.js";import"./chunk-YQIE4CGE.js";import{a as M}from"./chunk-GEGVYT7O.js";import"./chunk-A6EM5NV6.js";import{A as g,Cb as E,E as c,Fb as I,Ga as d,Gb as S,Ha as l,Ia as v,L as r,Lb as y,Q as D,aa as _,ba as x,ga as C,ha as o,ia as a,ja as u,qa as h,sa as b,ua as s,y as p,z as f}from"./chunk-5OFYUWMA.js";import"./chunk-YMDWBF3A.js";function q(i,n){if(i&1&&(o(0,"div",10)(1,"div",12)(2,"span",13),d(3),a()()()),i&2){let e=s();r(3),l(e.i18n.t("common.loading"))}}function N(i,n){if(i&1&&(o(0,"div",11),u(1,"i",20),d(2),a()),i&2){let e=s(2);r(2),v(" ",e.error()," ")}}function V(i,n){if(i&1){let e=h();_(0,N,3,1,"div",11),o(1,"div",14)(2,"div",15)(3,"h5",16),u(4,"i",17),d(5),a()(),o(6,"div",18)(7,"app-department-form",19),b("save",function(m){f(e);let T=s();return g(T.onDepartmentSaved(m))})("cancel",function(){f(e);let m=s();return g(m.onCancel())}),a()()()}if(i&2){let e,t=s();x(t.error()?0:-1),r(5),v(" ",t.i18n.t("department.information")," "),r(2),C("department",t.department())("branchId",((e=t.department())==null?null:e.branchId)||null)("isEditMode",!0)("externalSaving",t.saving())}}function j(i,n){if(i&1&&(o(0,"div",11),u(1,"i",20),d(2),a()),i&2){let e=s();r(2),v(" ",e.error()||e.i18n.t("department.not_found")," ")}}var k=class i{route=p(E);router=p(I);departmentsService=p(R);i18n=p(M);department=c(null);loading=c(!0);saving=c(!1);error=c("");ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n?this.loadDepartment(n):(this.error.set("Invalid department ID"),this.loading.set(!1))}loadDepartment(n){this.departmentsService.getDepartmentById(+n).subscribe({next:e=>{this.department.set(e),this.loading.set(!1)},error:e=>{this.error.set(this.getErrorMessage(e)),this.loading.set(!1)}})}onDepartmentSaved(n){if(this.saving()||!this.department())return;this.saving.set(!0),this.error.set("");let e=this.department().id,t=n;this.departmentsService.updateDepartment(e,t).subscribe({next:()=>{console.log("Department updated successfully"),this.saving.set(!1),this.router.navigate(["/departments"])},error:m=>{console.error("Error updating department:",m),this.error.set(this.getErrorMessage(m)),this.saving.set(!1)}})}onCancel(){this.router.navigate(["/departments"])}getErrorMessage(n){return n?.error?.error?n.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=D({type:i,selectors:[["app-edit-department"]],decls:21,vars:6,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/departments"],[1,"breadcrumb-item","active"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"fa-solid","fa-building","me-2"],[1,"card-body"],[3,"save","cancel","department","branchId","isEditMode","externalSaving"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),d(4),a(),o(5,"nav",2)(6,"ol",3)(7,"li",4)(8,"a",5),d(9),a()(),o(10,"li",4)(11,"a",6),d(12),a()(),o(13,"li",7),d(14),a()()()(),o(15,"button",8),b("click",function(){return t.onCancel()}),u(16,"i",9),d(17),a()(),_(18,q,4,1,"div",10)(19,V,8,6)(20,j,3,1,"div",11),a()),e&2&&(r(4),l(t.i18n.t("department.edit")),r(5),l(t.i18n.t("dashboard.title")),r(3),l(t.i18n.t("departments.title")),r(2),l(t.i18n.t("department.edit")),r(3),v(" ",t.i18n.t("common.back")," "),r(),x(t.loading()?18:t.department()?19:20))},dependencies:[y,S,w],encapsulation:2})};export{k as EditDepartmentComponent};
