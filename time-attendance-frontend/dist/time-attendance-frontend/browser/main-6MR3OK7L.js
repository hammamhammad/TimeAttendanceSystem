import{a as d}from"./chunk-LCQOFV6P.js";import"./chunk-5BLMYARA.js";import{a as m}from"./chunk-SZUF4QIO.js";import{b as C}from"./chunk-AS5QRUY4.js";import{B as S,H as E,J as I,Qa as b,ba as R,e as g,gb as _,j as y,jb as w,k as T,kb as V,lb as F,ob as P,p as A,pb as u,qb as l,t as a,tb as D,ub as H,vb as x,y as M}from"./chunk-LDUBOZPL.js";import"./chunk-DGAILPFQ.js";var n=(t,i)=>{let e=a(m),s=a(d),r=a(l);if(!e.isAuthenticated())return r.navigate(["/login"]),!1;if(e.isTokenExpired())if(e.getRefreshToken())e.refreshToken().subscribe({error:()=>{r.navigate(["/login"])}});else return r.navigate(["/login"]),!1;let p=t.data?.permission;return p&&!s.has(p)?(r.navigate(["/unauthorized"]),!1):!0};var o=(t,i)=>{let e=a(m),s=a(d),r=a(l);if(!e.isAuthenticated())return r.navigate(["/login"]),!1;if(e.isAdmin()||e.isSystemAdmin())return!0;let p=t.data?.permission;return p&&s.has(p)?!0:(r.navigate(["/unauthorized"]),!1)};var h=(t,i)=>{let e=a(m),s=a(d),r=a(l);if(!e.isAuthenticated())return r.navigate(["/login"]),!1;if(e.isSystemAdmin()||e.isAdmin()||s.hasRole("Manager"))return!0;let p=["employee.read","employee.assign","shift.read","shift.assign","department.read","attendance.read","report.read"];if(s.hasAny(p))return!0;let c=t.data?.permission;return c&&s.has(c)?!0:(r.navigate(["/unauthorized"]),!1)};var G=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-XZBNWRYX.js").then(t=>t.LoginComponent),data:{title:"auth.login"}},{path:"",loadComponent:()=>import("./chunk-BCV3WWJH.js").then(t=>t.LayoutComponent),canMatch:[n],children:[{path:"dashboard",loadComponent:()=>import("./chunk-6I3ARQYX.js").then(t=>t.DashboardComponent),data:{title:"dashboard.title"}},{path:"users",loadComponent:()=>import("./chunk-QSOG5BCZ.js").then(t=>t.UsersComponent),data:{title:"users.title",permission:"user.read"},canMatch:[o]},{path:"users/create",loadComponent:()=>import("./chunk-P2OFEOST.js").then(t=>t.CreateUserPageComponent),data:{title:"users.create_user",permission:"user.create"},canMatch:[o]},{path:"users/:id/view",loadComponent:()=>import("./chunk-5JZRKJS2.js").then(t=>t.ViewUserComponent),data:{title:"users.view_details",permission:"user.read"},canMatch:[o]},{path:"users/:id/edit",loadComponent:()=>import("./chunk-5I4NYE7P.js").then(t=>t.EditUserPageComponent),data:{title:"users.edit_user",permission:"user.update"},canMatch:[o]},{path:"employees",loadComponent:()=>import("./chunk-QYXSKRBW.js").then(t=>t.EmployeesComponent),data:{title:"employees.title",permission:"employee.read"},canMatch:[h]},{path:"employees/create",loadComponent:()=>import("./chunk-H6ZPHI7U.js").then(t=>t.CreateEmployeeComponent),data:{title:"employees.create_employee",permission:"employee.create"},canMatch:[o]},{path:"employees/:id/view",loadComponent:()=>import("./chunk-27XUGEOB.js").then(t=>t.ViewEmployeeComponent),data:{title:"employees.view_details",permission:"employee.read"},canMatch:[h]},{path:"employees/:id/edit",loadComponent:()=>import("./chunk-3DTFORL2.js").then(t=>t.EditEmployeeComponent),data:{title:"employees.edit_employee",permission:"employee.update"},canMatch:[o]},{path:"roles",loadComponent:()=>import("./chunk-2DZOCUBN.js").then(t=>t.RolesComponent),data:{title:"roles.title",permission:"role.read"},canMatch:[o]},{path:"roles/create",loadComponent:()=>import("./chunk-RVQMPWN4.js").then(t=>t.CreateRoleComponent),data:{title:"roles.create_role",permission:"role.create"},canMatch:[o]},{path:"roles/:id/view",loadComponent:()=>import("./chunk-JNBGX6U7.js").then(t=>t.ViewRoleComponent),data:{title:"roles.view_details",permission:"role.read"},canMatch:[o]},{path:"roles/:id/edit",loadComponent:()=>import("./chunk-QHSB2FI2.js").then(t=>t.EditRoleComponent),data:{title:"roles.edit_role",permission:"role.update"},canMatch:[o]},{path:"branches",loadComponent:()=>import("./chunk-MAZ66T4T.js").then(t=>t.BranchesComponent),data:{title:"branches.title",permission:"branch.read"},canMatch:[n]},{path:"branches/:id/view",loadComponent:()=>import("./chunk-WTUPEAWL.js").then(t=>t.ViewBranchComponent),data:{title:"branches.view_details",permission:"branch.read"},canMatch:[n]},{path:"branches/:id/edit",loadComponent:()=>import("./chunk-AZJ6W3GP.js").then(t=>t.EditBranchComponent),data:{title:"branches.edit_branch",permission:"branch.update"},canMatch:[n]},{path:"departments",loadComponent:()=>import("./chunk-ZHMDL5OZ.js").then(t=>t.DepartmentsComponent),data:{title:"departments.title",permission:"department.read"},canMatch:[n]},{path:"departments/create",loadComponent:()=>import("./chunk-JCLD7THU.js").then(t=>t.CreateDepartmentComponent),data:{title:"departments.create",permission:"department.create"},canMatch:[n]},{path:"departments/:id/view",loadComponent:()=>import("./chunk-HSPD7UK4.js").then(t=>t.ViewDepartmentComponent),data:{title:"departments.view_details",permission:"department.read"},canMatch:[n]},{path:"departments/:id/edit",loadComponent:()=>import("./chunk-TPF7WFUL.js").then(t=>t.EditDepartmentComponent),data:{title:"departments.edit",permission:"department.update"},canMatch:[n]},{path:"shifts",loadComponent:()=>import("./chunk-46TAIW2C.js").then(t=>t.ShiftsComponent),data:{title:"shifts.title",permission:"shift.read"},canMatch:[h]},{path:"shifts/create",loadComponent:()=>import("./chunk-Y7YTBDCX.js").then(t=>t.CreateShiftComponent),data:{title:"shifts.create_shift",permission:"shift.create"},canMatch:[o]},{path:"shifts/:id/edit",loadComponent:()=>import("./chunk-K67BAJVZ.js").then(t=>t.EditShiftComponent),data:{title:"shifts.edit_shift",permission:"shift.update"},canMatch:[o]},{path:"shifts/assign",loadComponent:()=>import("./chunk-GQPYJYE3.js").then(t=>t.AssignShiftsComponent),data:{title:"shifts.assignments.title",permission:"shift.assign"},canMatch:[h]},{path:"attendance",loadComponent:()=>import("./chunk-5ROAY3SD.js").then(t=>t.AttendanceComponent),data:{title:"attendance.dashboard_title",permission:"attendance.read"},canMatch:[n]},{path:"attendance/daily",loadComponent:()=>import("./chunk-RJKNJEHH.js").then(t=>t.DailyAttendanceComponent),data:{title:"attendance.daily_view",permission:"attendance.read"},canMatch:[n]},{path:"attendance/monthly-report",loadComponent:()=>import("./chunk-7LORP67I.js").then(t=>t.MonthlyReportComponent),data:{title:"attendance.monthly_report",permission:"attendance.read"},canMatch:[n]},{path:"attendance/daily-detail/:employeeId/:date",loadComponent:()=>import("./chunk-3PJAQIZE.js").then(t=>t.DailyAttendanceDetailComponent),data:{title:"attendance.daily_detail.title",permission:"attendance.read"},canMatch:[n]},{path:"attendance/employee-history",loadComponent:()=>import("./chunk-3GBXHLJ3.js").then(t=>t.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_history.title",permission:"attendance.read"},canMatch:[n]},{path:"attendance/employee/:id",loadComponent:()=>import("./chunk-3GBXHLJ3.js").then(t=>t.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_detail",permission:"attendance.read"},canMatch:[n]},{path:"attendance/edit/:id",loadComponent:()=>import("./chunk-F7IHL4PV.js").then(t=>t.EditAttendanceComponent),data:{title:"attendance.edit.title",permission:"attendance.update"},canMatch:[n]},{path:"settings",loadComponent:()=>import("./chunk-2XG6VQDE.js").then(t=>t.SettingsComponent),data:{title:"settings.title"}},{path:"settings/overtime",loadComponent:()=>import("./chunk-GKDIVYJA.js").then(t=>t.OvertimeConfigurationsComponent),data:{title:"settings.overtime.title",permission:"settings.overtime.read"},canMatch:[o]},{path:"settings/overtime/create",loadComponent:()=>import("./chunk-ARE7EZ3C.js").then(t=>t.CreateOvertimeConfigurationComponent),data:{title:"settings.overtime.create",permission:"settings.overtime.create"},canMatch:[o]},{path:"settings/overtime/edit/:id",loadComponent:()=>import("./chunk-E7EX2AJK.js").then(t=>t.EditOvertimeConfigurationComponent),data:{title:"settings.overtime.edit",permission:"settings.overtime.update"},canMatch:[o]},{path:"settings/public-holidays",loadComponent:()=>import("./chunk-JGUBQKLD.js").then(t=>t.PublicHolidaysComponent),data:{title:"settings.holidays.title",permission:"publicHoliday.read"},canMatch:[o]},{path:"settings/public-holidays/create",loadComponent:()=>import("./chunk-U47MK66K.js").then(t=>t.CreatePublicHolidayComponent),data:{title:"settings.holidays.create",permission:"publicHoliday.create"},canMatch:[o]},{path:"vacation-types",loadComponent:()=>import("./chunk-GMHVYYEL.js").then(t=>t.VacationTypesComponent),data:{title:"VACATION_TYPES.TITLE",permission:"vacation.read"},canMatch:[n]},{path:"vacation-types/create",loadComponent:()=>import("./chunk-PHDEC3BH.js").then(t=>t.CreateVacationTypeComponent),data:{title:"VACATION_TYPES.CREATE_TITLE",permission:"vacation.create"},canMatch:[o]},{path:"vacation-types/edit/:id",loadComponent:()=>import("./chunk-RWWCPC6N.js").then(t=>t.EditVacationTypeComponent),data:{title:"VACATION_TYPES.EDIT_TITLE",permission:"vacation.update"},canMatch:[o]},{path:"vacation-requests",loadComponent:()=>import("./chunk-6CGX5JAQ.js").then(t=>t.VacationRequestsComponent),data:{title:"VACATION_REQUESTS.TITLE",permission:"vacation.read"},canMatch:[n]},{path:"vacation-requests/create",loadComponent:()=>import("./chunk-5CSU5VTG.js").then(t=>t.CreateVacationRequestComponent),data:{title:"VACATION_REQUESTS.CREATE_TITLE",permission:"vacation.create"},canMatch:[n]},{path:"vacation-requests/view/:id",loadComponent:()=>import("./chunk-LHNUIWFF.js").then(t=>t.ViewVacationRequestComponent),data:{title:"VACATION_REQUESTS.VIEW_TITLE",permission:"vacation.read"},canMatch:[n]},{path:"vacation-requests/edit/:id",loadComponent:()=>import("./chunk-GXZR4CZZ.js").then(t=>t.EditVacationRequestComponent),data:{title:"VACATION_REQUESTS.EDIT_TITLE",permission:"vacation.update"},canMatch:[n]}]},{path:"unauthorized",loadComponent:()=>import("./chunk-H2INHIUT.js").then(t=>t.UnauthorizedComponent),data:{title:"Unauthorized Access"}},{path:"**",loadComponent:()=>import("./chunk-PE6UFIXP.js").then(t=>t.NotFoundComponent),data:{title:"Page Not Found"}}];var O=(t,i)=>{let e=a(m);if(t.url.includes("/auth/login")||t.url.includes("/auth/refresh"))return i(t);let s=e.getAccessToken(),r=t;return s&&(r=t.clone({headers:t.headers.set("Authorization",`Bearer ${s}`)})),i(r).pipe(y(p=>{if(p.status===401&&!t.url.includes("/auth/refresh")){if(e.getRefreshToken())return e.refreshToken().pipe(T(()=>{let c=e.getAccessToken(),L=t.clone({headers:t.headers.set("Authorization",`Bearer ${c}`)});return i(L)}),y(c=>(e.logout(),g(()=>c))));e.logout()}return g(()=>p)}))};var f=class t extends u{title=a(F);i18n=a(C);updateTitle(i){let e=this.buildTitle(i);if(e){let r=`${this.i18n.t(e)} | Time Attendance System`;this.title.setTitle(r)}else this.title.setTitle("Time Attendance System")}static \u0275fac=(()=>{let i;return function(s){return(i||(i=S(t)))(s||t)}})();static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};var k={providers:[M(),b({eventCoalescing:!0}),D(G,x(),H()),w(V([O])),{provide:u,useClass:f}]};var v=class t{constructor(i){this.i18n=i}ngOnInit(){let i=localStorage.getItem("app_locale")||"en";this.i18n.setLocale(i)}static \u0275fac=function(e){return new(e||t)(E(C))};static \u0275cmp=I({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,s){e&1&&R(0,"router-outlet")},dependencies:[P],encapsulation:2})};_(v,k).catch(t=>console.error(t));
