import{a as M}from"./chunk-RYNNMN5D.js";import{a as D}from"./chunk-QJRT5QLC.js";import"./chunk-OTKBQKTN.js";import{b as w}from"./chunk-NJ656CWW.js";import{$ as o,E as a,J as v,U as c,V as f,_ as x,aa as r,ba as m,eb as b,ia as C,ka as U,ma as n,mb as y,pb as E,qb as S,t as s,u as g,v as _,va as d,vb as I,wa as h,xa as u,z as l}from"./chunk-6T5SYK5O.js";import"./chunk-DGAILPFQ.js";function k(i,t){if(i&1&&(o(0,"div",0)(1,"div",2)(2,"span",3),d(3),r()()()),i&2){let e=n();a(3),h(e.i18n.t("common.loading"))}}function R(i,t){if(i&1&&(o(0,"div",4)(1,"div",6),m(2,"i",7),d(3),r(),o(4,"div",8)(5,"button",9),m(6,"i",10),d(7),r()()()),i&2){let e=n(2);a(3),u(" ",e.i18n.t("users.system_admin_cannot_be_edited")," "),a(4),u(" ",e.i18n.t("common.back")," ")}}function j(i,t){if(i&1){let e=C();o(0,"app-user-form",11),U("userSaved",function(T){g(e);let N=n(2);return _(N.onUserSaved(T))}),r()}if(i&2){let e=n(2);x("user",e.user())("show",!0)}}function A(i,t){if(i&1&&c(0,R,8,2,"div",4)(1,j,1,2,"app-user-form",5),i&2){let e=n();f(e.isSystemAdmin(e.user())?0:1)}}function L(i,t){if(i&1&&(o(0,"div",1),m(1,"i",12),d(2),r()),i&2){let e=n();a(2),u(" ",e.error()||e.i18n.t("users.user_not_found")," ")}}var P=class i{route=s(y);router=s(E);usersService=s(D);i18n=s(w);user=l(null);loading=l(!0);error=l("");ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?this.loadUser(t):(this.error.set("Invalid user ID"),this.loading.set(!1))}isSystemAdmin(t){return t.username.toLowerCase()==="systemadmin"}loadUser(t){this.usersService.getUserById(+t).subscribe({next:e=>{this.user.set(e),this.loading.set(!1)},error:e=>{this.error.set(this.getErrorMessage(e)),this.loading.set(!1)}})}onUserSaved(t){this.router.navigate(["/users",t.id,"view"])}getErrorMessage(t){return t?.error?.error?t.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-edit-user-page"]],decls:3,vars:1,consts:[[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"container-fluid"],[3,"user","show"],[1,"alert","alert-warning"],[1,"fa-solid","fa-shield-alt","me-2"],[1,"d-flex","justify-content-start"],["type","button","routerLink","/users",1,"btn","btn-outline-secondary"],[1,"fa-solid","fa-arrow-left","me-2"],[3,"userSaved","user","show"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,p){e&1&&c(0,k,4,1,"div",0)(1,A,2,1)(2,L,3,1,"div",1),e&2&&f(p.loading()?0:p.user()?1:2)},dependencies:[b,I,S,M],encapsulation:2})};export{P as EditUserPageComponent};
