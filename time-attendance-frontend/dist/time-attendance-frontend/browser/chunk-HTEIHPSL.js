import{a as A}from"./chunk-QFTHZWP7.js";import{a as M}from"./chunk-MVZGGAOK.js";import{a as T}from"./chunk-IV5XH5NP.js";import{a as I}from"./chunk-HCDX4O2L.js";import{a as E}from"./chunk-6B6T6MZ3.js";import{d as k,g as B,m as S}from"./chunk-O3U3HUCY.js";import{a as D}from"./chunk-77FC2LKR.js";import"./chunk-A6EM5NV6.js";import{$a as w,Eb as b,Fb as V,Gb as f,Ha as C,T as v,Y as d,Z as p,_a as x,eb as u,fa as _,fb as l,gb as c,hb as m,ob as y,qb as h,sb as s,wa as a}from"./chunk-IGEIB4M6.js";import"./chunk-YMDWBF3A.js";function F(r,e){if(r&1&&(l(0,"div",2),m(1,"app-loading-spinner",5),c()),r&2){let t=s();a(),u("message",t.i18n.t("common.loading"))("centered",!0)}}function P(r,e){if(r&1){let t=y();l(0,"div",3)(1,"div",6),m(2,"app-detail-card",7),c(),l(3,"div",8)(4,"div",9)(5,"div",10)(6,"h6",11),b(7),c()(),l(8,"div",12)(9,"div",13)(10,"button",14),h("click",function(){d(t);let i=s();return p(i.onEdit())}),m(11,"i",15),b(12),c(),l(13,"button",16),h("click",function(){d(t);let i=s();return p(i.onViewEmployees())}),m(14,"i",17),b(15),c(),l(16,"button",18),h("click",function(){d(t);let i=s();return p(i.onViewDepartments())}),m(17,"i",19),b(18),c()()()(),l(19,"div",20)(20,"app-stat-card",21),h("click",function(){d(t);let i=s();return p(i.onViewEmployees())}),c(),l(21,"app-stat-card",22),h("click",function(){d(t);let i=s();return p(i.onViewDepartments())}),c()()()()}if(r&2){let t,o,i,g,n=s();a(2),u("title",(t=n.branch())==null?null:t.name)("subtitle",(o=n.branch())==null?null:o.code)("fields",n.branchFields),a(5),V(n.i18n.t("common.actions")),a(5),f(" ",n.i18n.t("branches.edit")," "),a(3),f(" ",n.i18n.t("branches.view_employees")," "),a(3),f(" ",n.i18n.t("branches.view_departments")," "),a(2),u("label",n.i18n.t("branches.employees"))("value",((i=n.statistics())==null?null:i.employeeCount)||0)("clickable",!0)("clickableText",n.i18n.t("branches.view_employees")),a(),u("label",n.i18n.t("branches.departments"))("value",((g=n.statistics())==null?null:g.departmentCount)||0)("clickable",!0)("clickableText",n.i18n.t("branches.view_departments"))}}function L(r,e){if(r&1&&(l(0,"div",4),m(1,"i",23),b(2),c()),r&2){let t=s();a(2),f(" ",t.error()||t.i18n.t("branches.branch_not_found")," ")}}var N=class r{route=v(k);router=v(B);branchesService=v(M);i18n=v(D);branch=_(null);statistics=_(null);loading=_(!0);error=_("");get branchFields(){let e=this.branch();return e?[{label:this.i18n.t("branches.name"),value:e.name},{label:this.i18n.t("branches.code"),value:e.code,copyable:!0},{label:this.i18n.t("branches.timezone"),value:e.timeZone},{label:this.i18n.t("common.status"),value:e.isActive?this.i18n.t("common.active"):this.i18n.t("common.inactive"),type:"badge",badgeVariant:e.isActive?"success":"danger"},{label:this.i18n.t("common.phone"),value:"-"},{label:this.i18n.t("common.email"),value:"-"},{label:this.i18n.t("branches.created_at"),value:e.createdAtUtc,type:"date"}]:[]}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.loadBranch(e),this.loadStatistics(e)):(this.error.set("Invalid branch ID"),this.loading.set(!1))}loadBranch(e){setTimeout(()=>{let t={id:parseInt(e),name:"Sample Branch",code:"SAMPLE",timeZone:"UTC",isActive:!0,employeeCount:10,departmentCount:3,createdAtUtc:"2024-01-01T00:00:00Z"};this.branch.set(t),this.loading.set(!1)},1e3)}loadStatistics(e){this.statistics.set({employeeCount:Math.floor(Math.random()*100),departmentCount:Math.floor(Math.random()*20)})}onEdit(){this.branch()&&this.router.navigate(["/branches",this.branch().id,"edit"])}onViewEmployees(){this.branch()&&this.router.navigate(["/employees"],{queryParams:{branchId:this.branch().id}})}onViewDepartments(){this.branch()&&this.router.navigate(["/departments"],{queryParams:{branchId:this.branch().id}})}onBack(){this.router.navigate(["/branches"])}formatDate(e){return new Date(e).toLocaleDateString()}getErrorMessage(e){return e?.error?.error?e.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=C({type:r,selectors:[["app-view-branch"]],decls:5,vars:2,consts:[[1,"app-view-page"],[3,"title"],[1,"d-flex","justify-content-center","py-5"],[1,"app-desktop-sidebar"],[1,"alert","alert-danger"],[3,"message","centered"],[1,"app-main-content"],["icon","fas fa-building","layout","two-column",3,"title","subtitle","fields"],[1,"app-sidebar-content"],[1,"card","mb-3"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"fa-solid","fa-edit","me-2"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"fa-solid","fa-users","me-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-sitemap","me-2"],[1,"d-flex","flex-column","gap-3"],["icon","fas fa-users","variant","primary",3,"click","label","value","clickable","clickableText"],["icon","fas fa-sitemap","variant","info",3,"click","label","value","clickable","clickableText"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(t,o){t&1&&(l(0,"div",0),m(1,"app-page-header",1),x(2,F,2,2,"div",2)(3,P,22,15,"div",3)(4,L,3,1,"div",4),c()),t&2&&(a(),u("title",o.i18n.t("branches.view_details")),a(),w(o.loading()?2:o.branch()?3:4))},dependencies:[S,E,A,T,I],encapsulation:2})};export{N as ViewBranchComponent};
