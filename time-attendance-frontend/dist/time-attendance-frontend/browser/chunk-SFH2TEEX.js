import{a as de}from"./chunk-U7RGWLFU.js";import"./chunk-HXSGHCFU.js";import{p as te,r as ne,x as ae}from"./chunk-VRETN7JA.js";import{a as oe}from"./chunk-UBCI4X5Q.js";import{a as se}from"./chunk-EYAJMHM7.js";import{a as ie}from"./chunk-HHXRLUSQ.js";import{b as ee}from"./chunk-S3CAEY4A.js";import{a as Z,b as re}from"./chunk-TJ2U7DWW.js";import"./chunk-TWXUAMJ4.js";import{$a as C,Bb as o,Bc as V,Cb as d,Cc as Y,Db as D,Ea as H,Eb as F,M as W,Pb as R,Q as L,Qb as G,Sb as M,Tb as O,W as w,X as P,Xa as h,Ya as g,Yb as x,Zb as J,ab as y,bb as f,cb as r,da as _,db as a,eb as b,g as B,j as A,lb as E,n as $,nb as S,pb as u,ta as t,uc as K,v as U,vc as Q,wc as X,x as N,ya as I,yb as q}from"./chunk-JSQL33QG.js";import{a as z}from"./chunk-DGAILPFQ.js";var T=class i{constructor(n){this.http=n}apiUrl=`${Z.apiUrl}/api/v1/dashboard`;_dashboardData=_(null);_loading=_(!1);_error=_(null);_lastRefresh=_(null);_autoRefresh=_(!1);_refreshInterval=_(30);dashboardData=this._dashboardData.asReadonly();loading=this._loading.asReadonly();error=this._error.asReadonly();lastRefresh=this._lastRefresh.asReadonly();autoRefresh=this._autoRefresh.asReadonly();refreshInterval=this._refreshInterval.asReadonly();dashboardSubject=new B(null);dashboard$=this.dashboardSubject.asObservable();refreshSubscription;getDashboardOverview(n){this._loading.set(!0),this._error.set(null);let e=new V;return n?.branchId&&(e=e.set("branchId",n.branchId.toString())),n?.departmentId&&(e=e.set("departmentId",n.departmentId.toString())),this.http.get(`${this.apiUrl}/overview`,{params:e}).pipe($(s=>(this._dashboardData.set(s),this._lastRefresh.set(new Date),this._loading.set(!1),this.dashboardSubject.next(s),s)),N(s=>(this._error.set(s.message||"Failed to load dashboard data"),this._loading.set(!1),console.error("Dashboard data loading failed:",s),A({organization:{},humanResources:{},attendance:{},leaves:{},shifts:{},system:{}}))))}getWidgetData(n,e){let s=new V;return e?.branchId&&(s=s.set("branchId",e.branchId.toString())),e?.departmentId&&(s=s.set("departmentId",e.departmentId.toString())),this.http.get(`${this.apiUrl}/widgets/${n}`,{params:s}).pipe(N(l=>(console.error(`Failed to load ${n} widget data:`,l),A(null))))}refreshDashboard(n){this.getDashboardOverview(n).subscribe()}startAutoRefresh(n){n&&this._refreshInterval.set(n),this.stopAutoRefresh(),this._autoRefresh.set(!0),this.refreshSubscription=U(this._refreshInterval()*1e3).subscribe(()=>{this._autoRefresh()&&this.refreshDashboard()})}stopAutoRefresh(){this.refreshSubscription&&(this.refreshSubscription.unsubscribe(),this.refreshSubscription=null),this._autoRefresh.set(!1)}updateRefreshInterval(n){this._refreshInterval.set(n),this._autoRefresh()&&this.startAutoRefresh(n)}clearData(){this._dashboardData.set(null),this._error.set(null),this._lastRefresh.set(null),this.dashboardSubject.next(null)}getTimeSinceLastRefresh(){let n=this._lastRefresh();if(!n)return"Never";let s=new Date().getTime()-n.getTime(),l=Math.floor(s/1e3),m=Math.floor(l/60);return l<60?`${l} seconds ago`:m<60?`${m} minutes ago`:`${Math.floor(m/60)} hours ago`}hasData(){return this._dashboardData()!==null}getCurrentFilters(){return{}}ngOnDestroy(){this.stopAutoRefresh()}static \u0275fac=function(e){return new(e||i)(L(Y))};static \u0275prov=W({token:i,factory:i.\u0275fac,providedIn:"root"})};var pe=i=>({username:i}),k=()=>[],j=(i,n)=>n.id,ue=(i,n)=>n.employeeId,he=(i,n)=>n.roleName,ge=(i,n)=>n.vacationId,ve=(i,n)=>n.value;function be(i,n){if(i&1&&(r(0,"small",6),b(1,"i",18),o(2),a()),i&2){let e=u();t(2),F(" ",e.t("dashboard.last_refresh"),": ",e.getTimeSinceLastRefresh()," ")}}function fe(i,n){if(i&1&&(r(0,"option",21),o(1),a()),i&2){let e=n.$implicit;f("value",e.id),t(),d(e.name)}}function _e(i,n){if(i&1){let e=E();r(0,"select",19),S("change",function(l){w(e);let m=u();return P(m.updateFilters({branchId:l.target.value?+l.target.value:void 0}))}),r(1,"option",20),o(2),a(),C(3,fe,2,2,"option",21,j),a()}if(i&2){let e=u();f("value",e.filters().branchId||""),t(2),d(e.t("dashboard.all_branches")),t(),y(e.availableBranches())}}function xe(i,n){if(i&1&&(r(0,"option",21),o(1),a()),i&2){let e=n.$implicit;f("value",e.id),t(),d(e.name)}}function Ce(i,n){if(i&1){let e=E();r(0,"select",19),S("change",function(l){w(e);let m=u();return P(m.updateFilters({departmentId:l.target.value?+l.target.value:void 0}))}),r(1,"option",20),o(2),a(),C(3,xe,2,2,"option",21,j),a()}if(i&2){let e=u();f("value",e.filters().departmentId||""),t(2),d(e.t("dashboard.all_departments")),t(),y(e.availableDepartments())}}function ye(i,n){if(i&1&&(r(0,"div",16)(1,"div",22),b(2,"app-loading-spinner",23),a()()),i&2){let e=u();t(2),f("message",e.t("dashboard.loading_comprehensive"))("variant","primary")("centered",!0)}}function Se(i,n){if(i&1){let e=E();r(0,"div",17),b(1,"i",24),o(2),r(3,"button",25),S("click",function(){w(e);let l=u();return P(l.refreshData())}),o(4),a()()}if(i&2){let e=u();t(2),D(" ",e.error()," "),t(2),D(" ",e.t("common.retry")," ")}}function De(i,n){if(i&1&&(r(0,"div",50)(1,"span",51),o(2),a(),r(3,"span",52),o(4),a()()),i&2){let e=n.$implicit;t(2),d(e.employeeName),t(2),d(e.status)}}function Me(i,n){if(i&1&&(r(0,"div",48)(1,"h5"),o(2),a(),r(3,"div",49),C(4,De,5,2,"div",50,ue),a()()),i&2){let e,s=u(3);t(2),d(s.t("dashboard.incomplete_records")),t(2),y(((e=s.dashboardData())==null||e.attendance==null||e.attendance.incompleteRecords==null?null:e.attendance.incompleteRecords.slice(0,5))||R(1,k))}}function Oe(i,n){if(i&1&&(r(0,"div",31)(1,"div",38)(2,"h3"),b(3,"i",39),o(4),a()(),r(5,"div",40)(6,"div",41)(7,"div",42)(8,"span",43),o(9),a(),r(10,"span",44),o(11),a()(),r(12,"div",42)(13,"span",43),o(14),a(),r(15,"span",45),o(16),a()(),r(17,"div",42)(18,"span",43),o(19),a(),r(20,"span",46),o(21),a()(),r(22,"div",42)(23,"span",43),o(24),a(),r(25,"span",47),o(26),M(27,"number"),a()()(),h(28,Me,6,2,"div",48),a()()),i&2){let e,s,l,m,c,p=u(2);t(4),d(p.t("dashboard.attendance_overview")),t(5),d(p.t("dashboard.present_today")),t(2),d(((e=p.dashboardData())==null?null:e.attendance.todayPresent)||0),t(3),d(p.t("dashboard.absent_today")),t(2),d(((s=p.dashboardData())==null?null:s.attendance.todayAbsent)||0),t(3),d(p.t("dashboard.late_today")),t(2),d(((l=p.dashboardData())==null?null:l.attendance.todayLate)||0),t(3),d(p.t("dashboard.attendance_rate")),t(2),D("",O(27,10,((m=p.dashboardData())==null?null:m.attendance.attendanceRate)||0,"1.1-1"),"%"),t(2),g(!((c=p.dashboardData())==null||c.attendance==null||c.attendance.incompleteRecords==null)&&c.attendance.incompleteRecords.length?28:-1)}}function we(i,n){if(i&1&&(r(0,"div",58)(1,"span",59),o(2),a(),r(3,"span",60),o(4),a(),r(5,"span",61),o(6),M(7,"number"),a()()),i&2){let e=n.$implicit;t(2),d(e.roleName),t(2),d(e.userCount),t(2),D("(",O(7,3,e.percentage,"1.0-0"),"%)")}}function Pe(i,n){if(i&1&&(r(0,"div",57)(1,"h5"),o(2),a(),C(3,we,8,6,"div",58,he),a()),i&2){let e,s=u(3);t(2),d(s.t("dashboard.role_distribution")),t(),y(((e=s.dashboardData())==null||e.humanResources==null||e.humanResources.roleDistribution==null?null:e.humanResources.roleDistribution.slice(0,4))||R(1,k))}}function Ie(i,n){if(i&1&&(r(0,"div",32)(1,"div",38)(2,"h3"),b(3,"i",53),o(4),a()(),r(5,"div",40)(6,"div",54)(7,"div",55)(8,"span",43),o(9),a(),r(10,"span",56),o(11),a()(),r(12,"div",55)(13,"span",43),o(14),a(),r(15,"span",44),o(16),a()(),r(17,"div",55)(18,"span",43),o(19),a(),r(20,"span",56),o(21),a()(),r(22,"div",55)(23,"span",43),o(24),a(),r(25,"span",44),o(26),a()()(),h(27,Pe,5,2,"div",57),a()()),i&2){let e,s,l,m,c,p=u(2);t(4),d(p.t("dashboard.human_resources")),t(5),d(p.t("dashboard.total_employees")),t(2),d(((e=p.dashboardData())==null?null:e.humanResources.totalEmployees)||0),t(3),d(p.t("dashboard.active_employees")),t(2),d(((s=p.dashboardData())==null?null:s.humanResources.activeEmployees)||0),t(3),d(p.t("dashboard.total_users")),t(2),d(((l=p.dashboardData())==null?null:l.humanResources.totalUsers)||0),t(3),d(p.t("dashboard.active_users")),t(2),d(((m=p.dashboardData())==null?null:m.humanResources.activeUsers)||0),t(),g(!((c=p.dashboardData())==null||c.humanResources==null||c.humanResources.roleDistribution==null)&&c.humanResources.roleDistribution.length?27:-1)}}function Ee(i,n){if(i&1&&(r(0,"div",66)(1,"span",51),o(2),a(),r(3,"span",67),o(4),a(),r(5,"span",68),o(6),M(7,"date"),M(8,"date"),a()()),i&2){let e=n.$implicit;t(2),d(e.employeeName),t(2),d(e.vacationType),t(2),F("",O(7,4,e.startDate,"shortDate")," - ",O(8,7,e.endDate,"shortDate"))}}function Re(i,n){if(i&1&&(r(0,"div",65)(1,"h5"),o(2),a(),C(3,Ee,9,10,"div",66,ge),a()),i&2){let e,s=u(3);t(2),d(s.t("dashboard.upcoming_vacations")),t(),y(((e=s.dashboardData())==null||e.leaves==null||e.leaves.upcomingVacations==null?null:e.leaves.upcomingVacations.slice(0,3))||R(1,k))}}function Te(i,n){if(i&1&&(r(0,"div",33)(1,"div",38)(2,"h3"),b(3,"i",62),o(4),a()(),r(5,"div",40)(6,"div",63)(7,"div",42)(8,"span",43),o(9),a(),r(10,"span",46),o(11),a()(),r(12,"div",42)(13,"span",43),o(14),a(),r(15,"span",64),o(16),a()(),r(17,"div",42)(18,"span",43),o(19),a(),r(20,"span",44),o(21),a()()(),h(22,Re,5,2,"div",65),a()()),i&2){let e,s,l,m,c=u(2);t(4),d(c.t("dashboard.leave_management")),t(5),d(c.t("dashboard.pending_requests")),t(2),d(((e=c.dashboardData())==null?null:e.leaves.pendingRequests)||0),t(3),d(c.t("dashboard.on_leave_today")),t(2),d(((s=c.dashboardData())==null?null:s.leaves.onLeaveToday)||0),t(3),d(c.t("dashboard.approved_today")),t(2),d(((l=c.dashboardData())==null?null:l.leaves.approvedToday)||0),t(),g(!((m=c.dashboardData())==null||m.leaves==null||m.leaves.upcomingVacations==null)&&m.leaves.upcomingVacations.length?22:-1)}}function ke(i,n){if(i&1&&(r(0,"div",34)(1,"div",38)(2,"h3"),b(3,"i",69),o(4),a()(),r(5,"div",40)(6,"div",70)(7,"div",55)(8,"span",43),o(9),a(),r(10,"span",56),o(11),a()(),r(12,"div",55)(13,"span",43),o(14),a(),r(15,"span",44),o(16),a()(),r(17,"div",55)(18,"span",43),o(19),a(),r(20,"span",56),o(21),a()(),r(22,"div",55)(23,"span",43),o(24),a(),r(25,"span",44),o(26),a()()()()()),i&2){let e,s,l,m,c=u(2);t(4),d(c.t("dashboard.organization_structure")),t(5),d(c.t("dashboard.total_branches")),t(2),d(((e=c.dashboardData())==null?null:e.organization.totalBranches)||0),t(3),d(c.t("dashboard.active_branches")),t(2),d(((s=c.dashboardData())==null?null:s.organization.activeBranches)||0),t(3),d(c.t("dashboard.total_departments")),t(2),d(((l=c.dashboardData())==null?null:l.organization.totalDepartments)||0),t(3),d(c.t("dashboard.active_departments")),t(2),d(((m=c.dashboardData())==null?null:m.organization.activeDepartments)||0)}}function ze(i,n){if(i&1&&(r(0,"div",35)(1,"div",38)(2,"h3"),b(3,"i",71),o(4),a()(),r(5,"div",40)(6,"div",72)(7,"div",42)(8,"span",43),o(9),a(),r(10,"span",56),o(11),a()(),r(12,"div",42)(13,"span",43),o(14),a(),r(15,"span",56),o(16),a()(),r(17,"div",42)(18,"span",43),o(19),a(),r(20,"span",44),o(21),a()()()()()),i&2){let e,s,l,m=u(2);t(4),d(m.t("dashboard.shift_management")),t(5),d(m.t("dashboard.active_shifts")),t(2),d(((e=m.dashboardData())==null?null:e.shifts.activeShifts)||0),t(3),d(m.t("dashboard.total_assignments")),t(2),d(((s=m.dashboardData())==null?null:s.shifts.totalShiftAssignments)||0),t(3),d(m.t("dashboard.today_coverage")),t(2),d(((l=m.dashboardData())==null?null:l.shifts.todayCoverage)||0)}}function Ae(i,n){if(i&1&&(r(0,"div",76)(1,"span",77),o(2),a(),r(3,"span",78),o(4),M(5,"date"),a()()),i&2){let e=n.$implicit;t(2),d(e.description),t(2),d(O(5,2,e.timestamp,"short"))}}function Ne(i,n){if(i&1&&(r(0,"div",75)(1,"h5"),o(2),a(),C(3,Ae,6,5,"div",76,j),a()),i&2){let e,s=u(3);t(2),d(s.t("dashboard.recent_activities")),t(),y(((e=s.dashboardData())==null||e.system==null||e.system.recentActivities==null?null:e.system.recentActivities.slice(0,3))||R(1,k))}}function Fe(i,n){if(i&1&&(r(0,"div",36)(1,"div",38)(2,"h3"),b(3,"i",73),o(4),a()(),r(5,"div",40)(6,"div",74)(7,"div",55)(8,"span",43),o(9),a(),r(10,"span",44),o(11),a()(),r(12,"div",55)(13,"span",43),o(14),a(),r(15,"span",56),o(16),a()(),r(17,"div",55)(18,"span",43),o(19),a(),r(20,"span",64),o(21),a()()(),h(22,Ne,5,2,"div",75),a()()),i&2){let e,s,l,m,c=u(2);t(4),d(c.t("dashboard.system_health")),t(5),d(c.t("dashboard.active_sessions")),t(2),d(((e=c.dashboardData())==null?null:e.system.activeSessions)||0),t(3),d(c.t("dashboard.today_logins")),t(2),d(((s=c.dashboardData())==null?null:s.system.todayLogins)||0),t(3),d(c.t("dashboard.system_uptime")),t(2),d(((l=c.dashboardData())==null?null:l.system.systemUptime)||"N/A"),t(),g(!((m=c.dashboardData())==null||m.system==null||m.system.recentActivities==null)&&m.system.recentActivities.length?22:-1)}}function Ve(i,n){if(i&1&&(r(0,"option",21),o(1),a()),i&2){let e=n.$implicit;f("value",e.value),t(),d(e.label)}}function je(i,n){if(i&1){let e=E();r(0,"div",37)(1,"div",79)(2,"label",80),o(3),a(),r(4,"select",81),S("change",function(l){w(e);let m=u(2);return P(m.updateRefreshInterval(+l.target.value))}),C(5,Ve,2,2,"option",21,ve),a()()()}if(i&2){let e=u(2);t(3),d(e.t("dashboard.refresh_interval")),t(),f("value",e.dashboardService.refreshInterval()),t(),y(e.refreshIntervals)}}function Be(i,n){if(i&1&&(r(0,"div",26)(1,"h2",27),o(2),a(),b(3,"app-stats-grid",28),a(),r(4,"div",29)(5,"div",30),h(6,Oe,29,13,"div",31),h(7,Ie,28,10,"div",32),h(8,Te,23,8,"div",33),h(9,ke,27,9,"div",34),h(10,ze,22,7,"div",35),h(11,Fe,23,8,"div",36),a()(),h(12,je,7,2,"div",37)),i&2){let e,s,l,m,c,p,v=u();t(2),d(v.t("dashboard.key_metrics")),t(),f("stats",v.dashboardStats())("columns",4)("loading",v.loading()),t(3),g(v.showAttendanceWidget()&&((e=v.dashboardData())!=null&&e.attendance)?6:-1),t(),g(v.showHumanResourcesWidget()&&((s=v.dashboardData())!=null&&s.humanResources)?7:-1),t(),g(v.showVacationWidget()&&((l=v.dashboardData())!=null&&l.leaves)?8:-1),t(),g(v.showOrganizationWidget()&&((m=v.dashboardData())!=null&&m.organization)?9:-1),t(),g(v.showShiftWidget()&&((c=v.dashboardData())!=null&&c.shifts)?10:-1),t(),g(v.showSystemWidget()&&((p=v.dashboardData())!=null&&p.system)?11:-1),t(),g(v.autoRefresh()?12:-1)}}var le=class i{constructor(n,e,s,l){this.authService=n;this.i18n=e;this.dashboardService=s;this.notificationService=l;this.setupErrorHandling()}currentUser=x(()=>this.authService.currentUser());dashboardData;loading;error;lastRefresh;autoRefresh;dashboardCards=x(()=>{let n=this.dashboardData();return n?[{title:this.t("dashboard.total_employees"),value:n.humanResources?.totalEmployees||0,icon:"fa-solid fa-users",color:"primary",change:this.calculateChange(n.humanResources?.activeEmployees,n.humanResources?.totalEmployees),trend:"up",module:"humanResources"},{title:this.t("dashboard.today_attendance"),value:n.attendance?.todayPresent||0,icon:"fa-solid fa-calendar-check",color:"success",change:n.attendance?.attendanceRate||0,trend:(n.attendance?.attendanceRate||0)>=90?"up":"down",module:"attendance"},{title:this.t("dashboard.pending_vacations"),value:n.leaves?.pendingRequests||0,icon:"fa-solid fa-calendar-times",color:"warning",trend:"stable",module:"leaves"},{title:this.t("dashboard.active_shifts"),value:n.shifts?.activeShifts||0,icon:"fa-solid fa-clock",color:"info",trend:"stable",module:"shifts"},{title:this.t("dashboard.total_branches"),value:n.organization?.totalBranches||0,icon:"fa-solid fa-code-branch",color:"secondary",trend:"stable",module:"organization"},{title:this.t("dashboard.active_users"),value:n.humanResources?.activeUsers||0,icon:"fa-solid fa-user-check",color:"primary",trend:"up",module:"humanResources"},{title:this.t("dashboard.today_late"),value:n.attendance?.todayLate||0,icon:"fa-solid fa-exclamation-triangle",color:"danger",trend:(n.attendance?.todayLate||0)>5?"up":"down",module:"attendance"},{title:this.t("dashboard.active_sessions"),value:n.system?.activeSessions||0,icon:"fa-solid fa-wifi",color:"info",trend:"stable",module:"system"}]:[]});dashboardStats=x(()=>this.dashboardCards().map(e=>({label:e.title,value:e.value,icon:e.icon,variant:this.mapColorToVariant(e.color),change:e.change!==void 0?{value:Math.abs(e.change),type:e.trend==="up"?"increase":e.trend==="down"?"decrease":"neutral",isPercentage:e.module==="attendance"}:void 0})));filters=_({});availableBranches=_([]);availableDepartments=_([]);showOrganizationWidget=x(()=>this.hasPermission("branch.read")||this.hasPermission("department.read"));showHumanResourcesWidget=x(()=>this.hasPermission("user.read")||this.hasPermission("employee.read"));showAttendanceWidget=x(()=>this.hasPermission("attendance.read"));showVacationWidget=x(()=>this.hasPermission("vacation.read"));showShiftWidget=x(()=>this.hasPermission("shift.read"));showSystemWidget=x(()=>this.isSystemAdmin());refreshIntervals=[{value:15,label:"15 seconds"},{value:30,label:"30 seconds"},{value:60,label:"1 minute"},{value:300,label:"5 minutes"},{value:900,label:"15 minutes"}];ngOnInit(){this.dashboardData=this.dashboardService.dashboardData,this.loading=this.dashboardService.loading,this.error=this.dashboardService.error,this.lastRefresh=this.dashboardService.lastRefresh,this.autoRefresh=this.dashboardService.autoRefresh,this.loadDashboardData(),this.loadFilterOptions()}ngOnDestroy(){this.dashboardService.stopAutoRefresh()}loadDashboardData(){let n=this.filters();this.dashboardService.getDashboardOverview(n).subscribe({next:e=>{e.organization?.branchSummaries&&this.availableBranches.set(e.organization.branchSummaries),e.organization?.departmentSummaries&&this.availableDepartments.set(e.organization.departmentSummaries)},error:e=>{this.notificationService.error(this.t("dashboard.load_error")),console.error("Dashboard load failed:",e)}})}refreshData(){this.dashboardService.refreshDashboard(this.filters()),this.notificationService.success(this.t("dashboard.refreshed"))}updateFilters(n){this.filters.update(e=>z(z({},e),n)),this.loadDashboardData()}toggleAutoRefresh(){this.autoRefresh()?(this.dashboardService.stopAutoRefresh(),this.notificationService.info(this.t("dashboard.auto_refresh_disabled"))):(this.dashboardService.startAutoRefresh(),this.notificationService.info(this.t("dashboard.auto_refresh_enabled")))}updateRefreshInterval(n){this.dashboardService.updateRefreshInterval(n),this.autoRefresh()&&this.notificationService.info(this.t("dashboard.refresh_interval_updated"))}getTimeSinceLastRefresh(){return this.dashboardService.getTimeSinceLastRefresh()}t(n,e){return this.i18n.t(n,e)}getCardColorClass(n){return`card-${n}`}getTrendIcon(n){switch(n){case"up":return"fa-solid fa-arrow-up text-success";case"down":return"fa-solid fa-arrow-down text-danger";default:return"fa-solid fa-minus text-muted"}}calculateChange(n,e){return!n||!e||e===0?0:Math.round(n/e*100)}mapColorToVariant(n){return{primary:"primary",success:"success",warning:"warning",danger:"danger",info:"info",secondary:"secondary"}[n]||"primary"}hasPermission(n){return this.currentUser()?.permissions?.includes(n)||this.isSystemAdmin()}isSystemAdmin(){return this.currentUser()?.roles?.includes("SystemAdmin")||!1}setupErrorHandling(){J(()=>{let n=this.error();n&&this.notificationService.error(n)})}loadFilterOptions(){}exportDashboard(n){this.notificationService.info(this.t("dashboard.export_not_implemented"))}static \u0275fac=function(e){return new(e||i)(I(ee),I(re),I(T),I(ie))};static \u0275cmp=H({type:i,selectors:[["app-dashboard"]],decls:23,vars:16,consts:[[1,"dashboard-container"],[3,"title"],[1,"dashboard-controls","mb-4"],[1,"d-flex","justify-content-between","align-items-start"],[1,"welcome-section"],[1,"dashboard-subtitle","mb-0"],[1,"text-muted"],[1,"controls-section"],[1,"d-flex","align-items-center","gap-3"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-refresh"],[1,"form-check","form-switch"],["type","checkbox","id","autoRefreshToggle",1,"form-check-input",3,"change","checked"],["for","autoRefreshToggle",1,"form-check-label"],[1,"d-flex","gap-2"],[1,"form-select","form-select-sm",3,"value"],[1,"loading-overlay"],["role","alert",1,"alert","alert-danger"],[1,"fa-solid","fa-clock","me-1"],[1,"form-select","form-select-sm",3,"change","value"],["value",""],[3,"value"],[1,"loading-content"],[3,"message","variant","centered"],[1,"fa-solid","fa-exclamation-triangle","me-2"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"metrics-section"],[1,"section-title"],[3,"stats","columns","loading"],[1,"widgets-section"],[1,"widgets-grid"],[1,"widget","attendance-widget"],[1,"widget","hr-widget"],[1,"widget","vacation-widget"],[1,"widget","organization-widget"],[1,"widget","shift-widget"],[1,"widget","system-widget"],[1,"auto-refresh-settings"],[1,"widget-header"],[1,"fa-solid","fa-calendar-check","me-2"],[1,"widget-content"],[1,"attendance-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","text-success"],[1,"stat-value","text-danger"],[1,"stat-value","text-warning"],[1,"stat-value","text-primary"],[1,"incomplete-records","mt-3"],[1,"records-list"],[1,"record-item"],[1,"employee-name"],[1,"employee-status","badge","bg-warning"],[1,"fa-solid","fa-users","me-2"],[1,"hr-stats"],[1,"stat-row"],[1,"stat-value"],[1,"role-distribution","mt-3"],[1,"role-item"],[1,"role-name"],[1,"role-count"],[1,"role-percentage"],[1,"fa-solid","fa-calendar-times","me-2"],[1,"vacation-stats"],[1,"stat-value","text-info"],[1,"upcoming-vacations","mt-3"],[1,"vacation-item"],[1,"vacation-type"],[1,"vacation-dates"],[1,"fa-solid","fa-sitemap","me-2"],[1,"org-stats"],[1,"fa-solid","fa-clock","me-2"],[1,"shift-stats"],[1,"fa-solid","fa-server","me-2"],[1,"system-stats"],[1,"recent-activities","mt-3"],[1,"activity-item"],[1,"activity-description"],[1,"activity-time"],[1,"settings-card"],["for","refreshInterval",1,"form-label"],["id","refreshInterval",1,"form-select","form-select-sm",3,"change","value"]],template:function(e,s){if(e&1&&(r(0,"div",0),b(1,"app-page-header",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),o(6),a(),h(7,be,3,2,"small",6),a(),r(8,"div",7)(9,"div",8)(10,"button",9),S("click",function(){return s.refreshData()}),b(11,"i",10),o(12),a(),r(13,"div",11)(14,"input",12),S("change",function(){return s.toggleAutoRefresh()}),a(),r(15,"label",13),o(16),a()(),r(17,"div",14),h(18,_e,5,2,"select",15),h(19,Ce,5,2,"select",15),a()()()()(),h(20,ye,3,3,"div",16),h(21,Se,5,2,"div",17),h(22,Be,13,11),a()),e&2){let l;t(),f("title",s.t("dashboard.title")),t(5),d(s.t("dashboard.welcome",G(14,pe,((l=s.currentUser())==null?null:l.username)||"User"))),t(),g(s.lastRefresh()?7:-1),t(3),f("disabled",s.loading()),t(),q("fa-spin",s.loading()),t(),D(" ",s.t("dashboard.refresh")," "),t(2),f("checked",s.autoRefresh()),t(2),D(" ",s.t("dashboard.auto_refresh")," "),t(2),g(s.availableBranches().length>1?18:-1),t(),g(s.availableDepartments().length>1?19:-1),t(),g(s.loading()?20:-1),t(),g(s.error()&&!s.loading()?21:-1),t(),g(!s.loading()&&!s.error()?22:-1)}},dependencies:[X,ae,te,ne,oe,se,de,Q,K],styles:['.dashboard-container[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);padding:1.5rem;background-color:var(--bs-light)}.dashboard-header[_ngcontent-%COMP%]{background:#fff;color:var(--bs-dark);border-radius:.5rem;padding:2rem;margin-bottom:2rem;border:1px solid rgba(0,0,0,.125);box-shadow:0 .125rem .25rem #00000013}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1.5rem}.title-section[_ngcontent-%COMP%]{flex:1;min-width:200px}.dashboard-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.5rem;color:var(--bs-primary)}.dashboard-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--bs-secondary);margin-bottom:0}.header-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;align-items:center}.refresh-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.auto-refresh-toggle[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{color:var(--bs-dark);font-weight:500}.filter-section[_ngcontent-%COMP%]{display:flex;gap:.5rem}.refresh-info[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--bs-border-color)}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ffffffe6;display:flex;align-items:center;justify-content:center;z-index:1050}.loading-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#fff;border-radius:1rem;box-shadow:0 10px 30px #0000001a}.loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--bs-secondary);font-weight:500}.metrics-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--bs-dark);margin-bottom:1.5rem;padding-left:1rem;border-left:4px solid var(--bs-primary)}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:2rem}.metric-card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;padding:1.5rem;border:1px solid rgba(0,0,0,.125);box-shadow:0 .125rem .25rem #00000013;transition:box-shadow .15s ease-in-out;position:relative;overflow:hidden}.metric-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--accent-color, var(--bs-primary))}.metric-card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.metric-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.metric-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff;background:var(--accent-color, var(--bs-primary))}.trend-indicator[_ngcontent-%COMP%]{font-size:1.2rem}.metric-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--bs-dark);line-height:1;margin-bottom:.5rem}.metric-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--bs-secondary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:.5rem}.metric-change[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--bs-success)}.card-primary[_ngcontent-%COMP%]{--accent-color: var(--bs-primary)}.card-success[_ngcontent-%COMP%]{--accent-color: var(--bs-success)}.card-info[_ngcontent-%COMP%]{--accent-color: var(--bs-info)}.card-warning[_ngcontent-%COMP%]{--accent-color: var(--bs-warning)}.card-danger[_ngcontent-%COMP%]{--accent-color: var(--bs-danger)}.card-secondary[_ngcontent-%COMP%]{--accent-color: var(--bs-secondary)}.widgets-section[_ngcontent-%COMP%]{margin-bottom:2rem}.widgets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem}.widget[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;border:1px solid rgba(0,0,0,.125);box-shadow:0 .125rem .25rem #00000013;overflow:hidden;transition:box-shadow .15s ease-in-out}.widget[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.widget-header[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.1);border-bottom:1px solid rgba(var(--bs-primary-rgb),.2);padding:1.5rem}.widget-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:var(--bs-dark)}.widget-content[_ngcontent-%COMP%]{padding:1.5rem}.attendance-stats[_ngcontent-%COMP%], .vacation-stats[_ngcontent-%COMP%], .shift-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem;margin-bottom:1.5rem}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:1rem;background:#f8f9fa;border-radius:.5rem}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.8rem;font-weight:600;color:var(--bs-secondary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:.5rem}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.8rem;font-weight:700;color:var(--bs-dark)}.hr-stats[_ngcontent-%COMP%], .org-stats[_ngcontent-%COMP%], .system-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f8f9fa;border-radius:.5rem}.stat-row[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--bs-dark);text-transform:none;letter-spacing:normal;margin:0}.stat-row[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.records-list[_ngcontent-%COMP%], .recent-activities[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.record-item[_ngcontent-%COMP%], .activity-item[_ngcontent-%COMP%], .vacation-item[_ngcontent-%COMP%], .role-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;border-bottom:1px solid rgba(0,0,0,.05);gap:1rem}.record-item[_ngcontent-%COMP%]:last-child, .activity-item[_ngcontent-%COMP%]:last-child, .vacation-item[_ngcontent-%COMP%]:last-child, .role-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.employee-name[_ngcontent-%COMP%], .activity-description[_ngcontent-%COMP%], .role-name[_ngcontent-%COMP%]{font-weight:500;color:var(--bs-dark);flex:1}.employee-status[_ngcontent-%COMP%]{font-size:.75rem}.vacation-type[_ngcontent-%COMP%], .vacation-dates[_ngcontent-%COMP%], .activity-time[_ngcontent-%COMP%], .role-percentage[_ngcontent-%COMP%]{font-size:.85rem;color:var(--bs-secondary)}.role-count[_ngcontent-%COMP%]{font-weight:600;color:var(--bs-primary)}.auto-refresh-settings[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;z-index:1000}.settings-card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;padding:1rem;box-shadow:0 5px 15px #0000001a;border:1px solid rgba(0,0,0,.05);min-width:200px}.settings-card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--bs-dark);margin-bottom:.5rem}@media (max-width: 1200px){.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.widgets-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(350px,1fr))}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.dashboard-header[_ngcontent-%COMP%]{padding:1.5rem}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.dashboard-title[_ngcontent-%COMP%]{font-size:2rem}.header-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.metrics-grid[_ngcontent-%COMP%], .widgets-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.metric-card[_ngcontent-%COMP%]{padding:1rem}.metric-value[_ngcontent-%COMP%]{font-size:2rem}.attendance-stats[_ngcontent-%COMP%], .vacation-stats[_ngcontent-%COMP%], .shift-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:.5rem}.stat-item[_ngcontent-%COMP%]{padding:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.auto-refresh-settings[_ngcontent-%COMP%]{position:relative;bottom:auto;right:auto;margin-top:2rem}}@media (max-width: 480px){.dashboard-title[_ngcontent-%COMP%]{font-size:1.5rem}.header-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.refresh-section[_ngcontent-%COMP%]{justify-content:space-between}.filter-section[_ngcontent-%COMP%]{flex-direction:column}.attendance-stats[_ngcontent-%COMP%], .vacation-stats[_ngcontent-%COMP%], .shift-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-row[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:.5rem}.record-item[_ngcontent-%COMP%], .activity-item[_ngcontent-%COMP%], .vacation-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}[_ngcontent-%COMP%]:root[dir=rtl]   .section-title[_ngcontent-%COMP%]{padding-right:1rem;padding-left:0;border-right:4px solid var(--bs-primary);border-left:none}[_ngcontent-%COMP%]:root[dir=rtl]   .me-1[_ngcontent-%COMP%]{margin-left:.25rem!important;margin-right:0!important}[_ngcontent-%COMP%]:root[dir=rtl]   .me-2[_ngcontent-%COMP%]{margin-left:.5rem!important;margin-right:0!important}[_ngcontent-%COMP%]:root[dir=rtl]   .ms-2[_ngcontent-%COMP%]{margin-right:.5rem!important;margin-left:0!important}[_ngcontent-%COMP%]:root[dir=rtl]   .auto-refresh-settings[_ngcontent-%COMP%]{right:auto;left:2rem}.metric-card[_ngcontent-%COMP%]:focus, .widget[_ngcontent-%COMP%]:focus{outline:2px solid var(--bs-primary);outline-offset:2px}@media (prefers-reduced-motion: reduce){.metric-card[_ngcontent-%COMP%], .widget[_ngcontent-%COMP%]{animation:none}.metric-card[_ngcontent-%COMP%]:hover, .widget[_ngcontent-%COMP%]:hover{transform:none}.fa-spin[_ngcontent-%COMP%]{animation:none}}']})};export{le as DashboardComponent};
