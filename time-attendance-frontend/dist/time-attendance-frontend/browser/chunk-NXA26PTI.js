import{a as q}from"./chunk-24B36L4T.js";import{d as R,g as B,h as P}from"./chunk-4DYU65FO.js";import{b as $}from"./chunk-CQWUHIOF.js";import{$a as n,Ca as L,Q as f,Ta as u,Ua as p,V as E,W as w,Wa as F,Xa as I,Ya as h,Za as j,_a as a,ab as _,ca as g,eb as N,ec as O,gb as C,ib as m,qb as l,ra as t,rb as d,sb as c}from"./chunk-LHYYCVNR.js";import"./chunk-DGAILPFQ.js";var G=(e,o)=>o.id;function H(e,o){if(e&1&&(a(0,"div",13)(1,"div",16)(2,"span",17),l(3),n()()()),e&2){let i=m();t(3),d(i.t("common.loading"))}}function J(e,o){if(e&1&&_(0,"i",26),e&2){let i=m(2);j("title",i.t("users.must_change_password"))}}function K(e,o){e&1&&l(0," \u0627\u0644\u0639\u0631\u0628\u064A\u0629 ")}function Q(e,o){e&1&&l(0," English ")}function W(e,o){if(e&1&&(a(0,"span",32),l(1),n()),e&2){let i=m(2);t(),d(i.t("users.locked"))}}function X(e,o){if(e&1&&(a(0,"span",33),l(1),n()),e&2){let i=m(2);t(),d(i.t("common.active"))}}function Y(e,o){if(e&1&&(a(0,"span",34),l(1),n()),e&2){let i=m(2);t(),d(i.t("common.inactive"))}}function Z(e,o){if(e&1&&(a(0,"span",33),l(1),n()),e&2){let i=m(2);t(),d(i.t("common.enabled"))}}function ee(e,o){if(e&1&&(a(0,"span",34),l(1),n()),e&2){let i=m(2);t(),d(i.t("common.disabled"))}}function te(e,o){if(e&1&&(a(0,"span",47),l(1),n()),e&2){let i=o.$implicit;t(),d(i)}}function ne(e,o){if(e&1&&(a(0,"div",38),I(1,te,2,1,"span",47,F),n()),e&2){let i,s=m(2);t(),h((i=s.user())==null?null:i.roles)}}function ie(e,o){if(e&1&&(a(0,"p",39),l(1),n()),e&2){let i=m(2);t(),d(i.t("users.no_roles"))}}function ae(e,o){if(e&1&&(a(0,"span",34),l(1),n()),e&2){let i=o.$implicit;t(),d(i.name)}}function le(e,o){if(e&1&&(a(0,"div",38),I(1,ae,2,1,"span",34,G),n()),e&2){let i,s=m(2);t(),h((i=s.user())==null?null:i.branches)}}function oe(e,o){if(e&1&&(a(0,"p",39),l(1),n()),e&2){let i=m(2);t(),d(i.t("users.all_branches"))}}function re(e,o){if(e&1&&(a(0,"button",45),_(1,"i",48),l(2),n()),e&2){let i=m(2);t(2),c(" ",i.t("users.lock_account")," ")}}function de(e,o){if(e&1&&(a(0,"button",46),_(1,"i",49),l(2),n()),e&2){let i=m(2);t(2),c(" ",i.t("users.unlock_account")," ")}}function se(e,o){if(e&1){let i=N();a(0,"div",14)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h5",21)(5,"div",22)(6,"div",23)(7,"div",24),l(8),n()(),a(9,"div")(10,"div",25),l(11),u(12,J,1,1,"i",26),n(),a(13,"small",27),l(14),n()()()()(),a(15,"div",28)(16,"div",14)(17,"div",29)(18,"dl",14)(19,"dt",30),l(20),n(),a(21,"dd",31),l(22),n(),a(23,"dt",30),l(24),n(),a(25,"dd",31),l(26),n(),a(27,"dt",30),l(28),n(),a(29,"dd",31),l(30),n(),a(31,"dt",30),l(32),n(),a(33,"dd",31),u(34,K,1,0)(35,Q,1,0),n()()(),a(36,"div",29)(37,"dl",14)(38,"dt",30),l(39),n(),a(40,"dd",31),u(41,W,2,1,"span",32)(42,X,2,1,"span",33)(43,Y,2,1,"span",34),n(),a(44,"dt",30),l(45),n(),a(46,"dd",31),l(47),n(),a(48,"dt",30),l(49),n(),a(50,"dd",31),u(51,Z,2,1,"span",33)(52,ee,2,1,"span",34),n(),a(53,"dt",30),l(54),n(),a(55,"dd",31),l(56),n()()()()()()(),a(57,"div",35)(58,"div",19)(59,"div",20)(60,"h6",21),l(61),n()(),a(62,"div",28)(63,"div",36)(64,"h6",37),l(65),n(),u(66,ne,3,0,"div",38)(67,ie,2,1,"p",39),n(),a(68,"div")(69,"h6",37),l(70),n(),u(71,le,3,0,"div",38)(72,oe,2,1,"p",39),n()()(),a(73,"div",40)(74,"div",20)(75,"h6",21),l(76),n()(),a(77,"div",28)(78,"div",41)(79,"button",42),C("click",function(){E(i);let x=m();return w(x.onEdit())}),_(80,"i",10),l(81),n(),a(82,"button",43),C("click",function(){E(i);let x=m();return w(x.onManageRoles())}),_(83,"i",44),l(84),n(),u(85,re,3,1,"button",45)(86,de,3,1,"button",46),n()()()()()}if(e&2){let i,s,x,S,U,V,y,k,b,T,D,M,v,A,r=m();t(8),c(" ",(((i=r.user())==null||i.username==null?null:i.username.charAt(0))||"")==null?null:(((i=i)==null||i.username==null?null:i.username.charAt(0))||"").toUpperCase()," "),t(3),c(" ",(s=r.user())==null?null:s.username," "),t(),p((x=r.user())!=null&&x.mustChangePassword?12:-1),t(2),d((S=r.user())==null?null:S.email),t(6),c("",r.t("users.username"),":"),t(2),d((U=r.user())==null?null:U.username),t(2),c("",r.t("users.email"),":"),t(2),d((V=r.user())==null?null:V.email),t(2),c("",r.t("users.phone"),":"),t(2),d(((y=r.user())==null?null:y.phone)||"-"),t(2),c("",r.t("users.language"),":"),t(2),p(((k=r.user())==null?null:k.preferredLanguage)==="ar"?34:35),t(5),c("",r.t("common.status"),":"),t(2),p(r.isUserLocked((b=r.user())==null?null:b.lockoutEndUtc)?41:(b=r.user())!=null&&b.isActive?42:43),t(4),c("",r.t("users.created_at"),":"),t(2),d(r.formatDate(r.user().createdAtUtc)),t(2),c("",r.t("users.two_factor"),":"),t(2),p((T=r.user())!=null&&T.twoFactorEnabled?51:52),t(3),c("",r.t("users.login_attempts"),":"),t(2),d(((D=r.user())==null?null:D.accessFailedCount)||0),t(5),d(r.t("users.roles_and_access")),t(4),d(r.t("users.roles")),t(),p((M=r.user())!=null&&M.roles&&r.user().roles.length>0?66:67),t(4),d(r.t("users.branches")),t(),p((v=r.user())!=null&&v.branches&&(((v=r.user())==null||v.branches==null?null:v.branches.length)||0)>0?71:72),t(5),d(r.t("common.actions")),t(5),c(" ",r.t("users.edit")," "),t(3),c(" ",r.t("users.manage_roles")," "),t(),p((A=r.user())!=null&&A.isActive?85:86)}}function me(e,o){if(e&1&&(a(0,"div",15),_(1,"i",50),l(2),n()),e&2){let i=m();t(2),c(" ",i.error()||i.t("users.user_not_found")," ")}}var z=class e{router=f(B);route=f(R);usersService=f(q);i18n=f($);loading=g(!1);error=g(null);user=g(null);userId=0;ngOnInit(){this.userId=+this.route.snapshot.params.id,this.userId?this.loadUser():this.router.navigate(["/users"])}loadUser(){this.loading.set(!0),this.usersService.getUserById(this.userId).subscribe({next:o=>{this.user.set(o),this.loading.set(!1)},error:o=>{this.error.set("Failed to load user"),this.loading.set(!1),console.error("Error loading user:",o)}})}onEdit(){this.router.navigate(["/users",this.userId,"edit"])}onBack(){this.router.navigate(["/users"])}onManageRoles(){console.log("Manage roles for user:",this.userId)}isUserLocked(o){return o?new Date(o)>new Date:!1}formatDate(o){return new Date(o).toLocaleDateString()}t(o){return this.i18n.t(o)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=L({type:e,selectors:[["app-view-user"]],decls:25,vars:7,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/users"],[1,"breadcrumb-item","active"],[1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-edit","me-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","justify-content-center","py-5"],[1,"row"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-3"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle"],[1,"fw-medium"],[1,"fa-solid","fa-exclamation-triangle","text-warning","ms-2",3,"title"],[1,"text-muted"],[1,"card-body"],[1,"col-md-6"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"badge","bg-danger"],[1,"badge","bg-success"],[1,"badge","bg-secondary"],[1,"col-lg-4"],[1,"mb-3"],[1,"fw-semibold"],[1,"d-flex","flex-wrap","gap-1"],[1,"text-muted","mb-0"],[1,"card","mt-3"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"fa-solid","fa-user-tag","me-2"],["type","button",1,"btn","btn-outline-warning"],["type","button",1,"btn","btn-outline-success"],[1,"badge","bg-info"],[1,"fa-solid","fa-lock","me-2"],[1,"fa-solid","fa-unlock","me-2"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),l(4),n(),a(5,"nav",2)(6,"ol",3)(7,"li",4)(8,"a",5),l(9),n()(),a(10,"li",4)(11,"a",6),l(12),n()(),a(13,"li",7),l(14),n()()()(),a(15,"div",8)(16,"button",9),C("click",function(){return s.onEdit()}),_(17,"i",10),l(18),n(),a(19,"button",11),C("click",function(){return s.onBack()}),_(20,"i",12),l(21),n()()(),u(22,H,4,1,"div",13)(23,se,87,29,"div",14)(24,me,3,1,"div",15),n()),i&2&&(t(4),d(s.t("users.view_details")),t(5),d(s.t("dashboard.title")),t(3),d(s.t("users.title")),t(2),d(s.t("users.view_details")),t(4),c(" ",s.t("users.edit")," "),t(3),c(" ",s.t("common.back")," "),t(),p(s.loading()?22:s.user()?23:24))},dependencies:[O,P],styles:[".avatar-sm[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center}.avatar-title[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600}"]})};export{z as ViewUserComponent};
