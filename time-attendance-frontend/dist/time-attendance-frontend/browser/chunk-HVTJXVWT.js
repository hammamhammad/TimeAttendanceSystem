import{a as $}from"./chunk-I3BKX7JQ.js";import{a as Z}from"./chunk-QS4HD2YC.js";import{a as X}from"./chunk-SRPEDAT4.js";import{a as Q}from"./chunk-H5EPUHY6.js";import"./chunk-5MHFUEKN.js";import"./chunk-Y62N6K5S.js";import{b as A,c as V,e as N,f as q,g as B,h as L,i as G,j as U,t as j,u as z,x as J}from"./chunk-VRETN7JA.js";import{a as Y}from"./chunk-HHXRLUSQ.js";import"./chunk-O7LPL3AF.js";import{b as K}from"./chunk-3VZ5QHEY.js";import{d as H,g as k,m as W}from"./chunk-TWXUAMJ4.js";import{Ab as y,Bb as r,Cb as s,Db as f,Ea as w,Eb as S,Ib as C,Jb as x,Kb as h,R as M,Sb as P,Tb as E,W as u,X as p,Xa as g,Ya as v,bb as b,cb as i,da as O,db as n,eb as _,lb as D,nb as I,pb as d,ta as t,uc as T,wc as R}from"./chunk-JSQL33QG.js";import{d as F}from"./chunk-DGAILPFQ.js";function te(a,o){if(a&1&&(i(0,"div",3)(1,"div",4),_(2,"i",5),i(3,"p",6),r(4),n()()()),a&2){let e=d();t(4),s(e.t("common.loading"))}}function ie(a,o){if(a&1&&(i(0,"div",7),_(1,"i",63),r(2),n()),a&2){let e=d(2);t(2),f(" ",e.t("settings.overtime.currentlyActive")," ")}}function ne(a,o){if(a&1&&(i(0,"div",8),_(1,"i",64),r(2),n()),a&2){let e=d(2);t(2),f(" ",e.error()," ")}}function oe(a,o){if(a&1&&(i(0,"div",9),_(1,"i",64),i(2,"strong"),r(3),n(),r(4),n()),a&2){let e=d(2);t(3),s(e.t("settings.overtime.editActiveWarning")),t(),f(" ",e.t("settings.overtime.editActiveWarningMessage")," ")}}function re(a,o){if(a&1&&(i(0,"div",21),r(1),n()),a&2){let e=d(2);t(),s(e.getError("general"))}}function ae(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("normalDayRate"))}}function le(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("publicHolidayRate"))}}function me(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("offDayRate"))}}function se(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("maxPreShiftOvertimeHours"))}}function de(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("maxPostShiftOvertimeHours"))}}function ce(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("minimumOvertimeMinutes"))}}function fe(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("overtimeGracePeriodMinutes"))}}function ge(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("roundingIntervalMinutes"))}}function ve(a,o){if(a&1&&(i(0,"div",65)(1,"small",6),r(2),n(),i(3,"div"),r(4),P(5,"date"),n()()),a&2){let e=d(3);t(2),f("",e.t("common.lastModified"),":"),t(2),S("",e.originalConfig.updatedBy," on ",E(5,3,e.originalConfig.updatedAtUtc,"medium"))}}function ue(a,o){if(a&1&&(i(0,"span",66),r(1),n()),a&2){let e=d(3);t(),s(e.t("settings.overtime.active"))}}function pe(a,o){if(a&1&&(i(0,"span",67),r(1),n()),a&2){let e=d(3);t(),s(e.t("settings.overtime.inactive"))}}function Ce(a,o){if(a&1&&(i(0,"app-form-section",13)(1,"div",14)(2,"div",65)(3,"small",6),r(4),n(),i(5,"div"),r(6),P(7,"date"),n()(),g(8,ve,6,6,"div",65),i(9,"div",65)(10,"small",6),r(11),n(),i(12,"div"),g(13,ue,2,1,"span",66)(14,pe,2,1,"span",67),n()()()()),a&2){let e=d(2);b("title",e.t("settings.overtime.configurationInfo")),t(4),f("",e.t("common.created"),":"),t(2),S("",e.originalConfig.createdBy," on ",E(7,7,e.originalConfig.createdAtUtc,"medium")),t(2),v(e.originalConfig.updatedAtUtc?8:-1),t(3),f("",e.t("settings.overtime.status"),":"),t(2),v(e.originalConfig.isActive?13:14)}}function xe(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("effectiveFromDate"))}}function he(a,o){if(a&1&&(i(0,"div",29),r(1),n()),a&2){let e=d(2);t(),s(e.getError("effectiveToDate"))}}function _e(a,o){a&1&&_(0,"i",61)}function be(a,o){a&1&&_(0,"i",62)}function ye(a,o){if(a&1){let e=D();g(0,ie,3,1,"div",7),g(1,ne,3,1,"div",8),g(2,oe,5,2,"div",9),i(3,"form",10,0),I("ngSubmit",function(){u(e);let l=d();return p(l.onSubmit())}),i(5,"div",11)(6,"div",12)(7,"app-form-section",13)(8,"div",14)(9,"div",11)(10,"div",15)(11,"div",16)(12,"input",17),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.enablePreShiftOvertime,l)||(m.configForm.enablePreShiftOvertime=l),p(l)}),n(),i(13,"label",18)(14,"strong"),r(15),n(),_(16,"br"),i(17,"small",6),r(18),n()()()(),i(19,"div",15)(20,"div",16)(21,"input",19),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.enablePostShiftOvertime,l)||(m.configForm.enablePostShiftOvertime=l),p(l)}),n(),i(22,"label",20)(23,"strong"),r(24),n(),_(25,"br"),i(26,"small",6),r(27),n()()()()(),g(28,re,2,1,"div",21),n()(),i(29,"app-form-section",13)(30,"div",14)(31,"div",11)(32,"div",22)(33,"div",23)(34,"label",24),r(35),i(36,"span",25),r(37,"*"),n()(),i(38,"div",26)(39,"input",27),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.normalDayRate,l)||(m.configForm.normalDayRate=l),p(l)}),n(),i(40,"span",28),r(41,"x"),n()(),g(42,ae,2,1,"div",29),i(43,"div",30),r(44),n()()(),i(45,"div",22)(46,"div",23)(47,"label",31),r(48),i(49,"span",25),r(50,"*"),n()(),i(51,"div",26)(52,"input",32),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.publicHolidayRate,l)||(m.configForm.publicHolidayRate=l),p(l)}),n(),i(53,"span",28),r(54,"x"),n()(),g(55,le,2,1,"div",29),i(56,"div",30),r(57),n()()(),i(58,"div",22)(59,"div",23)(60,"label",33),r(61),i(62,"span",25),r(63,"*"),n()(),i(64,"div",26)(65,"input",34),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.offDayRate,l)||(m.configForm.offDayRate=l),p(l)}),n(),i(66,"span",28),r(67,"x"),n()(),g(68,me,2,1,"div",29),i(69,"div",30),r(70),n()()()()()(),i(71,"app-form-section",13)(72,"div",14)(73,"div",11)(74,"div",15)(75,"div",23)(76,"label",35),r(77),n(),i(78,"div",26)(79,"input",36),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.maxPreShiftOvertimeHours,l)||(m.configForm.maxPreShiftOvertimeHours=l),p(l)}),n(),i(80,"span",28),r(81),n()(),g(82,se,2,1,"div",29),i(83,"div",30),r(84),n()()(),i(85,"div",15)(86,"div",23)(87,"label",37),r(88),n(),i(89,"div",26)(90,"input",38),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.maxPostShiftOvertimeHours,l)||(m.configForm.maxPostShiftOvertimeHours=l),p(l)}),n(),i(91,"span",28),r(92),n()(),g(93,de,2,1,"div",29),i(94,"div",30),r(95),n()()()()()(),i(96,"app-form-section",13)(97,"div",14)(98,"div",11)(99,"div",22)(100,"div",23)(101,"label",39),r(102),n(),i(103,"div",26)(104,"input",40),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.minimumOvertimeMinutes,l)||(m.configForm.minimumOvertimeMinutes=l),p(l)}),n(),i(105,"span",28),r(106),n()(),g(107,ce,2,1,"div",29),i(108,"div",30),r(109),n()()(),i(110,"div",22)(111,"div",23)(112,"label",41),r(113),n(),i(114,"div",26)(115,"input",42),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.overtimeGracePeriodMinutes,l)||(m.configForm.overtimeGracePeriodMinutes=l),p(l)}),n(),i(116,"span",28),r(117),n()(),g(118,fe,2,1,"div",29),i(119,"div",30),r(120),n()()(),i(121,"div",22)(122,"div",23)(123,"label",43),r(124),n(),i(125,"div",26)(126,"input",44),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.roundingIntervalMinutes,l)||(m.configForm.roundingIntervalMinutes=l),p(l)}),n(),i(127,"span",28),r(128),n()(),g(129,ge,2,1,"div",29),i(130,"div",30),r(131),n()()()(),i(132,"div",11)(133,"div",15)(134,"div",16)(135,"input",45),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.considerFlexibleTime,l)||(m.configForm.considerFlexibleTime=l),p(l)}),n(),i(136,"label",46),r(137),_(138,"br"),i(139,"small",6),r(140),n()()()(),i(141,"div",15)(142,"div",16)(143,"input",47),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.weekendAsOffDay,l)||(m.configForm.weekendAsOffDay=l),p(l)}),n(),i(144,"label",48),r(145),_(146,"br"),i(147,"small",6),r(148),n()()()()()()(),i(149,"app-form-section",13)(150,"div",14)(151,"div",23)(152,"label",49),r(153),n(),i(154,"textarea",50),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.policyNotes,l)||(m.configForm.policyNotes=l),p(l)}),r(155,"                "),n(),i(156,"div",30),r(157),n()()()()(),i(158,"div",51),g(159,Ce,15,10,"app-form-section",13),i(160,"app-form-section",13)(161,"div",14)(162,"div",23)(163,"label",52),r(164),i(165,"span",25),r(166,"*"),n()(),i(167,"input",53),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.effectiveFromDate,l)||(m.configForm.effectiveFromDate=l),p(l)}),n(),g(168,xe,2,1,"div",29),i(169,"div",30),r(170),n()(),i(171,"div",23)(172,"label",54),r(173),n(),i(174,"input",55),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.effectiveToDate,l)||(m.configForm.effectiveToDate=l),p(l)}),n(),g(175,he,2,1,"div",29),i(176,"div",30),r(177),n()()()(),i(178,"app-form-section",13)(179,"div",14)(180,"div",16)(181,"input",56),h("ngModelChange",function(l){u(e);let m=d();return x(m.configForm.requireApproval,l)||(m.configForm.requireApproval=l),p(l)}),n(),i(182,"label",57),r(183),_(184,"br"),i(185,"small",6),r(186),n()()()()(),i(187,"div",58)(188,"div",14)(189,"div",59)(190,"button",60),g(191,_e,1,0,"i",61)(192,be,1,0,"i",62),r(193),n()()()()()()()}if(a&2){let e=d();v(e.isConfigurationActive()?0:-1),t(),v(e.error()?1:-1),t(),v(e.isConfigurationActive()?2:-1),t(5),b("title",e.t("settings.overtime.overtimeTypes")),t(5),C("ngModel",e.configForm.enablePreShiftOvertime),t(3),s(e.t("settings.overtime.enablePreShift")),t(3),s(e.t("settings.overtime.enablePreShiftDescription")),t(3),C("ngModel",e.configForm.enablePostShiftOvertime),t(3),s(e.t("settings.overtime.enablePostShift")),t(3),s(e.t("settings.overtime.enablePostShiftDescription")),t(),v(e.hasError("general")?28:-1),t(),b("title",e.t("settings.overtime.overtimeRates")),t(6),f(" ",e.t("settings.overtime.normalDayRate")," "),t(4),y(e.getFieldClasses("normalDayRate")),C("ngModel",e.configForm.normalDayRate),t(3),v(e.hasError("normalDayRate")?42:-1),t(2),s(e.t("settings.overtime.normalDayRateDescription")),t(4),f(" ",e.t("settings.overtime.publicHolidayRate")," "),t(4),y(e.getFieldClasses("publicHolidayRate")),C("ngModel",e.configForm.publicHolidayRate),t(3),v(e.hasError("publicHolidayRate")?55:-1),t(2),s(e.t("settings.overtime.publicHolidayRateDescription")),t(4),f(" ",e.t("settings.overtime.offDayRate")," "),t(4),y(e.getFieldClasses("offDayRate")),C("ngModel",e.configForm.offDayRate),t(3),v(e.hasError("offDayRate")?68:-1),t(2),s(e.t("settings.overtime.offDayRateDescription")),t(),b("title",e.t("settings.overtime.overtimeLimits")),t(6),f(" ",e.t("settings.overtime.maxPreShiftHours")," "),t(2),y(e.getFieldClasses("maxPreShiftOvertimeHours")),C("ngModel",e.configForm.maxPreShiftOvertimeHours),t(2),s(e.t("common.hours")),t(),v(e.hasError("maxPreShiftOvertimeHours")?82:-1),t(2),s(e.t("settings.overtime.maxPreShiftHoursDescription")),t(4),f(" ",e.t("settings.overtime.maxPostShiftHours")," "),t(2),y(e.getFieldClasses("maxPostShiftOvertimeHours")),C("ngModel",e.configForm.maxPostShiftOvertimeHours),t(2),s(e.t("common.hours")),t(),v(e.hasError("maxPostShiftOvertimeHours")?93:-1),t(2),s(e.t("settings.overtime.maxPostShiftHoursDescription")),t(),b("title",e.t("settings.overtime.calculationSettings")),t(6),f(" ",e.t("settings.overtime.minimumOvertimeMinutes")," "),t(2),y(e.getFieldClasses("minimumOvertimeMinutes")),C("ngModel",e.configForm.minimumOvertimeMinutes),t(2),s(e.t("common.minutes")),t(),v(e.hasError("minimumOvertimeMinutes")?107:-1),t(2),s(e.t("settings.overtime.minimumOvertimeMinutesDescription")),t(4),f(" ",e.t("settings.overtime.gracePeriodMinutes")," "),t(2),y(e.getFieldClasses("overtimeGracePeriodMinutes")),C("ngModel",e.configForm.overtimeGracePeriodMinutes),t(2),s(e.t("common.minutes")),t(),v(e.hasError("overtimeGracePeriodMinutes")?118:-1),t(2),s(e.t("settings.overtime.gracePeriodMinutesDescription")),t(4),f(" ",e.t("settings.overtime.roundingIntervalMinutes")," "),t(2),y(e.getFieldClasses("roundingIntervalMinutes")),C("ngModel",e.configForm.roundingIntervalMinutes),t(2),s(e.t("common.minutes")),t(),v(e.hasError("roundingIntervalMinutes")?129:-1),t(2),s(e.t("settings.overtime.roundingIntervalMinutesDescription")),t(4),C("ngModel",e.configForm.considerFlexibleTime),t(2),f(" ",e.t("settings.overtime.considerFlexibleTime")," "),t(3),s(e.t("settings.overtime.considerFlexibleTimeDescription")),t(3),C("ngModel",e.configForm.weekendAsOffDay),t(2),f(" ",e.t("settings.overtime.weekendAsOffDay")," "),t(3),s(e.t("settings.overtime.weekendAsOffDayDescription")),t(),b("title",e.t("settings.overtime.policyNotes")),t(4),f(" ",e.t("settings.overtime.policyNotesLabel")," "),t(),C("ngModel",e.configForm.policyNotes),b("placeholder",e.t("settings.overtime.policyNotesPlaceholder")),t(3),s(e.t("settings.overtime.policyNotesDescription")),t(2),v(e.originalConfig?159:-1),t(),b("title",e.t("settings.overtime.effectivePeriod")),t(4),f(" ",e.t("settings.overtime.effectiveFrom")," "),t(3),y(e.getFieldClasses("effectiveFromDate")),C("ngModel",e.configForm.effectiveFromDate),t(),v(e.hasError("effectiveFromDate")?168:-1),t(2),s(e.t("settings.overtime.effectiveFromDescription")),t(3),f(" ",e.t("settings.overtime.effectiveTo")," "),t(),y(e.getFieldClasses("effectiveToDate")),C("ngModel",e.configForm.effectiveToDate),t(),v(e.hasError("effectiveToDate")?175:-1),t(2),s(e.t("settings.overtime.effectiveToDescription")),t(),b("title",e.t("settings.overtime.additionalSettings")),t(3),C("ngModel",e.configForm.requireApproval),t(2),f(" ",e.t("settings.overtime.requireApproval")," "),t(3),s(e.t("settings.overtime.requireApprovalDescription")),t(4),b("disabled",e.submitting()),t(),v(e.submitting()?191:192),t(2),f(" ",e.submitting()?e.t("common.saving"):e.t("settings.overtime.updatePolicy")," ")}}var ee=class a{overtimeService=M($);router=M(k);route=M(H);notificationService=M(Y);confirmationService=M(Q);i18n=M(K);loading=O(!1);submitting=O(!1);error=O(null);configurationId=0;originalConfig=null;configForm={enablePreShiftOvertime:!1,enablePostShiftOvertime:!0,normalDayRate:1.5,publicHolidayRate:2,offDayRate:1.5,minimumOvertimeMinutes:15,considerFlexibleTime:!0,maxPreShiftOvertimeHours:2,maxPostShiftOvertimeHours:4,requireApproval:!1,overtimeGracePeriodMinutes:5,weekendAsOffDay:!0,roundingIntervalMinutes:15,policyNotes:"",effectiveFromDate:this.getTodayDate(),effectiveToDate:""};validationErrors=O({});ngOnInit(){this.route.params.subscribe(o=>{this.configurationId=+o.id,this.configurationId&&this.loadConfiguration()})}t(o){return this.i18n.t(o)}getTodayDate(){return new Date().toISOString().split("T")[0]}loadConfiguration(){this.loading.set(!0),this.error.set(null),this.overtimeService.getOvertimeConfigurationById(this.configurationId).subscribe({next:o=>{this.originalConfig=o,this.populateForm(o),this.loading.set(!1)},error:o=>{console.error("Failed to load overtime configuration:",o),this.loading.set(!1),o.status===404?(this.error.set(this.t("settings.overtime.errors.configurationNotFound")),this.notificationService.error(this.t("app.error"),this.t("settings.overtime.errors.configurationNotFound"))):(this.error.set(this.t("errors.server")),this.notificationService.error(this.t("app.error"),this.t("errors.server")))}})}populateForm(o){this.configForm={enablePreShiftOvertime:o.enablePreShiftOvertime,enablePostShiftOvertime:o.enablePostShiftOvertime,normalDayRate:o.normalDayRate,publicHolidayRate:o.publicHolidayRate,offDayRate:o.offDayRate,minimumOvertimeMinutes:o.minimumOvertimeMinutes,considerFlexibleTime:o.considerFlexibleTime,maxPreShiftOvertimeHours:o.maxPreShiftOvertimeHours,maxPostShiftOvertimeHours:o.maxPostShiftOvertimeHours,requireApproval:o.requireApproval,overtimeGracePeriodMinutes:o.overtimeGracePeriodMinutes,weekendAsOffDay:o.weekendAsOffDay,roundingIntervalMinutes:o.roundingIntervalMinutes,policyNotes:o.policyNotes||"",effectiveFromDate:o.effectiveFromDate.split("T")[0],effectiveToDate:o.effectiveToDate?o.effectiveToDate.split("T")[0]:""}}validateForm(){let o={};if(this.configForm.effectiveFromDate||(o.effectiveFromDate=this.t("settings.overtime.validation.effectiveFromRequired")),this.configForm.normalDayRate<=0&&(o.normalDayRate=this.t("settings.overtime.validation.ratePositive")),this.configForm.publicHolidayRate<=0&&(o.publicHolidayRate=this.t("settings.overtime.validation.ratePositive")),this.configForm.offDayRate<=0&&(o.offDayRate=this.t("settings.overtime.validation.ratePositive")),this.configForm.minimumOvertimeMinutes<0&&(o.minimumOvertimeMinutes=this.t("settings.overtime.validation.minimumOvertimePositive")),this.configForm.overtimeGracePeriodMinutes<0&&(o.overtimeGracePeriodMinutes=this.t("settings.overtime.validation.gracePeriodPositive")),this.configForm.roundingIntervalMinutes<=0&&(o.roundingIntervalMinutes=this.t("settings.overtime.validation.roundingIntervalPositive")),this.configForm.maxPreShiftOvertimeHours<0&&(o.maxPreShiftOvertimeHours=this.t("settings.overtime.validation.maxHoursPositive")),this.configForm.maxPostShiftOvertimeHours<0&&(o.maxPostShiftOvertimeHours=this.t("settings.overtime.validation.maxHoursPositive")),this.configForm.effectiveToDate&&this.configForm.effectiveFromDate){let e=new Date(this.configForm.effectiveFromDate);new Date(this.configForm.effectiveToDate)<=e&&(o.effectiveToDate=this.t("settings.overtime.validation.effectiveToAfterFrom"))}return!this.configForm.enablePreShiftOvertime&&!this.configForm.enablePostShiftOvertime&&(o.general=this.t("settings.overtime.validation.atLeastOneOvertimeType")),this.validationErrors.set(o),Object.keys(o).length===0}hasError(o){return!!this.validationErrors()[o]}getError(o){return this.validationErrors()[o]||""}onSubmit(){if(!this.validateForm()){this.error.set(this.t("settings.overtime.validation.pleaseFix"));return}this.submitting.set(!0),this.error.set(null);let o={enablePreShiftOvertime:this.configForm.enablePreShiftOvertime,enablePostShiftOvertime:this.configForm.enablePostShiftOvertime,normalDayRate:this.configForm.normalDayRate,publicHolidayRate:this.configForm.publicHolidayRate,offDayRate:this.configForm.offDayRate,minimumOvertimeMinutes:this.configForm.minimumOvertimeMinutes,considerFlexibleTime:this.configForm.considerFlexibleTime,maxPreShiftOvertimeHours:this.configForm.maxPreShiftOvertimeHours,maxPostShiftOvertimeHours:this.configForm.maxPostShiftOvertimeHours,requireApproval:this.configForm.requireApproval,overtimeGracePeriodMinutes:this.configForm.overtimeGracePeriodMinutes,weekendAsOffDay:this.configForm.weekendAsOffDay,roundingIntervalMinutes:this.configForm.roundingIntervalMinutes,policyNotes:this.configForm.policyNotes.trim(),effectiveFromDate:this.configForm.effectiveFromDate,effectiveToDate:this.configForm.effectiveToDate||void 0};this.overtimeService.updateOvertimeConfiguration(this.configurationId,o).subscribe({next:()=>{this.notificationService.success(this.t("app.success"),this.t("settings.overtime.policyUpdatedSuccessfully")),this.router.navigate(["/settings/overtime"])},error:e=>{console.error("Failed to update overtime configuration:",e),this.submitting.set(!1),e.status===400&&e.error?.errors?(this.validationErrors.set(e.error.errors),this.error.set(this.t("settings.overtime.validation.serverErrors"))):e.status===404?(this.error.set(this.t("settings.overtime.errors.configurationNotFound")),this.notificationService.error(this.t("app.error"),this.t("settings.overtime.errors.configurationNotFound"))):(this.error.set(this.t("errors.server")),this.notificationService.error(this.t("app.error"),this.t("errors.server")))}})}onCancel(){return F(this,null,function*(){this.hasFormChanges()&&!(yield this.confirmationService.confirm({title:this.t("common.unsavedChanges"),message:this.t("common.unsavedChangesMessage"),confirmText:this.t("common.discard"),cancelText:this.t("common.stay"),confirmButtonClass:"btn-warning",icon:"fa-exclamation-triangle",iconClass:"text-warning"})).confirmed||this.router.navigate(["/settings/overtime"])})}hasFormChanges(){if(!this.originalConfig)return!1;let o={enablePreShiftOvertime:this.originalConfig.enablePreShiftOvertime,enablePostShiftOvertime:this.originalConfig.enablePostShiftOvertime,normalDayRate:this.originalConfig.normalDayRate,publicHolidayRate:this.originalConfig.publicHolidayRate,offDayRate:this.originalConfig.offDayRate,minimumOvertimeMinutes:this.originalConfig.minimumOvertimeMinutes,considerFlexibleTime:this.originalConfig.considerFlexibleTime,maxPreShiftOvertimeHours:this.originalConfig.maxPreShiftOvertimeHours,maxPostShiftOvertimeHours:this.originalConfig.maxPostShiftOvertimeHours,requireApproval:this.originalConfig.requireApproval,overtimeGracePeriodMinutes:this.originalConfig.overtimeGracePeriodMinutes,weekendAsOffDay:this.originalConfig.weekendAsOffDay,roundingIntervalMinutes:this.originalConfig.roundingIntervalMinutes,policyNotes:this.originalConfig.policyNotes||"",effectiveFromDate:this.originalConfig.effectiveFromDate.split("T")[0],effectiveToDate:this.originalConfig.effectiveToDate?this.originalConfig.effectiveToDate.split("T")[0]:""};return JSON.stringify(this.configForm)!==JSON.stringify(o)}onReset(){this.originalConfig&&(this.populateForm(this.originalConfig),this.validationErrors.set({}),this.error.set(null))}isFieldInvalid(o){return this.hasError(o)}getFieldClasses(o){let e="form-control";return this.isFieldInvalid(o)?`${e} is-invalid`:e}isConfigurationActive(){return this.originalConfig?.isActive||!1}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=w({type:a,selectors:[["app-edit-overtime-configuration"]],decls:4,vars:4,consts:[["formRef","ngForm"],[1,"container-fluid"],["mode","edit","moduleName","settings","moduleRoute","settings/overtime",3,"title","entityId","loading"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","200px"],[1,"text-center"],[1,"fa-solid","fa-spinner","fa-spin","fs-2","text-primary","mb-3"],[1,"text-muted"],[1,"alert","alert-success","mb-4"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"],[3,"ngSubmit"],[1,"row"],[1,"col-lg-8"],[3,"title"],[1,"card-body"],[1,"col-md-6"],[1,"form-check","mb-3"],["type","checkbox","id","enablePreShiftOvertime","name","enablePreShiftOvertime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","enablePreShiftOvertime",1,"form-check-label"],["type","checkbox","id","enablePostShiftOvertime","name","enablePostShiftOvertime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","enablePostShiftOvertime",1,"form-check-label"],[1,"text-danger","small"],[1,"col-md-4"],[1,"mb-3"],["for","normalDayRate",1,"form-label"],[1,"text-danger"],[1,"input-group"],["type","number","id","normalDayRate","name","normalDayRate","step","0.1","min","1","required","",3,"ngModelChange","ngModel"],[1,"input-group-text"],[1,"invalid-feedback","d-block"],[1,"form-text"],["for","publicHolidayRate",1,"form-label"],["type","number","id","publicHolidayRate","name","publicHolidayRate","step","0.1","min","1","required","",3,"ngModelChange","ngModel"],["for","offDayRate",1,"form-label"],["type","number","id","offDayRate","name","offDayRate","step","0.1","min","1","required","",3,"ngModelChange","ngModel"],["for","maxPreShiftOvertimeHours",1,"form-label"],["type","number","id","maxPreShiftOvertimeHours","name","maxPreShiftOvertimeHours","step","0.5","min","0",3,"ngModelChange","ngModel"],["for","maxPostShiftOvertimeHours",1,"form-label"],["type","number","id","maxPostShiftOvertimeHours","name","maxPostShiftOvertimeHours","step","0.5","min","0",3,"ngModelChange","ngModel"],["for","minimumOvertimeMinutes",1,"form-label"],["type","number","id","minimumOvertimeMinutes","name","minimumOvertimeMinutes","min","0",3,"ngModelChange","ngModel"],["for","overtimeGracePeriodMinutes",1,"form-label"],["type","number","id","overtimeGracePeriodMinutes","name","overtimeGracePeriodMinutes","min","0",3,"ngModelChange","ngModel"],["for","roundingIntervalMinutes",1,"form-label"],["type","number","id","roundingIntervalMinutes","name","roundingIntervalMinutes","min","1",3,"ngModelChange","ngModel"],["type","checkbox","id","considerFlexibleTime","name","considerFlexibleTime",1,"form-check-input",3,"ngModelChange","ngModel"],["for","considerFlexibleTime",1,"form-check-label"],["type","checkbox","id","weekendAsOffDay","name","weekendAsOffDay",1,"form-check-input",3,"ngModelChange","ngModel"],["for","weekendAsOffDay",1,"form-check-label"],["for","policyNotes",1,"form-label"],["id","policyNotes","name","policyNotes","rows","4",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"col-lg-4"],["for","effectiveFromDate",1,"form-label"],["type","date","id","effectiveFromDate","name","effectiveFromDate","required","",3,"ngModelChange","ngModel"],["for","effectiveToDate",1,"form-label"],["type","date","id","effectiveToDate","name","effectiveToDate",3,"ngModelChange","ngModel"],["type","checkbox","id","requireApproval","name","requireApproval",1,"form-check-input",3,"ngModelChange","ngModel"],["for","requireApproval",1,"form-check-label"],[1,"card"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fa-solid","fa-spinner","fa-spin","me-2"],[1,"fa-solid","fa-save","me-2"],[1,"fa-solid","fa-check-circle","me-2"],[1,"fa-solid","fa-exclamation-triangle","me-2"],[1,"mb-2"],[1,"badge","bg-success"],[1,"badge","bg-light","text-dark","border"]],template:function(e,c){e&1&&(i(0,"div",1),_(1,"app-form-header",2),g(2,te,5,1,"div",3)(3,ye,194,99),n()),e&2&&(t(),b("title",c.t("settings.overtime.editPolicy"))("entityId",c.configurationId)("loading",c.submitting()),t(),v(c.loading()?2:3))},dependencies:[R,J,G,V,U,A,N,q,z,j,L,B,W,Z,X,T],styles:[`.card[_ngcontent-%COMP%]{border:1px solid #e9ecef;box-shadow:0 .125rem .25rem #00000013;transition:box-shadow .15s ease-in-out}.card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;padding:1rem 1.25rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#495057;font-weight:600}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057;margin-bottom:.5rem}.form-check-label[_ngcontent-%COMP%]{font-weight:500}.form-text[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-top:.25rem}.input-group-text[_ngcontent-%COMP%]{background-color:#f8f9fa;border-color:#ced4da;font-weight:500}.btn[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem}.alert[_ngcontent-%COMP%]{border:none;border-radius:.5rem;padding:1rem}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;border-left:4px solid #ffc107}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-left:4px solid #dc3545}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;padding:.35em .65em}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important}.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.fa-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354540}.invalid-feedback[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875rem;color:#dc3545}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]{padding:.5rem}.card-body[_ngcontent-%COMP%]{padding:1rem}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch!important}.d-flex.justify-content-between[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{margin-top:1rem;display:flex;gap:.5rem}}.configuration-info[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:.5rem;padding:1rem;margin-bottom:1rem}.configuration-info[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}.alert-warning[_ngcontent-%COMP%]   .fa-exclamation-triangle[_ngcontent-%COMP%]{color:#856404}.badge.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.badge.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.fa-solid[_ngcontent-%COMP%]{width:1em;text-align:center}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.col-lg-4[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:sticky;top:2rem}.form-control[_ngcontent-%COMP%]:focus, .form-check-input[_ngcontent-%COMP%]:focus{border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem #0d6efd40}.form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 .5rem 1rem #00000026}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.submitting[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{pointer-events:none}.submitting[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{opacity:.7}`]})};export{ee as EditOvertimeConfigurationComponent};
