{
  "version": 3,
  "sources": ["src/app/pages/users/edit-user-page/edit-user-page.component.ts"],
  "sourcesContent": ["import { Component, OnInit, signal, inject } from '@angular/core';\r\n\r\nimport { ActivatedRoute, Router, RouterModule } from '@angular/router';\r\nimport { UserFormComponent } from '../user-form/user-form.component';\r\nimport { UsersService } from '../users.service';\r\nimport { UserDto } from '../../../shared/models/user.model';\r\nimport { I18nService } from '../../../core/i18n/i18n.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-user-page',\r\n  standalone: true,\r\n  imports: [RouterModule, UserFormComponent],\r\n  template: `\r\n    @if (loading()) {\r\n      <div class=\"d-flex justify-content-center py-5\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n          <span class=\"visually-hidden\">{{ i18n.t('common.loading') }}</span>\r\n        </div>\r\n      </div>\r\n    } @else if (user()) {\r\n      @if (isSystemAdmin(user()!)) {\r\n        <div class=\"container-fluid\">\r\n          <div class=\"alert alert-warning\">\r\n            <i class=\"fa-solid fa-shield-alt me-2\"></i>\r\n            {{ i18n.t('users.system_admin_cannot_be_edited') }}\r\n          </div>\r\n          <div class=\"d-flex justify-content-start\">\r\n            <button type=\"button\" class=\"btn btn-outline-secondary\" routerLink=\"/users\">\r\n              <i class=\"fa-solid fa-arrow-left me-2\"></i>\r\n              {{ i18n.t('common.back') }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      } @else {\r\n        <app-user-form \r\n          [user]=\"user()\" \r\n          [show]=\"true\"\r\n          (userSaved)=\"onUserSaved($event)\">\r\n        </app-user-form>\r\n      }\r\n    } @else {\r\n      <div class=\"alert alert-danger\">\r\n        <i class=\"fa-solid fa-exclamation-triangle me-2\"></i>\r\n        {{ error() || i18n.t('users.user_not_found') }}\r\n      </div>\r\n    }\r\n  `\r\n})\r\nexport class EditUserPageComponent implements OnInit {\r\n  private route = inject(ActivatedRoute);\r\n  private router = inject(Router);\r\n  private usersService = inject(UsersService);\r\n  public i18n = inject(I18nService);\r\n\r\n  user = signal<UserDto | null>(null);\r\n  loading = signal(true);\r\n  error = signal('');\r\n\r\n  ngOnInit(): void {\r\n    const userId = this.route.snapshot.paramMap.get('id');\r\n    if (userId) {\r\n      this.loadUser(userId);\r\n    } else {\r\n      this.error.set('Invalid user ID');\r\n      this.loading.set(false);\r\n    }\r\n  }\r\n\r\n  isSystemAdmin(user: UserDto): boolean {\r\n    return user.username.toLowerCase() === 'systemadmin';\r\n  }\r\n\r\n  loadUser(userId: string): void {\r\n    this.usersService.getUserById(+userId).subscribe({\r\n      next: (user) => {\r\n        this.user.set(user);\r\n        this.loading.set(false);\r\n      },\r\n      error: (error) => {\r\n        this.error.set(this.getErrorMessage(error));\r\n        this.loading.set(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  onUserSaved(user: UserDto): void {\r\n    this.router.navigate(['/users', user.id, 'view']);\r\n  }\r\n\r\n  private getErrorMessage(error: any): string {\r\n    if (error?.error?.error) {\r\n      return error.error.error;\r\n    }\r\n    return this.i18n.t('errors.unknown');\r\n  }\r\n}"],
  "mappings": "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",
  "names": []
}
