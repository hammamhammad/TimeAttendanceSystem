{
  "version": 3,
  "sources": ["src/app/pages/departments/edit-department/edit-department.component.ts"],
  "sourcesContent": ["import { Component, OnInit, signal, inject } from '@angular/core';\r\n\r\nimport { ActivatedRoute, Router, RouterModule } from '@angular/router';\r\nimport { DepartmentFormComponent } from '../department-form/department-form.component';\r\nimport { DepartmentsService } from '../departments.service';\r\nimport { Department, DepartmentDto, CreateDepartmentRequest, UpdateDepartmentRequest } from '../../../shared/models/department.model';\r\nimport { I18nService } from '../../../core/i18n/i18n.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-department',\r\n  standalone: true,\r\n  imports: [RouterModule, DepartmentFormComponent],\r\n  template: `\r\n    <div class=\"container-fluid\">\r\n      <!-- Header -->\r\n      <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <div>\r\n          <h2>{{ i18n.t('department.edit') }}</h2>\r\n          <nav aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb\">\r\n              <li class=\"breadcrumb-item\">\r\n                <a routerLink=\"/dashboard\">{{ i18n.t('dashboard.title') }}</a>\r\n              </li>\r\n              <li class=\"breadcrumb-item\">\r\n                <a routerLink=\"/departments\">{{ i18n.t('departments.title') }}</a>\r\n              </li>\r\n              <li class=\"breadcrumb-item active\">{{ i18n.t('department.edit') }}</li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n        <button \r\n          type=\"button\" \r\n          class=\"btn btn-outline-secondary\"\r\n          (click)=\"onCancel()\">\r\n          <i class=\"fa-solid fa-arrow-left me-2\"></i>\r\n          {{ i18n.t('common.back') }}\r\n        </button>\r\n      </div>\r\n\r\n      @if (loading()) {\r\n        <div class=\"d-flex justify-content-center py-5\">\r\n          <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"visually-hidden\">{{ i18n.t('common.loading') }}</span>\r\n          </div>\r\n        </div>\r\n      } @else if (department()) {\r\n        @if (error()) {\r\n          <div class=\"alert alert-danger\">\r\n            <i class=\"fa-solid fa-exclamation-triangle me-2\"></i>\r\n            {{ error() }}\r\n          </div>\r\n        }\r\n\r\n        <!-- Main Form Card -->\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h5 class=\"card-title mb-0\">\r\n              <i class=\"fa-solid fa-building me-2\"></i>\r\n              {{ i18n.t('department.information') }}\r\n            </h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <app-department-form\r\n              [department]=\"department()\"\r\n              [branchId]=\"department()?.branchId || null\"\r\n              [isEditMode]=\"true\"\r\n              [externalSaving]=\"saving()\"\r\n              (save)=\"onDepartmentSaved($event)\"\r\n              (cancel)=\"onCancel()\">\r\n            </app-department-form>\r\n          </div>\r\n        </div>\r\n      } @else {\r\n        <div class=\"alert alert-danger\">\r\n          <i class=\"fa-solid fa-exclamation-triangle me-2\"></i>\r\n          {{ error() || i18n.t('department.not_found') }}\r\n        </div>\r\n      }\r\n    </div>\r\n  `\r\n})\r\nexport class EditDepartmentComponent implements OnInit {\r\n  private route = inject(ActivatedRoute);\r\n  private router = inject(Router);\r\n  private departmentsService = inject(DepartmentsService);\r\n  public i18n = inject(I18nService);\r\n\r\n  department = signal<Department | null>(null);\r\n  loading = signal(true);\r\n  saving = signal(false);\r\n  error = signal('');\r\n\r\n  ngOnInit(): void {\r\n    const departmentId = this.route.snapshot.paramMap.get('id');\r\n    if (departmentId) {\r\n      this.loadDepartment(departmentId);\r\n    } else {\r\n      this.error.set('Invalid department ID');\r\n      this.loading.set(false);\r\n    }\r\n  }\r\n\r\n  loadDepartment(departmentId: string): void {\r\n    this.departmentsService.getDepartmentById(+departmentId).subscribe({\r\n      next: (department) => {\r\n        this.department.set(department);\r\n        this.loading.set(false);\r\n      },\r\n      error: (error) => {\r\n        this.error.set(this.getErrorMessage(error));\r\n        this.loading.set(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  onDepartmentSaved(department: CreateDepartmentRequest | UpdateDepartmentRequest): void {\r\n    if (this.saving() || !this.department()) return;\r\n\r\n    this.saving.set(true);\r\n    this.error.set('');\r\n\r\n    const departmentId = this.department()!.id;\r\n    const updateRequest = department as UpdateDepartmentRequest;\r\n\r\n    this.departmentsService.updateDepartment(departmentId, updateRequest).subscribe({\r\n      next: () => {\r\n        console.log('Department updated successfully');\r\n        this.saving.set(false);\r\n        this.router.navigate(['/departments']);\r\n      },\r\n      error: (error) => {\r\n        console.error('Error updating department:', error);\r\n        this.error.set(this.getErrorMessage(error));\r\n        this.saving.set(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  onCancel(): void {\r\n    this.router.navigate(['/departments']);\r\n  }\r\n\r\n  private getErrorMessage(error: any): string {\r\n    if (error?.error?.error) {\r\n      return error.error.error;\r\n    }\r\n    return this.i18n.t('errors.unknown');\r\n  }\r\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCQ,IAAA,yBAAA,GAAA,OAAA,EAAA,EAAgD,GAAA,OAAA,EAAA,EACJ,GAAA,QAAA,EAAA;AACV,IAAA,iBAAA,CAAA;AAA8B,IAAA,uBAAA,EAAO,EAC/D;;;;AAD0B,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,OAAA,KAAA,EAAA,gBAAA,CAAA;;;;;;AAKhC,IAAA,yBAAA,GAAA,OAAA,EAAA;AACE,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,iBAAA,CAAA;AACF,IAAA,uBAAA;;;;AADE,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,OAAA,MAAA,GAAA,GAAA;;;;;;;AAHJ,IAAA,8BAAA,GAAA,+DAAA,GAAA,GAAA,OAAA,EAAA;AAQA,IAAA,yBAAA,GAAA,OAAA,EAAA,EAAkB,GAAA,OAAA,EAAA,EACS,GAAA,MAAA,EAAA;AAErB,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,iBAAA,CAAA;AACF,IAAA,uBAAA,EAAK;AAEP,IAAA,yBAAA,GAAA,OAAA,EAAA,EAAuB,GAAA,uBAAA,EAAA;AAMnB,IAAA,qBAAA,QAAA,gCAAA,oFAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAQ,OAAA,kBAAA,MAAA,CAAyB;IAAA,GAAjC,sFAAiC,EAAC,UAAA,gCAAA,wFAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBACxB,OAAA,SAAA,CAAU;IAAA,GADc,wFACd;AACtB,IAAA,uBAAA,EAAsB,EAClB;;;;;AAxBR,IAAA,wBAAA,OAAA,MAAA,IAAA,IAAA,EAAA;AAYM,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,OAAA,KAAA,EAAA,wBAAA,GAAA,GAAA;AAKA,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,cAAA,OAAA,WAAA,CAAA,EAA2B,cAAA,UAAA,OAAA,WAAA,MAAA,OAAA,OAAA,QAAA,aAAA,IAAA,EACgB,cAAA,IAAA,EACxB,kBAAA,OAAA,OAAA,CAAA;;;;;;AAQzB,IAAA,yBAAA,GAAA,OAAA,EAAA;AACE,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,iBAAA,CAAA;AACF,IAAA,uBAAA;;;;AADE,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,OAAA,MAAA,KAAA,OAAA,KAAA,EAAA,sBAAA,GAAA,GAAA;;;;AAMJ,IAAO,2BAAP,MAAO,yBAAuB;EAC1B,QAAQ,OAAO,cAAc;EAC7B,SAAS,OAAO,MAAM;EACtB,qBAAqB,OAAO,kBAAkB;EAC/C,OAAO,OAAO,WAAW;EAEhC,aAAa,OAA0B,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,aAAA,CAAA,IAAA,CAAA,CAAA;EAC3C,UAAU,OAAO,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EACrB,SAAS,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EACrB,QAAQ,OAAO,IAAE,GAAA,YAAA,CAAA,EAAA,WAAA,QAAA,CAAA,IAAA,CAAA,CAAA;EAEjB,WAAQ;AACN,UAAM,eAAe,KAAK,MAAM,SAAS,SAAS,IAAI,IAAI;AAC1D,QAAI,cAAc;AAChB,WAAK,eAAe,YAAY;IAClC,OAAO;AACL,WAAK,MAAM,IAAI,uBAAuB;AACtC,WAAK,QAAQ,IAAI,KAAK;IACxB;EACF;EAEA,eAAe,cAAoB;AACjC,SAAK,mBAAmB,kBAAkB,CAAC,YAAY,EAAE,UAAU;MACjE,MAAM,wBAAC,eAAc;AACnB,aAAK,WAAW,IAAI,UAAU;AAC9B,aAAK,QAAQ,IAAI,KAAK;MACxB,GAHM;MAIN,OAAO,wBAAC,UAAS;AACf,aAAK,MAAM,IAAI,KAAK,gBAAgB,KAAK,CAAC;AAC1C,aAAK,QAAQ,IAAI,KAAK;MACxB,GAHO;KAIR;EACH;EAEA,kBAAkB,YAA6D;AAC7E,QAAI,KAAK,OAAM,KAAM,CAAC,KAAK,WAAU;AAAI;AAEzC,SAAK,OAAO,IAAI,IAAI;AACpB,SAAK,MAAM,IAAI,EAAE;AAEjB,UAAM,eAAe,KAAK,WAAU,EAAI;AACxC,UAAM,gBAAgB;AAEtB,SAAK,mBAAmB,iBAAiB,cAAc,aAAa,EAAE,UAAU;MAC9E,MAAM,6BAAK;AACT,gBAAQ,IAAI,iCAAiC;AAC7C,aAAK,OAAO,IAAI,KAAK;AACrB,aAAK,OAAO,SAAS,CAAC,cAAc,CAAC;MACvC,GAJM;MAKN,OAAO,wBAAC,UAAS;AACf,gBAAQ,MAAM,8BAA8B,KAAK;AACjD,aAAK,MAAM,IAAI,KAAK,gBAAgB,KAAK,CAAC;AAC1C,aAAK,OAAO,IAAI,KAAK;MACvB,GAJO;KAKR;EACH;EAEA,WAAQ;AACN,SAAK,OAAO,SAAS,CAAC,cAAc,CAAC;EACvC;EAEQ,gBAAgB,OAAU;AAChC,QAAI,OAAO,OAAO,OAAO;AACvB,aAAO,MAAM,MAAM;IACrB;AACA,WAAO,KAAK,KAAK,EAAE,gBAAgB;EACrC;;AAlEkC;cAAvB;mCAAA,0BAAuB;AAAA;cAAvB,2FAAA,0BAAuB,WAAA,CAAA,CAAA,qBAAA,CAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,iBAAA,GAAA,CAAA,GAAA,UAAA,2BAAA,sBAAA,MAAA,GAAA,CAAA,cAAA,YAAA,GAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,iBAAA,GAAA,CAAA,cAAA,YAAA,GAAA,CAAA,cAAA,cAAA,GAAA,CAAA,GAAA,mBAAA,QAAA,GAAA,CAAA,QAAA,UAAA,GAAA,OAAA,yBAAA,GAAA,OAAA,GAAA,CAAA,GAAA,YAAA,iBAAA,MAAA,GAAA,CAAA,GAAA,UAAA,0BAAA,MAAA,GAAA,CAAA,GAAA,SAAA,cAAA,GAAA,CAAA,QAAA,UAAA,GAAA,gBAAA,GAAA,CAAA,GAAA,iBAAA,GAAA,CAAA,GAAA,MAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,GAAA,cAAA,MAAA,GAAA,CAAA,GAAA,YAAA,eAAA,MAAA,GAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,QAAA,UAAA,cAAA,YAAA,cAAA,gBAAA,GAAA,CAAA,GAAA,YAAA,2BAAA,MAAA,CAAA,GAAA,UAAA,gCAAA,iCAAA,IAAA,KAAA;AAAA,MAAA,KAAA,GAAA;AApEhC,IAAA,yBAAA,GAAA,OAAA,CAAA,EAA6B,GAAA,OAAA,CAAA,EAEyC,GAAA,KAAA,EAC7D,GAAA,IAAA;AACC,IAAA,iBAAA,CAAA;AAA+B,IAAA,uBAAA;AACnC,IAAA,yBAAA,GAAA,OAAA,CAAA,EAA6B,GAAA,MAAA,CAAA,EACJ,GAAA,MAAA,CAAA,EACO,GAAA,KAAA,CAAA;AACC,IAAA,iBAAA,CAAA;AAA+B,IAAA,uBAAA,EAAI;AAEhE,IAAA,yBAAA,IAAA,MAAA,CAAA,EAA4B,IAAA,KAAA,CAAA;AACG,IAAA,iBAAA,EAAA;AAAiC,IAAA,uBAAA,EAAI;AAEpE,IAAA,yBAAA,IAAA,MAAA,CAAA;AAAmC,IAAA,iBAAA,EAAA;AAA+B,IAAA,uBAAA,EAAK,EACpE,EACD;AAER,IAAA,yBAAA,IAAA,UAAA,CAAA;AAGE,IAAA,qBAAA,SAAA,gCAAA,4DAAA;AAAA,aAAS,IAAA,SAAA;IAAU,GAAnB,4DAAmB;AACnB,IAAA,oBAAA,IAAA,KAAA,CAAA;AACA,IAAA,iBAAA,EAAA;AACF,IAAA,uBAAA,EAAS;AAGX,IAAA,8BAAA,IAAA,iDAAA,GAAA,GAAA,OAAA,EAAA,EAAiB,IAAA,iDAAA,GAAA,CAAA,EAMU,IAAA,iDAAA,GAAA,GAAA,OAAA,EAAA;AAiC7B,IAAA,uBAAA;;;AA7DU,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,IAAA,KAAA,EAAA,iBAAA,CAAA;AAI6B,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,IAAA,KAAA,EAAA,iBAAA,CAAA;AAGE,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,IAAA,KAAA,EAAA,mBAAA,CAAA;AAEI,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,IAAA,KAAA,EAAA,iBAAA,CAAA;AASvC,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,IAAA,KAAA,EAAA,aAAA,GAAA,GAAA;AAIJ,IAAA,oBAAA;AAAA,IAAA,wBAAA,IAAA,QAAA,IAAA,KAAA,IAAA,WAAA,IAAA,KAAA,EAAA;;GA0C8B,oDAtExB,cAAY,YAAE,uBAAuB,GAAA,eAAA,EAAA,CAAA;AAsE3C,IAAO,0BAAP;;sEAAO,yBAAuB,CAAA;UAzEnC;WAAU;MACT,UAAU;MACV,YAAY;MACZ,SAAS,CAAC,cAAc,uBAAuB;MAC/C,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAoEX;;;;6EACY,yBAAuB,EAAA,WAAA,2BAAA,UAAA,0EAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
