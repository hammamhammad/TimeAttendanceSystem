import{a as Y}from"./chunk-ZKUEJZLQ.js";import{c as B,e as W,h as L,o as D,p as $,r as j,x as z}from"./chunk-7QCK55IR.js";import{$ as o,$a as I,E as s,Ea as x,Fa as S,Ga as y,J as b,La as E,N as f,O as v,Za as A,_ as d,_a as O,aa as a,ab as P,ba as C,fa as V,fb as N,ga as T,ia as g,ka as h,ma as r,u as p,v as _,wa as u,xa as M,ya as w,za as k}from"./chunk-LDUBOZPL.js";import{a as F}from"./chunk-DGAILPFQ.js";var G=()=>[];function H(n,l){if(n&1){let e=g();o(0,"div",12)(1,"div",13)(2,"span",14),C(3,"i",15),a(),o(4,"input",16),y("ngModelChange",function(t){p(e);let c=r();return S(c.searchTerm,t)||(c.searchTerm=t),_(t)}),h("ngModelChange",function(){p(e);let t=r();return _(t.onSearchChange())})("keyup.enter",function(){p(e);let t=r();return _(t.onSearch())}),a()()()}if(n&2){let e=r();s(4),d("placeholder",e.searchPlaceholder),x("ngModel",e.searchTerm)}}function J(n,l){if(n&1){let e=g();o(0,"input",23),y("ngModelChange",function(t){p(e);let c=r().$implicit,m=r();return S(m.filterValues[c.key],t)||(m.filterValues[c.key]=t),_(t)}),h("ngModelChange",function(){p(e);let t=r(2);return _(t.onFilterChange())}),a()}if(n&2){let e=r().$implicit,i=r();d("placeholder",e.placeholder||e.label),x("ngModel",i.filterValues[e.key])}}function K(n,l){if(n&1){let e=g();o(0,"app-searchable-select",24),h("selectionChange",function(t){p(e);let c=r().$implicit,m=r();return _(m.onFilterFieldChange(c.key,t))}),a()}if(n&2){let e=r().$implicit,i=r();d("options",e.options||E(3,G))("placeholder",e.placeholder||e.label)("value",i.filterValues[e.key]||"")}}function Q(n,l){if(n&1){let e=g();o(0,"input",25),y("ngModelChange",function(t){p(e);let c=r().$implicit,m=r();return S(m.filterValues[c.key],t)||(m.filterValues[c.key]=t),_(t)}),h("ngModelChange",function(){p(e);let t=r(2);return _(t.onFilterChange())}),a()}if(n&2){let e=r().$implicit,i=r();x("ngModel",i.filterValues[e.key])}}function R(n,l){if(n&1){let e=g();o(0,"select",26),y("ngModelChange",function(t){p(e);let c=r().$implicit,m=r();return S(m.filterValues[c.key],t)||(m.filterValues[c.key]=t),_(t)}),h("ngModelChange",function(){p(e);let t=r(2);return _(t.onFilterChange())}),o(1,"option",27),u(2),a(),o(3,"option",28),u(4,"Yes"),a(),o(5,"option",29),u(6,"No"),a()()}if(n&2){let e=r().$implicit,i=r();x("ngModel",i.filterValues[e.key]),s(2),M(e.placeholder||"All")}}function U(n,l){if(n&1&&(o(0,"div",17),V(1,18),f(2,J,1,2,"input",19)(3,K,1,4,"app-searchable-select",20)(4,Q,1,1,"input",21)(5,R,7,2,"select",22),T(),a()),n&2){let e=l.$implicit;s(),d("ngSwitch",e.type),s(),d("ngSwitchCase","text"),s(),d("ngSwitchCase","select"),s(),d("ngSwitchCase","date"),s(),d("ngSwitchCase","boolean")}}function X(n,l){if(n&1){let e=g();o(0,"div",30)(1,"button",31),h("click",function(){p(e);let t=r();return _(t.onAdd())}),C(2,"i",32),u(3),a()()}if(n&2){let e=r();s(3),w(" ",e.addButtonText," ")}}function Z(n,l){if(n&1){let e=g();o(0,"span",37),u(1),o(2,"button",38),h("click",function(){p(e);let t=r(2);return _(t.clearSearchTerm())}),a()()}if(n&2){let e=r(2);s(),w(" Search: ",e.searchTerm," ")}}function ee(n,l){if(n&1){let e=g();o(0,"span",39),u(1),o(2,"button",38),h("click",function(){let t=p(e).$implicit,c=r(2);return _(c.clearFilter(t.key))}),a()()}if(n&2){let e=l.$implicit;d("title",e.label+": "+e.value),s(),k(" ",e.label,": ",e.displayValue," ")}}function te(n,l){if(n&1&&(o(0,"div",33)(1,"small",34),u(2,"Active filters:"),a(),f(3,Z,3,1,"span",35)(4,ee,3,3,"span",36),a()),n&2){let e=r();s(3),d("ngIf",e.searchTerm),s(),d("ngForOf",e.getActiveFilterLabels())}}var q=class n{showSearch=!0;searchPlaceholder="Search...";filterFields=[];showAddButton=!1;addButtonText="Add New";search=new v;filterChange=new v;add=new v;searchTerm="";filterValues={};searchTimeout;onSearchChange(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.onSearch()},300)}onSearch(){this.search.emit(this.searchTerm),this.emitFilterChange()}onFilterChange(){this.emitFilterChange()}onFilterFieldChange(l,e){this.filterValues[l]=e,this.onFilterChange()}onClearFilters(){this.searchTerm="",this.filterValues={},this.emitFilterChange()}onAdd(){this.add.emit()}clearSearchTerm(){this.searchTerm="",this.onSearch()}clearFilter(l){delete this.filterValues[l],this.onFilterChange()}hasActiveFilters(){return this.searchTerm.length>0||Object.keys(this.filterValues).some(l=>this.filterValues[l])}getActiveFilterLabels(){let l=[];for(let e of this.filterFields){let i=this.filterValues[e.key];if(i!=null&&i!==""){let t=i;if(e.type==="select"&&e.options){let c=e.options.find(m=>m.value===i);t=c?c.label:i}e.type==="boolean"&&(t=i==="true"?"Yes":"No"),l.push({key:e.key,label:e.label,value:i,displayValue:t})}}return l}emitFilterChange(){let l=F({search:this.searchTerm||void 0},this.filterValues);Object.keys(l).forEach(e=>{(l[e]===""||l[e]===null||l[e]===void 0)&&delete l[e]}),this.filterChange.emit(l)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["app-search-filter"]],inputs:{showSearch:"showSearch",searchPlaceholder:"searchPlaceholder",filterFields:"filterFields",showAddButton:"showAddButton",addButtonText:"addButtonText"},outputs:{search:"search",filterChange:"filterChange",add:"add"},decls:14,vars:5,consts:[[1,"search-filter"],[1,"row","g-3"],["class","col-md-4",4,"ngIf"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-auto"],[1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-search","me-1"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-times","me-1"],["class","col-md-auto ms-auto",4,"ngIf"],["class","active-filters mt-3",4,"ngIf"],[1,"col-md-4"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","placeholder","ngModel"],[1,"col-md-2"],[3,"ngSwitch"],["type","text","class","form-control",3,"placeholder","ngModel","ngModelChange",4,"ngSwitchCase"],[3,"options","placeholder","value","selectionChange",4,"ngSwitchCase"],["type","date","class","form-control",3,"ngModel","ngModelChange",4,"ngSwitchCase"],["class","form-select",3,"ngModel","ngModelChange",4,"ngSwitchCase"],["type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[3,"selectionChange","options","placeholder","value"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"],[1,"col-md-auto","ms-auto"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-plus","me-1"],[1,"active-filters","mt-3"],[1,"text-muted","me-2"],["class","badge bg-primary me-1",4,"ngIf"],["class","badge bg-primary me-1",3,"title",4,"ngFor","ngForOf"],[1,"badge","bg-primary","me-1"],["type","button",1,"btn-close","btn-close-white","ms-1",3,"click"],[1,"badge","bg-primary","me-1",3,"title"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),f(2,H,5,2,"div",2)(3,U,6,5,"div",3),o(4,"div",4)(5,"div",5)(6,"button",6),h("click",function(){return i.onSearch()}),C(7,"i",7),u(8," Search "),a(),o(9,"button",8),h("click",function(){return i.onClearFilters()}),C(10,"i",9),u(11," Clear "),a()()(),f(12,X,4,1,"div",10),a(),f(13,te,5,2,"div",11),a()),e&2&&(s(2),d("ngIf",i.showSearch),s(),d("ngForOf",i.filterFields),s(6),d("disabled",!i.hasActiveFilters()),s(3),d("ngIf",i.showAddButton),s(),d("ngIf",i.hasActiveFilters()))},dependencies:[N,A,O,I,P,z,$,j,B,D,W,L,Y],styles:[".search-filter[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:.375rem;padding:1rem;margin-bottom:1rem}.active-filters[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75em}.btn-close[_ngcontent-%COMP%]{font-size:.6em;padding:0;margin-left:.25rem}.input-group-text[_ngcontent-%COMP%]{background-color:#e9ecef;border-color:#ced4da}"]})};export{q as a};
