import{a as q}from"./chunk-WJ4DXXIQ.js";import{a as F}from"./chunk-VSQPZA2Q.js";import{a as z}from"./chunk-4AU4XR4J.js";import{a as W}from"./chunk-FOHY6BYJ.js";import{a as $}from"./chunk-NGEOUUU5.js";import{a as N}from"./chunk-KREF7F7A.js";import{a as T}from"./chunk-LPMX3N5X.js";import{a as C}from"./chunk-LDWMK676.js";import{a as R}from"./chunk-IE5XUEO5.js";import{a as V}from"./chunk-JNFDDMIM.js";import"./chunk-ZURD34HZ.js";import{a as B}from"./chunk-GEGVYT7O.js";import"./chunk-A6EM5NV6.js";import{A as x,Cb as D,Da as w,E as h,Fa as P,Fb as A,Ga as c,Gb as k,Ha as b,Ia as f,L as n,Lb as E,Q as M,Va as I,aa as v,ba as p,fb as g,ga as s,ha as a,ia as r,ja as m,qa as O,sa as S,ua as d,y as u,z as y}from"./chunk-5OFYUWMA.js";import{e as _}from"./chunk-YMDWBF3A.js";var U=()=>["/settings/overtime"];function j(o,e){if(o&1&&(a(0,"div",2),m(1,"app-loading-spinner",5),r()),o&2){let t=d();n(),s("message",t.i18n.t("common.loading"))("variant","primary")("centered",!0)}}function G(o,e){if(o&1&&(a(0,"div",3),m(1,"i",6),c(2),r()),o&2){let t=d();n(2),f(" ",t.error()," ")}}function Y(o,e){o&1&&m(0,"span",33)}function J(o,e){if(o&1&&m(0,"i",35),o&2){let t,l=d(4);P((t=l.overtimeConfig())!=null&&t.isActive?"fa-pause":"fa-check"),w("me-2",!0)}}function K(o,e){if(o&1){let t=O();a(0,"button",32),S("click",function(){y(t);let i=d(3);return x(i.toggleStatus())}),v(1,Y,1,0,"span",33)(2,J,1,4,"i",34),c(3),r()}if(o&2){let t,l,i=d(3);P((t=i.overtimeConfig())!=null&&t.isActive?"btn-warning":"btn-success"),s("disabled",i.processing()),n(),p(i.processing()?1:2),n(2),f(" ",(l=i.overtimeConfig())!=null&&l.isActive?i.i18n.t("common.deactivate"):i.i18n.t("common.activate")," ")}}function Q(o,e){o&1&&m(0,"span",33)}function X(o,e){o&1&&m(0,"i",37)}function Z(o,e){if(o&1){let t=O();a(0,"button",36),S("click",function(){y(t);let i=d(3);return x(i.deleteOvertimeConfiguration())}),v(1,Q,1,0,"span",33)(2,X,1,0,"i",37),c(3),r()}if(o&2){let t=d(3);s("disabled",t.processing()),n(),p(t.processing()?1:2),n(2),f(" ",t.i18n.t("common.delete")," ")}}function ee(o,e){if(o&1&&(a(0,"app-section-card",17)(1,"div",29),v(2,K,4,5,"button",30),v(3,Z,4,3,"button",31),r()()),o&2){let t=d(2);s("title",t.i18n.t("common.actions")),n(2),p(t.canToggleStatus()?2:-1),n(),p(t.canDelete()?3:-1)}}function te(o,e){if(o&1&&(a(0,"div",4)(1,"div",7)(2,"app-section-card",8),m(3,"app-definition-list",9),r(),a(4,"app-section-card",10)(5,"div",11)(6,"div",12),m(7,"app-definition-list",9),r(),a(8,"div",12),m(9,"app-definition-list",9),r()()(),a(10,"app-section-card",13),m(11,"app-definition-list",9),r(),a(12,"app-section-card",14),m(13,"app-definition-list",9),r(),a(14,"app-section-card",15),m(15,"app-definition-list",9),r()(),a(16,"div",16),v(17,ee,4,3,"app-section-card",17),a(18,"app-section-card",18)(19,"div",19)(20,"div",20)(21,"div",21),c(22),r(),a(23,"div",22),m(24,"app-status-badge",23),r()(),a(25,"div",20)(26,"div",21),c(27),r(),a(28,"div",22),m(29,"app-status-badge",23),r()(),a(30,"div",20)(31,"div",21),c(32),r(),a(33,"div",24),c(34),r()(),a(35,"div",20)(36,"div",21),c(37),r(),a(38,"div",24),c(39),r()(),a(40,"div",20)(41,"div",21),c(42),r(),a(43,"div",22),m(44,"app-status-badge",23),r()()()(),a(45,"app-section-card",25)(46,"div",26)(47,"a",27),m(48,"i",28),c(49),r()()()()()),o&2){let t,l,i=d();n(2),s("title",i.i18n.t("settings.overtime.configurationInfo")),n(),s("items",i.basicInfoItems())("labelWidth","4")("valueWidth","8"),n(),s("title",i.i18n.t("settings.overtime.calculationSettings")),n(3),s("items",i.overtimeSettingsLeftItems())("labelWidth","7")("valueWidth","5"),n(2),s("items",i.overtimeSettingsRightItems())("labelWidth","7")("valueWidth","5"),n(),s("title",i.i18n.t("settings.overtime.overtimeRates")),n(),s("items",i.overtimeRatesItems())("labelWidth","4")("valueWidth","8"),n(),s("title",i.i18n.t("settings.overtime.additionalSettings")),n(),s("items",i.policySettingsItems())("labelWidth","5")("valueWidth","7"),n(),s("title",i.i18n.t("common.audit_information")),n(),s("items",i.auditItems())("labelWidth","3")("valueWidth","9"),n(2),p(i.hasActiveActions()?17:-1),n(),s("title",i.i18n.t("settings.overtime.configuration")),n(4),b(i.i18n.t("settings.overtime.preShift")),n(2),s("status",i.preShiftOvertimeBadge().label)("variant",i.preShiftOvertimeBadge().variant),n(3),b(i.i18n.t("settings.overtime.postShift")),n(2),s("status",i.postShiftOvertimeBadge().label)("variant",i.postShiftOvertimeBadge().variant),n(3),b(i.i18n.t("settings.overtime.normalDay")),n(2),f("",(t=i.overtimeConfig())==null?null:t.normalDayRate,"x"),n(3),b(i.i18n.t("settings.overtime.holiday")),n(2),f("",(l=i.overtimeConfig())==null?null:l.publicHolidayRate,"x"),n(3),b(i.i18n.t("settings.overtime.requiresApproval")),n(2),s("status",i.requiresApprovalBadge().label)("variant",i.requiresApprovalBadge().variant),n(),s("title",i.i18n.t("common.navigation")),n(2),s("routerLink",I(41,U)),n(2),f(" ",i.i18n.t("settings.overtime.title")," ")}}var H=class o{i18n=u(B);router=u(A);route=u(D);overtimeConfigurationsService=u(q);notificationService=u(V);confirmationService=u(N);permissionService=u(T);loading=h(!1);processing=h(!1);overtimeConfig=h(null);error=h(null);basicInfoItems=g(()=>{let e=this.overtimeConfig();return e?[{label:this.i18n.t("fields.status"),value:e.isActive?this.i18n.t("common.active"):this.i18n.t("common.inactive"),type:"badge",badgeVariant:e.isActive?"success":"secondary"},{label:this.i18n.t("settings.overtime.effectiveFrom"),value:e.effectiveFromDate,type:"date"},{label:this.i18n.t("settings.overtime.effectiveTo"),value:e.effectiveToDate||this.i18n.t("settings.overtime.indefinite")}]:[]});overtimeSettingsLeftItems=g(()=>{let e=this.overtimeConfig();return e?[{label:this.i18n.t("settings.overtime.enablePreShift"),value:e.enablePreShiftOvertime?this.i18n.t("common.enabled"):this.i18n.t("common.disabled"),type:"badge",badgeVariant:e.enablePreShiftOvertime?"success":"secondary"},{label:this.i18n.t("settings.overtime.enablePostShift"),value:e.enablePostShiftOvertime?this.i18n.t("common.enabled"):this.i18n.t("common.disabled"),type:"badge",badgeVariant:e.enablePostShiftOvertime?"success":"secondary"},{label:this.i18n.t("settings.overtime.maxPreShiftHours"),value:`${e.maxPreShiftOvertimeHours} ${this.i18n.t("common.hours")}`},{label:this.i18n.t("settings.overtime.maxPostShiftHours"),value:`${e.maxPostShiftOvertimeHours} ${this.i18n.t("common.hours")}`}]:[]});overtimeSettingsRightItems=g(()=>{let e=this.overtimeConfig();return e?[{label:this.i18n.t("settings.overtime.minimumOvertimeMinutes"),value:`${e.minimumOvertimeMinutes} ${this.i18n.t("common.minutes")}`},{label:this.i18n.t("settings.overtime.gracePeriodMinutes"),value:`${e.overtimeGracePeriodMinutes} ${this.i18n.t("common.minutes")}`},{label:this.i18n.t("settings.overtime.roundingIntervalMinutes"),value:`${e.roundingIntervalMinutes} ${this.i18n.t("common.minutes")}`}]:[]});overtimeRatesItems=g(()=>{let e=this.overtimeConfig();return e?[{label:this.i18n.t("settings.overtime.normalDayRate"),value:`${e.normalDayRate}x`},{label:this.i18n.t("settings.overtime.publicHolidayRate"),value:`${e.publicHolidayRate}x`},{label:this.i18n.t("settings.overtime.offDayRate"),value:`${e.offDayRate}x`}]:[]});policySettingsItems=g(()=>{let e=this.overtimeConfig();if(!e)return[];let t=[{label:this.i18n.t("settings.overtime.requireApproval"),value:e.requireApproval?this.i18n.t("common.yes"):this.i18n.t("common.no"),type:"badge",badgeVariant:e.requireApproval?"warning":"success"},{label:this.i18n.t("settings.overtime.considerFlexibleTime"),value:e.considerFlexibleTime?this.i18n.t("common.yes"):this.i18n.t("common.no"),type:"badge",badgeVariant:e.considerFlexibleTime?"info":"secondary"},{label:this.i18n.t("settings.overtime.weekendAsOffDay"),value:e.weekendAsOffDay?this.i18n.t("common.yes"):this.i18n.t("common.no"),type:"badge",badgeVariant:e.weekendAsOffDay?"info":"secondary"}];return e.policyNotes&&t.push({label:this.i18n.t("settings.overtime.policyNotes"),value:e.policyNotes}),t});auditItems=g(()=>{let e=this.overtimeConfig();if(!e)return[];let t=[{label:this.i18n.t("fields.createdAt"),value:e.createdAtUtc,type:"datetime"},{label:this.i18n.t("fields.createdBy"),value:e.createdBy}];return e.updatedAtUtc&&e.updatedBy&&t.push({label:this.i18n.t("fields.updatedAt"),value:e.updatedAtUtc,type:"datetime"},{label:this.i18n.t("fields.updatedBy"),value:e.updatedBy}),t});ngOnInit(){this.loadOvertimeConfigurationDetails()}loadOvertimeConfigurationDetails(){let e=this.route.snapshot.paramMap.get("id");if(!e){this.router.navigate(["/settings/overtime"]);return}this.loading.set(!0),this.error.set(null),this.overtimeConfigurationsService.getOvertimeConfigurationById(+e).subscribe({next:t=>{this.overtimeConfig.set(t),this.loading.set(!1)},error:t=>{console.error("Failed to load overtime configuration details:",t),this.error.set(this.i18n.t("common.errors.load_failed")),this.loading.set(!1)}})}toggleStatus(){return _(this,null,function*(){if(!this.overtimeConfig())return;let e=this.overtimeConfig(),t=!e.isActive;(yield this.confirmationService.confirm({title:t?this.i18n.t("settings.overtime.activatePolicy"):this.i18n.t("settings.overtime.deactivatePolicy"),message:t?this.i18n.t("settings.overtime.activatePolicyConfirmation"):this.i18n.t("settings.overtime.deactivatePolicyConfirmation"),confirmText:t?this.i18n.t("common.activate"):this.i18n.t("common.deactivate"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:t?"btn-success":"btn-warning",icon:t?"fa-check":"fa-pause",iconClass:t?"text-success":"text-warning"})).confirmed&&(this.processing.set(!0),(t?this.overtimeConfigurationsService.activateOvertimeConfiguration(e.id):this.overtimeConfigurationsService.deactivateOvertimeConfiguration(e.id)).subscribe({next:()=>{this.notificationService.success(t?this.i18n.t("settings.overtime.policyActivatedSuccessfully"):this.i18n.t("settings.overtime.policyDeactivatedSuccessfully")),this.loadOvertimeConfigurationDetails(),this.processing.set(!1)},error:L=>{console.error("Failed to toggle overtime configuration status:",L),this.notificationService.error(this.i18n.t("common.errors.operation_failed")),this.processing.set(!1)}}))})}deleteOvertimeConfiguration(){return _(this,null,function*(){if(!this.overtimeConfig())return;(yield this.confirmationService.confirm({title:this.i18n.t("settings.overtime.deletePolicy"),message:this.i18n.t("settings.overtime.deletePolicyConfirmation"),confirmText:this.i18n.t("common.delete"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-danger",icon:"fa-trash",iconClass:"text-danger"})).confirmed&&(this.processing.set(!0),this.overtimeConfigurationsService.deleteOvertimeConfiguration(this.overtimeConfig().id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("settings.overtime.policyDeletedSuccessfully")),this.router.navigate(["/settings/overtime"])},error:t=>{console.error("Failed to delete overtime configuration:",t),this.notificationService.error(this.i18n.t("common.errors.delete_failed")),this.processing.set(!1)}}))})}canEdit(){return this.permissionService.has(`overtime-config.${C.UPDATE}`)}canToggleStatus(){return this.permissionService.has(`overtime-config.${C.UPDATE}`)}canDelete(){return this.permissionService.has(`overtime-config.${C.DELETE}`)}hasActiveActions(){return this.canEdit()||this.canToggleStatus()||this.canDelete()}getConfigurationDisplayName(){let e=this.overtimeConfig();return e?`${this.i18n.t("settings.overtime.configuration")} #${e.id}`:""}preShiftOvertimeBadge=g(()=>{let e=this.overtimeConfig();return e?{label:e.enablePreShiftOvertime?this.i18n.t("common.enabled"):this.i18n.t("common.disabled"),variant:e.enablePreShiftOvertime?"success":"secondary"}:{label:"",variant:"secondary"}});postShiftOvertimeBadge=g(()=>{let e=this.overtimeConfig();return e?{label:e.enablePostShiftOvertime?this.i18n.t("common.enabled"):this.i18n.t("common.disabled"),variant:e.enablePostShiftOvertime?"success":"secondary"}:{label:"",variant:"secondary"}});requiresApprovalBadge=g(()=>{let e=this.overtimeConfig();return e?{label:e.requireApproval?this.i18n.t("common.yes"):this.i18n.t("common.no"),variant:e.requireApproval?"warning":"success"}:{label:"",variant:"success"}});static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["app-view-overtime-configuration"]],decls:5,vars:6,consts:[[1,"app-view-page"],["mode","view","moduleName","settings","moduleRoute","settings/overtime",3,"title","entityId","loading"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],[1,"app-desktop-sidebar"],[3,"message","variant","centered"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"app-main-content"],["icon","fas fa-info-circle","headerClass","bg-light",1,"mb-4",3,"title"],[3,"items","labelWidth","valueWidth"],["icon","fas fa-clock","headerClass","bg-light",1,"mb-4",3,"title"],[1,"row"],[1,"col-md-6"],["icon","fas fa-percentage","headerClass","bg-light",1,"mb-4",3,"title"],["icon","fas fa-cogs","headerClass","bg-light",1,"mb-4",3,"title"],["icon","fas fa-history","headerClass","bg-light",1,"mb-4",3,"title"],[1,"app-sidebar-content"],["icon","fas fa-cogs","headerClass","bg-light",1,"mb-3",3,"title"],["icon","fas fa-chart-line","headerClass","bg-light",1,"mb-3",3,"title"],[1,"config-summary"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[3,"status","variant"],[1,"summary-value","rate-value"],["icon","fas fa-arrow-left","headerClass","bg-light","bodyClass","p-0",3,"title"],[1,"list-group","list-group-flush"],[1,"list-group-item","list-group-item-action",3,"routerLink"],[1,"fas","fa-list","me-2"],[1,"d-grid","gap-2"],["type","button",1,"btn",3,"class","disabled"],["type","button",1,"btn","btn-outline-danger",3,"disabled"],["type","button",1,"btn",3,"click","disabled"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas",3,"class","me-2"],[1,"fas"],["type","button",1,"btn","btn-outline-danger",3,"click","disabled"],[1,"fas","fa-trash","me-2"]],template:function(t,l){if(t&1&&(a(0,"div",0),m(1,"app-form-header",1),v(2,j,2,3,"div",2),v(3,G,3,1,"div",3),v(4,te,50,42,"div",4),r()),t&2){let i;n(),s("title",l.i18n.t("settings.overtime.configurationInfo"))("entityId",(i=l.overtimeConfig())==null?null:i.id)("loading",l.loading()),n(),p(l.loading()?2:-1),n(),p(l.error()?3:-1),n(),p(l.overtimeConfig()&&!l.loading()?4:-1)}},dependencies:[E,k,R,z,F,W,$],styles:[".detail-card[_ngcontent-%COMP%]{border:1px solid var(--bs-border-color);border-radius:.5rem;box-shadow:0 .125rem .25rem #00000013}.detail-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--bs-light);border-bottom:1px solid var(--bs-border-color);font-weight:600}.detail-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.25rem}.actions-card[_ngcontent-%COMP%]{position:sticky;top:1rem}.btn-group-vertical[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:.5rem}.btn-group-vertical[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-bottom:0}.status-badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.25rem .5rem}.config-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem;background-color:var(--bs-gray-50);border-radius:.25rem;border-left:3px solid var(--bs-primary)}.summary-label[_ngcontent-%COMP%]{font-weight:500;color:var(--bs-gray-700);font-size:.875rem}.summary-value[_ngcontent-%COMP%]{text-align:right}.rate-value[_ngcontent-%COMP%]{font-weight:600;color:var(--bs-primary);font-size:1rem;background-color:var(--bs-primary-bg-subtle);padding:.25rem .5rem;border-radius:.25rem}.overtime-settings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1.5rem}.setting-item[_ngcontent-%COMP%]{background:var(--bs-light);border-radius:.5rem;padding:1rem;border-left:4px solid var(--bs-primary);transition:all .2s ease}.setting-item[_ngcontent-%COMP%]:hover{background:var(--bs-gray-100);transform:translateY(-1px);box-shadow:0 .25rem .5rem #0000001a}.setting-label[_ngcontent-%COMP%]{font-weight:600;color:var(--bs-gray-800);font-size:.9rem;margin-bottom:.5rem;display:block}.setting-value[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--bs-primary);font-weight:500}.setting-unit[_ngcontent-%COMP%]{font-size:.875rem;color:var(--bs-gray-600);margin-left:.25rem}.rate-display[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--bs-success-bg-subtle) 0%,var(--bs-info-bg-subtle) 100%);border:1px solid var(--bs-success-border-subtle);border-radius:.5rem;padding:1rem;text-align:center}.rate-multiplier[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--bs-success);display:block}.rate-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--bs-gray-600);margin-top:.25rem}.policy-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.375rem .75rem;border-radius:1rem;font-size:.875rem;font-weight:500;border:1px solid}.policy-badge.enabled[_ngcontent-%COMP%]{background-color:var(--bs-success-bg-subtle);color:var(--bs-success-text-emphasis);border-color:var(--bs-success-border-subtle)}.policy-badge.disabled[_ngcontent-%COMP%]{background-color:var(--bs-secondary-bg-subtle);color:var(--bs-secondary-text-emphasis);border-color:var(--bs-secondary-border-subtle)}.policy-badge.requires-approval[_ngcontent-%COMP%]{background-color:var(--bs-warning-bg-subtle);color:var(--bs-warning-text-emphasis);border-color:var(--bs-warning-border-subtle)}.time-value[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;gap:.25rem}.time-number[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--bs-info)}.time-unit[_ngcontent-%COMP%]{font-size:.875rem;color:var(--bs-gray-600)}.status-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem;border-radius:.5rem;font-weight:500}.status-indicator.active[_ngcontent-%COMP%]{background-color:var(--bs-success-bg-subtle);color:var(--bs-success-text-emphasis);border:1px solid var(--bs-success-border-subtle)}.status-indicator.inactive[_ngcontent-%COMP%]{background-color:var(--bs-secondary-bg-subtle);color:var(--bs-secondary-text-emphasis);border:1px solid var(--bs-secondary-border-subtle)}.loading-container[_ngcontent-%COMP%]{min-height:200px;display:flex;align-items:center;justify-content:center;flex-direction:column}@media (max-width: 768px){.app-desktop-sidebar[_ngcontent-%COMP%]{flex-direction:column}.app-sidebar-content[_ngcontent-%COMP%]{margin-top:1rem}.actions-card[_ngcontent-%COMP%]{position:static}.d-grid.gap-2[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;gap:.5rem}.overtime-settings-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}.config-summary[_ngcontent-%COMP%]{gap:.5rem}.summary-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;text-align:center;gap:.25rem}.summary-value[_ngcontent-%COMP%]{text-align:center}.rate-display[_ngcontent-%COMP%]{padding:.75rem}.rate-multiplier[_ngcontent-%COMP%]{font-size:1.5rem}.setting-item[_ngcontent-%COMP%]{padding:.75rem}}"]})};export{H as ViewOvertimeConfigurationComponent};
