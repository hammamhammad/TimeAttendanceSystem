{
  "version": 3,
  "sources": ["src/app/core/i18n/i18n.service.ts"],
  "sourcesContent": ["import { Injectable, signal, effect } from '@angular/core';\r\n\r\nexport type Locale = 'en' | 'ar';\r\n\r\ninterface Translations {\r\n  [key: string]: any;\r\n}\r\n\r\n/**\r\n * Angular internationalization (i18n) service providing comprehensive localization support for multi-language applications.\r\n * Implements reactive localization management with Angular Signals, dynamic translation loading, and RTL support\r\n * for seamless English-Arabic bilingual user experience with cultural adaptation and accessibility features.\r\n * \r\n * @remarks\r\n * Internationalization Features:\r\n * - Reactive localization management using Angular Signals for immediate UI updates\r\n * - Dynamic translation file loading with lazy loading optimization for performance\r\n * - Bi-directional text support with automatic RTL/LTR switching for Arabic/English\r\n * - Document-level language and direction management for accessibility compliance\r\n * - Nested translation key support with dot notation for hierarchical organization\r\n * - Fallback mechanism ensuring graceful degradation when translations are missing\r\n * \r\n * Supported Languages:\r\n * - English (en): Primary language with left-to-right (LTR) text direction\r\n * - Arabic (ar): Secondary language with right-to-left (RTL) text direction and cultural formatting\r\n * - Extensible architecture supporting additional languages through configuration\r\n * - Language-specific formatting for dates, numbers, and cultural conventions\r\n * - Locale-aware content rendering with proper text direction and alignment\r\n * \r\n * Angular Integration:\r\n * - Angular Signals for reactive state management and automatic UI synchronization\r\n * - Effect-based translation loading ensuring translations are available when needed\r\n * - Injectable service pattern with root-level dependency injection for global access\r\n * - Component integration through service injection and translation pipe usage\r\n * - Route-level localization support with language parameter handling\r\n * - Form validation integration with localized error messages and field labels\r\n * \r\n * Performance Optimization:\r\n * - Lazy loading of translation files reducing initial bundle size\r\n * - Dynamic import statements for code splitting and performance optimization\r\n * - Memory-efficient translation caching with automatic cleanup mechanisms\r\n * - Signal-based reactivity minimizing unnecessary re-renders and computations\r\n * - Efficient nested property access with optimized traversal algorithms\r\n * - Translation key caching for frequently accessed strings\r\n * \r\n * Accessibility and User Experience:\r\n * - Document language attribute management for screen reader compatibility\r\n * - Text direction management for proper RTL/LTR rendering and layout\r\n * - Cultural formatting integration for dates, numbers, and currency display\r\n * - Keyboard navigation support with direction-aware focus management\r\n * - High contrast and accessibility-compliant translation key structures\r\n * - User preference persistence for consistent cross-session experience\r\n * \r\n * Error Handling and Resilience:\r\n * - Graceful fallback to translation keys when translations are missing\r\n * - Error logging and monitoring for translation loading failures\r\n * - Default language fallback ensuring application functionality under all conditions\r\n * - Translation validation and integrity checking for production deployments\r\n * - Hot-reloading support for development environments with translation updates\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class I18nService {\r\n  private translations = signal<Translations>({});\r\n  public locale = signal<Locale>('en');\r\n\r\n  /**\r\n   * Initializes the I18nService with reactive locale management and automatic translation loading.\r\n   * Sets up Angular effects for automatic translation loading and document language updates.\r\n   */\r\n  constructor() {\r\n    effect(() => {\r\n      const currentLocale = this.locale();\r\n      this.updateDocumentLanguage(currentLocale);\r\n      this.loadTranslations(currentLocale);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Updates the document's language and text direction attributes for accessibility and proper rendering.\r\n   * Configures HTML document elements to support screen readers and RTL/LTR text rendering.\r\n   * \r\n   * @param locale - The locale to apply to the document\r\n   */\r\n  private updateDocumentLanguage(locale: Locale): void {\r\n    document.documentElement.lang = locale;\r\n    document.documentElement.dir = locale === 'ar' ? 'rtl' : 'ltr';\r\n  }\r\n\r\n  /**\r\n   * Dynamically loads translation files for the specified locale with error handling.\r\n   * Implements lazy loading for performance optimization and graceful error handling.\r\n   * \r\n   * @param locale - The locale for which to load translations\r\n   */\r\n  private async loadTranslations(locale: Locale): Promise<void> {\r\n    try {\r\n      const translations = await import(`./translations/${locale}.json`);\r\n      this.translations.set(translations.default || translations);\r\n    } catch (error) {\r\n      console.warn(`Failed to load translations for locale: ${locale}`, error);\r\n      this.translations.set({});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the current application locale and triggers reactive translation updates.\r\n   * Automatically loads translations and updates document language attributes.\r\n   * \r\n   * @param locale - The locale to set as current\r\n   */\r\n  public setLocale(locale: Locale): void {\r\n    this.locale.set(locale);\r\n  }\r\n\r\n  /**\r\n   * Translates a key to the current locale's text with fallback to the key itself.\r\n   * Supports nested key notation with dot separation for hierarchical organization.\r\n   * Supports parameter interpolation using {{paramName}} syntax.\r\n   *\r\n   * @param key - The translation key to translate\r\n   * @param params - Optional parameters to interpolate into the translation\r\n   * @returns The translated text or the key itself if translation is not found\r\n   */\r\n  public t(key: string, params?: Record<string, any>): string {\r\n    const translations = this.translations();\r\n    let text = this.getNestedValue(translations, key) || key;\r\n\r\n    // Interpolate parameters if provided\r\n    if (params) {\r\n      Object.keys(params).forEach(paramKey => {\r\n        const regex = new RegExp(`\\\\{\\\\{\\\\s*${paramKey}\\\\s*\\\\}\\\\}`, 'g');\r\n        text = text.replace(regex, String(params[paramKey]));\r\n      });\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  /**\r\n   * Retrieves nested values from translation objects using dot notation path traversal.\r\n   * Safely navigates nested object structures with null/undefined checking.\r\n   * \r\n   * @param obj - The object to traverse\r\n   * @param path - The dot-separated path to the desired value\r\n   * @returns The nested value or undefined if not found\r\n   */\r\n  private getNestedValue(obj: any, path: string): string | undefined {\r\n    return path.split('.').reduce((current, key) => {\r\n      return current && current[key] !== undefined ? current[key] : undefined;\r\n    }, obj);\r\n  }\r\n\r\n  /**\r\n   * Gets the current application locale.\r\n   * \r\n   * @returns The currently active locale\r\n   */\r\n  public getCurrentLocale(): Locale {\r\n    return this.locale();\r\n  }\r\n\r\n  /**\r\n   * Determines if the current locale uses right-to-left (RTL) text direction.\r\n   * Used for layout and styling decisions in the user interface.\r\n   * \r\n   * @returns True if the current locale is RTL, false otherwise\r\n   */\r\n  public isRtl(): boolean {\r\n    return this.locale() === 'ar';\r\n  }\r\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AA+DM,IAAO,eAAP,MAAO,aAAW;EACd,eAAe,OAAqB,CAAA,GAAE,GAAA,YAAA,CAAA,EAAA,WAAA,eAAA,CAAA,IAAA,CAAA,CAAA;EACvC,SAAS,OAAe,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,SAAA,CAAA,IAAA,CAAA,CAAA;;;;;EAMnC,cAAA;AACE,WAAO,MAAK;AACV,YAAM,gBAAgB,KAAK,OAAM;AACjC,WAAK,uBAAuB,aAAa;AACzC,WAAK,iBAAiB,aAAa;IACrC,CAAC;EACH;;;;;;;EAQQ,uBAAuB,QAAc;AAC3C,aAAS,gBAAgB,OAAO;AAChC,aAAS,gBAAgB,MAAM,WAAW,OAAO,QAAQ;EAC3D;;;;;;;EAQc,iBAAiB,QAAc;;AAC3C,UAAI;AACF,cAAM,eAAe,MAAa,+CAAkB,MAAM;AAC1D,aAAK,aAAa,IAAI,aAAa,WAAW,YAAY;MAC5D,SAAS,OAAO;AACd,gBAAQ,KAAK,2CAA2C,MAAM,IAAI,KAAK;AACvE,aAAK,aAAa,IAAI,CAAA,CAAE;MAC1B;IACF;;;;;;;;EAQO,UAAU,QAAc;AAC7B,SAAK,OAAO,IAAI,MAAM;EACxB;;;;;;;;;;EAWO,EAAE,KAAa,QAA4B;AAChD,UAAM,eAAe,KAAK,aAAY;AACtC,QAAI,OAAO,KAAK,eAAe,cAAc,GAAG,KAAK;AAGrD,QAAI,QAAQ;AACV,aAAO,KAAK,MAAM,EAAE,QAAQ,cAAW;AACrC,cAAM,QAAQ,IAAI,OAAO,aAAa,QAAQ,cAAc,GAAG;AAC/D,eAAO,KAAK,QAAQ,OAAO,OAAO,OAAO,QAAQ,CAAC,CAAC;MACrD,CAAC;IACH;AAEA,WAAO;EACT;;;;;;;;;EAUQ,eAAe,KAAU,MAAY;AAC3C,WAAO,KAAK,MAAM,GAAG,EAAE,OAAO,CAAC,SAAS,QAAO;AAC7C,aAAO,WAAW,QAAQ,GAAG,MAAM,SAAY,QAAQ,GAAG,IAAI;IAChE,GAAG,GAAG;EACR;;;;;;EAOO,mBAAgB;AACrB,WAAO,KAAK,OAAM;EACpB;;;;;;;EAQO,QAAK;AACV,WAAO,KAAK,OAAM,MAAO;EAC3B;;AA5GsB;cAAX;mCAAA,cAAW;AAAA;cAAX,kFAAA,cAAW,SAAX,aAAW,WAAA,YAFV,OAAM,CAAA;AAEd,IAAO,cAAP;;sEAAO,aAAW,CAAA;UAHvB;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
