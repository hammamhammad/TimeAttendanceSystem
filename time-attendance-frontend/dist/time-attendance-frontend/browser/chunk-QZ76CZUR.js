import{a as D}from"./chunk-BDD5FQVU.js";import"./chunk-AVDFWZMN.js";import"./chunk-CARDG6TO.js";import{a as w}from"./chunk-KDISMZOF.js";import"./chunk-HF7V7ZC6.js";import{d as b,g as y,h as E,m as S}from"./chunk-O3U3HUCY.js";import{a as I}from"./chunk-77FC2LKR.js";import"./chunk-A6EM5NV6.js";import{$a as f,Eb as d,Fb as h,Gb as u,Ha as v,T as s,Y as g,Z as _,_a as c,eb as x,fa as l,fb as r,gb as o,hb as m,ob as C,qb as U,sb as n,wa as a}from"./chunk-IGEIB4M6.js";import"./chunk-YMDWBF3A.js";function N(i,t){if(i&1&&(r(0,"div",0)(1,"div",2)(2,"span",3),d(3),o()()()),i&2){let e=n();a(3),h(e.i18n.t("common.loading"))}}function k(i,t){if(i&1&&(r(0,"div",4)(1,"div",6),m(2,"i",7),d(3),o(),r(4,"div",8)(5,"button",9),m(6,"i",10),d(7),o()()()),i&2){let e=n(2);a(3),u(" ",e.i18n.t("users.system_admin_cannot_be_edited")," "),a(4),u(" ",e.i18n.t("common.back")," ")}}function R(i,t){if(i&1){let e=C();r(0,"app-user-form",11),U("userSaved",function(M){g(e);let T=n(2);return _(T.onUserSaved(M))}),o()}if(i&2){let e=n(2);x("user",e.user())("show",!0)}}function j(i,t){if(i&1&&c(0,k,8,2,"div",4)(1,R,1,2,"app-user-form",5),i&2){let e=n();f(e.isSystemAdmin(e.user())?0:1)}}function A(i,t){if(i&1&&(r(0,"div",1),m(1,"i",12),d(2),o()),i&2){let e=n();a(2),u(" ",e.error()||e.i18n.t("users.user_not_found")," ")}}var P=class i{route=s(b);router=s(y);usersService=s(w);i18n=s(I);user=l(null);loading=l(!0);error=l("");ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?this.loadUser(t):(this.error.set("Invalid user ID"),this.loading.set(!1))}isSystemAdmin(t){return t.username.toLowerCase()==="systemadmin"}loadUser(t){this.usersService.getUserById(+t).subscribe({next:e=>{this.user.set(e),this.loading.set(!1)},error:e=>{this.error.set(this.getErrorMessage(e)),this.loading.set(!1)}})}onUserSaved(t){this.router.navigate(["/users",t.id,"view"])}getErrorMessage(t){return t?.error?.error?t.error.error:this.i18n.t("errors.unknown")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-edit-user-page"]],decls:3,vars:1,consts:[[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"container-fluid"],[3,"user","show"],[1,"alert","alert-warning"],[1,"fa-solid","fa-shield-alt","me-2"],[1,"d-flex","justify-content-start"],["type","button","routerLink","/users",1,"btn","btn-outline-secondary"],[1,"fa-solid","fa-arrow-left","me-2"],[3,"userSaved","user","show"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,p){e&1&&c(0,N,4,1,"div",0)(1,j,2,1)(2,A,3,1,"div",1),e&2&&f(p.loading()?0:p.user()?1:2)},dependencies:[S,E,D],encapsulation:2})};export{P as EditUserPageComponent};
