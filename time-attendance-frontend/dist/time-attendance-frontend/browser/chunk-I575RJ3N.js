import{a as A}from"./chunk-MPEAAPTS.js";import{b as E}from"./chunk-RCBJJ7UY.js";import{h as O,m as I}from"./chunk-TWXUAMJ4.js";import{$a as x,Ab as u,Bb as c,Cb as l,Db as _,Ea as P,Ka as H,R as g,Ta as $,W as f,X as h,Xa as m,Ya as p,ab as v,bb as b,cb as r,db as s,eb as y,lb as F,nb as M,pb as a,ta as o,wc as w,yb as k}from"./chunk-JSQL33QG.js";var T=(i,t)=>t.label;function R(i,t){if(i&1&&(r(0,"p",2),c(1),s()),i&2){let e=a();o(),l(e.subtitle)}}function N(i,t){if(i&1&&(r(0,"a",10),c(1),s()),i&2){let e=a().$implicit;b("routerLink",e.route),o(),l(e.label)}}function L(i,t){if(i&1&&c(0),i&2){let e=a().$implicit;_(" ",e.label," ")}}function V(i,t){if(i&1&&(r(0,"li",9),m(1,N,2,2,"a",10)(2,L,1,1),s()),i&2){let e=t.$implicit,n=t.$index,d=t.$count;k("active",n===d-1),o(),p(e.route&&n!==d-1?1:2)}}function D(i,t){if(i&1&&(r(0,"div",7)(1,"div",11)(2,"span",12),c(3),s()(),r(4,"span",13),c(5),s()()),i&2){let e=a();o(3),l(e.t("common.loading")),o(2),l(e.t("common.loading"))}}function j(i,t){if(i&1){let e=F();r(0,"a",16),M("click",function(d){f(e);let C=a().$implicit,B=a(2);return h(B.onActionClick(C,d))}),y(1,"i"),c(2),s()}if(i&2){let e=a().$implicit,n=a(2);u(n.getButtonClass(e)),b("routerLink",e.route)("queryParams",e.routeParams),$("disabled",e.disabled||n.loading?!0:null),o(),u(e.icon+" me-2"),o(),_(" ",e.label," ")}}function q(i,t){if(i&1){let e=F();r(0,"button",17),M("click",function(){f(e);let d=a().$implicit,C=a(2);return h(C.onActionClick(d))}),y(1,"i"),c(2),s()}if(i&2){let e=a().$implicit,n=a(2);u(n.getButtonClass(e)),b("disabled",e.disabled||n.loading),o(),u(e.icon+" me-2"),o(),_(" ",e.label," ")}}function z(i,t){if(i&1&&m(0,j,3,8,"a",14)(1,q,3,6,"button",15),i&2){let e=t.$implicit;p(e.route?0:1)}}function G(i,t){if(i&1&&(r(0,"div",8),x(1,z,2,1,null,null,T),s()),i&2){let e=a();o(),v(e.allActions)}}var S=class i{i18n=g(E);permissionService=g(A);mode="create";title;subtitle;breadcrumbs=[];actions=[];loading=!1;entityId;moduleName;moduleRoute;actionClicked=new H;get t(){return this.i18n.t.bind(this.i18n)}get visibleActions(){return this.actions.filter(t=>t.permission?this.permissionService.has(t.permission):!0)}get defaultActions(){let t=[];if(this.mode==="edit"&&this.entityId&&t.push({label:this.t("common.view_details"),icon:"fa-solid fa-eye",type:"outline-info",route:`/${this.moduleRoute}/${this.entityId}/view`,action:()=>{}}),this.mode==="view"&&this.entityId){let e=this.getEditPermission();(!e||this.permissionService.has(e))&&t.push({label:this.t("common.edit"),icon:"fa-solid fa-edit",type:"primary",route:`/${this.moduleRoute}/${this.entityId}/edit`,action:()=>{}})}return t.push({label:this.t("common.back"),icon:"fa-solid fa-arrow-left",type:"outline-secondary",route:`/${this.moduleRoute}`,action:()=>{}}),t}get allActions(){return[...this.visibleActions,...this.defaultActions]}get defaultBreadcrumbs(){let t=[{label:this.t("dashboard.title"),route:"/dashboard"}];this.moduleName&&this.moduleRoute&&t.push({label:this.t(`${this.moduleName}.title`),route:`/${this.moduleRoute}`});let e="";switch(this.mode){case"create":e=this.t(`${this.moduleName}.create`);break;case"edit":e=this.t(`${this.moduleName}.edit`);break;case"view":e=this.t(`${this.moduleName}.view_details`);break}return e&&t.push({label:e}),t}get allBreadcrumbs(){return this.breadcrumbs.length>0?this.breadcrumbs:this.defaultBreadcrumbs}onActionClick(t,e){e&&e.preventDefault(),!(t.disabled||this.loading)&&(t.action&&t.action(),this.actionClicked.emit(t.label))}getButtonClass(t){let n=t.type?`btn-${t.type}`:"btn-secondary",d=t.disabled||this.loading?"disabled":"";return`btn ${n} ${d}`.trim()}getEditPermission(){return{employees:"employee.update",users:"user.update",roles:"role.update",branches:"branch.update",departments:"department.update",shifts:"shift.update","vacation-types":"vacationType.update","public-holidays":"publicHoliday.update","overtime-configurations":"settings.update","employee-vacations":"vacation.update","employee-excuses":"excuse.update"}[this.moduleRoute]||null}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-form-header"]],inputs:{mode:"mode",title:"title",subtitle:"subtitle",breadcrumbs:"breadcrumbs",actions:"actions",loading:"loading",entityId:"entityId",moduleName:"moduleName",moduleRoute:"moduleRoute"},outputs:{actionClicked:"actionClicked"},decls:13,vars:3,consts:[[1,"app-page-header"],[1,"app-page-header-content"],[1,"text-muted","mb-0"],["aria-label","breadcrumb",1,"app-breadcrumb-wrapper"],[1,"breadcrumb","app-breadcrumb"],[1,"breadcrumb-item",3,"active"],[1,"app-page-header-actions"],[1,"d-flex","align-items-center"],[1,"app-action-buttons"],[1,"breadcrumb-item"],[3,"routerLink"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"visually-hidden"],[1,"text-muted"],[3,"routerLink","queryParams","class"],["type","button",3,"class","disabled"],[3,"click","routerLink","queryParams"],["type","button",3,"click","disabled"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),c(4),s(),m(5,R,2,1,"p",2),r(6,"nav",3)(7,"ol",4),x(8,V,3,3,"li",5,T),s()()()(),r(10,"div",6),m(11,D,6,2,"div",7)(12,G,3,0,"div",8),s()()),e&2&&(o(4),l(n.title),o(),p(n.subtitle?5:-1),o(3),v(n.allBreadcrumbs),o(3),p(n.loading?11:12))},dependencies:[w,I,O],styles:["@media (max-width: 768px){.app-page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--app-spacing-md, 1rem)}.app-page-header-actions[_ngcontent-%COMP%]{justify-content:flex-start}.app-action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:var(--app-spacing-xs, .5rem)}.app-action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .app-action-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 576px){.app-page-header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.app-breadcrumb[_ngcontent-%COMP%]{font-size:.875rem}.app-action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .app-action-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem 1rem}}.app-page-header-actions[_ngcontent-%COMP%]   .spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.app-action-buttons[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%], .app-action-buttons[_ngcontent-%COMP%]   a[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.app-action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}"]})};export{S as a};
