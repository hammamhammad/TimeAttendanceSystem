import{a as N}from"./chunk-A3B6D6R2.js";import{a as E}from"./chunk-MCONEJ2T.js";import{a as I}from"./chunk-K7WTKFJQ.js";import{a as A}from"./chunk-NPDCAEA6.js";import"./chunk-QW24EDIR.js";import"./chunk-QXVLGI72.js";import"./chunk-HUSARQNL.js";import{a as V}from"./chunk-H5EPUHY6.js";import{a as T}from"./chunk-MUNQGSPX.js";import"./chunk-Y62N6K5S.js";import"./chunk-VRETN7JA.js";import"./chunk-GRQ6RO47.js";import{a as M}from"./chunk-UBCI4X5Q.js";import"./chunk-EYAJMHM7.js";import{a as S}from"./chunk-HHXRLUSQ.js";import"./chunk-S3CAEY4A.js";import{b as L}from"./chunk-TJ2U7DWW.js";import{g as D}from"./chunk-TWXUAMJ4.js";import{Bb as m,Db as c,Ea as R,Ia as y,Pb as q,R as a,Ub as w,W as s,X as l,Xa as W,Ya as v,bb as u,cb as f,da as g,db as k,eb as h,lb as b,nb as C,pb as n,ta as _,wc as x}from"./chunk-JSQL33QG.js";import"./chunk-DGAILPFQ.js";var $=()=>[];function P(i,e){if(i&1&&m(0),i&2){let t=n().$implicit;c(" ",t.employeeName||"N/A"," ")}}function j(i,e){if(i&1&&m(0),i&2){let t=n().$implicit,o=n();c(" ",o.formatDate(t.startDate)," ")}}function O(i,e){if(i&1&&m(0),i&2){let t=n().$implicit,o=n();c(" ",o.formatDate(t.endDate)," ")}}function B(i,e){if(i&1&&m(0),i&2){let t=n().$implicit;c(" ",t.workingDaysCount," ")}}function H(i,e){if(i&1&&h(0,"app-status-badge",5),i&2){let t=n().$implicit,o=n();u("status",o.getStatusVariant(t.status))("label",o.getStatusText(t.status))}}function U(i,e){if(i&1&&m(0),i&2){let t=n(),o=t.$implicit,r=t.column;c(" ",o[r.key]," ")}}function z(i,e){if(i&1&&W(0,P,1,1)(1,j,1,1)(2,O,1,1)(3,B,1,1)(4,H,1,2,"app-status-badge",5)(5,U,1,1),i&2){let t=e.column;v(t.key==="employeeName"?0:t.key==="startDate"?1:t.key==="endDate"?2:t.key==="workingDaysCount"?3:t.key==="status"?4:5)}}var F=class i{service=a(N);router=a(D);notification=a(S);confirmation=a(V);permissionService=a(T);i18n=a(L);requests=g([]);loading=g(!1);tableColumns=[{key:"employeeName",label:this.i18n.t("remoteWork.request.employee"),sortable:!0,width:"25%"},{key:"startDate",label:this.i18n.t("remoteWork.request.startDate"),sortable:!0,width:"15%"},{key:"endDate",label:this.i18n.t("remoteWork.request.endDate"),sortable:!0,width:"15%"},{key:"workingDaysCount",label:this.i18n.t("remoteWork.request.workingDays"),sortable:!0,width:"15%",align:"center"},{key:"status",label:this.i18n.t("common.status"),sortable:!0,width:"15%",align:"center"}];tableActions=[{key:"view",label:this.i18n.t("common.view"),icon:"fa-eye",color:"info"},{key:"edit",label:this.i18n.t("common.edit"),icon:"fa-edit",color:"primary"},{key:"cancel",label:this.i18n.t("remoteWork.request.cancel"),icon:"fa-ban",color:"warning"}];ngOnInit(){this.loadRequests()}loadRequests(){this.loading.set(!0),this.service.getAll().subscribe({next:e=>{this.requests.set(e),this.loading.set(!1)},error:e=>{this.notification.error(this.i18n.t("remoteWork.request.loadError")),this.loading.set(!1)}})}onView(e){this.router.navigate(["/remote-work",e.id,"view"])}onEdit(e){this.router.navigate(["/remote-work/edit",e.id])}onCancel(e){this.confirmation.confirm({title:this.i18n.t("remoteWork.request.cancelConfirm"),message:this.i18n.t("remoteWork.request.cancelMessage"),confirmText:this.i18n.t("common.yes"),cancelText:this.i18n.t("common.no")}).then(t=>{t.confirmed&&this.service.cancel(e.id).subscribe({next:()=>{this.notification.success(this.i18n.t("remoteWork.request.success.cancelled")),this.loadRequests()},error:()=>{this.notification.error(this.i18n.t("remoteWork.request.errors.cancel_failed"))}})})}onCreate(){this.router.navigate(["/remote-work/create"])}onSearchChange(e){console.log("Search term:",e)}onFiltersChange(e){console.log("Filters changed:",e)}onRefreshData(){this.loadRequests()}onActionClick(e){let{action:t,item:o}=e;switch(t){case"view":this.onView(o);break;case"edit":this.onEdit(o);break;case"cancel":this.onCancel(o);break}}getStatusText(e){return{0:this.i18n.t("remoteWork.status.pending"),1:this.i18n.t("remoteWork.status.approved"),2:this.i18n.t("remoteWork.status.rejected"),3:this.i18n.t("remoteWork.status.cancelled")}[e]||""}getStatusVariant(e){return{0:"warning",1:"success",2:"danger",3:"secondary"}[e]||"secondary"}formatDate(e){return e?new Date(e).toLocaleDateString():""}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=R({type:i,selectors:[["app-remote-work-list"]],decls:6,vars:9,consts:[["cellTemplate",""],[1,"app-list-page"],[3,"title"],["moduleName","remote-work-requests",3,"searchChange","filtersChange","add","refresh","refreshing"],[3,"actionClick","data","columns","actions","loading","emptyTitle","emptyMessage"],[3,"status","label"]],template:function(t,o){if(t&1){let r=b();f(0,"div",1),h(1,"app-page-header",2),f(2,"app-unified-filter",3),C("searchChange",function(p){return s(r),l(o.onSearchChange(p))})("filtersChange",function(p){return s(r),l(o.onFiltersChange(p))})("add",function(){return s(r),l(o.onCreate())})("refresh",function(){return s(r),l(o.onRefreshData())}),k(),f(3,"app-data-table",4),C("actionClick",function(p){return s(r),l(o.onActionClick(p))}),y(4,z,6,1,"ng-template",null,0,w),k()()}t&2&&(_(),u("title",o.i18n.t("remoteWork.request.title")),_(),u("refreshing",o.loading()),_(),u("data",o.requests()||q(8,$))("columns",o.tableColumns)("actions",o.tableActions)("loading",o.loading)("emptyTitle",o.i18n.t("remoteWork.request.noData"))("emptyMessage",o.i18n.t("remoteWork.request.noDataMessage")))},dependencies:[x,A,M,I,E],encapsulation:2})};export{F as RemoteWorkListComponent};
