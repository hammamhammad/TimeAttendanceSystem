import{a as c}from"./chunk-CQWUHIOF.js";import{L as o,Q as d,jc as u,kc as D}from"./chunk-LHYYCVNR.js";import{a as s,b as m}from"./chunk-DGAILPFQ.js";var b=class i{http=d(D);baseUrl=`${c.apiUrl}/api/v1/departments`;getDepartments(e={}){let t=new u;return e.branchId!==void 0&&(t=t.set("branchId",e.branchId.toString())),e.includeTree!==void 0&&(t=t.set("includeTree",e.includeTree.toString())),e.isActive!==void 0&&(t=t.set("isActive",e.isActive.toString())),e.search&&(t=t.set("search",e.search)),e.parentDepartmentId!==void 0&&(t=t.set("parentDepartmentId",e.parentDepartmentId.toString())),e.includeInactive!==void 0&&(t=t.set("includeInactive",e.includeInactive.toString())),this.http.get(this.baseUrl,{params:t})}getDepartmentTree(e){return this.getDepartments({branchId:e,includeTree:!0,isActive:!0})}getDepartmentById(e){return this.http.get(`${this.baseUrl}/${e}`)}createDepartment(e){return this.http.post(this.baseUrl,e)}updateDepartment(e,t){return this.http.put(`${this.baseUrl}/${e}`,t)}deleteDepartment(e){return this.http.delete(`${this.baseUrl}/${e}`)}flattenDepartmentTree(e){let t=[],r=(p,n=0)=>{for(let a of p)t.push(m(s({},a),{level:n})),a.children&&a.children.length>0&&r(a.children,n+1)};return r(e),t}buildDepartmentPath(e,t){let r=t.find(n=>n.id===e);return r?r.parentDepartmentId?`${this.buildDepartmentPath(r.parentDepartmentId,t)} > ${r.name}`:r.name:""}static \u0275fac=function(t){return new(t||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{b as a};
