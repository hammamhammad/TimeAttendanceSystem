import{a as F}from"./chunk-I2JMY6CH.js";import{a as z}from"./chunk-QIFMF2AZ.js";import{a as N}from"./chunk-NPDCAEA6.js";import{a as I}from"./chunk-H5EPUHY6.js";import"./chunk-VRETN7JA.js";import{a as A}from"./chunk-GRQ6RO47.js";import{a as L}from"./chunk-UBCI4X5Q.js";import{a as R}from"./chunk-EYAJMHM7.js";import{a as P}from"./chunk-HHXRLUSQ.js";import{b as E}from"./chunk-3VZ5QHEY.js";import{g as O}from"./chunk-TWXUAMJ4.js";import{Bb as d,Cb as k,Db as v,Ea as S,Ia as D,R as m,Ub as T,W as b,X as _,Xa as p,Ya as u,Yb as q,bb as l,cb as o,da as C,db as s,eb as g,lb as h,nb as f,pb as r,ta as a,wc as M,yb as w}from"./chunk-JSQL33QG.js";import{a as y,b as x,d as V}from"./chunk-DGAILPFQ.js";function U(n,e){if(n&1&&g(0,"app-loading-spinner",7),n&2){let t=r();l("message",t.i18n.t("common.loading"))}}function Y(n,e){if(n&1){let t=h();o(0,"div",8),g(1,"i",12),d(2),o(3,"button",13),f("click",function(){b(t);let c=r();return _(c.refresh())}),d(4),s()()}if(n&2){let t=r();a(2),v(" ",t.error()," "),a(2),v(" ",t.i18n.t("common.retry")," ")}}function j(n,e){if(n&1){let t=h();o(0,"app-empty-state",14),f("action",function(){b(t);let c=r();return _(c.createVacation())}),s()}if(n&2){let t=r();l("title",t.i18n.t("portal.no_vacations"))("message",t.i18n.t("portal.no_vacations_message"))("actionText",t.i18n.t("portal.request_vacation"))}}function $(n,e){if(n&1){let t=h();o(0,"app-table-actions",17),f("actionClick",function(c){b(t);let B=r(2);return _(B.onActionClick(c))}),s()}if(n&2){let t=e.$implicit,i=r(2);l("actions",i.actions)("item",t)}}function G(n,e){if(n&1&&(o(0,"div",10)(1,"div",15)(2,"app-data-table",16),D(3,$,1,2,"ng-template",null,0,T),s()()()),n&2){let t=r();a(2),l("data",t.tableData())("columns",t.columns)("loading",t.loading())("pageSize",10)}}function J(n,e){if(n&1&&(o(0,"div",11)(1,"div",15)(2,"div",18),g(3,"i",19),o(4,"div")(5,"h6",20),d(6),s(),o(7,"p",21),d(8),s()()()()()),n&2){let t=r();a(6),k(t.i18n.t("portal.vacation_info_title")),a(2),v(" ",t.i18n.t("portal.vacation_info_text")," ")}}var H=class n{vacationService=m(F);router=m(O);notificationService=m(P);confirmationService=m(I);i18n=m(E);vacations=C([]);loading=C(!1);error=C(null);columns=[{key:"id",label:"ID",sortable:!0,width:"80px"},{key:"vacationTypeName",label:"Type",sortable:!0},{key:"startDate",label:"Start Date",sortable:!0},{key:"endDate",label:"End Date",sortable:!0},{key:"totalDays",label:"Days",sortable:!0,width:"100px"},{key:"status",label:"Status",sortable:!0,renderHtml:!0},{key:"actions",label:"Actions",sortable:!1,width:"120px"}];actions=[{id:"view",label:"View",icon:"fa-eye",variant:"primary"},{id:"edit",label:"Edit",icon:"fa-edit",variant:"warning",visible:e=>!e.isApproved&&!e.isCompleted},{id:"delete",label:"Delete",icon:"fa-trash",variant:"danger",visible:e=>!e.isApproved&&!e.isCompleted}];tableData=q(()=>this.vacations().map(t=>x(y({},t),{startDate:this.formatDate(t.startDate),endDate:this.formatDate(t.endDate),status:this.getStatusBadgeHtml(t)})));ngOnInit(){this.loadVacations()}ngOnDestroy(){}loadVacations(){this.loading.set(!0),this.error.set(null),this.vacationService.getVacations().subscribe({next:e=>{this.vacations.set(e.items),this.loading.set(!1)},error:e=>{console.error("Failed to load vacations:",e),this.error.set("Failed to load vacation requests"),this.notificationService.error(this.i18n.t("portal.failed_to_load_vacations")),this.loading.set(!1)}})}refresh(){this.loadVacations()}createVacation(){this.router.navigate(["/portal/vacation-requests/new"])}onActionClick(e){let t=this.vacations().find(i=>i.id===e.item.id);if(t)switch(e.action.id){case"view":this.viewVacation(t);break;case"edit":this.editVacation(t);break;case"delete":this.deleteVacation(t);break}}viewVacation(e){this.router.navigate(["/portal/vacation-requests",e.id])}editVacation(e){this.router.navigate(["/portal/vacation-requests",e.id,"edit"])}deleteVacation(e){return V(this,null,function*(){(yield this.confirmationService.confirm({title:this.i18n.t("portal.delete_vacation"),message:this.i18n.t("portal.delete_vacation_confirm"),confirmText:this.i18n.t("common.yes_delete"),cancelText:this.i18n.t("common.no"),confirmButtonClass:"btn-danger",icon:"fa-trash",iconClass:"text-danger"})).confirmed&&this.vacationService.deleteVacation(e.id).subscribe({next:()=>{this.notificationService.success(this.i18n.t("portal.vacation_deleted_successfully")),this.loadVacations()},error:i=>{console.error("Failed to delete vacation:",i),this.notificationService.error(this.i18n.t("portal.failed_to_delete_vacation"))}})})}getStatusBadgeHtml(e){return e.isCurrentlyActive?'<span class="badge bg-info">Active</span>':e.isCompleted?'<span class="badge bg-secondary">Completed</span>':(e.isUpcoming,e.isApproved?'<span class="badge bg-success">Approved</span>':'<span class="badge bg-warning">Pending</span>')}formatDate(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-vacation-requests-list"]],decls:13,vars:12,consts:[["actionsTemplate",""],[3,"title"],["header-actions",""],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click","disabled"],[1,"fa-solid","fa-plus","me-1"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-sync-alt"],[3,"message"],["role","alert",1,"alert","alert-danger"],["icon","fa-solid fa-umbrella-beach",3,"title","message","actionText"],[1,"card"],[1,"card","mt-3"],[1,"fa-solid","fa-exclamation-triangle","me-2"],["type","button",1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],["icon","fa-solid fa-umbrella-beach",3,"action","title","message","actionText"],[1,"card-body"],[3,"data","columns","loading","pageSize"],[3,"actionClick","actions","item"],[1,"d-flex","align-items-start"],[1,"fa-solid","fa-info-circle","text-info","me-3","mt-1",2,"font-size","1.5rem"],[1,"mb-2"],[1,"text-muted","mb-0","small"]],template:function(t,i){t&1&&(o(0,"app-page-header",1)(1,"div",2)(2,"button",3),f("click",function(){return i.createVacation()}),g(3,"i",4),d(4),s(),o(5,"button",5),f("click",function(){return i.refresh()}),g(6,"i",6),d(7),s()()(),p(8,U,1,1,"app-loading-spinner",7),p(9,Y,5,2,"div",8),p(10,j,1,3,"app-empty-state",9),p(11,G,5,4,"div",10),p(12,J,9,2,"div",11)),t&2&&(l("title",i.i18n.t("portal.vacation_requests")),a(2),l("disabled",i.loading()),a(2),v(" ",i.i18n.t("portal.new_vacation")," "),a(),l("disabled",i.loading()),a(),w("fa-spin",i.loading()),a(),v(" ",i.i18n.t("common.refresh")," "),a(),u(i.loading()&&i.vacations().length===0?8:-1),a(),u(i.error()&&i.vacations().length===0?9:-1),a(),u(!i.loading()&&i.vacations().length===0&&!i.error()?10:-1),a(),u(i.vacations().length>0?11:-1),a(),u(i.vacations().length>0?12:-1))},dependencies:[M,L,R,N,z,A],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013;border:1px solid var(--bs-border-color)}.card-body[_ngcontent-%COMP%]{padding:1.5rem}[_nghost-%COMP%]     .data-table{width:100%}[_nghost-%COMP%]     .data-table th{background-color:var(--bs-light);font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px;color:var(--bs-secondary);border-bottom:2px solid var(--bs-border-color)}[_nghost-%COMP%]     .data-table td{vertical-align:middle;font-size:.9rem}[_nghost-%COMP%]     .data-table tbody tr:hover{background-color:var(--bs-light);cursor:pointer;transition:background-color .2s ease}[_nghost-%COMP%]     .badge{font-size:.75rem;padding:.35rem .65rem;font-weight:600}.card[_ngcontent-%COMP%]   .fa-info-circle[_ngcontent-%COMP%]{flex-shrink:0}@media (max-width: 768px){[_nghost-%COMP%]     .data-table{font-size:.85rem}[_nghost-%COMP%]     .data-table th, [_nghost-%COMP%]     .data-table td{padding:.5rem}.card-body[_ngcontent-%COMP%]{padding:1rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}"]})};export{H as VacationRequestsListComponent};
