{
  "version": 3,
  "sources": ["src/app/pages/reports/reports.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\nimport { AttendanceReportSummary, LeaveReportSummary, ReportFilter } from './reports.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ReportsService {\r\n    private http = inject(HttpClient);\r\n    private apiUrl = `${environment.apiUrl}/api/v1/Reports`;\r\n\r\n    getAttendanceReport(filter: ReportFilter): Observable<AttendanceReportSummary> {\r\n        let params = new HttpParams()\r\n            .set('from', filter.fromDate)\r\n            .set('to', filter.toDate);\r\n\r\n        if (filter.branchId) params = params.set('branchId', filter.branchId);\r\n        if (filter.departmentId) params = params.set('departmentId', filter.departmentId);\r\n        if (filter.employeeId) params = params.set('employeeId', filter.employeeId);\r\n\r\n        return this.http.get<AttendanceReportSummary>(`${this.apiUrl}/attendance`, { params });\r\n    }\r\n\r\n    exportAttendanceReport(filter: ReportFilter): Observable<Blob> {\r\n        let params = new HttpParams()\r\n            .set('from', filter.fromDate)\r\n            .set('to', filter.toDate);\r\n\r\n        if (filter.branchId) params = params.set('branchId', filter.branchId);\r\n        if (filter.departmentId) params = params.set('departmentId', filter.departmentId);\r\n        if (filter.employeeId) params = params.set('employeeId', filter.employeeId);\r\n\r\n        return this.http.get(`${this.apiUrl}/attendance/export`, { params, responseType: 'blob' });\r\n    }\r\n\r\n    getLeaveReport(filter: ReportFilter): Observable<LeaveReportSummary> {\r\n        let params = new HttpParams()\r\n            .set('from', filter.fromDate)\r\n            .set('to', filter.toDate);\r\n\r\n        if (filter.branchId) params = params.set('branchId', filter.branchId);\r\n        if (filter.departmentId) params = params.set('departmentId', filter.departmentId);\r\n        if (filter.employeeId) params = params.set('employeeId', filter.employeeId);\r\n\r\n        return this.http.get<LeaveReportSummary>(`${this.apiUrl}/leaves`, { params });\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AASM,IAAO,kBAAP,MAAO,gBAAc;EACf,OAAO,OAAO,UAAU;EACxB,SAAS,GAAG,YAAY,MAAM;EAEtC,oBAAoB,QAAoB;AACpC,QAAI,SAAS,IAAI,WAAU,EACtB,IAAI,QAAQ,OAAO,QAAQ,EAC3B,IAAI,MAAM,OAAO,MAAM;AAE5B,QAAI,OAAO;AAAU,eAAS,OAAO,IAAI,YAAY,OAAO,QAAQ;AACpE,QAAI,OAAO;AAAc,eAAS,OAAO,IAAI,gBAAgB,OAAO,YAAY;AAChF,QAAI,OAAO;AAAY,eAAS,OAAO,IAAI,cAAc,OAAO,UAAU;AAE1E,WAAO,KAAK,KAAK,IAA6B,GAAG,KAAK,MAAM,eAAe,EAAE,OAAM,CAAE;EACzF;EAEA,uBAAuB,QAAoB;AACvC,QAAI,SAAS,IAAI,WAAU,EACtB,IAAI,QAAQ,OAAO,QAAQ,EAC3B,IAAI,MAAM,OAAO,MAAM;AAE5B,QAAI,OAAO;AAAU,eAAS,OAAO,IAAI,YAAY,OAAO,QAAQ;AACpE,QAAI,OAAO;AAAc,eAAS,OAAO,IAAI,gBAAgB,OAAO,YAAY;AAChF,QAAI,OAAO;AAAY,eAAS,OAAO,IAAI,cAAc,OAAO,UAAU;AAE1E,WAAO,KAAK,KAAK,IAAI,GAAG,KAAK,MAAM,sBAAsB,EAAE,QAAQ,cAAc,OAAM,CAAE;EAC7F;EAEA,eAAe,QAAoB;AAC/B,QAAI,SAAS,IAAI,WAAU,EACtB,IAAI,QAAQ,OAAO,QAAQ,EAC3B,IAAI,MAAM,OAAO,MAAM;AAE5B,QAAI,OAAO;AAAU,eAAS,OAAO,IAAI,YAAY,OAAO,QAAQ;AACpE,QAAI,OAAO;AAAc,eAAS,OAAO,IAAI,gBAAgB,OAAO,YAAY;AAChF,QAAI,OAAO;AAAY,eAAS,OAAO,IAAI,cAAc,OAAO,UAAU;AAE1E,WAAO,KAAK,KAAK,IAAwB,GAAG,KAAK,MAAM,WAAW,EAAE,OAAM,CAAE;EAChF;;AAtCuB;cAAd;mCAAA,iBAAc;AAAA;cAAd,qFAAA,iBAAc,SAAd,gBAAc,WAAA,YAFX,OAAM,CAAA;AAEhB,IAAO,iBAAP;;sEAAO,gBAAc,CAAA;UAH1B;WAAW;MACR,YAAY;KACf;;;",
  "names": []
}
