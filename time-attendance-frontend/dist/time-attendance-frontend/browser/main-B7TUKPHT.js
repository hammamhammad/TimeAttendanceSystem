import{a as ee}from"./chunk-YNZABMAS.js";import{a as Y}from"./chunk-73EAVPDS.js";import{a as J}from"./chunk-L7VPWNOD.js";import{a as Q}from"./chunk-46YUKDEL.js";import{a as X}from"./chunk-SHPIBPD3.js";import{a as Z}from"./chunk-53CNHAPR.js";import{a as S}from"./chunk-BSEKTODI.js";import"./chunk-HUSARQNL.js";import"./chunk-QXVLGI72.js";import{a as C}from"./chunk-LPMX3N5X.js";import"./chunk-LDWMK676.js";import{b as c}from"./chunk-ZURD34HZ.js";import{a as g}from"./chunk-GEGVYT7O.js";import"./chunk-A6EM5NV6.js";import{Ab as N,D as I,Db as U,Eb as M,Fb as y,G as O,Ib as q,Jb as $,Kb as K,O as P,Q as W,Y as L,c as F,db as V,f as x,g as v,gb as H,ja as z,l as R,p as T,u as f,vb as j,xb as B,y as p,yb as D,zb as G}from"./chunk-5OFYUWMA.js";import{a as h,b as u}from"./chunk-YMDWBF3A.js";var n=(e,t)=>{let o=p(c),s=p(C),i=p(y);if(!o.isAuthenticated())return i.navigate(["/login"]),!1;if(o.isTokenExpired())if(o.getRefreshToken())o.refreshToken().subscribe({error:()=>{i.navigate(["/login"])}});else return i.navigate(["/login"]),!1;let m=e.data?.permission;return m&&!s.has(m)?(i.navigate(["/unauthorized"]),!1):!0};var a=(e,t)=>{let o=p(c),s=p(C),i=p(y);if(!o.isAuthenticated())return i.navigate(["/login"]),!1;if(o.isAdmin()||o.isSystemAdmin())return!0;let m=e.data?.permission;return m&&s.has(m)?!0:(i.navigate(["/unauthorized"]),!1)};var l=(e,t)=>{let o=p(c),s=p(C),i=p(y);if(!o.isAuthenticated())return i.navigate(["/login"]),!1;if(o.isSystemAdmin()||o.isAdmin()||s.hasRole("Manager"))return!0;let m=["employee.read","employee.assign","shift.read","shift.assign","department.read","attendance.read","report.read"];if(s.hasAny(m))return!0;let d=e.data?.permission;return d&&s.has(d)?!0:(i.navigate(["/unauthorized"]),!1)};var te=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-QY6MNAUW.js").then(e=>e.LoginComponent),data:{title:"auth.login"}},{path:"auth/change-password",loadComponent:()=>import("./chunk-L5QNZHB7.js").then(e=>e.ChangePasswordComponent),canMatch:[n],data:{title:"auth.change_password"}},{path:"",loadComponent:()=>import("./chunk-3HI7GDIU.js").then(e=>e.LayoutComponent),canMatch:[n],children:[{path:"dashboard",loadComponent:()=>import("./chunk-24TDM54J.js").then(e=>e.DashboardComponent),data:{title:"dashboard.title"}},{path:"users",loadComponent:()=>import("./chunk-RGUC7ZWZ.js").then(e=>e.UsersComponent),data:{title:"users.title",permission:"user.read"},canMatch:[a]},{path:"users/create",loadComponent:()=>import("./chunk-XGDSXTM5.js").then(e=>e.CreateUserPageComponent),data:{title:"users.create_user",permission:"user.create"},canMatch:[a]},{path:"users/:id/view",loadComponent:()=>import("./chunk-JA7DDGKT.js").then(e=>e.ViewUserComponent),data:{title:"users.view_details",permission:"user.read"},canMatch:[a]},{path:"users/:id/edit",loadComponent:()=>import("./chunk-UU7MYOL6.js").then(e=>e.EditUserPageComponent),data:{title:"users.edit_user",permission:"user.update"},canMatch:[a]},{path:"employees",loadComponent:()=>import("./chunk-NTYXNOOD.js").then(e=>e.EmployeesComponent),data:{title:"employees.title",permission:"employee.read"},canMatch:[l]},{path:"employees/create",loadComponent:()=>import("./chunk-RF3JCQVE.js").then(e=>e.CreateEmployeeComponent),data:{title:"employees.create_employee",permission:"employee.create"},canMatch:[a]},{path:"employees/:id/view",loadComponent:()=>import("./chunk-BQMDQZC3.js").then(e=>e.ViewEmployeeComponent),data:{title:"employees.view_details",permission:"employee.read"},canMatch:[l]},{path:"employees/:id/edit",loadComponent:()=>import("./chunk-BZ43MZE5.js").then(e=>e.EditEmployeeComponent),data:{title:"employees.edit_employee",permission:"employee.update"},canMatch:[a]},{path:"employees/:employeeId/change-shift",loadComponent:()=>import("./chunk-4566C4IE.js").then(e=>e.ChangeEmployeeShiftComponent),data:{title:"employees.change_shift",permission:"employee.update"},canMatch:[l]},{path:"roles",loadComponent:()=>import("./chunk-T5CLZOEA.js").then(e=>e.RolesComponent),data:{title:"roles.title",permission:"role.read"},canMatch:[a]},{path:"roles/create",loadComponent:()=>import("./chunk-DGOJFVQL.js").then(e=>e.CreateRoleComponent),data:{title:"roles.create_role",permission:"role.create"},canMatch:[a]},{path:"roles/:id/view",loadComponent:()=>import("./chunk-EGXT63L6.js").then(e=>e.ViewRoleComponent),data:{title:"roles.view_details",permission:"role.read"},canMatch:[a]},{path:"roles/:id/edit",loadComponent:()=>import("./chunk-U2NWN4WN.js").then(e=>e.EditRoleComponent),data:{title:"roles.edit_role",permission:"role.update"},canMatch:[a]},{path:"branches",loadComponent:()=>import("./chunk-MNFJ7UUU.js").then(e=>e.BranchesComponent),data:{title:"branches.title",permission:"branch.read"},canMatch:[n]},{path:"branches/:id/view",loadComponent:()=>import("./chunk-NXVKCU42.js").then(e=>e.ViewBranchComponent),data:{title:"branches.view_details",permission:"branch.read"},canMatch:[n]},{path:"branches/:id/edit",loadComponent:()=>import("./chunk-RQV77V2X.js").then(e=>e.EditBranchComponent),data:{title:"branches.edit_branch",permission:"branch.update"},canMatch:[n]},{path:"departments",loadComponent:()=>import("./chunk-Y74X2LRB.js").then(e=>e.DepartmentsComponent),data:{title:"departments.title",permission:"department.read"},canMatch:[n]},{path:"departments/create",loadComponent:()=>import("./chunk-NWUBYCBC.js").then(e=>e.CreateDepartmentComponent),data:{title:"departments.create",permission:"department.create"},canMatch:[n]},{path:"departments/:id/view",loadComponent:()=>import("./chunk-RPVMHF6L.js").then(e=>e.ViewDepartmentComponent),data:{title:"departments.view_details",permission:"department.read"},canMatch:[n]},{path:"departments/:id/edit",loadComponent:()=>import("./chunk-L6Z3LR6N.js").then(e=>e.EditDepartmentComponent),data:{title:"departments.edit",permission:"department.update"},canMatch:[n]},{path:"shifts",loadComponent:()=>import("./chunk-KOXANHB5.js").then(e=>e.ShiftsComponent),data:{title:"shifts.title",permission:"shift.read"},canMatch:[l]},{path:"shifts/create",loadComponent:()=>import("./chunk-SMVNTSVP.js").then(e=>e.CreateShiftComponent),data:{title:"shifts.create_shift",permission:"shift.create"},canMatch:[a]},{path:"shifts/:id/view",loadComponent:()=>import("./chunk-WOQ5VEV3.js").then(e=>e.ViewShiftComponent),data:{title:"shifts.view_details",permission:"shift.read"},canMatch:[l]},{path:"shifts/:id/edit",loadComponent:()=>import("./chunk-PMH6OGVW.js").then(e=>e.EditShiftComponent),data:{title:"shifts.edit_shift",permission:"shift.update"},canMatch:[a]},{path:"shifts/assign",loadComponent:()=>import("./chunk-V4T2TH65.js").then(e=>e.AssignShiftsComponent),data:{title:"shifts.assignments.title",permission:"shift.assign"},canMatch:[l]},{path:"attendance",loadComponent:()=>import("./chunk-HXVPXCQZ.js").then(e=>e.AttendanceComponent),data:{title:"attendance.dashboard_title",permission:"attendance.read"},canMatch:[n]},{path:"attendance/daily",loadComponent:()=>import("./chunk-2PN3HX6K.js").then(e=>e.DailyAttendanceComponent),data:{title:"attendance.daily_view",permission:"attendance.read"},canMatch:[n]},{path:"attendance/monthly-report",loadComponent:()=>import("./chunk-SGFXRRW5.js").then(e=>e.MonthlyReportComponent),data:{title:"attendance.monthly_report",permission:"attendance.read"},canMatch:[n]},{path:"attendance/daily-detail/:employeeId/:date",loadComponent:()=>import("./chunk-KNR2XXE5.js").then(e=>e.DailyAttendanceDetailComponent),data:{title:"attendance.daily_detail.title",permission:"attendance.read"},canMatch:[n]},{path:"attendance/employee-history",loadComponent:()=>import("./chunk-K7QTW7AA.js").then(e=>e.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_history.title",permission:"attendance.read"},canMatch:[n]},{path:"attendance/employee/:id",loadComponent:()=>import("./chunk-K7QTW7AA.js").then(e=>e.EmployeeAttendanceDetailComponent),data:{title:"attendance.employee_detail",permission:"attendance.read"},canMatch:[n]},{path:"attendance/edit/:id",loadComponent:()=>import("./chunk-DPBUXMN7.js").then(e=>e.EditAttendanceComponent),data:{title:"attendance.edit.title",permission:"attendance.update"},canMatch:[n]},{path:"attendance/:attendanceId/change-shift",loadComponent:()=>import("./chunk-ZIEBRET6.js").then(e=>e.ChangeAttendanceShiftComponent),data:{title:"attendance.change_shift_title",permission:"attendance.update"},canMatch:[n]},{path:"settings",loadComponent:()=>import("./chunk-B2S5NZDJ.js").then(e=>e.SettingsComponent),data:{title:"settings.title"}},{path:"settings/overtime",loadComponent:()=>import("./chunk-N4NXVNJQ.js").then(e=>e.OvertimeConfigurationsComponent),data:{title:"settings.overtime.title",permission:"settings.overtime.read"},canMatch:[a]},{path:"settings/overtime/create",loadComponent:()=>import("./chunk-Q4M54BUQ.js").then(e=>e.CreateOvertimeConfigurationComponent),data:{title:"settings.overtime.create",permission:"settings.overtime.create"},canMatch:[a]},{path:"settings/overtime/edit/:id",loadComponent:()=>import("./chunk-CA37Y2XB.js").then(e=>e.EditOvertimeConfigurationComponent),data:{title:"settings.overtime.edit",permission:"settings.overtime.update"},canMatch:[a]},{path:"settings/overtime/:id/view",loadComponent:()=>import("./chunk-7PQ4THJI.js").then(e=>e.ViewOvertimeConfigurationComponent),data:{title:"settings.overtime.view_details",permission:"settings.overtime.read"},canMatch:[a]},{path:"settings/public-holidays",loadComponent:()=>import("./chunk-U5C7VVPD.js").then(e=>e.PublicHolidaysComponent),data:{title:"settings.holidays.title",permission:"publicHoliday.read"},canMatch:[a]},{path:"settings/public-holidays/create",loadComponent:()=>import("./chunk-HJXBX4UI.js").then(e=>e.CreatePublicHolidayComponent),data:{title:"settings.holidays.create",permission:"publicHoliday.create"},canMatch:[a]},{path:"settings/public-holidays/:id/view",loadComponent:()=>import("./chunk-TYZSDDT3.js").then(e=>e.ViewPublicHolidayComponent),data:{title:"settings.holidays.view_details",permission:"publicHoliday.read"},canMatch:[a]},{path:"settings/public-holidays/:id/edit",loadComponent:()=>import("./chunk-FIWCYZLZ.js").then(e=>e.EditPublicHolidayComponent),data:{title:"settings.holidays.edit",permission:"publicHoliday.update"},canMatch:[a]},{path:"reports/attendance",loadComponent:()=>import("./chunk-J7GM3ZK4.js").then(e=>e.AttendanceReportComponent),data:{title:"reports.attendance",permission:"attendance.read"},canMatch:[n]},{path:"reports/leaves",loadComponent:()=>import("./chunk-CNC2JQ6J.js").then(e=>e.LeaveReportComponent),data:{title:"reports.leaves",permission:"vacation.read"},canMatch:[n]},{path:"vacation-types",loadComponent:()=>import("./chunk-HHRRPDCI.js").then(e=>e.VacationTypesComponent),data:{title:"vacation_types.title",permission:"vacationType.read"},canMatch:[l]},{path:"vacation-types/:id",loadComponent:()=>import("./chunk-2E4VSGJJ.js").then(e=>e.ViewVacationTypeComponent),data:{title:"vacation_types.view_details",permission:"vacationType.read"},canMatch:[l]},{path:"employee-vacations",loadComponent:()=>import("./chunk-7HQRYN67.js").then(e=>e.EmployeeVacationsComponent),data:{title:"employee_vacations.title",permission:"vacation.read"},canMatch:[n]},{path:"employee-vacations/create",loadComponent:()=>import("./chunk-QB5GXFAZ.js").then(e=>e.CreateEmployeeVacationComponent),data:{title:"employee_vacations.create_vacation",permission:"vacation.create"},canMatch:[n]},{path:"employee-vacations/:id/view",loadComponent:()=>import("./chunk-DOX7XPO2.js").then(e=>e.ViewEmployeeVacationComponent),data:{title:"employee_vacations.view_details",permission:"vacation.read"},canMatch:[n]},{path:"employee-vacations/:id/edit",loadComponent:()=>import("./chunk-TVFWZV5I.js").then(e=>e.EditEmployeeVacationComponent),data:{title:"employee_vacations.edit_vacation",permission:"vacation.update"},canMatch:[n]},{path:"employee-excuses",loadComponent:()=>import("./chunk-K7YI4ZHJ.js").then(e=>e.EmployeeExcusesComponent),data:{title:"employee_excuses.title",permission:"excuse.read"},canMatch:[n]},{path:"employee-excuses/create",loadComponent:()=>import("./chunk-ALU3GJOJ.js").then(e=>e.ExcuseRequestFormComponent),data:{title:"employee_excuses.create_request",permission:"excuse.create"},canMatch:[n]},{path:"employee-excuses/:id/view",loadComponent:()=>import("./chunk-YDHA2DCJ.js").then(e=>e.ExcuseDetailsComponent),data:{title:"employee_excuses.excuse_details",permission:"excuse.read"},canMatch:[n]},{path:"employee-excuses/:id/edit",loadComponent:()=>import("./chunk-ALU3GJOJ.js").then(e=>e.ExcuseRequestFormComponent),data:{title:"employee_excuses.edit_request",permission:"excuse.update"},canMatch:[n]},{path:"remote-work",loadComponent:()=>import("./chunk-MAK34HYJ.js").then(e=>e.RemoteWorkListComponent),data:{title:"remoteWork.request.title",permission:"remoteWork.request.read"},canMatch:[l]},{path:"remote-work/create",loadComponent:()=>import("./chunk-54Z253T7.js").then(e=>e.AssignRemoteWorkComponent),data:{title:"remoteWork.request.create",permission:"remoteWork.request.create"},canMatch:[l]},{path:"remote-work/:id/view",loadComponent:()=>import("./chunk-MUENYXEE.js").then(e=>e.ViewRemoteWorkAssignmentComponent),data:{title:"remoteWork.request.view_details",permission:"remoteWork.request.read"},canMatch:[l]},{path:"remote-work/edit/:id",loadComponent:()=>import("./chunk-USWWZKX3.js").then(e=>e.EditRemoteWorkComponent),data:{title:"remoteWork.request.edit",permission:"remoteWork.request.update"},canMatch:[l]},{path:"settings/remote-work-policy",loadComponent:()=>import("./chunk-CVNUR75L.js").then(e=>e.RemoteWorkPolicyListComponent),data:{title:"remoteWork.policy.title",permission:"remoteWork.policy.read"},canMatch:[a]},{path:"settings/remote-work-policy/create",loadComponent:()=>import("./chunk-GBCOWTKC.js").then(e=>e.CreateRemoteWorkPolicyComponent),data:{title:"remoteWork.policy.create_policy",permission:"remoteWork.policy.create"},canMatch:[a]},{path:"settings/remote-work-policy/:id/view",loadComponent:()=>import("./chunk-UY7FKNDC.js").then(e=>e.ViewRemoteWorkPolicyComponent),data:{title:"remoteWork.policy.policy_details",permission:"remoteWork.policy.read"},canMatch:[a]},{path:"settings/remote-work-policy/:id/edit",loadComponent:()=>import("./chunk-BLWMU3XF.js").then(e=>e.EditRemoteWorkPolicyComponent),data:{title:"remoteWork.policy.edit_policy",permission:"remoteWork.policy.update"},canMatch:[a]},{path:"settings/excuse-policies",loadComponent:()=>import("./chunk-7CNCSTDX.js").then(e=>e.ExcusePoliciesComponent),data:{title:"excuse_policies.title",permission:"settings.excusePolicy.read"},canMatch:[a]},{path:"settings/excuse-policies/create",loadComponent:()=>import("./chunk-ZRR4SY6H.js").then(e=>e.CreateExcusePolicyComponent),data:{title:"excuse_policies.create_policy",permission:"settings.excusePolicy.create"},canMatch:[a]},{path:"settings/excuse-policies/:id/view",loadComponent:()=>import("./chunk-2LWPVKTM.js").then(e=>e.ViewExcusePolicyComponent),data:{title:"excuse_policies.view_policy",permission:"settings.excusePolicy.read"},canMatch:[a]},{path:"settings/excuse-policies/:id/edit",loadComponent:()=>import("./chunk-MINDTABB.js").then(e=>e.EditExcusePolicyComponent),data:{title:"excuse_policies.edit_policy",permission:"settings.excusePolicy.update"},canMatch:[a]},{path:"settings/workflows",loadComponent:()=>import("./chunk-JXWDXOML.js").then(e=>e.WorkflowListComponent),data:{title:"workflows.title",permission:"workflow.read"},canMatch:[a]},{path:"settings/workflows/create",loadComponent:()=>import("./chunk-M3KOQ3QJ.js").then(e=>e.WorkflowFormComponent),data:{title:"workflows.create_workflow",permission:"workflow.create"},canMatch:[a]},{path:"settings/workflows/:id/view",loadComponent:()=>import("./chunk-M3KOQ3QJ.js").then(e=>e.WorkflowFormComponent),data:{title:"workflows.view_workflow",permission:"workflow.read"},canMatch:[a]},{path:"settings/workflows/:id/edit",loadComponent:()=>import("./chunk-M3KOQ3QJ.js").then(e=>e.WorkflowFormComponent),data:{title:"workflows.edit_workflow",permission:"workflow.update"},canMatch:[a]},{path:"settings/leave-entitlements",loadComponent:()=>import("./chunk-ZAJRBHUY.js").then(e=>e.LeaveEntitlementsListComponent),data:{title:"leaveBalance.leaveEntitlements",permission:"leaveBalance.read"},canMatch:[n]},{path:"settings/leave-entitlements/create",loadComponent:()=>import("./chunk-BIDPJ4X7.js").then(e=>e.LeaveEntitlementFormComponent),data:{title:"leaveBalance.createEntitlementTitle",permission:"leaveBalance.create"},canMatch:[n]},{path:"settings/leave-entitlements/edit/:id",loadComponent:()=>import("./chunk-BIDPJ4X7.js").then(e=>e.LeaveEntitlementFormComponent),data:{title:"leaveBalance.editEntitlementTitle",permission:"leaveBalance.update"},canMatch:[n]},{path:"approvals",loadComponent:()=>import("./chunk-IYDTST4L.js").then(e=>e.PendingApprovalsComponent),data:{title:"approvals.pending_title",permission:"approval.read"},canMatch:[n]},{path:"approvals/history",loadComponent:()=>import("./chunk-EAQYM66G.js").then(e=>e.ApprovalHistoryComponent),data:{title:"approvals.history_title",permission:"approval.read"},canMatch:[n]},{path:"reports/sessions",loadComponent:()=>import("./chunk-MZTZZPJZ.js").then(e=>e.SessionsComponent),data:{title:"sessions.title",permission:"session.read"},canMatch:[n]},{path:"reports/audit-logs",loadComponent:()=>import("./chunk-AACGJ2CR.js").then(e=>e.AuditLogsComponent),data:{title:"audit_logs.title",permission:"audit.read"},canMatch:[a]},{path:"notifications/send",loadComponent:()=>import("./chunk-MKNJ63B7.js").then(e=>e.SendNotificationComponent),data:{title:"notifications.send_notification",permission:"notification.broadcast"},canMatch:[a]},{path:"notifications/history",loadComponent:()=>import("./chunk-L4UPUBTJ.js").then(e=>e.BroadcastHistoryComponent),data:{title:"notifications.broadcast_history",permission:"notification.broadcast"},canMatch:[a]},{path:"nfc-tags",loadComponent:()=>import("./chunk-AWH3Q5IC.js").then(e=>e.NfcTagsComponent),data:{title:"nfc_tags.title",permission:"branch.management"},canMatch:[a]},{path:"nfc-tags/create",loadComponent:()=>import("./chunk-MADXWRWZ.js").then(e=>e.NfcTagFormComponent),data:{title:"nfc_tags.register_tag",permission:"branch.management"},canMatch:[a]},{path:"nfc-tags/:id/view",loadComponent:()=>import("./chunk-KG6XF3WK.js").then(e=>e.ViewNfcTagComponent),data:{title:"nfc_tags.view_tag",permission:"branch.management"},canMatch:[a]},{path:"nfc-tags/:id/edit",loadComponent:()=>import("./chunk-MADXWRWZ.js").then(e=>e.NfcTagFormComponent),data:{title:"nfc_tags.edit_tag",permission:"branch.management"},canMatch:[a]}]},{path:"unauthorized",loadComponent:()=>import("./chunk-5JTCIZVD.js").then(e=>e.UnauthorizedComponent),data:{title:"Unauthorized Access"}},{path:"**",loadComponent:()=>import("./chunk-3WNJZ66M.js").then(e=>e.NotFoundComponent),data:{title:"Page Not Found"}}];var oe=(e,t)=>{let o=p(c);if(e.url.includes("/auth/login")||e.url.includes("/auth/refresh"))return t(e);let s=o.getAccessToken(),i=e;return s&&(i=e.clone({headers:e.headers.set("Authorization",`Bearer ${s}`)})),t(i).pipe(R(m=>{if(m.status===401&&!e.url.includes("/auth/refresh")){if(o.getRefreshToken())return o.refreshToken().pipe(T(()=>{let d=o.getAccessToken(),b=e.clone({headers:e.headers.set("Authorization",`Bearer ${d}`)});return t(b)}),R(d=>(o.logout(),x(()=>d))));o.logout()}return x(()=>m)}))};var w=class e extends M{title=p(N);i18n=p(g);updateTitle(t){let o=this.buildTitle(t);if(o){let i=`${this.i18n.t(o)} | Time Attendance System`;this.title.setTitle(i)}else this.title.setTitle("Time Attendance System")}static \u0275fac=(()=>{let t;return function(s){return(t||(t=O(e)))(s||e)}})();static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var _=class e{http=p(B);i18n=p(g);branchesService=p(Q);departmentsService=p(X);employeesService=p(Z);shiftsService=p(Y);vacationTypesService=p(ee);rolesService=p(J);authService=p(c);registry={};dataCache=new F({});dataInitialized=!1;constructor(){H(()=>{let t=this.authService.isAuthenticated();t&&!this.dataInitialized?(this.initializeCommonData(),this.dataInitialized=!0):t||(this.dataCache.next({}),this.dataInitialized=!1)})}registerModule(t,o){this.registry[t]=o}getModuleConfig(t){return this.registry[t]||null}getAllModules(){return Object.keys(this.registry)}initializeCommonData(){this.loadBranches(),this.initShiftsData(),this.initRolesData()}loadBranches(){this.branchesService.getBranches(1,1e3).subscribe({next:t=>{let o=this.dataCache.value;this.dataCache.next(u(h({},o),{branches:t.items}))},error:t=>{console.error("Failed to load branches for filter registry:",t)}})}loadDepartments(t){return this.departmentsService.getDepartments(t?{branchId:t}:{}).pipe(v(o=>{let s=this.dataCache.value,i=t?`departments_${t}`:"departments_all";return this.dataCache.next(u(h({},s),{[i]:o})),o}))}loadEmployees(t){return this.employeesService.getEmployeesForSelection(t).pipe(v(o=>{let s=this.dataCache.value,i=t?`employees_${t}`:"employees_all";return this.dataCache.next(u(h({},s),{[i]:o})),o}))}loadShifts(t){return this.shiftsService.getShifts(1,1e3).pipe(v(o=>{let s=o.items||[],i=this.dataCache.value,m=t?`shifts_${t}`:"shifts_all";return this.dataCache.next(u(h({},i),{[m]:s,shifts:s})),s}))}initShiftsData(){this.loadShifts().subscribe({error:t=>{console.error("Failed to load shifts for filter registry:",t)}})}loadVacationTypes(t){return this.vacationTypesService.getVacationTypes({branchId:t}).pipe(v(o=>{let s=o.items||[],i=this.dataCache.value,m=t?`vacationTypes_${t}`:"vacationTypes_all";return this.dataCache.next(u(h({},i),{[m]:s,vacationTypes:s})),s}))}loadRoles(){return this.rolesService.getRoles().pipe(v(t=>{let o=this.dataCache.value;return this.dataCache.next(u(h({},o),{roles:t})),t}))}initRolesData(){this.loadRoles().subscribe({error:t=>{console.error("Failed to load roles for filter registry:",t)}})}getCachedData(){return this.dataCache.asObservable()}buildFilterOptions(t,o,s){let i={value:"",label:this.i18n.t("common.all")};switch(t.type){case"branch":return[i,...(o.branches||[]).map(r=>({value:r.id.toString(),label:r.name,subLabel:r.code}))];case"department":let m=t.dependsOn&&s?s[t.dependsOn]:null,d=m?`departments_${m}`:"departments_all";return[i,...(o[d]||[]).map(r=>({value:r.id.toString(),label:r.name,subLabel:r.nameAr}))];case"employee":let b=t.dependsOn&&s?s[t.dependsOn]:null,ie=b?`employees_${b}`:"employees_all";return[i,...(o[ie]||[]).map(r=>({value:r.id.toString(),label:r.name,subLabel:r.employeeNumber}))];case"status":return t.statusEnum&&t.statusLabels?[i,...Object.keys(t.statusEnum).filter(r=>isNaN(Number(r))).map(r=>({value:t.statusEnum[r],label:this.i18n.t(t.statusLabels[r]||r)}))]:[i];case"shift":let ne=t.dependsOn?`shifts_${o[t.dependsOn]}`:"shifts_all";return[i,...(o[ne]||o.shifts||[]).map(r=>({value:r.id.toString(),label:r.name,subLabel:r.description||r.shiftType}))];case"vacationType":let re=t.dependsOn?`vacationTypes_${o[t.dependsOn]}`:"vacationTypes_all";return[i,...(o[re]||o.vacationTypes||[]).map(r=>({value:r.id.toString(),label:r.name,subLabel:r.nameAr}))];case"role":return[i,...(o.roles||[]).map(r=>({value:r.id.toString(),label:r.name,subLabel:r.type}))];case"custom":return t.options?.map(r=>u(h({},r),{label:this.i18n.t(r.label)}))||[i];default:return[i]}}buildActiveInactiveOptions(){return[{value:"",label:this.i18n.t("common.all")},{value:"true",label:this.i18n.t("common.active")},{value:"false",label:this.i18n.t("common.inactive")}]}clearCache(){this.dataCache.next({}),this.authService.isAuthenticated()&&this.initializeCommonData()}static \u0275fac=function(o){return new(o||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var k=class e{filterRegistry=p(_);constructor(){this.initializeConfigurations()}initializeConfigurations(){Object.keys(S).forEach(t=>{this.filterRegistry.registerModule(t,S[t])}),console.log(`Registered ${Object.keys(S).length} filter configurations`)}reinitialize(){this.initializeConfigurations()}getRegisteredModules(){return this.filterRegistry.getAllModules()}static \u0275fac=function(o){return new(o||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var ae={providers:[I(),V({eventCoalescing:!0}),q(te,K(),$()),D(G([oe])),{provide:M,useClass:w},{provide:L,useFactory:e=>()=>(console.log("Initializing filter configurations..."),Promise.resolve()),deps:[k],multi:!0}]};var A=class e{constructor(t){this.i18n=t}ngOnInit(){let t=localStorage.getItem("app_locale")||"en";this.i18n.setLocale(t)}static \u0275fac=function(o){return new(o||e)(P(g))};static \u0275cmp=W({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,s){o&1&&z(0,"router-outlet")},dependencies:[U],encapsulation:2})};j(A,ae).catch(e=>console.error(e));
