import{a as ae}from"./chunk-2DN7MBOW.js";import{a as te,b as ne,c as ie}from"./chunk-BLUZVNQL.js";import{a as Z}from"./chunk-QS4HD2YC.js";import{a as Q}from"./chunk-K7WTKFJQ.js";import{a as X}from"./chunk-MRHL7QNZ.js";import{a as ee}from"./chunk-XEQ2WLKT.js";import"./chunk-QXVLGI72.js";import{a as F}from"./chunk-H5EPUHY6.js";import{a as G}from"./chunk-5MHFUEKN.js";import{a as M,b as V}from"./chunk-Y62N6K5S.js";import{a as q}from"./chunk-U7RGWLFU.js";import"./chunk-HXSGHCFU.js";import{x as z}from"./chunk-VRETN7JA.js";import{a as J}from"./chunk-GRQ6RO47.js";import{a as K}from"./chunk-EYAJMHM7.js";import{a as U}from"./chunk-HHXRLUSQ.js";import"./chunk-O7LPL3AF.js";import{b as Y}from"./chunk-3VZ5QHEY.js";import{d as j,g as B}from"./chunk-TWXUAMJ4.js";import{$a as N,Ab as T,Bb as l,Cb as c,Db as _,Ea as O,Eb as W,Ia as A,R as h,W as C,X as E,Xa as g,Ya as f,Yb as y,ab as P,bb as v,cb as a,da as b,db as i,eb as p,lb as D,nb as S,pb as m,ta as n,wc as H,xb as $,yb as k}from"./chunk-JSQL33QG.js";import{d as L}from"./chunk-DGAILPFQ.js";var le=(o,t)=>t.attendanceDate,re=(o,t)=>t.transactionTimeLocal;function se(o,t){if(o&1&&(a(0,"div",2),p(1,"app-loading-spinner",4),i()),o&2){let e=m();n(),v("message",e.t("common.loading"))("centered",!0)}}function ce(o,t){if(o&1&&p(0,"app-status-badge",22),o&2){let e=m(2);v("label",e.employee().currentShiftName)("variant","primary")("icon","fas fa-clock")}}function de(o,t){if(o&1&&(a(0,"span",14),l(1),i()),o&2){let e=m(2);n(),c(e.t("employees.no_shift_assigned"))}}function me(o,t){if(o&1&&(a(0,"div",19)(1,"h6",20),l(2),i(),p(3,"app-status-badge",51),i()),o&2){let e=m(2);n(2),c(e.t("employees.gender.title")),n(),v("label",e.getGenderLabel(e.employee().gender))("variant","light")("showIcon",!1)}}function pe(o,t){if(o&1&&(a(0,"div",52)(1,"small",14),l(2),i(),p(3,"br"),a(4,"span"),l(5),i()()),o&2){let e,r=m(3);n(2),c(r.t("employees.first_name_ar")),n(3),c((e=r.employee())==null?null:e.firstNameAr)}}function ue(o,t){if(o&1&&(a(0,"div",52)(1,"small",14),l(2),i(),p(3,"br"),a(4,"span"),l(5),i()()),o&2){let e,r=m(3);n(2),c(r.t("employees.last_name_ar")),n(3),c((e=r.employee())==null?null:e.lastNameAr)}}function ve(o,t){if(o&1&&(a(0,"div")(1,"small",14),l(2),i(),p(3,"br"),a(4,"span"),l(5),i()()),o&2){let e,r=m(3);n(2),c(r.t("employees.job_title_ar")),n(3),c((e=r.employee())==null?null:e.jobTitleAr)}}function _e(o,t){if(o&1&&(a(0,"div",23)(1,"div",8)(2,"h6",9),l(3),i()(),a(4,"div",15),g(5,pe,6,2,"div",52),g(6,ue,6,2,"div",52),g(7,ve,6,2,"div"),i()()),o&2){let e,r,d,u=m(2);n(3),c(u.t("employees.arabic_names")),n(2),f((e=u.employee())!=null&&e.firstNameAr?5:-1),n(),f((r=u.employee())!=null&&r.lastNameAr?6:-1),n(),f((d=u.employee())!=null&&d.jobTitleAr?7:-1)}}function ge(o,t){if(o&1){let e=D();a(0,"button",54),S("click",function(){C(e);let d=m(3);return E(d.toggleEmployeeStatus())}),p(1,"i",55),l(2),i()}if(o&2){let e=m(3);n(2),_(" ",e.t("employees.deactivate")," ")}}function fe(o,t){if(o&1&&A(0,ge,3,1,"button",53),o&2){let e=m(2);v("hasPermission",e.PERMISSIONS.EMPLOYEE_MANAGE)}}function xe(o,t){if(o&1){let e=D();a(0,"button",57),S("click",function(){C(e);let d=m(3);return E(d.toggleEmployeeStatus())}),p(1,"i",58),l(2),i()}if(o&2){let e=m(3);n(2),_(" ",e.t("employees.activate")," ")}}function ye(o,t){if(o&1&&A(0,xe,3,1,"button",56),o&2){let e=m(2);v("hasPermission",e.PERMISSIONS.EMPLOYEE_MANAGE)}}function be(o,t){if(o&1&&(a(0,"div",59),p(1,"app-loading-spinner",60),i()),o&2){let e=m(3);n(),v("message",e.t("attendance.messages.loading_data"))("variant","primary")("centered",!0)}}function he(o,t){if(o&1&&(a(0,"div",5)(1,"div",16)(2,"h6",61),l(3),i(),a(4,"div",62)(5,"div",63)(6,"span"),p(7,"i",64),l(8),i(),a(9,"span",65),l(10),i()(),a(11,"div",63)(12,"span"),p(13,"i",66),l(14),i(),a(15,"span",67),l(16),i()(),a(17,"div",63)(18,"span"),p(19,"i",68),l(20),i(),a(21,"span",69),l(22),i()()()(),a(23,"div",16)(24,"h6",61),l(25),i(),a(26,"div",62)(27,"div",63)(28,"span"),l(29),i(),a(30,"span",13),l(31),i()(),a(32,"div",63)(33,"span"),l(34),i(),a(35,"span",13),l(36),i()(),a(37,"div",63)(38,"span"),l(39),i(),a(40,"span",13),l(41),i()()()()()),o&2){let e=m(3);n(3),c(e.t("attendance.statistics.attendance_breakdown")),n(5),_(" ",e.t("attendance.status.present")," "),n(2),c(e.presentDays()),n(4),_(" ",e.t("attendance.status.absent")," "),n(2),c(e.absentDays()),n(4),_(" ",e.t("attendance.status.late")," "),n(2),c(e.lateDays()),n(3),c(e.t("attendance.statistics.time_summary")),n(4),c(e.t("attendance.stats.average_working_hours")),n(2),_("",e.averageWorkingHours(),"h"),n(3),c(e.t("attendance.stats.total_overtime_hours")),n(2),_("",e.totalOvertimeHours(),"h"),n(3),c(e.t("attendance.statistics.total_working_days")),n(2),c(e.totalWorkingDays())}}function Ce(o,t){if(o&1&&(a(0,"div",50),g(1,be,2,3,"div",59)(2,he,42,14,"div",5),i()),o&2){let e=m(2);n(),f(e.attendanceLoading()?1:2)}}function Ee(o,t){o&1&&(a(0,"div",59),p(1,"app-loading-spinner",72),i()),o&2&&(n(),v("variant","primary")("centered",!0))}function Se(o,t){if(o&1&&(a(0,"tr")(1,"td")(2,"span",13),l(3),i()(),a(4,"td")(5,"span"),l(6),i()(),a(7,"td")(8,"span"),l(9),i()(),a(10,"td")(11,"span",13),l(12),i()(),a(13,"td")(14,"span"),l(15),i()(),a(16,"td")(17,"span",14),l(18),i()()()),o&2){let e=t.$implicit,r=m(4);n(3),c(r.formatDate(e.attendanceDate)),n(2),T(e.actualCheckInTime?"text-success fw-medium":"text-muted"),n(),_(" ",r.formatTime(e.actualCheckInTime)," "),n(2),T(e.actualCheckOutTime?"text-info fw-medium":"text-muted"),n(),_(" ",r.formatTime(e.actualCheckOutTime)," "),n(3),_(" ",r.calculateWorkDuration(e.actualCheckInTime,e.actualCheckOutTime)," "),n(2),T(r.getStatusBadgeClass(e.status)),n(),_(" ",r.t("attendance.status."+e.status.toString().toLowerCase())," "),n(3),c(e.notes||"--")}}function we(o,t){if(o&1&&(a(0,"div",70)(1,"table",73)(2,"thead",74)(3,"tr")(4,"th"),l(5),i(),a(6,"th"),l(7),i(),a(8,"th"),l(9),i(),a(10,"th"),l(11),i(),a(12,"th"),l(13),i(),a(14,"th"),l(15),i()()(),a(16,"tbody"),N(17,Se,19,12,"tr",null,le),i()()()),o&2){let e=m(3);n(5),c(e.t("attendance.fields.attendance_date")),n(2),c(e.t("attendance.fields.check_in_time")),n(2),c(e.t("attendance.fields.check_out_time")),n(2),c(e.t("attendance.fields.work_duration")),n(2),c(e.t("attendance.fields.status")),n(2),c(e.t("attendance.fields.notes")),n(2),P(e.attendanceRecords())}}function Ie(o,t){if(o&1&&p(0,"app-empty-state",71),o&2){let e=m(3);v("icon","fa-solid fa-calendar-xmark")("title",e.t("attendance.no_records"))("message",e.t("attendance.no_records_description"))}}function Te(o,t){if(o&1&&(a(0,"div",50),g(1,Ee,2,2,"div",59)(2,we,19,6,"div",70)(3,Ie,1,3,"app-empty-state",71),i()),o&2){let e=m(2);n(),f(e.attendanceLoading()?1:e.attendanceRecords().length>0?2:3)}}function De(o,t){if(o&1&&(a(0,"tr")(1,"td")(2,"div",13),l(3),i(),a(4,"small",14),l(5),i()(),a(6,"td")(7,"span"),l(8),i()(),a(9,"td")(10,"span",14),l(11),i()(),a(12,"td"),p(13,"app-status-badge",75),i(),a(14,"td")(15,"span",14),l(16),i()()()),o&2){let e=t.$implicit,r=m(4);n(3),c(r.formatDate(e.transactionTimeLocal)),n(2),c(r.formatTime(e.transactionTimeLocal)),n(2),T(r.getTransactionTypeBadgeClass(e.transactionType)),n(),_(" ",e.transactionTypeText," "),n(3),c(e.location||"--"),n(2),v("label",e.isManual?r.t("app.yes"):r.t("app.no"))("variant",e.isManual?"warning":"success")("icon",e.isManual?"fas fa-hand-paper":"fas fa-fingerprint")("size","sm"),n(3),c(e.notes||"--")}}function ke(o,t){if(o&1&&(a(0,"div",70)(1,"table",73)(2,"thead",74)(3,"tr")(4,"th"),l(5),i(),a(6,"th"),l(7),i(),a(8,"th"),l(9),i(),a(10,"th"),l(11),i(),a(12,"th"),l(13),i()()(),a(14,"tbody"),N(15,De,17,11,"tr",null,re),i()()()),o&2){let e=m(3);n(5),c(e.t("attendance.fields.datetime")),n(2),c(e.t("attendance.fields.transaction_type")),n(2),c(e.t("attendance.fields.location")),n(2),c(e.t("attendance.fields.manual")),n(2),c(e.t("attendance.fields.notes")),n(2),P(e.recentTransactions())}}function Me(o,t){if(o&1&&p(0,"app-empty-state",71),o&2){let e=m(3);v("icon","fa-solid fa-list")("title",e.t("attendance.no_transactions"))("message",e.t("attendance.no_transactions_description"))}}function Ve(o,t){if(o&1&&(a(0,"div",50),g(1,ke,17,5,"div",70)(2,Me,1,3,"app-empty-state",71),i()),o&2){let e=m(2);n(),f(e.recentTransactions().length>0?1:2)}}function Ae(o,t){if(o&1){let e=D();a(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h5",9)(5,"div",10)(6,"div",11)(7,"div",12),l(8),i()(),a(9,"div")(10,"div",13),l(11),i(),a(12,"small",14),l(13),i()()()()(),a(14,"div",15)(15,"div",5)(16,"div",16),p(17,"app-definition-list",17),i(),a(18,"div",16),p(19,"app-definition-list",17),i()()()()(),a(20,"div",18)(21,"div",7)(22,"div",8)(23,"h6",9),l(24),i()(),a(25,"div",15)(26,"div",19)(27,"h6",20),l(28),i(),p(29,"app-status-badge",21),i(),a(30,"div",19)(31,"h6",20),l(32),i(),p(33,"app-status-badge",22),i(),a(34,"div",19)(35,"h6",20),l(36),i(),p(37,"app-status-badge",22),i(),a(38,"div",19)(39,"h6",20),l(40),i(),g(41,ce,1,3,"app-status-badge",22)(42,de,2,1,"span",14),i(),g(43,me,4,4,"div",19),a(44,"div")(45,"h6",20),l(46),i(),a(47,"small",14),l(48),i()()()(),g(49,_e,8,4,"div",23),a(50,"div",23)(51,"div",8)(52,"h6",9),l(53),i()(),a(54,"div",15)(55,"div",24),g(56,fe,1,1,"button",25)(57,ye,1,1,"button",26),i()()()()(),a(58,"div",27)(59,"div",28)(60,"div",7)(61,"div",8)(62,"div",29)(63,"h5",9),p(64,"i",30),l(65),i(),a(66,"div",31)(67,"input",32),S("change",function(d){C(e);let u=m();return E(u.onDateRangeChange(d.target.value,u.selectedDateRange().end))}),i(),a(68,"span",33),l(69),i(),a(70,"input",32),S("change",function(d){C(e);let u=m();return E(u.onDateRangeChange(u.selectedDateRange().start,d.target.value))}),i(),a(71,"button",34),S("click",function(){C(e);let d=m();return E(d.exportAttendanceData())}),p(72,"i",35),l(73),i()()()(),a(74,"div",15),p(75,"app-stats-grid",36),a(76,"div",37)(77,"div",28)(78,"div",7)(79,"div",38)(80,"h6",39),l(81),i(),a(82,"div",40)(83,"div",41)(84,"span",42),l(85),i()()(),p(86,"app-status-badge",22),i()()()(),a(87,"ul",43)(88,"li",44)(89,"button",45),S("click",function(){C(e);let d=m();return E(d.setActiveTab("overview"))}),p(90,"i",46),l(91),i()(),a(92,"li",44)(93,"button",45),S("click",function(){C(e);let d=m();return E(d.setActiveTab("records"))}),p(94,"i",47),l(95),i()(),a(96,"li",44)(97,"button",45),S("click",function(){C(e);let d=m();return E(d.setActiveTab("transactions"))}),p(98,"i",48),l(99),i()()(),a(100,"div",49),g(101,Ce,3,1,"div",50),g(102,Te,4,1,"div",50),g(103,Ve,3,1,"div",50),i()()()()()}if(o&2){let e,r,d,u,w,I,x,R,s=m();n(8),W(" ",(((e=s.employee())==null||e.firstName==null?null:e.firstName.charAt(0))||"")==null?null:(((e=e)==null||e.firstName==null?null:e.firstName.charAt(0))||"").toUpperCase(),"",(((e=s.employee())==null||e.lastName==null?null:e.lastName.charAt(0))||"")==null?null:(((e=e)==null||e.lastName==null?null:e.lastName.charAt(0))||"").toUpperCase()," "),n(3),c((r=s.employee())==null?null:r.fullName),n(2),c((d=s.employee())==null?null:d.employeeNumber),n(4),v("items",s.basicInfoItems())("labelWidth","5")("valueWidth","7"),n(2),v("items",s.employmentInfoItems())("labelWidth","5")("valueWidth","7"),n(5),c(s.t("employees.employment_details")),n(4),c(s.t("common.status")),n(),v("status",(u=s.employee())!=null&&u.isActive?"active":"inactive"),n(3),c(s.t("employees.employment_status.title")),n(),v("label",s.getEmploymentStatusLabel(s.employee().employmentStatus))("variant","info")("icon","fas fa-briefcase"),n(3),c(s.t("employees.work_location.title")),n(),v("label",s.getWorkLocationTypeLabel(s.employee().workLocationType))("variant","light")("icon","fas fa-map-marker-alt"),n(3),c(s.t("employees.current_shift")),n(),f((w=s.employee())!=null&&w.currentShiftName?41:42),n(2),f((I=s.employee())!=null&&I.gender?43:-1),n(3),c(s.t("employees.created_at")),n(2),c(s.formatDate(s.employee().createdAtUtc)),n(),f((x=s.employee())!=null&&x.firstNameAr||(x=s.employee())!=null&&x.lastNameAr||(x=s.employee())!=null&&x.jobTitleAr?49:-1),n(4),c(s.t("common.actions")),n(3),f((R=s.employee())!=null&&R.isActive?56:57),n(9),_(" ",s.t("attendance.employee_detail")," "),n(2),v("value",s.selectedDateRange().start),n(2),c(s.t("common.to")),n(),v("value",s.selectedDateRange().end),n(),v("disabled",s.attendanceRecords().length===0),n(2),_(" ",s.t("attendance.actions.export_data")," "),n(2),v("stats",s.attendanceStats())("columns",4)("loading",s.attendanceLoading()),n(6),c(s.t("attendance.stats.attendance_rate")),n(2),$("--progress",s.attendanceRate()+"%"),n(2),_("",s.attendanceRate(),"%"),n(),v("label",s.getPerformanceLabel(s.attendanceRate()))("variant",s.getPerformanceColor(s.attendanceRate()))("icon",s.attendanceRate()>=95?"fas fa-star":s.attendanceRate()>=90?"fas fa-thumbs-up":s.attendanceRate()>=80?"fas fa-exclamation-triangle":"fas fa-times-circle"),n(3),k("active",s.activeTab()==="overview"),n(2),_(" ",s.t("attendance.statistics.overview")," "),n(2),k("active",s.activeTab()==="records"),n(2),_(" ",s.t("attendance.statistics.records")," "),n(2),k("active",s.activeTab()==="transactions"),n(2),_(" ",s.t("attendance.statistics.transactions")," "),n(2),f(s.activeTab()==="overview"?101:-1),n(),f(s.activeTab()==="records"?102:-1),n(),f(s.activeTab()==="transactions"?103:-1)}}function Ne(o,t){if(o&1&&(a(0,"div",3),p(1,"i",76),l(2),i()),o&2){let e=m();n(2),_(" ",e.error()||e.t("employees.employee_not_found")," ")}}var oe=class o{router=h(B);route=h(j);employeesService=h(ee);attendanceService=h(ae);notificationService=h(U);confirmationService=h(F);i18n=h(Y);permissionService=h(G);loading=b(!1);error=b(null);employee=b(null);employeeId=0;attendanceLoading=b(!1);attendanceRecords=b([]);attendanceStatistics=b(null);recentTransactions=b([]);selectedDateRange=b({start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});activeTab=b("overview");totalWorkingDays=y(()=>this.attendanceRecords().length);presentDays=y(()=>this.attendanceRecords().filter(e=>e.status===1).length);absentDays=y(()=>this.attendanceRecords().filter(e=>e.status===2).length);lateDays=y(()=>this.attendanceRecords().filter(e=>e.status===3).length);attendanceRate=y(()=>{let t=this.totalWorkingDays(),e=this.presentDays();return t>0?Math.round(e/t*100):0});averageWorkingHours=y(()=>{let e=this.attendanceRecords().filter(d=>d.workingHours>0);if(e.length===0)return 0;let r=e.reduce((d,u)=>d+u.workingHours,0);return Math.round(r/e.length*10)/10});totalOvertimeHours=y(()=>{let t=this.attendanceRecords();return Math.round(t.reduce((e,r)=>e+r.overtimeHours,0)*10)/10});PERMISSIONS={EMPLOYEE_UPDATE:`${V.EMPLOYEE}.${M.UPDATE}`,EMPLOYEE_DELETE:`${V.EMPLOYEE}.${M.DELETE}`,EMPLOYEE_MANAGE:`${V.EMPLOYEE}.${M.MANAGE}`};ngOnInit(){this.employeeId=+this.route.snapshot.params.id,this.employeeId?(this.loadEmployee(),this.loadAttendanceData()):this.router.navigate(["/employees"])}loadEmployee(){this.loading.set(!0),this.employeesService.getEmployeeById(this.employeeId).subscribe({next:t=>{this.employee.set(t),this.loading.set(!1)},error:t=>{this.error.set("Failed to load employee"),this.loading.set(!1),console.error("Error loading employee:",t)}})}loadAttendanceData(){this.attendanceLoading.set(!0);let t=this.selectedDateRange();this.attendanceService.getEmployeeAttendanceRecords(this.employeeId,t.start,t.end).subscribe({next:e=>{this.attendanceRecords.set(e),this.attendanceLoading.set(!1)},error:e=>{console.error("Error loading attendance records:",e),this.attendanceLoading.set(!1)}}),this.attendanceService.getEmployeeRecentTransactions(this.employeeId,10).subscribe({next:e=>{this.recentTransactions.set(e)},error:e=>{console.error("Error loading transactions:",e)}})}onDateRangeChange(t,e){this.selectedDateRange.set({start:t,end:e}),this.loadAttendanceData()}setActiveTab(t){this.activeTab.set(t)}getStatusBadgeClass(t){switch(t){case 1:return"badge bg-success";case 2:return"badge bg-danger";case 3:return"badge bg-warning";case 4:return"badge bg-warning";case 5:return"badge bg-info";case 6:return"badge bg-secondary";case 7:return"badge bg-primary";default:return"badge bg-secondary"}}getTransactionTypeBadgeClass(t){switch(t){case 0:return"badge bg-success";case 1:return"badge bg-danger";case 2:return"badge bg-warning";case 3:return"badge bg-info";case 4:return"badge bg-primary";default:return"badge bg-secondary"}}formatTime(t){if(!t)return"--:--";try{return new Date(`1970-01-01T${t}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return t}}calculateWorkDuration(t,e){if(!t||!e)return"--";try{let r=new Date(`1970-01-01T${t}`),u=new Date(`1970-01-01T${e}`).getTime()-r.getTime(),w=Math.floor(u/(1e3*60*60)),I=Math.floor(u%(1e3*60*60)/(1e3*60));return`${w}h ${I}m`}catch{return"--"}}getPerformanceColor(t){return t>=95?"success":t>=90?"primary":t>=80?"warning":"danger"}getPerformanceLabel(t){return t>=95?"Excellent":t>=90?"Good":t>=80?"Average":"Needs Improvement"}exportAttendanceData(){let t=this.attendanceRecords();if(t.length===0){this.notificationService.warning("No attendance data to export");return}let e=this.generateAttendanceCSV(t);this.downloadCSV(e,`employee-${this.employeeId}-attendance.csv`),this.notificationService.success("Attendance data exported successfully")}generateAttendanceCSV(t){let e=["Date","Status","Check In","Check Out","Working Hours","Break Hours","Overtime Hours","Notes"],r=t.map(d=>[d.attendanceDate,this.getStatusText(d.status),this.formatTime(d.actualCheckInTime||null),this.formatTime(d.actualCheckOutTime||null),d.workingHours.toString(),d.breakHours.toString(),d.overtimeHours.toString(),d.notes||""]);return[e,...r].map(d=>d.map(u=>`"${u}"`).join(",")).join(`
`)}downloadCSV(t,e){let r=new Blob([t],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");if(d.download!==void 0){let u=URL.createObjectURL(r);d.setAttribute("href",u),d.setAttribute("download",e),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}getStatusText(t){return this.i18n.t(`attendance.status.${t.toString().toLowerCase()}`)}formatDate(t){return new Date(t).toLocaleDateString()}getEmploymentStatusLabel(t){return this.t(`employees.employment_status.${ne[t].toLowerCase()}`)}getGenderLabel(t){return this.t(`employees.gender.${te[t].toLowerCase()}`)}getWorkLocationTypeLabel(t){return this.t(`employees.work_location.${ie[t].toLowerCase()}`)}t(t){return this.i18n.t(t)}toggleEmployeeStatus(){return L(this,null,function*(){let t=this.employee();if(!t)return;let e=t.isActive,r=e?"employees.deactivate":"employees.activate",d=e?"employees.confirm_deactivate":"employees.confirm_activate",u=e?"text-danger":"text-success",w=e?"btn-danger":"btn-success";(yield this.confirmationService.confirm({title:this.t(r),message:this.t(d),confirmText:this.t("common.confirm"),cancelText:this.t("common.cancel"),confirmButtonClass:w,icon:"fa-user",iconClass:u})).confirmed&&this.employeesService.toggleEmployeeStatus(t.id).subscribe({next:x=>{this.notificationService.success(x.message),this.loadEmployee()},error:x=>{console.error("Error toggling employee status:",x),this.notificationService.error(x.error?.error||this.t("common.error_occurred"))}})})}basicInfoItems=y(()=>{let t=this.employee();return t?[{label:this.t("employees.employee_number"),value:t.employeeNumber},{label:this.t("employees.first_name"),value:t.firstName},{label:this.t("employees.last_name"),value:t.lastName},{label:this.t("employees.email"),value:t.email||"-"},{label:this.t("employees.phone"),value:t.phone||"-"},{label:this.t("employees.national_id"),value:t.nationalId||"-"}]:[]});employmentInfoItems=y(()=>{let t=this.employee();if(!t)return[];let e=[{label:this.t("employees.job_title"),value:t.jobTitle},{label:this.t("employees.branch"),value:t.branchName},{label:this.t("employees.department"),value:t.departmentName||"-"},{label:this.t("employees.manager"),value:t.managerName||"-"},{label:this.t("employees.hire_date"),value:this.formatDate(t.hireDate),type:"date"}];return t.dateOfBirth&&e.push({label:this.t("employees.date_of_birth"),value:this.formatDate(t.dateOfBirth),type:"date"}),e});attendanceStats=y(()=>[{label:this.t("attendance.statistics.total_working_days"),value:this.totalWorkingDays(),icon:"fa-solid fa-calendar",variant:"primary"},{label:this.t("attendance.stats.present_employees"),value:this.presentDays(),icon:"fa-solid fa-user-check",variant:"success",subtitle:`${this.attendanceRate()}% ${this.t("attendance.statistics.attendance_rate_short")}`},{label:this.t("attendance.stats.average_working_hours"),value:`${this.averageWorkingHours()}h`,icon:"fa-solid fa-business-time",variant:"warning",subtitle:`${this.totalOvertimeHours()}h ${this.t("attendance.statistics.total_overtime")}`},{label:this.t("attendance.stats.absent_employees"),value:this.absentDays(),icon:"fa-solid fa-user-times",variant:"danger",subtitle:`${this.lateDays()} ${this.t("attendance.statistics.late_days")}`}]);static \u0275fac=function(e){return new(e||o)};static \u0275cmp=O({type:o,selectors:[["app-view-employee"]],decls:5,vars:4,consts:[[1,"container-fluid"],["mode","view","moduleName","employees","moduleRoute","employees",3,"title","entityId","loading"],[1,"d-flex","justify-content-center","py-5"],[1,"alert","alert-danger"],[3,"message","centered"],[1,"row"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-3"],[1,"avatar-title","bg-primary-subtle","text-primary","rounded-circle"],[1,"fw-medium"],[1,"text-muted"],[1,"card-body"],[1,"col-md-6"],[3,"items","labelWidth","valueWidth"],[1,"col-lg-4"],[1,"mb-3"],[1,"fw-semibold"],[3,"status"],[3,"label","variant","icon"],[1,"card","mt-3"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-outline-warning"],["type","button",1,"btn","btn-outline-success"],[1,"row","mt-4"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-calendar-check","me-2"],[1,"d-flex","gap-2"],["type","date",1,"form-control","form-control-sm",2,"width","auto",3,"change","value"],[1,"align-self-center"],["type","button",1,"btn","btn-success","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-download"],[1,"mb-4",3,"stats","columns","loading"],[1,"row","mb-4"],[1,"card-body","text-center"],[1,"card-title"],[1,"performance-circle","mb-3"],[1,"circle-progress"],[1,"percentage"],["role","tablist",1,"nav","nav-tabs","mb-3"],["role","presentation",1,"nav-item"],["type","button",1,"nav-link",3,"click"],[1,"fa-solid","fa-chart-pie","me-2"],[1,"fa-solid","fa-table","me-2"],[1,"fa-solid","fa-list","me-2"],[1,"tab-content"],[1,"tab-pane","fade","show","active"],[3,"label","variant","showIcon"],[1,"mb-2"],["type","button","class","btn btn-outline-warning",3,"click",4,"hasPermission"],["type","button",1,"btn","btn-outline-warning",3,"click"],[1,"fa-solid","fa-user-slash","me-2"],["type","button","class","btn btn-outline-success",3,"click",4,"hasPermission"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-user-check","me-2"],[1,"text-center","py-4"],[3,"message","variant","centered"],[1,"fw-semibold","mb-3"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-user-check","text-success","me-2"],[1,"badge","bg-success","rounded-pill"],[1,"fa-solid","fa-user-times","text-danger","me-2"],[1,"badge","bg-danger","rounded-pill"],[1,"fa-solid","fa-clock","text-warning","me-2"],[1,"badge","bg-warning","rounded-pill"],[1,"table-responsive"],[3,"icon","title","message"],[3,"variant","centered"],[1,"table","table-hover"],[1,"table-light"],[3,"label","variant","icon","size"],[1,"fa-solid","fa-exclamation-triangle","me-2"]],template:function(e,r){e&1&&(a(0,"div",0),p(1,"app-form-header",1),g(2,se,2,2,"div",2)(3,Ae,104,57)(4,Ne,3,1,"div",3),i()),e&2&&(n(),v("title",r.t("employees.view_details"))("entityId",r.employeeId)("loading",r.loading()),n(),f(r.loading()?2:r.employee()?3:4))},dependencies:[H,z,Z,K,Q,J,X,q],styles:['.avatar-sm[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center}.avatar-title[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem}.icon-circle[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center}.icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.performance-circle[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;margin:0 auto}.circle-progress[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:50%;background:conic-gradient(#198754 0deg calc(var(--progress) * 3.6deg),#e9ecef calc(var(--progress) * 3.6deg) 360deg);display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}.circle-progress[_ngcontent-%COMP%]:before{content:"";position:absolute;width:80px;height:80px;border-radius:50%;background:#fff}.percentage[_ngcontent-%COMP%]{position:relative;font-size:1.5rem;font-weight:700;color:#198754;z-index:1}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.performance-circle[_ngcontent-%COMP%], .circle-progress[_ngcontent-%COMP%]{width:100px;height:100px}.circle-progress[_ngcontent-%COMP%]:before{width:70px;height:70px}.percentage[_ngcontent-%COMP%]{font-size:1.2rem}.icon-circle[_ngcontent-%COMP%]{width:40px;height:40px}.icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}}']})};export{oe as ViewEmployeeComponent};
