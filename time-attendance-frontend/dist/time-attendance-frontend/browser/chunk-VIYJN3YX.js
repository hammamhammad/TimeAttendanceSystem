import"./chunk-5KJOOWHZ.js";import{a as W}from"./chunk-RQBJFQCN.js";import{a as j}from"./chunk-K7WTKFJQ.js";import{a as H}from"./chunk-NPDCAEA6.js";import{a as q}from"./chunk-U6T3NABJ.js";import"./chunk-QW24EDIR.js";import"./chunk-QXVLGI72.js";import"./chunk-HUSARQNL.js";import{a as U}from"./chunk-H5EPUHY6.js";import{a as x}from"./chunk-N7S3JMGU.js";import{a as h,b as u}from"./chunk-Y62N6K5S.js";import"./chunk-VRETN7JA.js";import"./chunk-GRQ6RO47.js";import{a as G}from"./chunk-UBCI4X5Q.js";import"./chunk-EYAJMHM7.js";import{a as Y}from"./chunk-HHXRLUSQ.js";import"./chunk-UWVH5K3J.js";import{b as D}from"./chunk-RUY4WPQA.js";import{g as B}from"./chunk-TWXUAMJ4.js";import{Bb as g,Cb as S,Db as v,Ea as w,Eb as A,Ia as T,Ka as _,R as d,Ub as $,W as C,X as f,bb as l,cb as r,da as c,db as s,eb as E,ib as L,jb as N,lb as z,nb as b,pb as p,pc as F,qc as R,rc as V,ta as o,wc as M}from"./chunk-JSQL33QG.js";import{a as P,b as I,d as k}from"./chunk-DGAILPFQ.js";function X(i,e){if(i&1&&(r(0,"div",6)(1,"div",7)(2,"div",8),g(3),s()(),r(4,"div")(5,"div",9),g(6),s(),r(7,"small",10),g(8),s()()()),i&2){let t=p().$implicit,n=p();o(3),v(" ",n.getInitials(t.firstName,t.lastName)," "),o(3),A("",t.firstName," ",t.lastName),o(2),S(t.email)}}function Z(i,e){if(i&1&&(r(0,"span",9),g(1),s()),i&2){let t=p().$implicit;o(),v(" ",t.employeeNumber," ")}}function ee(i,e){if(i&1&&(r(0,"div")(1,"div"),g(2),s(),r(3,"small",10),g(4),s()()),i&2){let t=p().$implicit;o(2),S(t.departmentName),o(2),S(t.branchName)}}function te(i,e){if(i&1&&(r(0,"span"),E(1,"app-status-badge",11),s()),i&2){let t=p().$implicit,n=p();o(),l("status",n.getEmploymentStatusBadgeStatus(t.employmentStatus))("label",n.getEmploymentStatusLabel(t.employmentStatus))}}function ne(i,e){if(i&1&&(r(0,"span"),g(1),s()),i&2){let t=p().$implicit,n=p();o(),v(" ",n.getGenderLabel(t.gender)," ")}}function ie(i,e){if(i&1&&(r(0,"span"),E(1,"app-status-badge",11),s()),i&2){let t=p().$implicit,n=p();o(),l("status","info")("label",n.getWorkLocationLabel(t.workLocationType))}}function oe(i,e){if(i&1&&(r(0,"span"),E(1,"app-status-badge",12),s()),i&2){let t=p().$implicit;o(),l("status",t.isActive?"active":"inactive")("label",t.isActive?"Active":"Inactive")("showIcon",!0)}}function ae(i,e){if(i&1&&(r(0,"span"),g(1),s()),i&2){let t=p().$implicit,n=p();o(),v(" ",n.formatDate(t.hireDate)," ")}}function le(i,e){if(i&1&&(r(0,"div"),g(1),s()),i&2){let t=p(2).$implicit;o(),S(t.currentShiftName)}}function re(i,e){i&1&&(r(0,"span",10),g(1,"No shift assigned"),s())}function se(i,e){if(i&1&&(r(0,"div"),T(1,le,2,1,"div",13)(2,re,2,0,"span",14),s()),i&2){let t=p().$implicit;o(),l("ngIf",t.currentShiftName),o(),l("ngIf",!t.currentShiftName)}}function me(i,e){if(i&1&&(L(0,2),T(1,X,9,4,"div",3)(2,Z,2,1,"span",4)(3,ee,5,2,"div",5)(4,te,2,2,"span",5)(5,ne,2,1,"span",5)(6,ie,2,2,"span",5)(7,oe,2,3,"span",5)(8,ae,2,1,"span",5)(9,se,3,2,"div",5),N()),i&2){let t=e.column;l("ngSwitch",t.key),o(),l("ngSwitchCase","name"),o(),l("ngSwitchCase","employeeCode"),o(),l("ngSwitchCase","department"),o(),l("ngSwitchCase","employmentStatus"),o(),l("ngSwitchCase","gender"),o(),l("ngSwitchCase","workLocation"),o(),l("ngSwitchCase","status"),o(),l("ngSwitchCase","hireDate"),o(),l("ngSwitchCase","shift")}}var O=class i{i18n=d(D);permissionService=d(x);employees=[];loading=c(!1);currentPage=c(1);totalPages=c(1);totalItems=c(0);pageSize=c(10);viewEmployee=new _;editEmployee=new _;deleteEmployee=new _;changeShift=new _;pageChange=new _;pageSizeChange=new _;selectionChange=new _;sortChange=new _;columns=[{key:"name",label:"Employee",width:"250px",sortable:!0,priority:"high",mobileLabel:"Employee"},{key:"employeeCode",label:"Code",width:"100px",sortable:!0,priority:"high",mobileLabel:"Code"},{key:"department",label:"Department",width:"200px",sortable:!0,priority:"medium",hideOnMobile:!1,mobileLabel:"Dept"},{key:"employmentStatus",label:"Employment",width:"120px",align:"center",sortable:!0,priority:"low",hideOnMobile:!0,mobileLabel:"Status"},{key:"workLocation",label:"Location",width:"100px",align:"center",priority:"low",hideOnMobile:!0,mobileLabel:"Location"},{key:"shift",label:"Current Shift",width:"150px",priority:"medium",hideOnMobile:!1,mobileLabel:"Shift"},{key:"hireDate",label:"Hire Date",width:"120px",sortable:!0,priority:"low",hideOnMobile:!0,mobileLabel:"Hired"},{key:"status",label:"Status",width:"100px",align:"center",sortable:!0,priority:"high",mobileLabel:"Status"}];get actions(){let e=[];return this.permissionService.has(`${u.EMPLOYEE}.${h.READ}`)&&e.push({key:"view",label:"View",icon:"fa-eye",color:"info"}),this.permissionService.has(`${u.EMPLOYEE}.${h.UPDATE}`)&&(e.push({key:"edit",label:"Edit",icon:"fa-edit",color:"primary"}),e.push({key:"changeShift",label:"Change Shift",icon:"fa-clock",color:"warning"})),this.permissionService.has(`${u.EMPLOYEE}.${h.DELETE}`)&&e.push({key:"delete",label:"Delete",icon:"fa-trash",color:"danger"}),e}onActionClick(e){let{action:t,item:n}=e;switch(t){case"view":this.viewEmployee.emit(n);break;case"edit":this.editEmployee.emit(n);break;case"delete":this.deleteEmployee.emit(n);break;case"changeShift":this.changeShift.emit(n);break}}onPageChange(e){this.pageChange.emit(e)}onPageSizeChange(e){this.pageSizeChange.emit(e)}onSelectionChange(e){this.selectionChange.emit(e)}onSortChange(e){this.sortChange.emit(e)}getInitials(e,t){let n=e?e.charAt(0).toUpperCase():"",m=t?t.charAt(0).toUpperCase():"";return n+m}getEmploymentStatusLabel(e){return{1:"Active",2:"Full Time",3:"Part Time",4:"Contract",5:"Intern",6:"Consultant",7:"Terminated",8:"Inactive"}[e]||"Unknown"}getEmploymentStatusClass(e){return{1:"bg-success",2:"bg-success",3:"bg-info",4:"bg-warning",5:"bg-primary",6:"bg-light text-dark border",7:"bg-danger",8:"bg-light text-dark border"}[e]||"bg-light text-dark border"}getEmploymentStatusBadgeStatus(e){return{1:"success",2:"success",3:"info",4:"warning",5:"primary",6:"secondary",7:"danger",8:"secondary"}[e]||"secondary"}getGenderLabel(e){return e===1?"Male":"Female"}getWorkLocationLabel(e){return{1:"On-site",2:"Remote",3:"Hybrid"}[e]||"Unknown"}formatDate(e){return new Date(e).toLocaleDateString()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=w({type:i,selectors:[["app-employee-table"]],inputs:{employees:"employees",loading:"loading",currentPage:"currentPage",totalPages:"totalPages",totalItems:"totalItems",pageSize:"pageSize"},outputs:{viewEmployee:"viewEmployee",editEmployee:"editEmployee",deleteEmployee:"deleteEmployee",changeShift:"changeShift",pageChange:"pageChange",pageSizeChange:"pageSizeChange",selectionChange:"selectionChange",sortChange:"sortChange"},decls:3,vars:9,consts:[["cellTemplate",""],[3,"actionClick","pageChange","pageSizeChange","selectionChange","sortChange","data","columns","actions","loading","currentPage","totalPages","totalItems","pageSize","emptyMessage"],[3,"ngSwitch"],["class","d-flex align-items-center",4,"ngSwitchCase"],["class","fw-medium",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"d-flex","align-items-center"],[1,"avatar-sm","me-2"],[1,"avatar-initial","bg-primary","text-white","rounded-circle"],[1,"fw-medium"],[1,"text-muted"],[3,"status","label"],[3,"status","label","showIcon"],[4,"ngIf"],["class","text-muted",4,"ngIf"]],template:function(t,n){if(t&1){let m=z();r(0,"app-data-table",1),b("actionClick",function(y){return C(m),f(n.onActionClick(y))})("pageChange",function(y){return C(m),f(n.onPageChange(y))})("pageSizeChange",function(y){return C(m),f(n.onPageSizeChange(y))})("selectionChange",function(y){return C(m),f(n.onSelectionChange(y))})("sortChange",function(y){return C(m),f(n.onSortChange(y))}),T(1,me,10,10,"ng-template",null,0,$),s()}t&2&&l("data",n.employees)("columns",n.columns)("actions",n.actions)("loading",n.loading)("currentPage",n.currentPage)("totalPages",n.totalPages)("totalItems",n.totalItems)("pageSize",n.pageSize)("emptyMessage","No employees found")},dependencies:[M,F,R,V,H,j],styles:[".avatar-sm[_ngcontent-%COMP%]{width:2rem;height:2rem}.avatar-initial[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:.875rem;font-weight:600}"]})};var J=class i{i18n=d(D);permissionService=d(x);employeesService=d(q);notificationService=d(Y);confirmationService=d(U);router=d(B);employees=c([]);loading=c(!1);totalCount=c(0);currentPage=c(1);pageSize=c(10);totalPages=c(0);currentFilter={};PERMISSIONS={EMPLOYEE_CREATE:`${u.EMPLOYEE}.${h.CREATE}`,EMPLOYEE_READ:`${u.EMPLOYEE}.${h.READ}`,EMPLOYEE_UPDATE:`${u.EMPLOYEE}.${h.UPDATE}`,EMPLOYEE_DELETE:`${u.EMPLOYEE}.${h.DELETE}`,EMPLOYEE_MANAGE:`${u.EMPLOYEE}.${h.MANAGE}`};ngOnInit(){this.loadEmployees()}loadEmployees(){this.loading.set(!0);let e=P({page:this.currentPage(),pageSize:this.pageSize()},this.currentFilter);this.employeesService.getEmployees(e).subscribe({next:t=>{this.employees.set(t.items),this.totalCount.set(t.totalCount),this.totalPages.set(t.totalPages),this.loading.set(!1)},error:t=>{console.error("Failed to load employees:",t),this.loading.set(!1)}})}onSearchChange(e){this.currentFilter=I(P({},this.currentFilter),{search:e}),this.currentPage.set(1),this.loadEmployees()}onAddEmployee(){this.router.navigate(["/employees/create"])}onRefreshData(){this.currentFilter={},this.currentPage.set(1),this.loadEmployees()}onViewEmployee(e){this.router.navigate(["/employees",e.id,"view"])}onEditEmployee(e){this.router.navigate(["/employees",e.id,"edit"])}onDeleteEmployee(e){return k(this,null,function*(){(yield this.confirmationService.confirm({title:this.i18n.t("employees.delete_employee"),message:`Are you sure you want to delete "${e.firstName} ${e.lastName}"? This action cannot be undone.`,confirmText:this.i18n.t("common.delete"),cancelText:this.i18n.t("common.cancel"),confirmButtonClass:"btn-danger",icon:"fa-trash",iconClass:"text-danger"})).confirmed&&this.employeesService.deleteEmployee(e.id).subscribe({next:()=>{this.loadEmployees(),this.notificationService.success(this.i18n.t("app.success"),this.i18n.t("employees.employee_deleted"))},error:n=>{console.error("Failed to delete employee:",n),this.notificationService.error(this.i18n.t("app.error"),this.i18n.t("errors.server"))}})})}onChangeShift(e){this.router.navigate(["/employees",e.id,"change-shift"])}onPageChange(e){this.currentPage.set(e),this.loadEmployees()}onPageSizeChange(e){this.pageSize.set(e),this.currentPage.set(1),this.loadEmployees()}onSelectionChange(e){console.log("Selected employees:",e)}onSortChange(e){this.currentFilter=I(P({},this.currentFilter),{sortBy:e.column,sortDirection:e.direction}),this.currentPage.set(1),this.loadEmployees()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=w({type:i,selectors:[["app-employees"]],decls:4,vars:13,consts:[[1,"employees-page"],[3,"title"],[3,"searchChange","add","refresh","searchPlaceholder","showAddButton","addButtonText","showRefreshButton","refreshButtonText","refreshing"],[3,"viewEmployee","editEmployee","deleteEmployee","changeShift","pageChange","pageSizeChange","selectionChange","sortChange","employees","loading","currentPage","totalPages","totalItems","pageSize"]],template:function(t,n){t&1&&(r(0,"div",0),E(1,"app-page-header",1),r(2,"app-unified-filter",2),b("searchChange",function(a){return n.onSearchChange(a)})("add",function(){return n.onAddEmployee()})("refresh",function(){return n.onRefreshData()}),s(),r(3,"app-employee-table",3),b("viewEmployee",function(a){return n.onViewEmployee(a)})("editEmployee",function(a){return n.onEditEmployee(a)})("deleteEmployee",function(a){return n.onDeleteEmployee(a)})("changeShift",function(a){return n.onChangeShift(a)})("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)})("selectionChange",function(a){return n.onSelectionChange(a)})("sortChange",function(a){return n.onSortChange(a)}),s()()),t&2&&(o(),l("title",n.i18n.t("employees.title")),o(),l("searchPlaceholder",n.i18n.t("employees.search_placeholder"))("showAddButton",!0)("addButtonText",n.i18n.t("employees.add_employee"))("showRefreshButton",!0)("refreshButtonText",n.i18n.t("common.refresh"))("refreshing",n.loading()),o(),l("employees",n.employees())("loading",n.loading)("currentPage",n.currentPage)("totalPages",n.totalPages)("totalItems",n.totalCount)("pageSize",n.pageSize))},dependencies:[M,W,O,G],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:none;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}.modal[_ngcontent-%COMP%]{background-color:#00000080}.employee-avatar[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover}.badge[_ngcontent-%COMP%]{font-size:.75em}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.pagination[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:0}.search-filters[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .search-filters[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border-radius:.375rem}.employee-status.active[_ngcontent-%COMP%]{color:#198754}.employee-status.inactive[_ngcontent-%COMP%]{color:#6c757d}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:.875rem}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.125rem .25rem}.modal-lg[_ngcontent-%COMP%]{max-width:95%}}"]})};export{J as EmployeesComponent};
